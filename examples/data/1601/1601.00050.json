[{"file": "1601.00050.tex", "nexttext": "\nwhere~$n,k\\in\\omega$ and~$\\Psi(f,Y)$ is of the form $({\\forall} G\\subseteq_{{\\mathrm{fin}}}Y)\\Psi_{0}(f{\\upharpoonright}[[0,\\max G]_{{\\mathbb{N}}}]^{n},G)$ such that~$\\Psi_{0}$ is a $\\Delta^{0}_{0}$-formula.\n\\end{definition}\n\nIn particular, ${\\mathrm{RT}}^n_k$ is a Ramsey-like-$\\Pi^1_2$-statement\nwhere~$\\Psi(f,Y)$ is the formula ``$Y$ is homogeneous for~$f$''.\nSimilarly, ${\\mathrm{psRT}}^{2}_{k}$ and~${\\mathrm{EM}}$ are Ramsey-like-$\\Pi^1_2$ statements.\nOn the other hand, ${\\mathrm{SRT}}^{2}_{2}$ is not a Ramsey-like-$\\Pi^1_2$-statement. However, ${\\mathrm{SRT}}^{2}_{2}$\nis equivalent to the Ramsey-like-$\\Pi^1_2$-formula saying ``for any $2$-coloring $f$ on $[{\\mathbb{N}}]^{2}$, there exists an infinite set $Y$ such that $Y$ is homogeneous for $f$ or there exists $a<\\min Y$ witnessing the non-stability of~$f$, that is, such that for any $x,y\\in Y$ there exist $b,c\\in [x,y)_{{\\mathbb{N}}}$ such that $f(a,b)\\neq f(a,c)$''.\nAlthough the definition of a Ramsey-like-$\\Pi^1_2$-formula seems very restrictive,\nwe can show that it entails a much larger class of $\\Pi^1_2$-statements.\n\n\\begin{definition}\nA \\emph{restricted-$\\Pi^1_2$-formula} is a $\\Pi^1_2$-formula of the form \n$\\forall X\\exists Y\\Theta(X,Y)$ where $\\Theta$ is a $\\Sigma^{0}_{3}$-formula.\n\\end{definition}\n\n\n\n\\begin{prop}\\label{prop-R-like-and-rest-formulas}\nFor any restricted-$\\Pi^{1}_{2}$-formula ${\\forall} X{\\exists} Y\\Theta(X,Y)$, \nthere exists a Ramsey-like-$\\Pi^{1}_{2}$-formula ${\\forall} X{\\exists} Z(Z\\mbox{ is infinite}\\wedge \\Psi(X,Z))$ such that \n \n", "itemtype": "equation", "pos": 32501, "prevtext": "\n\\newpage\n\n\n\n\n\n\\title{The proof-theoretic strength of Ramsey's theorem for pairs and two colors}\n\n\\author[1]{Ludovic Patey}\n\\author[2]{Keita Yokoyama}\n\n\\affil[1]{\\small \\sf{ludovic.patey@computability.fr}}\n\\affil[2]{\\small \\sf{y-keita@jaist.ac.jp}}\n\n\n\\date{\\today}\n\n\n\\blfootnote{Ludovic Patey is thankful to his PhD advisor Laurent Bienvenu\nfor interesting comments and discussions.\nHe is funded by the John Templeton Foundation (`Structure and Randomness in the Theory of Computation' project). The opinions expressed in this publication are those of the author(s) and do not necessarily reflect the views of the John Templeton Foundation.\n\nKeita Yokoyama is grateful to Theodore A.~Slaman and Emanuele Frittaion for useful comments and discussions.\nHis work is partially supported by JSPS Grant-in-Aid for Research Activity Start-up grant number 25887026, JSPS fellowship for research abroad, and JSPS Core-to-Core Program (A. Advanced Research Networks).\n\nPart of this work in this paper was done during the Dagstuhl Seminar 15392 ``Measuring the Complexity of Computational Content: Weihrauch Reducibility and Reverse Analysis''.}\n\n\\maketitle\n\n\n\\begin{abstract}\nRamsey's theorem for $n$-tuples and $k$-colors (${\\mathrm{RT}}^n_k$) asserts\nthat every $k$-coloring of~$[{\\mathbb{N}}]^n$ admits an infinite monochromatic subset.\nWe study the proof-theoretic strength of Ramsey's theorem for pairs and two colors, namely, the set of its\n$\\Pi^0_1$ consequences, and show that ${\\mathrm{RT}}^2_2$ is $\\Pi^0_3$ conservative over~${\\mathrm{I}\\Sigma^0_1}$.\nThis strengthens the proof of Chong, Slaman and Yang that ${\\mathrm{RT}}^2_2$ does not imply ${\\mathrm{I}\\Sigma^0_2}$,\nand shows that ${\\mathrm{RT}}^2_2$ is finitistically reducible, in the sense of Simpson's partial realization\nof Hilbert's Program. Moreover, we develop general tools to simplify the proofs of $\\Pi^0_3$-conservation theorems.\n\\end{abstract}\n\n\\section{Introduction}\n\nRamsey's theorem for $n$-tuples and $k$-colors (${\\mathrm{RT}}^n_k$) asserts\nthat every $k$-coloring of~$[{\\mathbb{N}}]^n$ admits an infinite monochromatic subset.\nIn the study of reverse mathematics, determining the strength of Ramsey's theorem \nfor pairs is a long-term open problem.\nHirst\\cite{Hirst-PhD} showed that ${\\mathrm{RT}}^{2}_{2}$ implies the $\\Sigma^0_2$-bounding principle (${\\mathrm{B}\\Sigma^0_2}$).\nOn the other hand, Cholak, Jockusch and Slaman~\\cite{CJS} showed that ${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}+{\\mathrm{I}\\Sigma^0_2}$ \nis a $\\Pi^{1}_{1}$-conservative extension of ${\\mathrm{I}\\Sigma^0_2}$, where ${\\mathsf{WKL_0}}$ stands for weak K\\\"onig's lemma\nand~${\\mathrm{I}\\Sigma^0_{n}}$ is the $\\Sigma^0_n$-induction scheme.\nThus, the first-order strength of Ramsey's theorem for pairs and two colors\n is in between ${\\mathrm{B}\\Sigma^0_2}$ and ${\\mathrm{I}\\Sigma^0_2}$.\nAfter this work, the project of deciding the first-order strength of ${\\mathrm{RT}}^{2}_{2}$ \nhas been strongly carried out using forcing constructions or priority arguments \non nonstandard models of ${\\mathrm{B}\\Sigma^0_2}$, mainly by Chong, Slaman and Yang~\\cite{CSY2012,CSY2014}.\nThey proved in particular that ${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}$ does not imply ${\\mathrm{I}\\Sigma^0_2}$~\\cite{CSY201X}.\n\nIn this paper, we use a hybrid of forcing construction, indicator arguments,\nand proof-theoretic technique to show that ${\\mathrm{RT}}^{2}_{2}+{\\mathsf{WKL_0}}$ \nis a $\\Pi^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\nThis answers Question~13.2 of Cholak, Jockusch and Slaman~\\cite{CJS},\nand strengthens the above recent result by Chong, Slaman and Yang \nsince the $\\Pi^{0}_{3}$-consequences of ${\\mathrm{I}\\Sigma^0_2}$ are different from those of ${\\mathrm{I}\\Sigma^0_1}$.\nOur conservation result gives actually a weak answer to the original question,\nnamely, the proof-theoretic strength of ${\\mathrm{RT}}^{2}_{2}$ is the same as ${\\mathrm{B}\\Sigma^0_2}$,\nsince ${\\mathrm{B}\\Sigma^0_2}$ is a $\\Pi^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\nBy the proof-theoretic strength \nof a theory $T$ we mean the set of $\\Pi^0_1$ sentences which are provable in\n$T$, or the proof-theoretic ordinal of $T$ which is decided by the $\\Pi^{0}_{2}$-consequences of $T$.\nDeciding the proof-theoretic strength of ${\\mathrm{RT}}^{2}_{2}$ \nis an important problem from a philosophical point of view.\nIn the sense of Simpson's partial realization \\cite{partial} of Hilbert's Program, \none would conclude that ${\\mathrm{RT}}^{2}_{2}$ is \\textit{finitistically reducible}.\n\n\\subsection{Reverse mathematics}\n\nReverse mathematics is a vast foundational program that seeks to determine \nwhich \\emph{set existence axioms} are needed to prove theorems from ``ordinary'' mathematics.\nIt uses the framework of subsystems of second-order arithmetic.\nIndeed, Friedman realized that a large majority of theorems admitted a natural formulation\nin the language of second-order arithmetic. The base theory ${\\mathsf{RCA_0}}$, standing for \nRecursive Comprehension Axiom, contains the basic axioms for first-order arithmetic\n (axioms of discrete ordered semi-ring) together with the~$\\Delta^0_1$-comprehension\n scheme and the~$\\Sigma^0_1$-induction scheme. ${\\mathsf{RCA_0}}$ can be thought of as capturing\n\\emph{computable mathematics}. \n\nSince then, thousands of theorems have been studied within the framework\nof reverse mathematics. A surprising phenomenon emerged from the early years of\nreverse mathematics: Most theorems studied require very weak axioms. \nMoreover, many of them happen to be \\emph{equivalent} to one of five main sets of axioms,\nthat are referred to as the \\emph{Big Five}, namely, ${\\mathsf{RCA_0}}$, weak K\\\"onig's lemma (${\\mathsf{WKL_0}}$),\nthe arithmetic comprehension axiom (${\\mathsf{ACA_0}}$), arithmetical transfinite recursion (${\\mathsf{ATR_0}}$),\nand $\\Pi^1_1$-comprehension axiom (${\\Pi^1_1\\text{-}\\mathsf{CA_0}}$). See Simpson~\\cite{SOSOA} for an extensive study\nof the Big Five and mathematics within them.\nIn this paper, we shall consider exclusively theorems which are provable\nin ${\\mathsf{ACA_0}}$. See Hirschfeldt~\\cite{Hirschfeldt2014Slicing} \nfor a gentle introduction to the reverse mathematics below~${\\mathsf{ACA_0}}$.\n\n\\subsection{Ramsey's theorem and its consequences}\n\nRamsey theory is a branch of mathematics \nstudying the conditions under which some\nstructure appears among a sufficiently large collection of objects.\nIn the past two decades, Ramsey theory emerged as one of the most important topics in reverse mathematics.\nThis theory provides a large class of theorems escaping the Big Five phenomenon, \nand whose strength is notoriously hard to gauge.\nPerhaps the most famous such theorem is \\emph{Ramsey's theorem}.\n\n\\begin{defi}[Ramsey's theorem]\nA subset~$H$ of~${\\mathbb{N}}$ is~\\emph{homogeneous} for a coloring~$f : [{\\mathbb{N}}]^n \\to k$ (or \\emph{$f$-homogeneous}) \nif all the $n$-tuples over~$H$ are given the same color by~$f$. \n${\\mathrm{RT}}^n_k$ is the statement ``Every coloring $f : [{\\mathbb{N}}]^n \\to k$ has an infinite $f$-homogeneous set''.\n\\end{defi}\n\nJockusch~\\cite{Jockusch1972Ramseys} conducted a computational analysis of Ramsey's theorem,\nlater formalized by Simpson~\\cite{SOSOA} within the framework of reverse mathematics.\nWhenever $n \\geq 3$, Ramsey's theorem for $n$-tuples happens to be equivalent to ${\\mathsf{ACA_0}}$.\nThe status of Ramsey's theorem for pairs was open for decades, until Seetapun~\\cite{Seetapun1995strength} proved\nthat ${\\mathrm{RT}}^2_2$ is strictly weaker than ${\\mathsf{ACA_0}}$ over~${\\mathsf{RCA_0}}$. Cholak, Jockush and Slaman~\\cite{CJS01}\nextensively studied Ramsey's theorem for pairs.\n\nIn order to better understand the logical strength of~${\\mathrm{RT}}^2_2$,\nBovykin and Weiermann~\\cite{BW} decomposed Ramsey's theorem for pairs\ninto the Erd\\H{o}s-Moser theorem and the ascending descending sequence principle.\nThe Erd\\H{o}s-Moser is a statement from graph theory.\n\n\\begin{defi}[Erd\\H{o}s-Moser theorem] \nA tournament $T$ is an irreflexive binary relation such that for all $x,y \\in {\\mathbb{N}}$ with $x \\not= y$, \nexactly one of $T(x,y)$ or $T(y,x)$ holds. A tournament $T$ is \\emph{transitive} \nif the corresponding relation~$T$ is transitive in the usual sense. \n${\\mathrm{EM}}$ is the statement ``Every infinite tournament $T$ has an infinite transitive subtournament.''\n\\end{defi}\n\n\\begin{defi}[Ascending descending sequence]\nGiven a linear order (\\textit{i.e.}, a transitive tournament)~$<_L$ on ${\\mathbb{N}}$, an \\emph{ascending} (\\emph{descending}) sequence\nis a set~$S$ such that for every~$x <_{\\mathbb{N}} y \\in S$, $x <_L y$ ($x >_L y$).\n${\\mathrm{ADS}}$ is the statement ``Every infinite linear order admits an infinite ascending or descending sequence''.\n\\end{defi}\n\nThe Erd\\H{o}s-Moser theorem provides together with the ascending descending principle an alternative decomposition of\nRamsey's theorem for pairs. Indeed, every coloring~$f : [{\\mathbb{N}}]^2 \\to 2$\ncan be seen as a tournament~$R$ such that~$R(x,y)$ holds if~$x < y$ and~$f(x,y) = 1$, or~$x > y$ and~$f(y, x) = 0$.\nThen, ${\\mathrm{EM}}$ is saying ``Every coloring $f : [{\\mathbb{N}}]^n \\to k$ has an infinite transitive subcoloring'' and\n${\\mathrm{ADS}}$ is saying ``Every transitive coloring $f : [{\\mathbb{N}}]^n \\to k$ has an infinite $f$-homogeneous set''.\n(In what follows, we always consider ${\\mathrm{EM}}$ and ${\\mathrm{ADS}}$ as these forms.)\nWe therefore obtain the following equivalence.\n\\begin{thm}[Hirschfeldt/Shore~\\cite{HS2007}, Bovykin/Weiermann~\\cite{BW}]\n${\\mathsf{RCA_0}} \\vdash {\\mathrm{RT}}^2_2 \\leftrightarrow {\\mathrm{ADS}} + {\\mathrm{EM}}$.\n\\end{thm}\n\n\n\n\n\n\n\n\n\n\n\n\nThe ascending descending sequence has been introduced by Hirschfeldt\nand Shore~\\cite{HS2007}. They proved that ${\\mathrm{ADS}}$ is strictly weaker than Ramsey's theorem for pairs.\nOn the other hand, Lerman, Solomon and Towsner~\\cite{Lerman2013Separating} proved that the Erd\\H{o}s-Moser theorem\nis strictly weaker than ${\\mathrm{RT}}^2_2$. For technical purposes, we shall consider a statement equivalent to the\nascending descending principle. Pseudo Ramsey's theorem for pairs has been introduced by Murakami, Yamazaki\nand the second author~\\cite{Murakami2014Ramseyan} to study a factorization theorem from automata theory.\n\n\\begin{defi}[Pseudo Ramsey's theorem for pairs]\nA set~$H$ is \\emph{pseudo-homogeneous} for a coloring $f : [{\\mathbb{N}}]^2 \\to k$\nif there is a color~$c < k$ such that every pair $\\{x, y\\} \\in [H]^2$\nare the endpoints of a finite sequence $x_0 < x_1 < \\dots < x_n$\nsuch that~$f(x_i, x_{i+1}) = c$ for each~$i < n$.\n${\\mathrm{psRT}}^2_k$ is the statement ``Every coloring $f : [{\\mathbb{N}}]^n \\to k$ has an infinite $f$-pseudo-homogeneous set''.\n\\end{defi}\n\nIn particular, if $f : [{\\mathbb{N}}]^2 \\to 2$ is a transitive coloring,\nthen any set~$H$ pseudo-homogeneous for~$f$ is already homogeneous for~$f$.\nThus, ${\\mathsf{RCA_0}} + {\\mathrm{psRT}}^2_2$ implies ${\\mathrm{ADS}}$ (see~\\cite{Murakami2014Ramseyan}).\nThe first author~\\cite{Patey2016reverse} and Steila (see~\\cite{SY201X}) independently \nproved the reverse implication, namely, ${\\mathsf{RCA_0}} + {\\mathrm{ADS}}$ implies~${\\mathrm{psRT}}^2_2$.\n\n\\subsection{Proof strength and conservation results}\n\nIn the study of reverse mathematics, deciding the first-order or proof-theoretic strength \nof axioms and mathematical principles is one of the main topic.\nEspecially, the conservation result for weak K\\\"onig's lemma always plays the central role\nas a large part of mathematics can be proven within ${\\mathsf{WKL_0}}$ (see Simpson~\\cite{SOSOA}).\nThe following theorems show that one can use weak K\\\"onig's lemma almost freely to seek for first-order consequences.\n\\begin{thm}[Harrington, see \\cite{SOSOA}]\\label{thm:harrington-conservation-wkl}\n${\\mathsf{WKL_0}}$ is a $\\Pi^{1}_{1}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{thm}\n\\begin{thm}[Friedman\\cite{friedmancom}, see \\cite{SOSOA}]\\label{thm-Friedman-conservation}\n${\\mathsf{WKL_0}}$ is a $\\Pi^{0}_{2}$-conservative extension of ${\\mathsf{PRA}}$.\n\\end{thm}\n\nThe $\\Sigma^0_2$-bounding principle (${\\mathrm{B}\\Sigma^0_2}$) informally asserts that a finite union of finite sets is finite.\nMany mathematical reasonings make an essential use of ${\\mathrm{B}\\Sigma^0_2}$ and in particular ${\\mathrm{RT}}^{2}_{2}$ implies ${\\mathrm{B}\\Sigma^0_2}$.\nThe strength of the $\\Sigma^0_2$-bounding principle is therefore important for the study of combinatorial principles.\n\\begin{thm}[H\\'ajek\\cite{Hajek}]\n${\\mathsf{WKL_0}}+{\\mathrm{B}\\Sigma^0_2}$ is a $\\Pi^{1}_{1}$-conservative extension of ${\\mathrm{B}\\Sigma^0_2}$.\n\\end{thm}\n\nThankfully, ${\\mathrm{B}\\Sigma^0_2}$ can be freely used for a restricted class of formulas.\nLet $\\tilde{\\Pi}{}^{0}_{3}$ be a class of formulas of the form ${\\forall} X\\varphi(X)$ \nwhere $\\varphi$ is a $\\Pi^{0}_{3}$-formula. The following is a parameterized \nversion of the Parsons/Paris/Friedman conservation theorem.\n\\begin{thm}[see, e.g.,~\\cite{handbook-of-proof} or \\cite{Kaye}]\\label{thm:bsig2-pi03-conservative-isig1}\n${\\mathrm{B}\\Sigma^0_2}$ is a $\\tilde{\\Pi}{}^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{thm}\nNote that the above four conservation theorems are frequently used in this paper, and so we shall not mention them explicitely.\n\nThere are many advanced studies to investigate the first-order strength of Ramsey's theorem and related combinatorial principles.\nOne of the most important methods for these studies consists in adapting computability-theoretic techniques for combinatorial principles.\nBy this method, Chong, Slaman and Yang~\\cite{CSY2012} showed that two weaker combinatorial principles, namely, \nthe ascending descending sequence (${\\mathrm{ADS}}$) and the chain antichain principle (${\\mathrm{CAC}}$),\n introduced by Shore/Hirschfeldt\\cite{HS2007}, are $\\Pi^{1}_{1}$-conservative over ${\\mathsf{WKL_0}}$.\nIn~\\cite{CSY2014}, they showed that ${\\mathsf{WKL_0}}+{\\mathrm{SRT}}^{2}_{2}$ does not imply ${\\mathrm{I}\\Sigma^0_2}$, \nand they improved the result and proved that ${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}$ does not imply ${\\mathrm{I}\\Sigma^0_2}$ in~\\cite{CSY201X}. \nMore recently, Chong, Kreuzer and Yang [unpublished] showed that ${\\mathrm{SRT}}^{2}_{2}$ is $\\Pi^{0}_{3}$-conservative over ${\\mathsf{WKL_0}}+{\\mathrm{WF}}(\\omega^{\\omega})$, where~${\\mathrm{WF}}(\\omega^{\\omega})$ asserts the well-foundedness of $\\omega^{\\omega}$.\n\n\nBesides the computability-theoretic techniques, many other significant approaches can be found in the literature. \nKohlenbach/Kreuzer~\\cite{KK2009} and Kreuzer~\\cite{Kreuzer2012} \ncharacterized the $\\Pi^{0}_{2}$-parts of ${\\mathrm{RT}}^{2}_{2}$ and ${\\mathrm{CAC}}$ with several different \nsettings by proof-theoretic approaches. Bovykin/Weiermann~\\cite{BW} and the second \nauthor~\\cite{Y-RIMS2013} showed that indicators defined by Paris's density notion \ncan approach the proof-theoretic strength of various versions of Ramsey's theorem, \nand by a similar method, the second author~\\cite{Y-MLQ13} also showed that \n${\\mathrm{RT}}^{n}_{k}+{\\mathsf{WKL_0^{*}}}$ is fairly weak and is a $\\Pi^{0}_{2}$-conservative extension of ${\\mathsf{RCA_0^{*}}}$,\nwhere~${\\mathsf{RCA_0^{*}}}$ is ${\\mathsf{RCA_0}}$ with only $\\Sigma^0_0$-induction and the exponentiation.\nIn addition, the study of the $\\Pi^{0}_{2}$-parts of Ramsey-type theorems has some application to computer science~\\cite{SY201X}.\n\n\\subsection{Second-order structures of arithmetic and their cuts}\nA structure for the language of second-order arithmetic $\\mathcal{L}_{2}$ is a pair $(M,S)$ \nwhere $M=(M, +_{M}, \\cdot_{M},\\allowbreak 0_{M}, 1_{M}, <_{M})$ \nis a structure for the language of first-order (Peano) arithmetic $\\mathcal{L}_{{\\mathrm{PA}}}$, and $S$ is a subset of the power set of $M$.\n\n\n\\begin{defi}[Cut]\nGiven a structure~$M$ of the first-order arithmetic, a substructure $I \\subseteq M$ is said to be a \\emph{cut} of $M$ \n(abbreviated $(I\\subseteq_{e} M)$) if $I=\\{a\\in M\\mid {\\exists} b\\in I(a<_{M}b)\\}$.\n\\end{defi}\n\nHere, the standard first-order structure $\\omega$ can be considered as the smallest cut of any first-order structure.\nGiven a structure $(M,S)$, a cut $I\\subseteq_{e} M$ induces the second-order structure $(I,S{\\upharpoonright} I)$,\nwhere $S{\\upharpoonright} I:=\\{X\\cap I\\mid X\\in S\\}$.\nWe sometimes consider $S$ as a family of unary predicates on $M$ and identify $(M,S)$ as an $\\mathcal{L}_{{\\mathrm{PA}}}\\cup S$-structure.\nAccordingly, $(I,S{\\upharpoonright} I)$ can be considered as an $\\mathcal{L}_{{\\mathrm{PA}}}\\cup S$-substructure of $(M,S)$.\nNote that $S{\\upharpoonright} I$ may then be a multiset on $I$, but this is harmless without second-order equality.\nIn this sense, one can easily check that $(I,S{\\upharpoonright} I)$ is a $\\Sigma^{0}_{0}$-elementary substructure of $(M,S)$ if $I$ is closed under $+_{M}$ and $\\cdot_{M}$.\n\nWe write ${\\mathrm{Cod}}(M)$ for the collection of all $M$-finite subsets, \\textit{i.e.}, \nsubsets of $M$ canonically coded by elements in $M$ (as the usual binary expansion).\nGiven some cut $I\\subseteq_{e} M$, we write ${\\mathrm{Cod}}(M/I)$ for ${\\mathrm{Cod}}(M){\\upharpoonright} I$.\nIf $I\\subsetneq M$, then ${\\mathrm{Cod}}(M/I)=S{\\upharpoonright} I$ for any $S\\subseteq\\mathcal{P}(M)$ such that $(M,S)\\models {\\mathsf{RCA_0}}$, thus $(I, S{\\upharpoonright} I)$ only depends on $M$ and $I$.\n\nA cut $I\\subseteq_{e} M$ is said to be \\emph{semi-regular} if $I\\cap X$ is bounded for any $X\\in {\\mathrm{Cod}}(M)$ such that $|X|\\in I$, where $|X|$ denotes the cardinality of $X$ in $M$.\nA semi-regular cut is one of the central notions in the study of cuts, especially with the connection to second-order structures, since it characterizes the models of ${\\mathsf{WKL_0}}$.\nWe will use the following theorem throughout this paper without mentioning it explicitely.\n\n\\begin{thm}[see, e.g., \\cite{Kossak-Schmerl}]\nLet $I$ be a cut of a first-order structure $M$. Then, $I$ is semi-regular if and only if $(I,{\\mathrm{Cod}}(M/I))\\models {\\mathsf{WKL_0}}$. \n\\end{thm}\n\nBounding principles are also characterized by cuts with some elementarity condition.\nIn this paper, we will use the following characterization.\n\\begin{thm}[Folklore, essentially due to Paris/Kirby\\cite{Paris-Kirby}, see also \\cite{Y-self-emb}]\\label{thm-elem-cut-vs-Bn}\nLet $n\\ge 1$.\nLet $(M,S)$ be a model of ${\\mathrm{I}\\Sigma^0_{n}}[n-1]$, and let $I$ be a cut of $M$ such that $(I, S{\\upharpoonright} I)$ be a $\\Sigma^{0}_{n}$-elementary substructure of $(M,S)$.\nThen, $(I,S{\\upharpoonright} I)\\models{\\mathrm{B}\\Sigma^0_{n}}[n+1]$.\n\\end{thm}\n\n\n\\subsection{Hilbert's program and finitistic reductionism}\n\nDuring the early 20th century, mathematics went through a serious foundational crisis,\nwith the discovery of various paradoxes and inconsistencies. Some great mathematicians such as Kronecker, Poincar\\'e and Brouwer\nchallenged the validity of infinitistic reasoning. Hilbert~\\cite{hilbert1925infinite} proposed a three-step program \nto answer those criticisms. First, he suggested to identify the finitistic part of mathematics, then to axiomatize infinite reasoning,\nand eventually to give a finitistically correct consistency proof of this axiomatic system. \nHowever, his program was nip in the bud by G\\\"odel's incompleteness theorems~\\cite{MR2260656}. \n\nIn 1986, Simpson~\\cite{partial} proposed a formal interpretation of Hilbert's program\nby taking primitive recursive arithmetic (PRA) as the base system for capturing finitistic reasoning.\nThis choice was convincingly justified by Tait~\\cite{tait1981finitism}. Simpson took\nsecond-order arithmetic ($Z_2$) as the big system capturing infinitistic reasoning, based on the work\nof Hilbert and Bernays~\\cite{MR3027390}. In this setting, finitistic reductionism can be interpreted\nas proving that $Z_2$ is $\\Pi^0_1$-conservative over~PRA. By G\\\"odel incompleteness theorem,\nthis cannot be the case. However, Simpson proposed to consider $\\Pi^0_1$-conservation of subsystems of second-order arithmetic\nover PRA as a partial realization of Hilbert's program. He illustrated his words with weak K\\\"onig's lemma (${\\mathrm{WKL}}$)\nwhich was proven by Friedman to be $\\Pi^0_2$-conservative over~PRA (Theorem~\\ref{thm-Friedman-conservation}).\nIn this paper, we contribute to Hilbert's program by showing that ${\\mathsf{WKL_0}} + {\\mathrm{RT}}^2_2$ is $\\Pi^0_2$-conservative over~PRA,\nand therefore that ${\\mathrm{RT}}^2_2$ is finitistically reducible. Moreover, we develop general tools to simplify the proofs of $\\Pi^0_3$-conservation theorems, and thereby contribute to the simplification of the realization of Hilbert's program.\n\n\\subsection{Notation}\n\nIn order to avoid confusion between the theory and the meta-theory, we shall use\n$\\omega$ to denote the set of (standard) natural numbers, and ${\\mathbb{N}}$ to denote the sets\nof natural numbers inside the system. Accordingly, we shall write $\\bbomega$\nfor the ordinal $\\omega$ in the system.\nWe write $[a,b]_{{\\mathbb{N}}}, (a,b)_{{\\mathbb{N}}},(a,\\infty)_{{\\mathbb{N}}},\\dots$ for intervals of natural numbers, e.g., $(a,b]_{{\\mathbb{N}}}=\\{x\\in{\\mathbb{N}}\\mid a<x\\le b\\}$.\nGiven a set~$X$ and some~$n \\in {\\mathbb{N}}$, $[X]^n$ is the collection of all sets of size~$n$.\n$[X]^{<{\\mathbb{N}}}$ is the union $\\bigcup_n [X]^n$.\n\nWe use $\\Pi_{n}$, $\\Sigma_{n}$, $\\Delta_{n}$ to denote first-order formulas without set parameters,\nwhereas $\\Pi^{0}_{n}$, $\\Sigma^{0}_{n}$, $\\Delta^{0}_{n}$ are second-order formulas, \\textit{i.e.}, with set parameters.\nA $\\tilde{\\Pi}{}^{0}_{n}$-formula is a second-order formula of the form $(\\forall X)\\varphi(X)$ where $\\varphi$ is a $\\Pi^0_n$-formula.\n\nGiven two sets~$A, B$, $A\\oplus B=\\{2x\\mid x\\in A\\}\\cup\\{2x+1\\mid x\\in B\\}$, $A \\subseteq_{{\\mathrm{fin}}} B$ means that $A$ is a finite subset of~$B$, and $A \\subseteq^{*} B$ means that the set $A$ is included, up to finite changes, in~$B$.\nWe write~$A < B$ for the formula $(\\forall x \\in A)(\\forall y \\in B)x < y$.\nWhenever~$A = \\{x\\}$, we shall simply write~$x < B$ for~$A < B$.\nA set~$X$ can be seen as an infinite join~$X = \\bigoplus_i X_i$, where $x \\in X_i$ iff $\\langle i,x \\rangle \\in X$.\nWe then write~$X[i]$ for~$X_i$.\nGiven a set~$X$ or a string~$\\sigma$ and some integer~$m \\in \\omega$, \nwe write~$X {\\upharpoonright} m$ for the initial segment of~$X$ (resp.\\ $\\sigma$) of length~$m$.\n\n\\subsection{Structure of this paper}\n\n\nThe main target of this paper is the following conservation theorem.\n\\begin{theorem*}\n${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}$ is a $\\tilde{\\Pi}{}^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{theorem*}\nWe will prove this in the following way.\n\nIn Sections~\\ref{section-large-and-dense} and \\ref{section-density}, we will explain that\n$\\tilde{\\Pi}{}^{0}_{3}$-consequences of Ramsey's theorem and its variations \nare characterized by some largeness notions of finite sets.\nWe will introduce largeness notion for $\\Gamma$, where $\\Gamma$ is any of ${\\mathrm{RT}}^{2}_{2}$, \n${\\mathrm{psRT}}^{2}_{2}$ (which is equivalent to ${\\mathrm{ADS}}$), and ${\\mathrm{EM}}$.\nRoughly speaking, giving a bound for largeness for $\\Gamma$ within ${\\mathrm{I}\\Sigma^0_1}$ provides \n$\\tilde{\\Pi}{}^{0}_{3}$-conservation for ${\\mathsf{WKL_0}}+\\Gamma$ over ${\\mathrm{I}\\Sigma^0_1}$ (Theorem~\\ref{thm-provably-large-conservative}).\n\nAccording to the decomposition of ${\\mathrm{RT}}^{2}_{2}$ into ${\\mathrm{ADS}}$ and ${\\mathrm{EM}}$ and the amalgamation theorem (Theorem~\\ref{thm:amalgamation}), \nthe conservation for ${\\mathrm{RT}}^{2}_{2}$ can be decomposed into the conservation for \n${\\mathrm{ADS}}$ and the conservation for ${\\mathrm{EM}}$.\nIn Section~\\ref{section-ADS}, we give a bound for the largeness notion for ${\\mathrm{psRT}}^{2}_{2}$ \n(Lemma~\\ref{lem-ADS-largeness}) by using the Ketonen/Solovay theorem.\nIt actually provides the conservation result for ${\\mathrm{ADS}}$ (Corollary~\\ref{cor-con-ADS}).\n\nIt is rather complicated to give a bound for the largeness notion for ${\\mathrm{EM}}$.\nFor this, we will introduce a new combinatorial principle called the \\emph{grouping principle}. \nWe mainly focus on the grouping principle for pairs and two colors ${\\mathrm{GP}^{2}_{2}}$.\nSection~\\ref{section-GP} is devoted to the reverse mathematical study of ${\\mathrm{GP}^{2}_{2}}$, \nespecially from the view point of computability theory.\nIn Section~\\ref{section-GP-con}, we will prove a conservation theorem for ${\\mathrm{GP}^{2}_{2}}$ (Theorem~\\ref{thm:GP-conservation}).\nFor this, we will modify the construction of a low solution for the stable version of ${\\mathrm{GP}^{2}_{2}}$ (Theorem~\\ref{thm:grouping-low-solution}) \npresented in the previous section.\n\nIn Section~\\ref{section-RT22}, we give a bound for the largeness notion for ${\\mathrm{EM}}$ (Lemma~\\ref{lem-EM-largeness})\n by using a finite version of the grouping principle, which is a consequence of ${\\mathrm{GP}^{2}_{2}}$.\nIt provides the conservation result for ${\\mathrm{EM}}$ (Theorem~\\ref{thm-con-EM}).\nThen, combining this with the conservation result in Section~\\ref{section-ADS} by the amalgamation theorem,\n we obtain the main theorem.\n\nThe main theorem can be formalized within ${\\mathsf{WKL_0}}$, and that leads to the consistency equivalence of ${\\mathrm{I}\\Sigma^0_1}$ and ${\\mathrm{RT}}^{2}_{2}$.\nThis is argued in Section~\\ref{section-consistency-strength}.\n\n\n\\section{Largeness}\\label{section-large-and-dense}\n\nA family of finite sets of natural numbers ${\\mathsf{L}}\\subseteq [{\\mathbb{N}}]^{<{\\mathbb{N}}}$ is said \nto be a \\textit{largeness notion} if any infinite set has a finite subset in ${\\mathsf{L}}$\nand ${\\mathsf{L}}$ is closed under supersets. A finite set $X\\in [{\\mathbb{N}}]^{<{\\mathbb{N}}}$ is said to be ${\\mathsf{L}}$-large \nif $X\\in {\\mathsf{L}}$. A (possibly largeness) notion ${\\mathsf{L}}\\subseteq [{\\mathbb{N}}]^{<{\\mathbb{N}}}$ is said to be \\emph{regular} \nif for any ${\\mathsf{L}}$-large set~$F$, any finite set~$G\\subseteq_{{\\mathrm{fin}}}{\\mathbb{N}}$ for which there exists an order-preserving \ninjection $h:F\\to G$ such that $(\\forall x \\in F)h(x)\\le x$, then $G \\in {\\mathsf{L}}$.\nA $\\Delta_{0}$-definable notion ${\\mathsf{L}}\\subseteq[{\\mathbb{N}}]^{<{\\mathbb{N}}}$ is said to be a\n(regular) largeness notion provably in ${\\mathrm{I}\\Sigma^0_1}$ if ${\\mathrm{I}\\Sigma^0_1}\\vdash$``${\\mathsf{L}}$ is a (regular) largeness notion''.\nIn this paper, we shall mainly consider regular largeness notions provably in ${\\mathrm{I}\\Sigma^0_1}$.\n\\begin{exa}\nThe family~${\\mathsf{L}}_\\bbomega = \\{ X \\subseteq_{{\\mathrm{fin}}} {\\mathbb{N}} : |X| > \\min X \\}$ is a regular largeness notion provably in ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{exa}\n\n\nThe notion of largeness enjoys a property similar to the pigeonhole principle,\nas states the following lemma.\n\n\\begin{lem}[${\\mathsf{WKL_0}}+{\\mathrm{B}\\Sigma^0_2}$]\\label{lem-largeness}\nFor any largeness notion ${\\mathsf{L}}$, for any infinite set $X$ \nand for any $k, N_{0}\\in{\\mathbb{N}}$, there exists $N_{1}\\in{\\mathbb{N}}$ such that for any partition \n$X\\cap[N_{0},N_{1}]_{{\\mathbb{N}}}=X_{0}\\sqcup\\dots\\sqcup X_{k-1}$, there exists an ${\\mathsf{L}}$-large set $F$ \nsuch that $F\\subseteq X_{i}$ for some $i< k$.\n\\end{lem}\nSince ${\\mathsf{WKL_0}}+{\\mathrm{B}\\Sigma^0_2}$ is a $\\tilde{\\Pi}^0_3$-conservative extension of~${\\mathrm{I}\\Sigma^0_1}$, \nthis lemma for a $\\Delta_{1}$-definable largeness notion provably in ${\\mathrm{I}\\Sigma^0_1}$ is provable in ${\\mathrm{I}\\Sigma^0_1}$.\n\\begin{proof}\nBy ${\\mathrm{B}\\Sigma^0_2}$, for any partition $X\\cap [N_{0},\\infty)_{{\\mathbb{N}}}=X_{0}\\sqcup\\dots\\sqcup X_{k-1}$, one of the $X_{i}$'s is infinite and thus it contains an ${\\mathsf{L}}$-large subset.\nThus, a bound for such an ${\\mathsf{L}}$-large set can be obtained by the usual compactness argument which is available within ${\\mathsf{WKL_0}}$.\n\\end{proof}\nNote that the use of ${\\mathrm{B}\\Sigma^0_2}$ in the previous lemma is essential.\nIf ${\\mathrm{B}\\Sigma^0_2}$ fails, there exists a partition $X=X_{0}\\sqcup\\dots\\sqcup X_{k-1}$ such that each of the $X_{i}$'s is finite.\nThen, ${\\mathsf{L}}=\\{F\\mid {\\forall} i<k(F\\not\\subseteq X_{i})\\}$ is a largeness notion failing the lemma.\nThe use of~${\\mathsf{WKL_0}}$ is not essential since the argument can be formalized within~${\\mathrm{RWKL}}+{\\mathrm{B}\\Sigma^0_2}$,\nwhere~${\\mathrm{RWKL}}$ denotes the Ramsey-type weak K\\\"onig's lemma introduced by Flood~\\cite{Flood2012Reverse}.\n\n\\subsection{$\\alpha$-largeness}\n\nFrom now on, we fix a primitive recursive notation for ordinals below $\\epsilon_{0}$.\nIn this paper, we actually use ordinals of the form $\\alpha=\\sum_{i<k}\\bbomega^{n_{i}}<\\bbomega^{\\bbomega}$ \nwhere $n_{i}\\in{\\mathbb{N}}$ and $n_{0}\\ge\\dots\\ge n_{k-1}$. (We write $1$ for $\\bbomega^{0}$, and $\\bbomega^{n}\\cdot k$ for $\\sum_{i<k}\\bbomega^{n}$.)\nFor a given $\\alpha<\\bbomega^{\\bbomega}$ and $m\\in {\\mathbb{N}}$, define $0[m]=0$, $\\alpha[m]=\\beta$ \nif $\\alpha=\\beta+1$ and $\\alpha[m]=\\beta+\\bbomega^{n-1}\\cdot m$ if $\\alpha=\\beta+\\bbomega^{n}$ for some $n\\ge 1$.\n\n\\begin{defi}[${\\mathrm{I}\\Sigma^0_1}$]\nLet $\\alpha<\\bbomega^{\\bbomega}$. A set $X = \\{ x_0 < \\dots < x_{\\ell-1} \\}\\subseteq_{{\\mathrm{fin}}}{\\mathbb{N}}$ \nis said to be \\emph{$\\alpha$-large} if $\\alpha[x_{0}]\\dots[x_{\\ell-1}]=0$. \nIn other words, any finite set is $0$-large, and $X$ is said to be $\\alpha$-large if\n\\begin{itemize}\n \\item $X\\setminus \\{\\min X\\}$ is $\\beta$-large if $\\alpha=\\beta+1$,\n \\item $X\\setminus \\{\\min X\\}$ is $(\\beta+\\bbomega^{n-1}\\cdot\\min X)$-large if $\\alpha=\\beta+\\bbomega^{n}$.\n\\end{itemize}\nWe let ${\\mathsf{L}}_{\\alpha}=\\{X\\subseteq_{{\\mathrm{fin}}} {\\mathbb{N}}\\mid X$ is $\\alpha$-large$\\}$.\n\\end{defi}\n\nIn particular, a set~$X$ is $m$-large iff $|X| \\geq m$ and $\\bbomega$-large iff $|X| > \\min X$.\nSee~\\cite{Ha-Pu} for the general definition of $\\alpha$-largeness.\nOne can easily see that if $X\\subseteq Y$ for some $\\alpha$-large set~$X$ and some finite set~$Y$, \nthen $Y$ is $\\alpha$-large.\n\n\nWe say that $X$ is \\emph{$\\alpha$-small} if it is not $\\alpha$-large.\nThe following basic combinatorics have been proven in~\\cite[Theorem~II.3.21]{Ha-Pu} in their full generality.\n\n\\begin{lem}[${\\mathrm{I}\\Sigma^0_1}$]\\label{lem-alpha-large-sum}\\label{lem-alpha-small-sum}\nFix any $k,n\\in{\\mathbb{N}}$.\n\\begin{itemize}\n\t\\item[(i)] A set $X$ is $\\bbomega^{n}\\cdot k$-large if and only \n\tif it is a union of some $\\bbomega^{n}$-large finite sets $X_{0} < \\dots < X_{k-1}$.\n\t\\item[(ii)] A set $X$ is $\\bbomega^{n}\\cdot k$-small \n\tif it is a union of $\\bbomega^n$-small finite sets $X_{0} < \\dots < X_{k-1}$.\n\\end{itemize}\n\\end{lem}\n\nIn particular, $\\{k\\}\\cup X_{0}\\cup\\dots\\cup X_{k-1}$ is $\\bbomega^{n+1}$-large \nif each of $X_{i}$ is $\\bbomega^{n}$-large and $k<X_{0} < \\dots < X_{k-1}$.\nSimilarly, if $\\{k\\}\\cup X_{0}\\cup\\dots\\cup X_{k-1}$ is $\\bbomega^{n+1}$-large \nand $k<X_{0} < \\dots < X_{k-1}$, then one of $X_{i}$'s is $\\bbomega^{n}$-large.\n\nThe following theorem corresponds to the well-known fact that the proof-theoretic ordinal of ${\\mathrm{I}\\Sigma^0_1}$ is $\\omega^{\\omega}$.\n\n\\begin{thm}\\label{thm-omega-largeness}\nFor any $n\\in\\omega$, ${\\mathrm{I}\\Sigma^0_1}$ proves that ${\\mathsf{L}}_{\\bbomega^{n}}$ is a regular largeness notion.\n\\end{thm}\n\\begin{proof}\n One can easily check the regularity within ${\\mathrm{I}\\Sigma^0_1}$.\nWe will see that ${\\mathrm{I}\\Sigma^0_1}\\vdash$ ``any infinite set contains an $\\bbomega^{n}$-large subset'' by (external) induction.\nThe case $n=0$ is trivial.\nWe show the case $n=k+1$.\nWithin ${\\mathrm{I}\\Sigma^0_1}$, let an infinite set $X$ be given.\nThen, by the induction hypothesis and $\\Sigma^{0}_{1}$-induction, one can find $\\min X$-many $\\bbomega^{k}$-large sets $F_{i}\\subseteq X$\nsuch that $\\min X<F_{0} < \\dots < F_{\\min X-1}$.\nBy Lemma~\\ref{lem-alpha-large-sum} and the discussion below it, $\\{\\min X\\}\\cup F_{0}\\cup\\dots\\cup F_{\\min X-1}$ is $\\bbomega^{k+1}$-large.\n\\end{proof}\n\n\\subsection{Largeness for Ramsey-like statements}\n\nMany Ramsey-type theorems studied in reverse mathematics\nare statements of the form ``For every coloring $f: [{\\mathbb{N}}]^n \\to k$,\nthere is an infinite set~$H$ satisfying some structural properties''.\nThe most notable example is Ramsey's theorem, which asserts for every coloring $f : [{\\mathbb{N}}]^n \\to k$\nthe existence of an infinite $f$-homogeneous set.\nThese statements can be seen as \\emph{mathematical problems},\nwhose \\emph{instances} are coloring, and whose \\emph{solutions}\nare the sets satisfying the desired structural properties.\n\n\\begin{definition}\\label{def-R-like-and-rest}\nA \\emph{Ramsey-like-$\\Pi^1_2$-formula} is a $\\Pi^1_2$-formula of the form\n\n", "index": 1, "text": "$$\n\t(\\forall f:[{\\mathbb{N}}]^{n}\\to k)(\\exists Y)(Y\\mbox{ is infinite}\\wedge \\Psi(f,Y))\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex1.m1\" class=\"ltx_Math\" alttext=\"(\\forall f:[{\\mathbb{N}}]^{n}\\to k)(\\exists Y)(Y\\mbox{ is infinite}\\wedge\\Psi(%&#10;f,Y))\" display=\"block\"><mrow><mrow><mo stretchy=\"false\">(</mo><mo>\u2200</mo><mi>f</mi><mo>:</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>\u2115</mi><mo stretchy=\"false\">]</mo></mrow><mi>n</mi></msup><mo>\u2192</mo><mi>k</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mo>\u2203</mo><mi>Y</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mi>Y</mi><mtext>\u00a0is infinite</mtext><mo>\u2227</mo><mi mathvariant=\"normal\">\u03a8</mi><mrow><mo stretchy=\"false\">(</mo><mi>f</mi><mo>,</mo><mi>Y</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></math>", "type": "latex"}, {"file": "1601.00050.tex", "nexttext": "\n(Here, $X$ is considered as a function $X:[{\\mathbb{N}}]^{1}\\to 2$ in the definition \nof Ramsey-like-$\\Pi^{1}_{2}$-formula.)\n\\end{prop}\n\\begin{proof}\nWe work within ${\\mathsf{WKL_0}}$.\nLet ${\\forall} X{\\exists} Y\\Theta(X,Y)$ be a restricted-$\\Pi^{1}_{2}$-formula.\nWithout loss of generality, one can write $\\Theta(X,Y)\\equiv {\\forall} n {\\exists} m\\theta(X{\\upharpoonright} m,Y{\\upharpoonright} m,n,m)$ where $\\theta$ is $\\Sigma^{0}_{0}$ since existential number quantifier can be replaced with an existential set quantifier.\n\n\n\n\nDefine a formula $\\Psi(X,Z)$ as follows:\n\n", "itemtype": "equation", "pos": 34129, "prevtext": "\nwhere~$n,k\\in\\omega$ and~$\\Psi(f,Y)$ is of the form $({\\forall} G\\subseteq_{{\\mathrm{fin}}}Y)\\Psi_{0}(f{\\upharpoonright}[[0,\\max G]_{{\\mathbb{N}}}]^{n},G)$ such that~$\\Psi_{0}$ is a $\\Delta^{0}_{0}$-formula.\n\\end{definition}\n\nIn particular, ${\\mathrm{RT}}^n_k$ is a Ramsey-like-$\\Pi^1_2$-statement\nwhere~$\\Psi(f,Y)$ is the formula ``$Y$ is homogeneous for~$f$''.\nSimilarly, ${\\mathrm{psRT}}^{2}_{k}$ and~${\\mathrm{EM}}$ are Ramsey-like-$\\Pi^1_2$ statements.\nOn the other hand, ${\\mathrm{SRT}}^{2}_{2}$ is not a Ramsey-like-$\\Pi^1_2$-statement. However, ${\\mathrm{SRT}}^{2}_{2}$\nis equivalent to the Ramsey-like-$\\Pi^1_2$-formula saying ``for any $2$-coloring $f$ on $[{\\mathbb{N}}]^{2}$, there exists an infinite set $Y$ such that $Y$ is homogeneous for $f$ or there exists $a<\\min Y$ witnessing the non-stability of~$f$, that is, such that for any $x,y\\in Y$ there exist $b,c\\in [x,y)_{{\\mathbb{N}}}$ such that $f(a,b)\\neq f(a,c)$''.\nAlthough the definition of a Ramsey-like-$\\Pi^1_2$-formula seems very restrictive,\nwe can show that it entails a much larger class of $\\Pi^1_2$-statements.\n\n\\begin{definition}\nA \\emph{restricted-$\\Pi^1_2$-formula} is a $\\Pi^1_2$-formula of the form \n$\\forall X\\exists Y\\Theta(X,Y)$ where $\\Theta$ is a $\\Sigma^{0}_{3}$-formula.\n\\end{definition}\n\n\n\n\\begin{prop}\\label{prop-R-like-and-rest-formulas}\nFor any restricted-$\\Pi^{1}_{2}$-formula ${\\forall} X{\\exists} Y\\Theta(X,Y)$, \nthere exists a Ramsey-like-$\\Pi^{1}_{2}$-formula ${\\forall} X{\\exists} Z(Z\\mbox{ is infinite}\\wedge \\Psi(X,Z))$ such that \n \n", "index": 3, "text": "$${\\mathsf{WKL_0}}\\vdash {\\forall} X({\\exists} Y\\Theta(X,Y)\\leftrightarrow {\\exists} Z(Z\\mbox{ is infinite}\\wedge \\Psi(X,Z))).$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex2.m1\" class=\"ltx_Math\" alttext=\"{\\mathsf{WKL_{0}}}\\vdash{\\forall}X({\\exists}Y\\Theta(X,Y)\\leftrightarrow{%&#10;\\exists}Z(Z\\mbox{ is infinite}\\wedge\\Psi(X,Z))).\" display=\"block\"><mrow><msub><mi>\ud835\uddb6\ud835\uddaa\ud835\uddab</mi><mn/></msub><mo>\u22a2</mo><mo>\u2200</mo><mi>X</mi><mrow><mo stretchy=\"false\">(</mo><mo>\u2203</mo><mi>Y</mi><mi mathvariant=\"normal\">\u0398</mi><mrow><mo stretchy=\"false\">(</mo><mi>X</mi><mo>,</mo><mi>Y</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2194</mo><mo>\u2203</mo><mi>Z</mi><mrow><mo stretchy=\"false\">(</mo><mi>Z</mi><mtext>\u00a0is infinite</mtext><mo>\u2227</mo><mi mathvariant=\"normal\">\u03a8</mi><mrow><mo stretchy=\"false\">(</mo><mi>X</mi><mo>,</mo><mi>Z</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.00050.tex", "nexttext": "\nWe now show that ${\\exists} Y\\Theta(X,Y)\\leftrightarrow {\\exists} Z(Z\\mbox{ is infinite}\\wedge \\Psi(X,Z))$.\n\nTo show the left to right implication, take $Y\\subseteq{\\mathbb{N}}$ such that ${\\forall} n {\\exists} m \\theta(X{\\upharpoonright} m, Y{\\upharpoonright} m,n, m)$.\nDefine an infinite increasing sequence $\\langle z_{i}\\mid i\\in{\\mathbb{N}} \\rangle$ as $z_{0}=\\min \\{m+1\\mid \\theta(X{\\upharpoonright} m, Y{\\upharpoonright} m,0,m)\\}$,\nand $z_{i+1}=\\min \\{m>z_{i}\\mid \\theta(X{\\upharpoonright} m, Y{\\upharpoonright} m,i+1,m)\\}$.\nLet $Z=\\{z_{i}\\mid i\\in{\\mathbb{N}}\\}$, then we have $Z\\mbox{ is infinite}\\wedge \\Psi(X,Z)$ (given a non-empty set $F\\subseteq_{{\\mathrm{fin}}}Z$, \nset $\\sigma=Y{\\upharpoonright}\\max F$).\n\nTo show the right to left implication, take $Z\\subseteq{\\mathbb{N}}$ such that $Z\\mbox{ is infinite}\\wedge \\Psi(X,Z)$.\nDefine a tree $T$ as \n\n", "itemtype": "equation", "pos": 34829, "prevtext": "\n(Here, $X$ is considered as a function $X:[{\\mathbb{N}}]^{1}\\to 2$ in the definition \nof Ramsey-like-$\\Pi^{1}_{2}$-formula.)\n\\end{prop}\n\\begin{proof}\nWe work within ${\\mathsf{WKL_0}}$.\nLet ${\\forall} X{\\exists} Y\\Theta(X,Y)$ be a restricted-$\\Pi^{1}_{2}$-formula.\nWithout loss of generality, one can write $\\Theta(X,Y)\\equiv {\\forall} n {\\exists} m\\theta(X{\\upharpoonright} m,Y{\\upharpoonright} m,n,m)$ where $\\theta$ is $\\Sigma^{0}_{0}$ since existential number quantifier can be replaced with an existential set quantifier.\n\n\n\n\nDefine a formula $\\Psi(X,Z)$ as follows:\n\n", "index": 5, "text": "\\begin{align*}\n\n\\Psi(X,Z)\\equiv {\\forall} F\\subseteq_{{\\mathrm{fin}}} Z(F\\neq \\emptyset \\to (&{\\exists} \\sigma\\in 2^{\\max F})({\\forall} n<|F|)({\\exists} m<\\max F)\\theta(X{\\upharpoonright} m,\\sigma{\\upharpoonright} m,n,m)).\n\\end{align*}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex3.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle\\par&#10;\\Psi(X,Z)\\equiv{\\forall}F\\subseteq_{{\\mathrm{fin}}}Z(F\\neq%&#10;\\emptyset\\to(\" display=\"inline\"><mrow><mi mathvariant=\"normal\">\u03a8</mi><mrow><mo stretchy=\"false\">(</mo><mi>X</mi><mo>,</mo><mi>Z</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2261</mo><mo>\u2200</mo><mi>F</mi><msub><mo>\u2286</mo><mi>fin</mi></msub><mi>Z</mi><mrow><mo stretchy=\"false\">(</mo><mi>F</mi><mo>\u2260</mo><mi mathvariant=\"normal\">\u2205</mi><mo>\u2192</mo><mo stretchy=\"false\">(</mo></mrow></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex3.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle{\\exists}\\sigma\\in 2^{\\max F})({\\forall}n&lt;|F|)({\\exists}m&lt;\\max F)%&#10;\\theta(X{\\upharpoonright}m,\\sigma{\\upharpoonright}m,n,m)).\" display=\"inline\"><mrow><mrow><mo>\u2203</mo><mi>\u03c3</mi><mo>\u2208</mo><msup><mn>2</mn><mrow><mi>max</mi><mo>\u2061</mo><mi>F</mi></mrow></msup><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mo>\u2200</mo><mi>n</mi><mo>&lt;</mo><mo stretchy=\"false\">|</mo><mi>F</mi><mo stretchy=\"false\">|</mo><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mo>\u2203</mo><mi>m</mi><mo>&lt;</mo><mi>max</mi><mi>F</mi><mo stretchy=\"false\">)</mo></mrow><mi>\u03b8</mi><mrow><mo stretchy=\"false\">(</mo><mi>X</mi><mo>\u21be</mo><mi>m</mi><mo>,</mo><mi>\u03c3</mi><mo>\u21be</mo><mi>m</mi><mo>,</mo><mi>n</mi><mo>,</mo><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.00050.tex", "nexttext": "\nThen, since $\\Psi(X,Z)$ holds, the tree $T$ is infinite.\nBy ${\\mathsf{WKL_0}}$, take $Y\\in [T]$. One can check that ${\\forall} n {\\exists} m\\theta(X{\\upharpoonright} m, Y{\\upharpoonright} m,n,m)$ since $Z$ is infinite.\n\\end{proof}\n\n\n\\begin{defi}[${\\mathrm{I}\\Sigma^0_1}$]\nFix an ordinal $\\alpha < \\bbomega^\\bbomega$ and a Ramsey-like-$\\Pi^1_2$-statement\n$(\\forall f:[{\\mathbb{N}}]^{n}\\to k)(\\exists Y)(Y\\mbox{ is infinite}\\wedge \\Psi(f,Y))$.\n\nA set $Z\\subseteq_{{\\mathrm{fin}}}{\\mathbb{N}}$ is said to be $\\alpha$-large($\\Gamma$) if for \nany~$f:[[0,\\max Z]_{{\\mathbb{N}}}]^{n}\\to k$, \nthere exists an $\\alpha$-large set~$Y \\subseteq Z$ such that~$\\Psi(f, Y)$ holds.\n\\end{defi}\nBy the definition of a Ramsey-like-$\\Pi^1_2$-formula, if $Z'\\supseteq Z$ and $Z$ is $\\alpha$-large($\\Gamma$), then $Z'$ is $\\alpha$-large($\\Gamma$).\n\n\\begin{exa}\nA set~$Z$ is $\\alpha$-large(${\\mathrm{RT}}^n_k$) if for every coloring $f : [[0,\\max Z]_{{\\mathbb{N}}}]^n \\to k$,\nthere is an $\\alpha$-large $f$-homogeneous set~$Y \\subseteq Z$.\n\\end{exa}\n\nNote that~$\\alpha$-largeness($\\Gamma$) for $\\Gamma \\in \\{{\\mathrm{RT}}^n_k, {\\mathrm{psRT}}^{2}_{k}, {\\mathrm{EM}}\\}$\nare all $\\Delta_0$-definable notions, and ${\\mathrm{I}\\Sigma^0_1}$ proves that they are all regular.\nHowever, it is not obvious within ${\\mathrm{I}\\Sigma^0_1}$ that they are all largeness notions.\nActually, showing within ${\\mathrm{I}\\Sigma^0_1}$ that $\\alpha$-largeness(${\\mathrm{RT}}^2_2$) is a largeness notion\nis the key to know the $\\Pi^{0}_{3}$-part of ${\\mathrm{RT}}^{2}_{2}$.\nOur approach is to measure the size of $\\alpha$-large($\\Gamma$) sets by comparing them with $\\alpha$-large sets.\nThe following classical theorem is fundamental for this purpose.\n(It is not hard to check that the proof works within ${\\mathrm{I}\\Sigma^0_1}$.)\n\n\n\n\n\n\n\n\n\\begin{thm}[{Ketonen/Solovay\\cite[Section 6]{KS81}}]\\label{SK-theorem}\nLet $k\\in\\omega$.\nThe following is provable within ${\\mathrm{I}\\Sigma^0_1}$. If a finite set $X$ is $\\bbomega^{k+4}$-large \nand $\\min X>3$, then $X$ is $\\bbomega$-large(${\\mathrm{RT}}^{2}_{k}$).\n\\end{thm}\n\n\\section{Density and $\\tilde{\\Pi}{}^{0}_{3}$-conservation}\\label{section-density}\n\nThe goal of this section is to prove the following theorem.\n\n\\begin{theorem}[Conservation through largeness]\\label{thm-provably-large-conservative}\nLet $\\Gamma$ be a Ramsey-like-$\\Pi^{1}_{2}$-statement.\nIf $\\bbomega^{k}$-large$(\\Gamma)$ness is a largeness notion provably in ${\\mathrm{I}\\Sigma^0_1}$ for any $k\\in\\omega$,\nthen, ${\\mathsf{WKL_0}}+\\Gamma$ is a $\\tilde{\\Pi}{}^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{theorem}\n\nFor this, we will introduce an iterated version of a largeness notion which is called ``density''.\nThis notion is introduced by Paris in \\cite{Paris1978}.\n\n\n\\begin{defi}[${\\mathrm{I}\\Sigma^0_1}$, Density notion]\\label{def-density-with-indicator}\nFix a Ramsey-like $\\Pi^1_2$-statement\n\n", "itemtype": "equation", "pos": 35927, "prevtext": "\nWe now show that ${\\exists} Y\\Theta(X,Y)\\leftrightarrow {\\exists} Z(Z\\mbox{ is infinite}\\wedge \\Psi(X,Z))$.\n\nTo show the left to right implication, take $Y\\subseteq{\\mathbb{N}}$ such that ${\\forall} n {\\exists} m \\theta(X{\\upharpoonright} m, Y{\\upharpoonright} m,n, m)$.\nDefine an infinite increasing sequence $\\langle z_{i}\\mid i\\in{\\mathbb{N}} \\rangle$ as $z_{0}=\\min \\{m+1\\mid \\theta(X{\\upharpoonright} m, Y{\\upharpoonright} m,0,m)\\}$,\nand $z_{i+1}=\\min \\{m>z_{i}\\mid \\theta(X{\\upharpoonright} m, Y{\\upharpoonright} m,i+1,m)\\}$.\nLet $Z=\\{z_{i}\\mid i\\in{\\mathbb{N}}\\}$, then we have $Z\\mbox{ is infinite}\\wedge \\Psi(X,Z)$ (given a non-empty set $F\\subseteq_{{\\mathrm{fin}}}Z$, \nset $\\sigma=Y{\\upharpoonright}\\max F$).\n\nTo show the right to left implication, take $Z\\subseteq{\\mathbb{N}}$ such that $Z\\mbox{ is infinite}\\wedge \\Psi(X,Z)$.\nDefine a tree $T$ as \n\n", "index": 7, "text": "\\begin{align*}\n\nT=\\{\\sigma\\in 2^{<{\\mathbb{N}}}\\mid {\\forall} F\\subseteq Z\\cap[0, |\\sigma|]_{{\\mathbb{N}}}(F\\neq\\emptyset\\to ({\\forall} n<|F|)({\\exists} m<\\max F)\\theta(X{\\upharpoonright} m,\\sigma{\\upharpoonright} m, k,n,m))\\}. \n\\end{align*}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex4.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle\\par&#10; T=\\{\\sigma\\in 2^{&lt;{\\mathbb{N}}}\\mid{\\forall}F\\subseteq Z%&#10;\\cap[0,|\\sigma|]_{{\\mathbb{N}}}(F\\neq\\emptyset\\to({\\forall}n&lt;|F|)({\\exists}m&lt;%&#10;\\max F)\\theta(X{\\upharpoonright}m,\\sigma{\\upharpoonright}m,k,n,m))\\}.\" display=\"inline\"><mrow><mi>T</mi><mo>=</mo><mrow><mo stretchy=\"false\">{</mo><mi>\u03c3</mi><mo>\u2208</mo><msup><mn>2</mn><mrow><mi/><mo>&lt;</mo><mi>\u2115</mi></mrow></msup><mo>\u2223</mo><mo>\u2200</mo><mi>F</mi><mo>\u2286</mo><mi>Z</mi><mo>\u2229</mo><msub><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo>,</mo><mo stretchy=\"false\">|</mo><mi>\u03c3</mi><mo stretchy=\"false\">|</mo><mo stretchy=\"false\">]</mo></mrow><mi>\u2115</mi></msub><mrow><mo stretchy=\"false\">(</mo><mi>F</mi><mo>\u2260</mo><mi mathvariant=\"normal\">\u2205</mi><mo>\u2192</mo><mrow><mo stretchy=\"false\">(</mo><mo>\u2200</mo><mi>n</mi><mo>&lt;</mo><mo stretchy=\"false\">|</mo><mi>F</mi><mo stretchy=\"false\">|</mo><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mo>\u2203</mo><mi>m</mi><mo>&lt;</mo><mi>max</mi><mi>F</mi><mo stretchy=\"false\">)</mo></mrow><mi>\u03b8</mi><mrow><mo stretchy=\"false\">(</mo><mi>X</mi><mo>\u21be</mo><mi>m</mi><mo>,</mo><mi>\u03c3</mi><mo>\u21be</mo><mi>m</mi><mo>,</mo><mi>k</mi><mo>,</mo><mi>n</mi><mo>,</mo><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">}</mo></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.00050.tex", "nexttext": "\nWe define the notion of~\\textit{$m$-density($\\Gamma)$} of a finite set~$Z\\subseteq{\\mathbb{N}}$ inductively as follows.\nFirst, a set~$Z$ is \\textit{$0$-dense($\\Gamma$}) if it is $\\bbomega$-large and $\\min Z>1$.\nAssuming the notion of~$m$-density($\\Gamma$) is defined, \na set~$Z$ is \\textit{$(m+1)$-dense($\\Gamma$)} if\n\\begin{itemize}\n \\item for any~$f:[[0,\\max Z]_{{\\mathbb{N}}}]^{n}\\to \\max Z$,\nthere is an $m$-dense($\\Gamma$) set~$Y \\subseteq Z$\nsuch that~$\\Psi(f, Y)$ holds, and,\n \\item for any partition $Z_{0}\\sqcup\\dots \\sqcup Z_{k-1}=Z$ such that $k\\le Z_{0}<\\dots<Z_{k-1}$, one of $Z_{i}$'s is $m$-dense($\\Gamma$).\n\\end{itemize}\nNote that there exists a $\\Delta_{0}$-formula $\\theta(m,Z)$ saying that ``$Z$ is $m$-dense($\\Gamma$).''\n(Here, we always assume $\\min Z>1$ to avoid technical annoyances.)\n\\end{defi}\nIn case $\\Gamma$ is ${\\mathrm{psRT}}^{2}_{k}$ or ${\\mathrm{RT}}^{n}_{k}$ for some $n,k\\ge 2$, the second condition is implied from the first condition as follows: \nfor a given partition $Z_{0}\\sqcup\\dots \\sqcup Z_{k-1}=Z$, set $f(x,y)=1$ if $x,y\\in Z_{i}$ for some $i<k$ and $f(x,y)=0$ otherwise, then, $f$ is a transitive coloring and any $\\bbomega$-large homogeneous set $H\\subseteq Z$ is included in some $Z_{i}$'s.\n (For more precise explanations, see \\cite{Paris1978} or \\cite{BW}.)\nOn the other hand, the density notion for ${\\mathrm{EM}}$ without the second condition does not work well (see \\cite{BW}).\n\n\\begin{defi}\nLet $\\Gamma$ be a Ramsey-like-$\\Pi^{1}_{2}$-statement.\nThen, the statement $m$-${\\widetilde{\\mathrm{PH}}{}}(\\Gamma)$ asserts that for any $X_{0}\\subseteq{\\mathbb{N}}$, \n\tif $X_{0}$ is infinite then there exists an $m$-dense($\\Gamma$) set $X$ such that $X\\subseteq_{{\\mathrm{fin}}}X_{0}$.\n\\end{defi}\n\n\n\nThe density notion for $\\Gamma$ provides a cut to be a model of ${\\mathsf{WKL_0}}+\\Gamma$.\n\n\\begin{lem}\\label{lem-cut-from-dense-set}\nLet $\\Gamma$ be a Ramsey-like-$\\Pi^{1}_{2}$-statement.\nGiven a countable nonstandard model $M$ of ${\\mathrm{I}\\Sigma_1}$ and an $M$-finite set $Z\\subseteq M$ which is $a$-dense($\\Gamma$) for some $a\\in M\\setminus \\omega$, then there exists an initial segment $I$ of $M$ such that $(I,{\\mathrm{Cod}}(M/I))\\models {\\mathsf{WKL_0}}+\\Gamma$ and $I\\cap Z$ is infinite in $I$.\n\\end{lem}\n\\begin{proof}\nLet $\\Gamma$ be a Ramsey-like-$\\Pi^{1}_{2}$-statement of the form\n\n", "itemtype": "equation", "pos": 39059, "prevtext": "\nThen, since $\\Psi(X,Z)$ holds, the tree $T$ is infinite.\nBy ${\\mathsf{WKL_0}}$, take $Y\\in [T]$. One can check that ${\\forall} n {\\exists} m\\theta(X{\\upharpoonright} m, Y{\\upharpoonright} m,n,m)$ since $Z$ is infinite.\n\\end{proof}\n\n\n\\begin{defi}[${\\mathrm{I}\\Sigma^0_1}$]\nFix an ordinal $\\alpha < \\bbomega^\\bbomega$ and a Ramsey-like-$\\Pi^1_2$-statement\n$(\\forall f:[{\\mathbb{N}}]^{n}\\to k)(\\exists Y)(Y\\mbox{ is infinite}\\wedge \\Psi(f,Y))$.\n\nA set $Z\\subseteq_{{\\mathrm{fin}}}{\\mathbb{N}}$ is said to be $\\alpha$-large($\\Gamma$) if for \nany~$f:[[0,\\max Z]_{{\\mathbb{N}}}]^{n}\\to k$, \nthere exists an $\\alpha$-large set~$Y \\subseteq Z$ such that~$\\Psi(f, Y)$ holds.\n\\end{defi}\nBy the definition of a Ramsey-like-$\\Pi^1_2$-formula, if $Z'\\supseteq Z$ and $Z$ is $\\alpha$-large($\\Gamma$), then $Z'$ is $\\alpha$-large($\\Gamma$).\n\n\\begin{exa}\nA set~$Z$ is $\\alpha$-large(${\\mathrm{RT}}^n_k$) if for every coloring $f : [[0,\\max Z]_{{\\mathbb{N}}}]^n \\to k$,\nthere is an $\\alpha$-large $f$-homogeneous set~$Y \\subseteq Z$.\n\\end{exa}\n\nNote that~$\\alpha$-largeness($\\Gamma$) for $\\Gamma \\in \\{{\\mathrm{RT}}^n_k, {\\mathrm{psRT}}^{2}_{k}, {\\mathrm{EM}}\\}$\nare all $\\Delta_0$-definable notions, and ${\\mathrm{I}\\Sigma^0_1}$ proves that they are all regular.\nHowever, it is not obvious within ${\\mathrm{I}\\Sigma^0_1}$ that they are all largeness notions.\nActually, showing within ${\\mathrm{I}\\Sigma^0_1}$ that $\\alpha$-largeness(${\\mathrm{RT}}^2_2$) is a largeness notion\nis the key to know the $\\Pi^{0}_{3}$-part of ${\\mathrm{RT}}^{2}_{2}$.\nOur approach is to measure the size of $\\alpha$-large($\\Gamma$) sets by comparing them with $\\alpha$-large sets.\nThe following classical theorem is fundamental for this purpose.\n(It is not hard to check that the proof works within ${\\mathrm{I}\\Sigma^0_1}$.)\n\n\n\n\n\n\n\n\n\\begin{thm}[{Ketonen/Solovay\\cite[Section 6]{KS81}}]\\label{SK-theorem}\nLet $k\\in\\omega$.\nThe following is provable within ${\\mathrm{I}\\Sigma^0_1}$. If a finite set $X$ is $\\bbomega^{k+4}$-large \nand $\\min X>3$, then $X$ is $\\bbomega$-large(${\\mathrm{RT}}^{2}_{k}$).\n\\end{thm}\n\n\\section{Density and $\\tilde{\\Pi}{}^{0}_{3}$-conservation}\\label{section-density}\n\nThe goal of this section is to prove the following theorem.\n\n\\begin{theorem}[Conservation through largeness]\\label{thm-provably-large-conservative}\nLet $\\Gamma$ be a Ramsey-like-$\\Pi^{1}_{2}$-statement.\nIf $\\bbomega^{k}$-large$(\\Gamma)$ness is a largeness notion provably in ${\\mathrm{I}\\Sigma^0_1}$ for any $k\\in\\omega$,\nthen, ${\\mathsf{WKL_0}}+\\Gamma$ is a $\\tilde{\\Pi}{}^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{theorem}\n\nFor this, we will introduce an iterated version of a largeness notion which is called ``density''.\nThis notion is introduced by Paris in \\cite{Paris1978}.\n\n\n\\begin{defi}[${\\mathrm{I}\\Sigma^0_1}$, Density notion]\\label{def-density-with-indicator}\nFix a Ramsey-like $\\Pi^1_2$-statement\n\n", "index": 9, "text": "$$\n  \\Gamma = (\\forall f:[{\\mathbb{N}}]^{n}\\to k)(\\exists Y)(Y\\mbox{ is infinite}\\wedge \\Psi(f,Y)).\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex5.m1\" class=\"ltx_Math\" alttext=\"\\Gamma=(\\forall f:[{\\mathbb{N}}]^{n}\\to k)(\\exists Y)(Y\\mbox{ is infinite}%&#10;\\wedge\\Psi(f,Y)).\" display=\"block\"><mrow><mi mathvariant=\"normal\">\u0393</mi><mo>=</mo><mrow><mo stretchy=\"false\">(</mo><mo>\u2200</mo><mi>f</mi><mo>:</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>\u2115</mi><mo stretchy=\"false\">]</mo></mrow><mi>n</mi></msup><mo>\u2192</mo><mi>k</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mo>\u2203</mo><mi>Y</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mi>Y</mi><mtext>\u00a0is infinite</mtext><mo>\u2227</mo><mi mathvariant=\"normal\">\u03a8</mi><mrow><mo stretchy=\"false\">(</mo><mi>f</mi><mo>,</mo><mi>Y</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.00050.tex", "nexttext": "\nwhere~$n,k\\in\\omega$ and~$\\Psi(f,Y)$ is of the form $({\\forall} G\\subseteq_{{\\mathrm{fin}}}Y)\\Psi_{0}(f{\\upharpoonright}[[0,\\max G]_{{\\mathbb{N}}}]^{n},G)$ such that~$\\Psi_{0}$ is a $\\Delta^{0}_{0}$-formula.\n\\end{definition}\n\nIn particular, ${\\mathrm{RT}}^n_k$ is a Ramsey-like-$\\Pi^1_2$-statement\nwhere~$\\Psi(f,Y)$ is the formula ``$Y$ is homogeneous for~$f$''.\nSimilarly, ${\\mathrm{psRT}}^{2}_{k}$ and~${\\mathrm{EM}}$ are Ramsey-like-$\\Pi^1_2$ statements.\nOn the other hand, ${\\mathrm{SRT}}^{2}_{2}$ is not a Ramsey-like-$\\Pi^1_2$-statement. However, ${\\mathrm{SRT}}^{2}_{2}$\nis equivalent to the Ramsey-like-$\\Pi^1_2$-formula saying ``for any $2$-coloring $f$ on $[{\\mathbb{N}}]^{2}$, there exists an infinite set $Y$ such that $Y$ is homogeneous for $f$ or there exists $a<\\min Y$ witnessing the non-stability of~$f$, that is, such that for any $x,y\\in Y$ there exist $b,c\\in [x,y)_{{\\mathbb{N}}}$ such that $f(a,b)\\neq f(a,c)$''.\nAlthough the definition of a Ramsey-like-$\\Pi^1_2$-formula seems very restrictive,\nwe can show that it entails a much larger class of $\\Pi^1_2$-statements.\n\n\\begin{definition}\nA \\emph{restricted-$\\Pi^1_2$-formula} is a $\\Pi^1_2$-formula of the form \n$\\forall X\\exists Y\\Theta(X,Y)$ where $\\Theta$ is a $\\Sigma^{0}_{3}$-formula.\n\\end{definition}\n\n\n\n\\begin{prop}\\label{prop-R-like-and-rest-formulas}\nFor any restricted-$\\Pi^{1}_{2}$-formula ${\\forall} X{\\exists} Y\\Theta(X,Y)$, \nthere exists a Ramsey-like-$\\Pi^{1}_{2}$-formula ${\\forall} X{\\exists} Z(Z\\mbox{ is infinite}\\wedge \\Psi(X,Z))$ such that \n \n", "itemtype": "equation", "pos": 32501, "prevtext": "\n\\newpage\n\n\n\n\n\n\\title{The proof-theoretic strength of Ramsey's theorem for pairs and two colors}\n\n\\author[1]{Ludovic Patey}\n\\author[2]{Keita Yokoyama}\n\n\\affil[1]{\\small \\sf{ludovic.patey@computability.fr}}\n\\affil[2]{\\small \\sf{y-keita@jaist.ac.jp}}\n\n\n\\date{\\today}\n\n\n\\blfootnote{Ludovic Patey is thankful to his PhD advisor Laurent Bienvenu\nfor interesting comments and discussions.\nHe is funded by the John Templeton Foundation (`Structure and Randomness in the Theory of Computation' project). The opinions expressed in this publication are those of the author(s) and do not necessarily reflect the views of the John Templeton Foundation.\n\nKeita Yokoyama is grateful to Theodore A.~Slaman and Emanuele Frittaion for useful comments and discussions.\nHis work is partially supported by JSPS Grant-in-Aid for Research Activity Start-up grant number 25887026, JSPS fellowship for research abroad, and JSPS Core-to-Core Program (A. Advanced Research Networks).\n\nPart of this work in this paper was done during the Dagstuhl Seminar 15392 ``Measuring the Complexity of Computational Content: Weihrauch Reducibility and Reverse Analysis''.}\n\n\\maketitle\n\n\n\\begin{abstract}\nRamsey's theorem for $n$-tuples and $k$-colors (${\\mathrm{RT}}^n_k$) asserts\nthat every $k$-coloring of~$[{\\mathbb{N}}]^n$ admits an infinite monochromatic subset.\nWe study the proof-theoretic strength of Ramsey's theorem for pairs and two colors, namely, the set of its\n$\\Pi^0_1$ consequences, and show that ${\\mathrm{RT}}^2_2$ is $\\Pi^0_3$ conservative over~${\\mathrm{I}\\Sigma^0_1}$.\nThis strengthens the proof of Chong, Slaman and Yang that ${\\mathrm{RT}}^2_2$ does not imply ${\\mathrm{I}\\Sigma^0_2}$,\nand shows that ${\\mathrm{RT}}^2_2$ is finitistically reducible, in the sense of Simpson's partial realization\nof Hilbert's Program. Moreover, we develop general tools to simplify the proofs of $\\Pi^0_3$-conservation theorems.\n\\end{abstract}\n\n\\section{Introduction}\n\nRamsey's theorem for $n$-tuples and $k$-colors (${\\mathrm{RT}}^n_k$) asserts\nthat every $k$-coloring of~$[{\\mathbb{N}}]^n$ admits an infinite monochromatic subset.\nIn the study of reverse mathematics, determining the strength of Ramsey's theorem \nfor pairs is a long-term open problem.\nHirst\\cite{Hirst-PhD} showed that ${\\mathrm{RT}}^{2}_{2}$ implies the $\\Sigma^0_2$-bounding principle (${\\mathrm{B}\\Sigma^0_2}$).\nOn the other hand, Cholak, Jockusch and Slaman~\\cite{CJS} showed that ${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}+{\\mathrm{I}\\Sigma^0_2}$ \nis a $\\Pi^{1}_{1}$-conservative extension of ${\\mathrm{I}\\Sigma^0_2}$, where ${\\mathsf{WKL_0}}$ stands for weak K\\\"onig's lemma\nand~${\\mathrm{I}\\Sigma^0_{n}}$ is the $\\Sigma^0_n$-induction scheme.\nThus, the first-order strength of Ramsey's theorem for pairs and two colors\n is in between ${\\mathrm{B}\\Sigma^0_2}$ and ${\\mathrm{I}\\Sigma^0_2}$.\nAfter this work, the project of deciding the first-order strength of ${\\mathrm{RT}}^{2}_{2}$ \nhas been strongly carried out using forcing constructions or priority arguments \non nonstandard models of ${\\mathrm{B}\\Sigma^0_2}$, mainly by Chong, Slaman and Yang~\\cite{CSY2012,CSY2014}.\nThey proved in particular that ${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}$ does not imply ${\\mathrm{I}\\Sigma^0_2}$~\\cite{CSY201X}.\n\nIn this paper, we use a hybrid of forcing construction, indicator arguments,\nand proof-theoretic technique to show that ${\\mathrm{RT}}^{2}_{2}+{\\mathsf{WKL_0}}$ \nis a $\\Pi^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\nThis answers Question~13.2 of Cholak, Jockusch and Slaman~\\cite{CJS},\nand strengthens the above recent result by Chong, Slaman and Yang \nsince the $\\Pi^{0}_{3}$-consequences of ${\\mathrm{I}\\Sigma^0_2}$ are different from those of ${\\mathrm{I}\\Sigma^0_1}$.\nOur conservation result gives actually a weak answer to the original question,\nnamely, the proof-theoretic strength of ${\\mathrm{RT}}^{2}_{2}$ is the same as ${\\mathrm{B}\\Sigma^0_2}$,\nsince ${\\mathrm{B}\\Sigma^0_2}$ is a $\\Pi^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\nBy the proof-theoretic strength \nof a theory $T$ we mean the set of $\\Pi^0_1$ sentences which are provable in\n$T$, or the proof-theoretic ordinal of $T$ which is decided by the $\\Pi^{0}_{2}$-consequences of $T$.\nDeciding the proof-theoretic strength of ${\\mathrm{RT}}^{2}_{2}$ \nis an important problem from a philosophical point of view.\nIn the sense of Simpson's partial realization \\cite{partial} of Hilbert's Program, \none would conclude that ${\\mathrm{RT}}^{2}_{2}$ is \\textit{finitistically reducible}.\n\n\\subsection{Reverse mathematics}\n\nReverse mathematics is a vast foundational program that seeks to determine \nwhich \\emph{set existence axioms} are needed to prove theorems from ``ordinary'' mathematics.\nIt uses the framework of subsystems of second-order arithmetic.\nIndeed, Friedman realized that a large majority of theorems admitted a natural formulation\nin the language of second-order arithmetic. The base theory ${\\mathsf{RCA_0}}$, standing for \nRecursive Comprehension Axiom, contains the basic axioms for first-order arithmetic\n (axioms of discrete ordered semi-ring) together with the~$\\Delta^0_1$-comprehension\n scheme and the~$\\Sigma^0_1$-induction scheme. ${\\mathsf{RCA_0}}$ can be thought of as capturing\n\\emph{computable mathematics}. \n\nSince then, thousands of theorems have been studied within the framework\nof reverse mathematics. A surprising phenomenon emerged from the early years of\nreverse mathematics: Most theorems studied require very weak axioms. \nMoreover, many of them happen to be \\emph{equivalent} to one of five main sets of axioms,\nthat are referred to as the \\emph{Big Five}, namely, ${\\mathsf{RCA_0}}$, weak K\\\"onig's lemma (${\\mathsf{WKL_0}}$),\nthe arithmetic comprehension axiom (${\\mathsf{ACA_0}}$), arithmetical transfinite recursion (${\\mathsf{ATR_0}}$),\nand $\\Pi^1_1$-comprehension axiom (${\\Pi^1_1\\text{-}\\mathsf{CA_0}}$). See Simpson~\\cite{SOSOA} for an extensive study\nof the Big Five and mathematics within them.\nIn this paper, we shall consider exclusively theorems which are provable\nin ${\\mathsf{ACA_0}}$. See Hirschfeldt~\\cite{Hirschfeldt2014Slicing} \nfor a gentle introduction to the reverse mathematics below~${\\mathsf{ACA_0}}$.\n\n\\subsection{Ramsey's theorem and its consequences}\n\nRamsey theory is a branch of mathematics \nstudying the conditions under which some\nstructure appears among a sufficiently large collection of objects.\nIn the past two decades, Ramsey theory emerged as one of the most important topics in reverse mathematics.\nThis theory provides a large class of theorems escaping the Big Five phenomenon, \nand whose strength is notoriously hard to gauge.\nPerhaps the most famous such theorem is \\emph{Ramsey's theorem}.\n\n\\begin{defi}[Ramsey's theorem]\nA subset~$H$ of~${\\mathbb{N}}$ is~\\emph{homogeneous} for a coloring~$f : [{\\mathbb{N}}]^n \\to k$ (or \\emph{$f$-homogeneous}) \nif all the $n$-tuples over~$H$ are given the same color by~$f$. \n${\\mathrm{RT}}^n_k$ is the statement ``Every coloring $f : [{\\mathbb{N}}]^n \\to k$ has an infinite $f$-homogeneous set''.\n\\end{defi}\n\nJockusch~\\cite{Jockusch1972Ramseys} conducted a computational analysis of Ramsey's theorem,\nlater formalized by Simpson~\\cite{SOSOA} within the framework of reverse mathematics.\nWhenever $n \\geq 3$, Ramsey's theorem for $n$-tuples happens to be equivalent to ${\\mathsf{ACA_0}}$.\nThe status of Ramsey's theorem for pairs was open for decades, until Seetapun~\\cite{Seetapun1995strength} proved\nthat ${\\mathrm{RT}}^2_2$ is strictly weaker than ${\\mathsf{ACA_0}}$ over~${\\mathsf{RCA_0}}$. Cholak, Jockush and Slaman~\\cite{CJS01}\nextensively studied Ramsey's theorem for pairs.\n\nIn order to better understand the logical strength of~${\\mathrm{RT}}^2_2$,\nBovykin and Weiermann~\\cite{BW} decomposed Ramsey's theorem for pairs\ninto the Erd\\H{o}s-Moser theorem and the ascending descending sequence principle.\nThe Erd\\H{o}s-Moser is a statement from graph theory.\n\n\\begin{defi}[Erd\\H{o}s-Moser theorem] \nA tournament $T$ is an irreflexive binary relation such that for all $x,y \\in {\\mathbb{N}}$ with $x \\not= y$, \nexactly one of $T(x,y)$ or $T(y,x)$ holds. A tournament $T$ is \\emph{transitive} \nif the corresponding relation~$T$ is transitive in the usual sense. \n${\\mathrm{EM}}$ is the statement ``Every infinite tournament $T$ has an infinite transitive subtournament.''\n\\end{defi}\n\n\\begin{defi}[Ascending descending sequence]\nGiven a linear order (\\textit{i.e.}, a transitive tournament)~$<_L$ on ${\\mathbb{N}}$, an \\emph{ascending} (\\emph{descending}) sequence\nis a set~$S$ such that for every~$x <_{\\mathbb{N}} y \\in S$, $x <_L y$ ($x >_L y$).\n${\\mathrm{ADS}}$ is the statement ``Every infinite linear order admits an infinite ascending or descending sequence''.\n\\end{defi}\n\nThe Erd\\H{o}s-Moser theorem provides together with the ascending descending principle an alternative decomposition of\nRamsey's theorem for pairs. Indeed, every coloring~$f : [{\\mathbb{N}}]^2 \\to 2$\ncan be seen as a tournament~$R$ such that~$R(x,y)$ holds if~$x < y$ and~$f(x,y) = 1$, or~$x > y$ and~$f(y, x) = 0$.\nThen, ${\\mathrm{EM}}$ is saying ``Every coloring $f : [{\\mathbb{N}}]^n \\to k$ has an infinite transitive subcoloring'' and\n${\\mathrm{ADS}}$ is saying ``Every transitive coloring $f : [{\\mathbb{N}}]^n \\to k$ has an infinite $f$-homogeneous set''.\n(In what follows, we always consider ${\\mathrm{EM}}$ and ${\\mathrm{ADS}}$ as these forms.)\nWe therefore obtain the following equivalence.\n\\begin{thm}[Hirschfeldt/Shore~\\cite{HS2007}, Bovykin/Weiermann~\\cite{BW}]\n${\\mathsf{RCA_0}} \\vdash {\\mathrm{RT}}^2_2 \\leftrightarrow {\\mathrm{ADS}} + {\\mathrm{EM}}$.\n\\end{thm}\n\n\n\n\n\n\n\n\n\n\n\n\nThe ascending descending sequence has been introduced by Hirschfeldt\nand Shore~\\cite{HS2007}. They proved that ${\\mathrm{ADS}}$ is strictly weaker than Ramsey's theorem for pairs.\nOn the other hand, Lerman, Solomon and Towsner~\\cite{Lerman2013Separating} proved that the Erd\\H{o}s-Moser theorem\nis strictly weaker than ${\\mathrm{RT}}^2_2$. For technical purposes, we shall consider a statement equivalent to the\nascending descending principle. Pseudo Ramsey's theorem for pairs has been introduced by Murakami, Yamazaki\nand the second author~\\cite{Murakami2014Ramseyan} to study a factorization theorem from automata theory.\n\n\\begin{defi}[Pseudo Ramsey's theorem for pairs]\nA set~$H$ is \\emph{pseudo-homogeneous} for a coloring $f : [{\\mathbb{N}}]^2 \\to k$\nif there is a color~$c < k$ such that every pair $\\{x, y\\} \\in [H]^2$\nare the endpoints of a finite sequence $x_0 < x_1 < \\dots < x_n$\nsuch that~$f(x_i, x_{i+1}) = c$ for each~$i < n$.\n${\\mathrm{psRT}}^2_k$ is the statement ``Every coloring $f : [{\\mathbb{N}}]^n \\to k$ has an infinite $f$-pseudo-homogeneous set''.\n\\end{defi}\n\nIn particular, if $f : [{\\mathbb{N}}]^2 \\to 2$ is a transitive coloring,\nthen any set~$H$ pseudo-homogeneous for~$f$ is already homogeneous for~$f$.\nThus, ${\\mathsf{RCA_0}} + {\\mathrm{psRT}}^2_2$ implies ${\\mathrm{ADS}}$ (see~\\cite{Murakami2014Ramseyan}).\nThe first author~\\cite{Patey2016reverse} and Steila (see~\\cite{SY201X}) independently \nproved the reverse implication, namely, ${\\mathsf{RCA_0}} + {\\mathrm{ADS}}$ implies~${\\mathrm{psRT}}^2_2$.\n\n\\subsection{Proof strength and conservation results}\n\nIn the study of reverse mathematics, deciding the first-order or proof-theoretic strength \nof axioms and mathematical principles is one of the main topic.\nEspecially, the conservation result for weak K\\\"onig's lemma always plays the central role\nas a large part of mathematics can be proven within ${\\mathsf{WKL_0}}$ (see Simpson~\\cite{SOSOA}).\nThe following theorems show that one can use weak K\\\"onig's lemma almost freely to seek for first-order consequences.\n\\begin{thm}[Harrington, see \\cite{SOSOA}]\\label{thm:harrington-conservation-wkl}\n${\\mathsf{WKL_0}}$ is a $\\Pi^{1}_{1}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{thm}\n\\begin{thm}[Friedman\\cite{friedmancom}, see \\cite{SOSOA}]\\label{thm-Friedman-conservation}\n${\\mathsf{WKL_0}}$ is a $\\Pi^{0}_{2}$-conservative extension of ${\\mathsf{PRA}}$.\n\\end{thm}\n\nThe $\\Sigma^0_2$-bounding principle (${\\mathrm{B}\\Sigma^0_2}$) informally asserts that a finite union of finite sets is finite.\nMany mathematical reasonings make an essential use of ${\\mathrm{B}\\Sigma^0_2}$ and in particular ${\\mathrm{RT}}^{2}_{2}$ implies ${\\mathrm{B}\\Sigma^0_2}$.\nThe strength of the $\\Sigma^0_2$-bounding principle is therefore important for the study of combinatorial principles.\n\\begin{thm}[H\\'ajek\\cite{Hajek}]\n${\\mathsf{WKL_0}}+{\\mathrm{B}\\Sigma^0_2}$ is a $\\Pi^{1}_{1}$-conservative extension of ${\\mathrm{B}\\Sigma^0_2}$.\n\\end{thm}\n\nThankfully, ${\\mathrm{B}\\Sigma^0_2}$ can be freely used for a restricted class of formulas.\nLet $\\tilde{\\Pi}{}^{0}_{3}$ be a class of formulas of the form ${\\forall} X\\varphi(X)$ \nwhere $\\varphi$ is a $\\Pi^{0}_{3}$-formula. The following is a parameterized \nversion of the Parsons/Paris/Friedman conservation theorem.\n\\begin{thm}[see, e.g.,~\\cite{handbook-of-proof} or \\cite{Kaye}]\\label{thm:bsig2-pi03-conservative-isig1}\n${\\mathrm{B}\\Sigma^0_2}$ is a $\\tilde{\\Pi}{}^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{thm}\nNote that the above four conservation theorems are frequently used in this paper, and so we shall not mention them explicitely.\n\nThere are many advanced studies to investigate the first-order strength of Ramsey's theorem and related combinatorial principles.\nOne of the most important methods for these studies consists in adapting computability-theoretic techniques for combinatorial principles.\nBy this method, Chong, Slaman and Yang~\\cite{CSY2012} showed that two weaker combinatorial principles, namely, \nthe ascending descending sequence (${\\mathrm{ADS}}$) and the chain antichain principle (${\\mathrm{CAC}}$),\n introduced by Shore/Hirschfeldt\\cite{HS2007}, are $\\Pi^{1}_{1}$-conservative over ${\\mathsf{WKL_0}}$.\nIn~\\cite{CSY2014}, they showed that ${\\mathsf{WKL_0}}+{\\mathrm{SRT}}^{2}_{2}$ does not imply ${\\mathrm{I}\\Sigma^0_2}$, \nand they improved the result and proved that ${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}$ does not imply ${\\mathrm{I}\\Sigma^0_2}$ in~\\cite{CSY201X}. \nMore recently, Chong, Kreuzer and Yang [unpublished] showed that ${\\mathrm{SRT}}^{2}_{2}$ is $\\Pi^{0}_{3}$-conservative over ${\\mathsf{WKL_0}}+{\\mathrm{WF}}(\\omega^{\\omega})$, where~${\\mathrm{WF}}(\\omega^{\\omega})$ asserts the well-foundedness of $\\omega^{\\omega}$.\n\n\nBesides the computability-theoretic techniques, many other significant approaches can be found in the literature. \nKohlenbach/Kreuzer~\\cite{KK2009} and Kreuzer~\\cite{Kreuzer2012} \ncharacterized the $\\Pi^{0}_{2}$-parts of ${\\mathrm{RT}}^{2}_{2}$ and ${\\mathrm{CAC}}$ with several different \nsettings by proof-theoretic approaches. Bovykin/Weiermann~\\cite{BW} and the second \nauthor~\\cite{Y-RIMS2013} showed that indicators defined by Paris's density notion \ncan approach the proof-theoretic strength of various versions of Ramsey's theorem, \nand by a similar method, the second author~\\cite{Y-MLQ13} also showed that \n${\\mathrm{RT}}^{n}_{k}+{\\mathsf{WKL_0^{*}}}$ is fairly weak and is a $\\Pi^{0}_{2}$-conservative extension of ${\\mathsf{RCA_0^{*}}}$,\nwhere~${\\mathsf{RCA_0^{*}}}$ is ${\\mathsf{RCA_0}}$ with only $\\Sigma^0_0$-induction and the exponentiation.\nIn addition, the study of the $\\Pi^{0}_{2}$-parts of Ramsey-type theorems has some application to computer science~\\cite{SY201X}.\n\n\\subsection{Second-order structures of arithmetic and their cuts}\nA structure for the language of second-order arithmetic $\\mathcal{L}_{2}$ is a pair $(M,S)$ \nwhere $M=(M, +_{M}, \\cdot_{M},\\allowbreak 0_{M}, 1_{M}, <_{M})$ \nis a structure for the language of first-order (Peano) arithmetic $\\mathcal{L}_{{\\mathrm{PA}}}$, and $S$ is a subset of the power set of $M$.\n\n\n\\begin{defi}[Cut]\nGiven a structure~$M$ of the first-order arithmetic, a substructure $I \\subseteq M$ is said to be a \\emph{cut} of $M$ \n(abbreviated $(I\\subseteq_{e} M)$) if $I=\\{a\\in M\\mid {\\exists} b\\in I(a<_{M}b)\\}$.\n\\end{defi}\n\nHere, the standard first-order structure $\\omega$ can be considered as the smallest cut of any first-order structure.\nGiven a structure $(M,S)$, a cut $I\\subseteq_{e} M$ induces the second-order structure $(I,S{\\upharpoonright} I)$,\nwhere $S{\\upharpoonright} I:=\\{X\\cap I\\mid X\\in S\\}$.\nWe sometimes consider $S$ as a family of unary predicates on $M$ and identify $(M,S)$ as an $\\mathcal{L}_{{\\mathrm{PA}}}\\cup S$-structure.\nAccordingly, $(I,S{\\upharpoonright} I)$ can be considered as an $\\mathcal{L}_{{\\mathrm{PA}}}\\cup S$-substructure of $(M,S)$.\nNote that $S{\\upharpoonright} I$ may then be a multiset on $I$, but this is harmless without second-order equality.\nIn this sense, one can easily check that $(I,S{\\upharpoonright} I)$ is a $\\Sigma^{0}_{0}$-elementary substructure of $(M,S)$ if $I$ is closed under $+_{M}$ and $\\cdot_{M}$.\n\nWe write ${\\mathrm{Cod}}(M)$ for the collection of all $M$-finite subsets, \\textit{i.e.}, \nsubsets of $M$ canonically coded by elements in $M$ (as the usual binary expansion).\nGiven some cut $I\\subseteq_{e} M$, we write ${\\mathrm{Cod}}(M/I)$ for ${\\mathrm{Cod}}(M){\\upharpoonright} I$.\nIf $I\\subsetneq M$, then ${\\mathrm{Cod}}(M/I)=S{\\upharpoonright} I$ for any $S\\subseteq\\mathcal{P}(M)$ such that $(M,S)\\models {\\mathsf{RCA_0}}$, thus $(I, S{\\upharpoonright} I)$ only depends on $M$ and $I$.\n\nA cut $I\\subseteq_{e} M$ is said to be \\emph{semi-regular} if $I\\cap X$ is bounded for any $X\\in {\\mathrm{Cod}}(M)$ such that $|X|\\in I$, where $|X|$ denotes the cardinality of $X$ in $M$.\nA semi-regular cut is one of the central notions in the study of cuts, especially with the connection to second-order structures, since it characterizes the models of ${\\mathsf{WKL_0}}$.\nWe will use the following theorem throughout this paper without mentioning it explicitely.\n\n\\begin{thm}[see, e.g., \\cite{Kossak-Schmerl}]\nLet $I$ be a cut of a first-order structure $M$. Then, $I$ is semi-regular if and only if $(I,{\\mathrm{Cod}}(M/I))\\models {\\mathsf{WKL_0}}$. \n\\end{thm}\n\nBounding principles are also characterized by cuts with some elementarity condition.\nIn this paper, we will use the following characterization.\n\\begin{thm}[Folklore, essentially due to Paris/Kirby\\cite{Paris-Kirby}, see also \\cite{Y-self-emb}]\\label{thm-elem-cut-vs-Bn}\nLet $n\\ge 1$.\nLet $(M,S)$ be a model of ${\\mathrm{I}\\Sigma^0_{n}}[n-1]$, and let $I$ be a cut of $M$ such that $(I, S{\\upharpoonright} I)$ be a $\\Sigma^{0}_{n}$-elementary substructure of $(M,S)$.\nThen, $(I,S{\\upharpoonright} I)\\models{\\mathrm{B}\\Sigma^0_{n}}[n+1]$.\n\\end{thm}\n\n\n\\subsection{Hilbert's program and finitistic reductionism}\n\nDuring the early 20th century, mathematics went through a serious foundational crisis,\nwith the discovery of various paradoxes and inconsistencies. Some great mathematicians such as Kronecker, Poincar\\'e and Brouwer\nchallenged the validity of infinitistic reasoning. Hilbert~\\cite{hilbert1925infinite} proposed a three-step program \nto answer those criticisms. First, he suggested to identify the finitistic part of mathematics, then to axiomatize infinite reasoning,\nand eventually to give a finitistically correct consistency proof of this axiomatic system. \nHowever, his program was nip in the bud by G\\\"odel's incompleteness theorems~\\cite{MR2260656}. \n\nIn 1986, Simpson~\\cite{partial} proposed a formal interpretation of Hilbert's program\nby taking primitive recursive arithmetic (PRA) as the base system for capturing finitistic reasoning.\nThis choice was convincingly justified by Tait~\\cite{tait1981finitism}. Simpson took\nsecond-order arithmetic ($Z_2$) as the big system capturing infinitistic reasoning, based on the work\nof Hilbert and Bernays~\\cite{MR3027390}. In this setting, finitistic reductionism can be interpreted\nas proving that $Z_2$ is $\\Pi^0_1$-conservative over~PRA. By G\\\"odel incompleteness theorem,\nthis cannot be the case. However, Simpson proposed to consider $\\Pi^0_1$-conservation of subsystems of second-order arithmetic\nover PRA as a partial realization of Hilbert's program. He illustrated his words with weak K\\\"onig's lemma (${\\mathrm{WKL}}$)\nwhich was proven by Friedman to be $\\Pi^0_2$-conservative over~PRA (Theorem~\\ref{thm-Friedman-conservation}).\nIn this paper, we contribute to Hilbert's program by showing that ${\\mathsf{WKL_0}} + {\\mathrm{RT}}^2_2$ is $\\Pi^0_2$-conservative over~PRA,\nand therefore that ${\\mathrm{RT}}^2_2$ is finitistically reducible. Moreover, we develop general tools to simplify the proofs of $\\Pi^0_3$-conservation theorems, and thereby contribute to the simplification of the realization of Hilbert's program.\n\n\\subsection{Notation}\n\nIn order to avoid confusion between the theory and the meta-theory, we shall use\n$\\omega$ to denote the set of (standard) natural numbers, and ${\\mathbb{N}}$ to denote the sets\nof natural numbers inside the system. Accordingly, we shall write $\\bbomega$\nfor the ordinal $\\omega$ in the system.\nWe write $[a,b]_{{\\mathbb{N}}}, (a,b)_{{\\mathbb{N}}},(a,\\infty)_{{\\mathbb{N}}},\\dots$ for intervals of natural numbers, e.g., $(a,b]_{{\\mathbb{N}}}=\\{x\\in{\\mathbb{N}}\\mid a<x\\le b\\}$.\nGiven a set~$X$ and some~$n \\in {\\mathbb{N}}$, $[X]^n$ is the collection of all sets of size~$n$.\n$[X]^{<{\\mathbb{N}}}$ is the union $\\bigcup_n [X]^n$.\n\nWe use $\\Pi_{n}$, $\\Sigma_{n}$, $\\Delta_{n}$ to denote first-order formulas without set parameters,\nwhereas $\\Pi^{0}_{n}$, $\\Sigma^{0}_{n}$, $\\Delta^{0}_{n}$ are second-order formulas, \\textit{i.e.}, with set parameters.\nA $\\tilde{\\Pi}{}^{0}_{n}$-formula is a second-order formula of the form $(\\forall X)\\varphi(X)$ where $\\varphi$ is a $\\Pi^0_n$-formula.\n\nGiven two sets~$A, B$, $A\\oplus B=\\{2x\\mid x\\in A\\}\\cup\\{2x+1\\mid x\\in B\\}$, $A \\subseteq_{{\\mathrm{fin}}} B$ means that $A$ is a finite subset of~$B$, and $A \\subseteq^{*} B$ means that the set $A$ is included, up to finite changes, in~$B$.\nWe write~$A < B$ for the formula $(\\forall x \\in A)(\\forall y \\in B)x < y$.\nWhenever~$A = \\{x\\}$, we shall simply write~$x < B$ for~$A < B$.\nA set~$X$ can be seen as an infinite join~$X = \\bigoplus_i X_i$, where $x \\in X_i$ iff $\\langle i,x \\rangle \\in X$.\nWe then write~$X[i]$ for~$X_i$.\nGiven a set~$X$ or a string~$\\sigma$ and some integer~$m \\in \\omega$, \nwe write~$X {\\upharpoonright} m$ for the initial segment of~$X$ (resp.\\ $\\sigma$) of length~$m$.\n\n\\subsection{Structure of this paper}\n\n\nThe main target of this paper is the following conservation theorem.\n\\begin{theorem*}\n${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}$ is a $\\tilde{\\Pi}{}^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{theorem*}\nWe will prove this in the following way.\n\nIn Sections~\\ref{section-large-and-dense} and \\ref{section-density}, we will explain that\n$\\tilde{\\Pi}{}^{0}_{3}$-consequences of Ramsey's theorem and its variations \nare characterized by some largeness notions of finite sets.\nWe will introduce largeness notion for $\\Gamma$, where $\\Gamma$ is any of ${\\mathrm{RT}}^{2}_{2}$, \n${\\mathrm{psRT}}^{2}_{2}$ (which is equivalent to ${\\mathrm{ADS}}$), and ${\\mathrm{EM}}$.\nRoughly speaking, giving a bound for largeness for $\\Gamma$ within ${\\mathrm{I}\\Sigma^0_1}$ provides \n$\\tilde{\\Pi}{}^{0}_{3}$-conservation for ${\\mathsf{WKL_0}}+\\Gamma$ over ${\\mathrm{I}\\Sigma^0_1}$ (Theorem~\\ref{thm-provably-large-conservative}).\n\nAccording to the decomposition of ${\\mathrm{RT}}^{2}_{2}$ into ${\\mathrm{ADS}}$ and ${\\mathrm{EM}}$ and the amalgamation theorem (Theorem~\\ref{thm:amalgamation}), \nthe conservation for ${\\mathrm{RT}}^{2}_{2}$ can be decomposed into the conservation for \n${\\mathrm{ADS}}$ and the conservation for ${\\mathrm{EM}}$.\nIn Section~\\ref{section-ADS}, we give a bound for the largeness notion for ${\\mathrm{psRT}}^{2}_{2}$ \n(Lemma~\\ref{lem-ADS-largeness}) by using the Ketonen/Solovay theorem.\nIt actually provides the conservation result for ${\\mathrm{ADS}}$ (Corollary~\\ref{cor-con-ADS}).\n\nIt is rather complicated to give a bound for the largeness notion for ${\\mathrm{EM}}$.\nFor this, we will introduce a new combinatorial principle called the \\emph{grouping principle}. \nWe mainly focus on the grouping principle for pairs and two colors ${\\mathrm{GP}^{2}_{2}}$.\nSection~\\ref{section-GP} is devoted to the reverse mathematical study of ${\\mathrm{GP}^{2}_{2}}$, \nespecially from the view point of computability theory.\nIn Section~\\ref{section-GP-con}, we will prove a conservation theorem for ${\\mathrm{GP}^{2}_{2}}$ (Theorem~\\ref{thm:GP-conservation}).\nFor this, we will modify the construction of a low solution for the stable version of ${\\mathrm{GP}^{2}_{2}}$ (Theorem~\\ref{thm:grouping-low-solution}) \npresented in the previous section.\n\nIn Section~\\ref{section-RT22}, we give a bound for the largeness notion for ${\\mathrm{EM}}$ (Lemma~\\ref{lem-EM-largeness})\n by using a finite version of the grouping principle, which is a consequence of ${\\mathrm{GP}^{2}_{2}}$.\nIt provides the conservation result for ${\\mathrm{EM}}$ (Theorem~\\ref{thm-con-EM}).\nThen, combining this with the conservation result in Section~\\ref{section-ADS} by the amalgamation theorem,\n we obtain the main theorem.\n\nThe main theorem can be formalized within ${\\mathsf{WKL_0}}$, and that leads to the consistency equivalence of ${\\mathrm{I}\\Sigma^0_1}$ and ${\\mathrm{RT}}^{2}_{2}$.\nThis is argued in Section~\\ref{section-consistency-strength}.\n\n\n\\section{Largeness}\\label{section-large-and-dense}\n\nA family of finite sets of natural numbers ${\\mathsf{L}}\\subseteq [{\\mathbb{N}}]^{<{\\mathbb{N}}}$ is said \nto be a \\textit{largeness notion} if any infinite set has a finite subset in ${\\mathsf{L}}$\nand ${\\mathsf{L}}$ is closed under supersets. A finite set $X\\in [{\\mathbb{N}}]^{<{\\mathbb{N}}}$ is said to be ${\\mathsf{L}}$-large \nif $X\\in {\\mathsf{L}}$. A (possibly largeness) notion ${\\mathsf{L}}\\subseteq [{\\mathbb{N}}]^{<{\\mathbb{N}}}$ is said to be \\emph{regular} \nif for any ${\\mathsf{L}}$-large set~$F$, any finite set~$G\\subseteq_{{\\mathrm{fin}}}{\\mathbb{N}}$ for which there exists an order-preserving \ninjection $h:F\\to G$ such that $(\\forall x \\in F)h(x)\\le x$, then $G \\in {\\mathsf{L}}$.\nA $\\Delta_{0}$-definable notion ${\\mathsf{L}}\\subseteq[{\\mathbb{N}}]^{<{\\mathbb{N}}}$ is said to be a\n(regular) largeness notion provably in ${\\mathrm{I}\\Sigma^0_1}$ if ${\\mathrm{I}\\Sigma^0_1}\\vdash$``${\\mathsf{L}}$ is a (regular) largeness notion''.\nIn this paper, we shall mainly consider regular largeness notions provably in ${\\mathrm{I}\\Sigma^0_1}$.\n\\begin{exa}\nThe family~${\\mathsf{L}}_\\bbomega = \\{ X \\subseteq_{{\\mathrm{fin}}} {\\mathbb{N}} : |X| > \\min X \\}$ is a regular largeness notion provably in ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{exa}\n\n\nThe notion of largeness enjoys a property similar to the pigeonhole principle,\nas states the following lemma.\n\n\\begin{lem}[${\\mathsf{WKL_0}}+{\\mathrm{B}\\Sigma^0_2}$]\\label{lem-largeness}\nFor any largeness notion ${\\mathsf{L}}$, for any infinite set $X$ \nand for any $k, N_{0}\\in{\\mathbb{N}}$, there exists $N_{1}\\in{\\mathbb{N}}$ such that for any partition \n$X\\cap[N_{0},N_{1}]_{{\\mathbb{N}}}=X_{0}\\sqcup\\dots\\sqcup X_{k-1}$, there exists an ${\\mathsf{L}}$-large set $F$ \nsuch that $F\\subseteq X_{i}$ for some $i< k$.\n\\end{lem}\nSince ${\\mathsf{WKL_0}}+{\\mathrm{B}\\Sigma^0_2}$ is a $\\tilde{\\Pi}^0_3$-conservative extension of~${\\mathrm{I}\\Sigma^0_1}$, \nthis lemma for a $\\Delta_{1}$-definable largeness notion provably in ${\\mathrm{I}\\Sigma^0_1}$ is provable in ${\\mathrm{I}\\Sigma^0_1}$.\n\\begin{proof}\nBy ${\\mathrm{B}\\Sigma^0_2}$, for any partition $X\\cap [N_{0},\\infty)_{{\\mathbb{N}}}=X_{0}\\sqcup\\dots\\sqcup X_{k-1}$, one of the $X_{i}$'s is infinite and thus it contains an ${\\mathsf{L}}$-large subset.\nThus, a bound for such an ${\\mathsf{L}}$-large set can be obtained by the usual compactness argument which is available within ${\\mathsf{WKL_0}}$.\n\\end{proof}\nNote that the use of ${\\mathrm{B}\\Sigma^0_2}$ in the previous lemma is essential.\nIf ${\\mathrm{B}\\Sigma^0_2}$ fails, there exists a partition $X=X_{0}\\sqcup\\dots\\sqcup X_{k-1}$ such that each of the $X_{i}$'s is finite.\nThen, ${\\mathsf{L}}=\\{F\\mid {\\forall} i<k(F\\not\\subseteq X_{i})\\}$ is a largeness notion failing the lemma.\nThe use of~${\\mathsf{WKL_0}}$ is not essential since the argument can be formalized within~${\\mathrm{RWKL}}+{\\mathrm{B}\\Sigma^0_2}$,\nwhere~${\\mathrm{RWKL}}$ denotes the Ramsey-type weak K\\\"onig's lemma introduced by Flood~\\cite{Flood2012Reverse}.\n\n\\subsection{$\\alpha$-largeness}\n\nFrom now on, we fix a primitive recursive notation for ordinals below $\\epsilon_{0}$.\nIn this paper, we actually use ordinals of the form $\\alpha=\\sum_{i<k}\\bbomega^{n_{i}}<\\bbomega^{\\bbomega}$ \nwhere $n_{i}\\in{\\mathbb{N}}$ and $n_{0}\\ge\\dots\\ge n_{k-1}$. (We write $1$ for $\\bbomega^{0}$, and $\\bbomega^{n}\\cdot k$ for $\\sum_{i<k}\\bbomega^{n}$.)\nFor a given $\\alpha<\\bbomega^{\\bbomega}$ and $m\\in {\\mathbb{N}}$, define $0[m]=0$, $\\alpha[m]=\\beta$ \nif $\\alpha=\\beta+1$ and $\\alpha[m]=\\beta+\\bbomega^{n-1}\\cdot m$ if $\\alpha=\\beta+\\bbomega^{n}$ for some $n\\ge 1$.\n\n\\begin{defi}[${\\mathrm{I}\\Sigma^0_1}$]\nLet $\\alpha<\\bbomega^{\\bbomega}$. A set $X = \\{ x_0 < \\dots < x_{\\ell-1} \\}\\subseteq_{{\\mathrm{fin}}}{\\mathbb{N}}$ \nis said to be \\emph{$\\alpha$-large} if $\\alpha[x_{0}]\\dots[x_{\\ell-1}]=0$. \nIn other words, any finite set is $0$-large, and $X$ is said to be $\\alpha$-large if\n\\begin{itemize}\n \\item $X\\setminus \\{\\min X\\}$ is $\\beta$-large if $\\alpha=\\beta+1$,\n \\item $X\\setminus \\{\\min X\\}$ is $(\\beta+\\bbomega^{n-1}\\cdot\\min X)$-large if $\\alpha=\\beta+\\bbomega^{n}$.\n\\end{itemize}\nWe let ${\\mathsf{L}}_{\\alpha}=\\{X\\subseteq_{{\\mathrm{fin}}} {\\mathbb{N}}\\mid X$ is $\\alpha$-large$\\}$.\n\\end{defi}\n\nIn particular, a set~$X$ is $m$-large iff $|X| \\geq m$ and $\\bbomega$-large iff $|X| > \\min X$.\nSee~\\cite{Ha-Pu} for the general definition of $\\alpha$-largeness.\nOne can easily see that if $X\\subseteq Y$ for some $\\alpha$-large set~$X$ and some finite set~$Y$, \nthen $Y$ is $\\alpha$-large.\n\n\nWe say that $X$ is \\emph{$\\alpha$-small} if it is not $\\alpha$-large.\nThe following basic combinatorics have been proven in~\\cite[Theorem~II.3.21]{Ha-Pu} in their full generality.\n\n\\begin{lem}[${\\mathrm{I}\\Sigma^0_1}$]\\label{lem-alpha-large-sum}\\label{lem-alpha-small-sum}\nFix any $k,n\\in{\\mathbb{N}}$.\n\\begin{itemize}\n\t\\item[(i)] A set $X$ is $\\bbomega^{n}\\cdot k$-large if and only \n\tif it is a union of some $\\bbomega^{n}$-large finite sets $X_{0} < \\dots < X_{k-1}$.\n\t\\item[(ii)] A set $X$ is $\\bbomega^{n}\\cdot k$-small \n\tif it is a union of $\\bbomega^n$-small finite sets $X_{0} < \\dots < X_{k-1}$.\n\\end{itemize}\n\\end{lem}\n\nIn particular, $\\{k\\}\\cup X_{0}\\cup\\dots\\cup X_{k-1}$ is $\\bbomega^{n+1}$-large \nif each of $X_{i}$ is $\\bbomega^{n}$-large and $k<X_{0} < \\dots < X_{k-1}$.\nSimilarly, if $\\{k\\}\\cup X_{0}\\cup\\dots\\cup X_{k-1}$ is $\\bbomega^{n+1}$-large \nand $k<X_{0} < \\dots < X_{k-1}$, then one of $X_{i}$'s is $\\bbomega^{n}$-large.\n\nThe following theorem corresponds to the well-known fact that the proof-theoretic ordinal of ${\\mathrm{I}\\Sigma^0_1}$ is $\\omega^{\\omega}$.\n\n\\begin{thm}\\label{thm-omega-largeness}\nFor any $n\\in\\omega$, ${\\mathrm{I}\\Sigma^0_1}$ proves that ${\\mathsf{L}}_{\\bbomega^{n}}$ is a regular largeness notion.\n\\end{thm}\n\\begin{proof}\n One can easily check the regularity within ${\\mathrm{I}\\Sigma^0_1}$.\nWe will see that ${\\mathrm{I}\\Sigma^0_1}\\vdash$ ``any infinite set contains an $\\bbomega^{n}$-large subset'' by (external) induction.\nThe case $n=0$ is trivial.\nWe show the case $n=k+1$.\nWithin ${\\mathrm{I}\\Sigma^0_1}$, let an infinite set $X$ be given.\nThen, by the induction hypothesis and $\\Sigma^{0}_{1}$-induction, one can find $\\min X$-many $\\bbomega^{k}$-large sets $F_{i}\\subseteq X$\nsuch that $\\min X<F_{0} < \\dots < F_{\\min X-1}$.\nBy Lemma~\\ref{lem-alpha-large-sum} and the discussion below it, $\\{\\min X\\}\\cup F_{0}\\cup\\dots\\cup F_{\\min X-1}$ is $\\bbomega^{k+1}$-large.\n\\end{proof}\n\n\\subsection{Largeness for Ramsey-like statements}\n\nMany Ramsey-type theorems studied in reverse mathematics\nare statements of the form ``For every coloring $f: [{\\mathbb{N}}]^n \\to k$,\nthere is an infinite set~$H$ satisfying some structural properties''.\nThe most notable example is Ramsey's theorem, which asserts for every coloring $f : [{\\mathbb{N}}]^n \\to k$\nthe existence of an infinite $f$-homogeneous set.\nThese statements can be seen as \\emph{mathematical problems},\nwhose \\emph{instances} are coloring, and whose \\emph{solutions}\nare the sets satisfying the desired structural properties.\n\n\\begin{definition}\\label{def-R-like-and-rest}\nA \\emph{Ramsey-like-$\\Pi^1_2$-formula} is a $\\Pi^1_2$-formula of the form\n\n", "index": 1, "text": "$$\n\t(\\forall f:[{\\mathbb{N}}]^{n}\\to k)(\\exists Y)(Y\\mbox{ is infinite}\\wedge \\Psi(f,Y))\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex6.m1\" class=\"ltx_Math\" alttext=\"(\\forall f:[{\\mathbb{N}}]^{n}\\to k)(\\exists Y)(Y\\mbox{ is infinite}\\wedge\\Psi(%&#10;f,Y))\" display=\"block\"><mrow><mrow><mo stretchy=\"false\">(</mo><mo>\u2200</mo><mi>f</mi><mo>:</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>\u2115</mi><mo stretchy=\"false\">]</mo></mrow><mi>n</mi></msup><mo>\u2192</mo><mi>k</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mo>\u2203</mo><mi>Y</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mi>Y</mi><mtext>\u00a0is infinite</mtext><mo>\u2227</mo><mi mathvariant=\"normal\">\u03a8</mi><mrow><mo stretchy=\"false\">(</mo><mi>f</mi><mo>,</mo><mi>Y</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></math>", "type": "latex"}, {"file": "1601.00050.tex", "nexttext": "\nNow ${\\mathrm{GP}}^{n}_{k}({\\mathsf{L}})$ (grouping principle for ${\\mathsf{L}}$) asserts \nthat for any coloring $f:[{\\mathbb{N}}]^{n}\\to k$, there exists an infinite ${\\mathsf{L}}$-grouping for $f$.\nWe write ${\\mathrm{GP}}^{n}_{k}$ for the statement saying that for any largeness notion \n${\\mathsf{L}}$, ${\\mathrm{GP}}^{n}_{k}({\\mathsf{L}})$ holds, ${\\mathrm{GP}}^{n}$ for ${\\forall} k{\\mathrm{GP}}^{n}_{k}$, \nand ${\\mathrm{GP}}$ for ${\\forall} n{\\mathrm{GP}}^{n}$.\n\\end{definition}\n\n\nNote that being a largeness notion is a $\\Pi^1_1$-statement. Therefore, an \\emph{instance}\nof~${\\mathrm{GP}^{2}_{2}}$ is a pair~$\\langle {\\mathsf{L}}, f \\rangle$ where ${\\mathsf{L}}$ is a collection of finite sets,\nand $f : [{\\mathbb{N}}]^2 \\to 2$ is a coloring.  A \\emph{solution} to an instance $\\langle {\\mathsf{L}}, f \\rangle$\nis either an ${\\mathsf{L}}$-grouping for~$f$, or an infinite set witnessing that ${\\mathsf{L}}$ is not a largeness notion,\nthat is, an infinite set with no finite subset in~${\\mathsf{L}}$.\n\n\nIn order to simplify the analysis of Ramsey's theorem for pairs,\nCholak, Jockusch and Slaman~\\cite{CJS01} split the proof of~${\\mathrm{RT}}^2_2$ into \\emph{cohesiveness}\nand a stable restriction of ${\\mathrm{RT}}^2_2$. A coloring $f : [{\\mathbb{N}}]^2 \\to k$ is \\emph{stable}\nif for every~$x$, $\\lim_y f(x, y)$ exists. ${\\mathrm{SRT}}^2_k$ is the restriction of ${\\mathrm{RT}}^2_2$ to stable colorings.\n\n\\begin{defi}[Cohesiveness]\nAn infinite set $C$ is $\\vec{R}$-cohesive for a sequence of sets $R_0, R_1, \\dots$\nif for each $i \\in {\\mathbb{N}}$, $C \\subseteq^{*} R_i$ or $C \\subseteq^{*} \\overline{R_i}$.\n${\\mathrm{COH}}$ is the statement ``Every uniform sequence of sets $\\vec{R}$\nhas an $\\vec{R}$-cohesive set.''\n\\end{defi}\n\nCohesiveness is a statement from standard computability theory.\nCholak, Jockusch and Slaman~\\cite{CJS01} claimed with an erroneous proof that it is a strict consequence of ${\\mathrm{RT}}^2_2$\nover~${\\mathsf{RCA_0}}$. Mileti~\\cite{Mileti2004Partition} fixed the proof. Hirschfeldt and Shore~\\cite{HS2007}\nproved that ${\\mathrm{COH}}$ is a consequence of~${\\mathrm{ADS}}$. Since then, many statements in reverse mathematics\nhave been split into their cohesive and their stable part~\\cite{HS2007}.\nAccordingly, we will consider  the stable version ${\\mathrm{SGP}^{2}_{2}}$ which stands for ${\\mathrm{GP}^{2}_{2}}$ for stable colorings.\nOne can prove that~${\\mathsf{RCA_0}} \\vdash {\\mathrm{COH}} + {\\mathrm{SGP}^{2}_{2}} \\rightarrow {\\mathrm{GP}^{2}_{2}}$ by the same argument\nas ${\\mathsf{RCA_0}} \\vdash {\\mathrm{COH}} + {\\mathrm{SRT}}^2_2 \\rightarrow {\\mathrm{RT}}^2_2$ ~\\cite{CJS01}. \nStable Ramsey's theorem for pairs admits a nice computability-theoretic characterization\nin terms of infinite subsets of a $\\Delta^0_2$ set.\nWe can give a similar characterization for the stable grouping principle for pairs.\n\n\\begin{definition}[${\\mathsf{RCA_0}}$]\nGiven a largeness notion~${\\mathsf{L}}$, an \\textit{${\\mathsf{L}}$-grouping} for a set~$A$ \nis an infinite family of ${\\mathsf{L}}$-large finite sets\n$\\{F_0 < F_1 < \\dots \\} \\subseteq {\\mathsf{L}}$ such that\n$(\\forall i)[F_i \\subseteq A \\vee F_i \\subseteq \\overline{A}]$\n\\end{definition}\n\nThe argument can be carried-out within ${\\mathrm{B}\\Sigma^0_2}$. Unlike ${\\mathrm{SRT}}^2_2$,\nit is currently unknown whether~${\\mathrm{SGP}^{2}_{2}}$ implies~${\\mathrm{B}\\Sigma^0_2}$ over~${\\mathsf{RCA_0}}$.\n\n\\begin{lemma}\\label{lem:stable-grouping-characterization}\n${\\mathsf{RCA_0}} + {\\mathrm{B}\\Sigma^0_2} \\vdash {\\mathrm{SGP}^{2}_{2}}({\\mathsf{L}}) \\leftrightarrow$ ``Every $\\Delta^0_2$ set has an infinite~${\\mathsf{L}}$-grouping''.\n\\end{lemma}\n\nWe will now show the existence of an $\\omega$-model of ${\\mathrm{SGP}^{2}_{2}}$ containing only low sets.\nRecall that an instance is a pair $\\langle {\\mathsf{L}}, f \\rangle$,\nand a solution is either a witness that ${\\mathsf{L}}$ is not a largeness notion, or an ${\\mathsf{L}}$-grouping for~$f$.\nWe need therefore to show that given any computable collection of finite sets~${\\mathsf{L}}$\nand any $\\Delta^0_2$ set~$A$, there is either an infinite low set~$Y$ witnessing that\n${\\mathsf{L}}$ is not a largeness notion, or a low ${\\mathsf{L}}$-grouping for~$A$.\nIn what follows, we denote by $\\mathsf{LOW}$ the collection of all low sets.\n\n\\begin{theorem}\\label{thm:grouping-low-solution}\nFor every computable set~${\\mathsf{L}}$ which is a largeness notion on $(\\omega, \\mathsf{LOW})$,\nevery $\\Delta^0_2$ set has an infinite low ${\\mathsf{L}}$-grouping.\n\\end{theorem}\n\\begin{proof}\nFix a $\\Delta^0_2$ set~$A$.\nWe will construct an infinite low ${\\mathsf{L}}$-grouping for~$A$ by an effective forcing notion\nwhose conditions are tuples~$c = (F_0, \\dots, F_k, X_0, \\dots, X_m)$ such that\n\\begin{itemize}\n\t\\item[(i)] $F_i \\in {\\mathsf{L}}$ and $F_i \\subseteq_{{\\mathrm{fin}}} A$ or~$F_i \\subseteq_{{\\mathrm{fin}}} \\overline{A}$ for each~$i \\leq k$,\n\t\\item[(ii)] $F_i < F_{i+1}$ for each~$i < k$,\n\t\\item[(iii)] $X_0 \\sqcup \\dots \\sqcup X_m$ is a low partition of~$\\omega$.\n\\end{itemize}\nA condition~$d = (F_0, \\dots, F_\\ell, Y_0, \\dots, Y_n)$ \\emph{extends} a condition~$c = (F_0, \\dots, F_k, X_0, \\dots, X_m)$\n(written~$d \\leq c$) if~$\\ell \\geq k$, for every~$i \\in (k, \\ell]_{{\\mathbb{N}}}$, $F_i \\subseteq X_j$ for some~$j \\leq n$ \nand~$Y_0, \\dots, Y_n$ refines $X_0, \\dots, X_m$, that is, for each~$i \\leq n$, there is some~$j \\leq m$ such that~$Y_i \\subseteq X_j$.\nAn \\emph{index} of the condition~$c$ is a tuple~$(F_0, \\dots, F_k, e)$ where~$\\Phi^{\\emptyset'}_e$ decides the jump\nof the partition~$X_0, \\dots, X_m$.\nWe first claim that the finite sequence of sets can be extended.\n\n\\begin{claim*}\nFor every condition $c = (F_0, \\dots, F_k, X_0, \\dots, X_m)$,\nthere is an extension~$d = (F_0, \\dots, F_\\ell,\\allowbreak X_0, \\dots, X_m)$ of~$c$ such that~$\\ell > k$.\nMoreover, an index of~$d$ can be found $\\emptyset'$-uniformly in an index of~$c$.\n\\end{claim*}\n\\begin{proof}[\\it Proof of the claim]\nWe first show that there is a set~$F > F_k$ such that~$F \\in {\\mathsf{L}} \\cap X_i$ for some~$i \\leq n$ \nand~$F \\subseteq A$ or~$F \\subseteq \\overline{A}$.\nLet~$i \\leq n$ be such that~$X_i$ is infinite.\nWe claim that there is some finite set~$F \\in {\\mathsf{L}}$ such that $F \\subseteq X_i \\cap A \\setminus [0, \\max(F_k)]_{{\\mathbb{N}}}$\nor $F \\subseteq X_i \\cap \\overline{A} \\setminus [0, \\max(F_k)]_{{\\mathbb{N}}}$.\nSuppose for the sake of contradiction that there is no such set. Then the $\\Pi^{0,X_i}_1$ class\nof all sets~$Z$ such that for every $F \\in {\\mathsf{L}}$,  $F \\not\\subseteq X_i \\cap Z \\setminus [0, \\max(F_k)]_{{\\mathbb{N}}}$\nand $F \\not \\subseteq X_i \\cap \\overline{Z} \\setminus [0, \\max(F_k)]_{{\\mathbb{N}}}$ is non-empty.\nBy the low basis theorem, there is a $Z$ such that~$Z \\oplus X_i$ is low over~$X_i$,\nhence low. The set~$Z$ or its complement contradicts the fact that \n${\\mathsf{L}}$ is a largeness notion on $(\\omega, \\mathsf{LOW})$.\n\nKnowing that such a set~$F$ exists, we can find it $\\emptyset'$-uniformly in $c$ and a $\\Delta^0_2$ index of the set~$A$.\nThe condition~$(F_0, \\dots, F_k, F, X_0, \\dots, X_m)$ is a valid extension of~$c$.\nNote that such a set~$F$ does not need to be part of an infinite~$X_i \\cap A$ or~$X_i \\cap \\overline{A}$.\nThe choice of an infinite part has simply been used to claim the existence of any such set.\n\\end{proof}\n\nWe say that an ${\\mathsf{L}}$-grouping for~$A$ $\\langle E_0 < E_1 < \\dots\\rangle$ \\emph{satisfies} a condition\n$c = (F_0, \\dots, F_k, X_0, \\dots, X_m)$ if $E_0 = F_0$, \\dots, $E_k = F_k$\nand for every~$i > k$, there is some~$j \\leq m$ such that $E_i \\subseteq X_j$.\nA condition~$c$ \\emph{forces} formula $\\varphi(G)$ if $\\varphi(\\vec{E})$\nholds for every ${\\mathsf{L}}$-grouping $\\vec{E}$ satisfying~$c$.\n\n\\begin{claim*}\nFor every condition~$c$ and every index~$e \\in \\omega$, there is an extension~$d$\nforcing either~$\\Phi^G_e(e) \\downarrow$ or~$\\Phi^G_e(e) \\uparrow$. Moreover, an index of~$d$\ncan be found $\\emptyset'$-uniformly in an index of~$c$ and~$e$.\n\\end{claim*}\n\\begin{proof}[\\it Proof of the claim]\nFix a condition $c = (F_0, \\dots, F_k, X_0, \\dots, X_m)$. We have two cases.\n\nIn the first case, for every 2-partition~$Z_0 \\cup Z_1 = \\omega$,\nthere is a sequence of finite sets~$F_{k+1}, \\dots, F_\\ell$ such that\n$F_k < F_{k+1} < \\dots < F_\\ell$, $\\Phi_e^{F_0, \\dots, F_\\ell}(e) \\downarrow$,\nand for every~$i \\in (k, \\ell]$, $F_i \\in {\\mathsf{L}}$ and there is some~$j \\leq m$\n$F_i \\subseteq Z_0 \\cap X_j$ or~$F_i \\subseteq Z_1 \\cap X_j$.\nIn particular, taking~$Z_0 = A$ and~$Z_1 = \\overline{A}$, \nthere is a sequence of finite sets~$F_{k+1}, \\dots, F_\\ell$\nsuch that~$d = (F_0, \\dots, F_\\ell, X_0, \\dots, X_m)$ is a valid extension of~$c$\nand $\\Phi_e^{F_0, \\dots, F_\\ell}(e) \\downarrow$. Such an extension can be found $\\emptyset'$-uniformly in\nan index of~$c$, $e$ and a $\\Delta^0_2$ index of~$A$.\n\nIn the second case, the $\\Pi^{0, \\vec{X}}_1$ class of all the 2-partitions~$Z_0 \\cup Z_1 = \\omega$\nsuch that $\\Phi_e^{F_0, \\dots, F_\\ell}(e) \\uparrow$ for every sequence of finite sets~$F_{k+1}, \\dots, F_\\ell$ such that\n$F_k < F_{k+1} < \\dots < F_\\ell$,\nand for every~$i \\in (k, \\ell]_{{\\mathbb{N}}}$, $F_i \\in {\\mathsf{L}}$ and there is some~$j \\leq m$\n$F_i \\subseteq Z_0 \\cap X_j$ or~$F_i \\subseteq Z_1 \\cap X_j$ is non-empty.\nBy the low basis theorem~\\cite{Jockusch197201} relativized to~$\\vec{X}$, there is a such a 2-partition~$Z_0 \\cup Z_1 = \\omega$\nsuch that~$Z_0 \\oplus Z_1 \\oplus \\vec{X}$ is low. Moreover, a lowness index for~$Z_0 \\oplus Z_1 \\oplus \\vec{X}$\ncan be found uniformly in a lowness index for~$\\vec{X}$.\nThe condition~$d = (F_0, \\dots, F_k, X_0 \\cap Z_0, X_0 \\cap Z_1, \\dots, X_m \\cap Z_0, X_m \\cap Z_1)$ \nis an extension of~$c$ forcing~$\\Phi^G_e(e) \\uparrow$.\n\nMoreover, we can $\\vec{X}'$-decide (hence $\\emptyset'$-decide) whether the $\\Pi^{0, \\vec{X}}_1$ class is empty,\nthus we can find the extension~$d$ $\\emptyset'$-effectively in an index of~$c$ and~$e$.\n\\end{proof}\n\nThanks to the claims, define an infinite, \nuniformly $\\emptyset'$-computable decreasing sequence of conditions\n$c_0 = (\\varepsilon, \\omega) \\geq c_1 \\geq c_2 \\geq \\dots$, \nwhere~$c_s = (F_0, \\dots, F_{k_s}, X^s_{0}, \\dots, X^s_{m_s})$ such that for each~$s \\in \\omega$\n\\begin{itemize}\n\t\\item[(a)] $k_s \\geq s$\n\t\\item[(b)] $c_{s+1}$ forces $\\Phi^G_s(s) \\uparrow$ or~$\\Phi^G_s(s) \\downarrow$\n\\end{itemize}\nThis sequence yields a ${\\mathsf{L}}$-grouping for~$A$ $\\langle F_0, F_1, \\dots \\rangle$\nwhich is infinite by (a) and whose jump is $\\Delta^0_2$ by (b). \nThis finishes the proof of Theorem~\\ref{thm:grouping-low-solution}.\n\\end{proof}\n\n\n\\begin{corollary}\\label{cor:sgp-only-low-sets}\n${\\mathrm{SGP}^{2}_{2}} + {\\mathrm{SADS}} + {\\mathsf{WKL_0}}$ has an $\\omega$-model with only low sets.\n\\end{corollary}\n\\begin{proof}\nBy Lemma~\\ref{lem:stable-grouping-characterization} and \nand the low basis theorem~\\cite{Jockusch197201} in a relativized form.\nAs explained, for every collection~${\\mathsf{L}}$ and every stable coloring $f : [\\omega]^2 \\to 2$, one need either to add a\nlow set witnessing that ${\\mathsf{L}}$ is not a notion of largeness, or to add an infinite low ${\\mathsf{L}}$-grouping for~$f$.\n\\end{proof}\n\n\\begin{corollary}\n${\\mathsf{RCA_0}} + {\\mathrm{SGP}^{2}_{2}} + {\\mathrm{SADS}} + {\\mathsf{WKL_0}}$ implies neither~${\\mathrm{SRT}}^2_2$, nor~${\\mathrm{SEM}}$.\n\\end{corollary}\n\\begin{proof}\nDowney, Hirschfeldt, Lempp and Solomon~\\cite{Downey200102}\nbuilt a computable instance of ${\\mathrm{SRT}}^2_2$ with no low solution.\nCorollary~\\ref{cor:sgp-only-low-sets} enables us to conclude that~${\\mathsf{RCA_0}} + {\\mathrm{SGP}^{2}_{2}} + {\\mathrm{SADS}} + {\\mathsf{WKL_0}}$\ndoes not imply ${\\mathrm{SRT}}^2_2$. Since~${\\mathsf{RCA_0}} + {\\mathrm{SADS}} + {\\mathrm{SEM}}$ implies~${\\mathrm{SRT}}^2_2$ (see \\cite{Lerman2013Separating})\nthen ${\\mathsf{RCA_0}} + {\\mathrm{SGP}^{2}_{2}} + {\\mathrm{SADS}} + {\\mathsf{WKL_0}}$ does not imply ${\\mathrm{SEM}}$.\n\\end{proof}\n\n\nAmong the computability-theoretic properties used to separate\nRamsey-type theorems in reverse mathematics, the framework\nof preservation of hyperimmunity has been especially fruitful.\n\n\\begin{definition}[Hyperimmunity]\nThe \\emph{principal function} of a set $B = \\{x_0 < x_1 < \\dots \\}$ \nis the function $p_B$ defined by~$p_B(i) = x_i$ for each~$i \\in {\\mathbb{N}}$.\nA set~$X$ is \\emph{hyperimmune} if its principal function is not dominated by any\ncomputable function. \n\\end{definition}\n\nWang~\\cite{Wang2014Definability} recently used the notion of preservation\nof the arithmetic hierarchy to separate various theorems in reverse mathematics.\nThe first author showed~\\cite{Patey2015Iterative} that a former separation\nof the Erd\\H{o}s-Moser theorem from stable Ramsey's theorem for pairs\ndue to Lerman, Solomon and Towsner~\\cite{Lerman2013Separating}\ncould be reformulated in a similar framework, yielding the notion\nof preservation of hyperimmunity.\n\n\\begin{defi}[Preservation of hyperimmunity]\nA $\\Pi^1_2$-statement~${\\mathsf{P}}$ \\emph{admits preservation of hyperimmunity} if for each set~$Z$, \neach $Z$-hyperimmune sets~$A_0, A_1, \\dots$,\nand each ${\\mathsf{P}}$-instance $X \\leq_T Z$,\nthere is a solution $Y$ to~$X$ such that the~$A$'s are $Y \\oplus Z$-hyperimmune.\n\\end{defi}\n\nIn particular, if a $\\Pi^1_2$-statement ${\\mathsf{P}}$\nadmits preservation of hyperimmunity but another statement~${\\mathsf{Q}}$ does not,\nthen ${\\mathsf{P}}$ does not imply~${\\mathsf{Q}}$ over~${\\mathsf{RCA_0}}$.\nWe now show that the grouping principle enjoys preservation of hyperimmunity\nand deduce several separations from it.\n\n\\begin{theorem}\\label{thm:sgp22-preservation-hyperimmunity}\n${\\mathrm{SGP}^{2}_{2}}$ admits preservation of hyperimmunity.\n\\end{theorem}\n\\begin{proof}\nLet~$C$ be a set and~$B_0, B_1, \\dots$ be a sequence of $C$-hyperimmune sets.\nLet~$S$ be the collection of all sets~$X$ such that the~$B$'s are $X \\oplus C$-hyperimmune.\nBy Lemma~\\ref{lem:stable-grouping-characterization}, it suffices to show that for every\n$\\Delta^{0,C}_2$ set~$A$ and every $C$-computable largeness notion~${\\mathsf{L}}$ on $(\\omega, S)$\nthere is an infinite ${\\mathsf{L}}$-grouping $\\vec{F} = \\langle F_0 < F_1 < \\dots \\rangle$ for~$A$\nsuch that the~$B$'s are $\\vec{F} \\oplus C$-hyperimmune.\nTherefore, every instance $\\langle {\\mathsf{L}}, A \\rangle$ will have a solution $Y \\in S$,\nwhich will be either a witness that ${\\mathsf{L}}$ is not a largeness notion, or an ${\\mathsf{L}}$-grouping for~$A$.\n\nFix~$A$ and~${\\mathsf{L}}$.\nWe will construct an infinite ${\\mathsf{L}}$-grouping for~$A$ by a forcing argument\nwhose conditions are tuples~$(F_0, \\dots, F_k, X)$ where\n\\begin{itemize}\n\t\\item[(i)] $F_i \\in {\\mathsf{L}}$ and $F_i \\subseteq_{{\\mathrm{fin}}} A$ or~$F_i \\subseteq_{{\\mathrm{fin}}} \\overline{A}$ for each~$i \\leq k$.\n\t\\item[(ii)] $F_i < F_{i+1}$ for each~$i < k$\n\t\\item[(iii)] $X$ is an infinite set such that the~$B$'s are~$X \\oplus C$-hyperimmune.\n\\end{itemize}\nA condition~$d = (F_0, \\dots, F_\\ell, Y)$ \\emph{extends} a condition~$c = (F_0, \\dots, F_k, X)$\n(written~$d \\leq c$) if~$\\ell \\geq k$ and for every~$i \\in (k, \\ell]_{{\\mathbb{N}}}$, $F_i \\subseteq X$.\nThe proof of the following claim is exactly the same as in Theorem~\\ref{thm:grouping-low-solution},\nusing the hyperimmune-free basis theorem instead of the low basis theorem.\n\n\\begin{claim*}\nFor every condition $c = (F_0, \\dots, F_k, X)$,\nthere is an extension~$d = (F_0, \\dots, F_\\ell, Y)$ of~$c$ such that~$\\ell > k$.\n\\end{claim*}\n\nThe following claim shows that every sufficiently generic filter yields a sequence~$\\vec{F}$\nsuch that the~$B$'s are~$\\vec{F} \\oplus C$-hyperimmune. The notion of satisfaction and of forcing\na formula $\\varphi(G)$ are defined as in Theorem~\\ref{thm:grouping-low-solution}.\n\n\\begin{claim*}\nFor every condition~$c$ and every pair of indices~$e,i \\in \\omega$, there is an extension~$d$\nforcing $\\Phi^{G \\oplus C}_e$ not to dominate~$p_{B_i}$.\n\\end{claim*}\n\\begin{proof}[\\it Proof of the claim]\nFix a condition $c = (F_0, \\dots, F_k, X)$.\nLet $f$ be the function which on input~$x$, searches \nfor a finite set of integers~$U$ such that for every 2-partition~$Z_0 \\cup Z_1 = X$,\nthere is some finite sequence of sets~$F_{k+1}, \\dots, F_\\ell$ such that\n$F_k < \\dots < F_\\ell$, $\\Phi^{(F_0, \\dots, F_\\ell) \\oplus C}_e(x) \\downarrow \\in U$\nand for every~$i \\in (k, \\ell]_{{\\mathbb{N}}}$, $F_i \\in {\\mathsf{L}} \\cap Z_0$ or~$F_i \\in {\\mathsf{L}} \\cap Z_1$.\nIf such a set~$U$ is found, $f(x) =  1 + max(U)$, otherwise~$f(x) \\uparrow$.\nThe function~$f$ is partial $X \\oplus C$-computable. We have two cases.\n\\begin{itemize}\n\t\\item Case 1: $f$ is total. By $X \\oplus C$-hyperimmunity of~$B_i$,\n\tthere is some~$x$ such that~$f(x) \\leq p_{B_i}(x)$. Let~$U$ be the finite set\n\twitnessing~$f(x) \\downarrow$. By taking~$Z_0 = X \\cap A$ and~$Z_1 = X \\cap \\overline{A}$,\n\tthere is a finite sequence of sets~$F_{k+1}, \\dots, F_\\ell$ such that\n\t$\\Phi^{(F_0, \\dots, F_\\ell) \\oplus C}_e(x) \\downarrow \\in U$\n\tand~$d = (F_0, \\dots, F_\\ell, X)$ is a valid extension of~$c$.\n\tThe condition $d$ forces~$\\Phi^{G \\oplus C}_e(x) < f(x)$.\n\n\t\\item Case 2: there is some~$x$ such that~$f(x) \\uparrow$.\n\tBy compactness, the $\\Pi^{0, X \\oplus C}_1$ class~$\\mathcal{C}$ of sets~$Z_0 \\oplus Z_1$\n\tsuch that~$Z_0 \\cup Z_1 = X$ and $\\Phi^{(F_0, \\dots, F_\\ell) \\oplus C}_e(x) \\uparrow$ \n\tfor every finite sequence of sets~$F_{k+1}, \\dots, F_\\ell$ such that\n\t$F_k < \\dots < F_\\ell$ and for every~$i \\in (k, \\ell]_{{\\mathbb{N}}}$, $F_i \\in {\\mathsf{L}} \\cap Z_0$ or~$F_i \\in {\\mathsf{L}} \\cap Z_1$\n\tis not empty. By the hyperimmune-free basis theorem~\\cite{Jockusch197201}, there exists some partition~$Z_0 \\oplus Z_1 \\in \\mathcal{C}$\n\tsuch that the~$B$'s are $Z_0 \\oplus Z_1 \\oplus C$-hyperimmune. The set~$Z_j$ is infinite for some~$j < 2$\n\tand the condition $d = (F_0, \\dots, F_k, Z_{j})$ is an extension of~$c$ forcing~$\\Phi_e^{G \\oplus C}(x) \\uparrow$.\n\\end{itemize} \n\\end{proof}\n\nLet~$\\mathcal{F}$ be a sufficiently generic filter for this notion of forcing.\nThe filter $\\mathcal{F}$ yields a sequence~$\\vec{F} = \\langle F_0, F_1, \\dots \\rangle$ \nwhich is infinite by the first claim, and such that the~$B$'s are $\\vec{F} \\oplus C$-hyperimmune by the second claim.\nThis finishes the proof of Theorem~\\ref{thm:sgp22-preservation-hyperimmunity}.\n\\end{proof}\n\n\\begin{corollary}\n${\\mathsf{RCA_0}} + {\\mathrm{GP}^{2}_{2}} + {\\mathrm{COH}} + {\\mathrm{EM}} + {\\mathsf{WKL_0}}$ does not imply ${\\mathrm{ADS}}$. \n\\end{corollary}\n\\begin{proof}\nBy the hyperimmune-free basis theorem~\\cite{Jockusch197201}, ${\\mathsf{WKL_0}}$ admits preservation of hyperimmunity.\nThe first author proved in~\\cite{Patey2015Iterative} that~${\\mathrm{COH}}$ and ${\\mathrm{EM}}$ admit preservation of hyperimmunity,\nbut that ${\\mathrm{ADS}}$ does not. Last, ${\\mathrm{GP}^{2}_{2}}$ admits preservation of hyperimmunity\nsince ${\\mathrm{COH}}+{\\mathrm{SGP}^{2}_{2}}$ implies~${\\mathrm{GP}^{2}_{2}}$ over~${\\mathsf{RCA_0}}$.\n\\end{proof}\n\n\\begin{definition}[Diagonally non-computable function]\nA function $f$ is \\emph{diagonally non-computable} (d.n.c.) relative to~$X$ if for every~$e$, $f(e) \\neq \\Phi_e^X(e)$.\n${\\mathrm{2\\mbox{-}DNC}}$ is the statement ``For every set~$X$, there is a function d.n.c.\\ relative to the jump of~$X$''.\n\\end{definition}\n\nBeware, the notation ${\\mathrm{2\\mbox{-}DNC}}$ may cause some confusion with ${\\mathrm{DNC}}_2$, the restriction to $\\{0,1\\}$-valued d.n.c.\\ functions\nwhich is equivalent to~${\\mathsf{WKL_0}}$ over~${\\mathsf{RCA_0}}$. \nThe following proof is an adaptation of the proof that the Erd\\H{o}s-Moser implies~${\\mathrm{2\\mbox{-}DNC}}$\nover~${\\mathsf{RCA_0}}$~\\cite{Patey2015Somewhere}.\n\n\\begin{theorem}\n${\\mathsf{RCA_0}} \\vdash {\\mathrm{GP}^{2}_{2}}({\\mathsf{L}}_\\bbomega) \\rightarrow {\\mathrm{2\\mbox{-}DNC}}$\n\\end{theorem}\n\\begin{proof}\nFix a set~$X$. Let $g(.,.)$ be a total $X$-computable function \nsuch that $\\Phi_e^{X'}(e)=\\lim_s g(e,s)$ if the limit exists, \nand $\\Phi^{X'}_e(e) \\uparrow$ if the limit does not exist.\nAlso fix for each~$e \\in {\\mathbb{N}}$ an enumeration $D_{e,0}, D_{e,1}, \\dots$ of all finite sets of cardinal $3^{e+1}$.\nWe define the function $f : [{\\mathbb{N}}]^2 \\to 2$ by primitive recursion.\nLet~$f_0$ be the function nowhere defined.\nAt stage~$s+1$, do the following. Start with $f_{s+1}=f_s$. \nThen, for each $e<s$, take the first pair $\\{x,y\\} \\in [(D_{e,g(e,s)} \\cap [0,s)_{{\\mathbb{N}}}) \\setminus \\bigcup_{k<e} D_{k,g(k,s)}]^{2}$ \nif it exists, and set~$f_{s+1}(x,s) = 0$ and~$f_{s+1}(y,s) = 1$. \nFinally, set $f(z, s) = 0$ for any $z<s$ such that $f_{s+1}(s,z)$ remains undefined.\nThis finishes the construction of $f_{s+1}$. \nNote that $f_{s}$ is defined on $[[0,s]_{{\\mathbb{N}}}]^2$.\nThus, $f=\\bigcup_s f_s$ must exist and is total on $[{\\mathbb{N}}]^{2}$.\n\nBy ${\\mathrm{GP}^{2}_{2}}({\\mathsf{L}}_\\bbomega)$, let $\\vec{F} = \\langle F_0, F_1, \\dots \\rangle$ \nbe an infinite ${\\mathsf{L}}_\\bbomega$-grouping for $f$.\nLet $h(e)$ be such that $D_{e, h(e)} \\subseteq F$ for some $F \\in \\vec{F}$. Such an~$F$\nexists since $D_{e, 0}, D_{e,1}, \\dots$ enumerates all finite sets of cardinality $3^{e+1}$,\nand $\\vec{F}$ contains sets of arbitrary size.\nWe claim that $h(e) \\not=\\Phi_e^{X'}(e)$ for all~$e$, which would prove ${\\mathrm{2\\mbox{-}DNC}}$. \nSuppose otherwise, i.e., suppose that $\\Phi_e^{X'}(e)=h(e)$ for some~$e$. Let~$F \\in \\vec{F}$\nbe such that~$D_{e,h(e)} \\subseteq F$.\nThen there is a stage $s_0$ such that $h(e)=g(e,s)$ for all~$s \\geq s_0$ or equivalently \n$D_{e,g(e,s)}=D_{e,h(e)} \\subseteq F$ for all~$s \\geq s_0$. We claim that for any $s$ be bigger than both \n$\\max(F)$ and $s_0$, there are some~$x, y \\in D_{e,h(e)} \\subseteq F$ such that~$f(x,s) \\neq f(y,s)$, which\ncontradicts the fact that~$\\vec{F}$ is an ${\\mathsf{L}}_\\bbomega$-grouping for~$f$.\n\nTo see this, let $s$ be such a stage. At that stage~$s$ of the construction of $f$, \na pair $\\{x,y\\} \\in [(D_{e,g(e,s)} \\cap [0,s)_{{\\mathbb{N}}}) \\setminus \\bigcup_{k<e} D_{k,g(k,s)}]^{2}$ is selected \nby a cardinality argument since $|D_{e,s} \\cap [0,s)_{{\\mathbb{N}}}| = |D_{e,s}| = 3^{e+1} > \\sum_{k < e} 3^{k+1} = |\\bigcup_{k<e} D_{k,g(k,s)}|$.\nSince $D_{e,g(e,s)} = D_{e,h(e)} \\subseteq F$, this pair is contained in $F$. \nAt this stage, we set~$f(x,s) \\neq f(y,s)$, therefore, $\\vec{F}$ is not an ${\\mathsf{L}}_\\bbomega$-grouping for~$f$, contradiction.\n\\end{proof}\n\nIn particular, ${\\mathrm{SRT}}^2_2$ does not imply ${\\mathrm{GP}^{2}_{2}}({\\mathsf{L}}_\\bbomega)$ over~${\\mathsf{RCA_0}}$\nsince Chong, Slaman and Yang~\\cite{CSY2014} built a (non-standard) model of~${\\mathrm{SRT}}^2_2 + {\\mathrm{B}\\Sigma^0_2}$\ncontaining only low sets, whereas provably in ${\\mathsf{RCA_0}}$, \nthere is no $\\Delta^0_2$ d.n.c.\\ function relative to~$\\emptyset'$.\n\n\\begin{definition}[Rainbow Ramsey theorem]\nFix $n, k \\in {\\mathbb{N}}$. A coloring function $f: [{\\mathbb{N}}]^n \\to {\\mathbb{N}}$ is \\emph{$k$-bounded}\nif for every $y \\in {\\mathbb{N}}$, ${\\mathop{\\mathrm{card}}\\nolimits}{f^{-1}(y)} \\leq k$. A set $R$ is a \\emph{rainbow} for $f$ (or an \\emph{$f$-rainbow})\nif $f$ is injective over~$[R]^n$.\n${\\mathrm{RRT}}^n_k$ is the statement ``Every $k$-bounded function $f : [{\\mathbb{N}}]^n \\to {\\mathbb{N}}$\nhas an infinite $f$-rainbow''.\n\\end{definition}\n\nMiller~\\cite{MillerAssorted} proved that the statement~${\\mathrm{2\\mbox{-}DNC}}$ is equivalent to the rainbow Ramsey theorem\nfor pairs (${\\mathrm{RRT}}^2_2$) over~${\\mathsf{RCA_0}}$. \n\n\\begin{corollary}\n${\\mathsf{RCA_0}} \\vdash {\\mathrm{GP}^{2}_{2}} \\rightarrow {\\mathrm{RRT}}^2_2$.\n\\end{corollary}\n\nSeetapun and Slaman~\\cite{Seetapun1995strength} defined a \\emph{Cardinality scheme}\nfor a set of formulas~$\\Gamma$ as follows. For every~$\\varphi(x,y) \\in \\Gamma$,\n$\\mathrm{C}\\Gamma$ contains the universal closure of the formula ``If $\\varphi(x, y)$ defines\nan injective function, then its range is unbounded''. \nConidis and Slaman~\\cite{Conidis2013Random} proved\nthat the rainbow Ramsey theorem for pairs implies the $\\Sigma_2$ cardinality scheme (${\\mathrm{C}\\Sigma}_2$).\n\n\\begin{corollary}\n${\\mathsf{RCA_0}} \\vdash {\\mathrm{GP}^{2}_{2}} \\rightarrow {\\mathrm{C}\\Sigma}_2$.\n\\end{corollary}\n\nIn particular, this shows that ${\\mathrm{GP}^{2}_{2}}$ is not $\\Pi^1_1$-conservative \nover~${\\mathsf{RCA_0}}+{\\mathrm{I}\\Sigma^0_1}$ since a Skolem hull argument shows\nthat ${\\mathrm{C}\\Sigma}_2$ is not provable in~${\\mathrm{I}\\Sigma_1}$ (see Seetapun and Slaman~\\cite{Seetapun1995strength}).\n\n\n\\section{Conservation theorem for ${\\mathrm{GP}^{2}_{2}}$}\\label{section-GP-con}\nIn this section, we will prove a conservation result for the grouping principle.\nTo calculate the size of $\\alpha$-large(${\\mathrm{EM}}$) sets in Section~\\ref{section-RT22}, we will use a finite version of the grouping principle within ${\\mathrm{I}\\Sigma^0_1}$.\nInstead of proving the finite grouping principle within ${\\mathrm{I}\\Sigma^0_1}$ directly, we would like to show a conservation theorem for the infinite grouping principle over ${\\mathrm{I}\\Sigma^0_1}$.\n\nIn Section~\\ref{section-GP}, we have seen that ${\\mathrm{SGP}^{2}_{2}}$ has an $\\omega$-model with only low sets.\nIt is well-known that a low solution construction is often able to be converted into a forcing construction of a solution satisfying $\\Sigma^{0}_{1}$-induction within a countable nonstandard model, which leads to a $\\Pi^{1}_{1}$-conservation over ${\\mathrm{I}\\Sigma^0_1}$.\nUnfortunately, our construction of a low solution for ${\\mathrm{SGP}^{2}_{2}}$ in Section~\\ref{section-GP} requires ${\\mathrm{B}\\Sigma^0_2}$ and thus it is not formalizable within ${\\mathrm{I}\\Sigma^0_1}$.\nTo overcome this situation, we show a general conservation theorem characterized by using recursively saturated models.\n\\begin{thm}\\label{thm-con-Bn+1-vs-In}\nFix $n\\ge 1$.\nLet $\\Gamma$ be a formula of the form ${\\forall} X {\\exists} Y \\theta(X,Y)$ where $\\theta$ is $\\Pi^{0}_{n+1}$.\nThen, ${\\mathsf{RCA_0}}+{\\mathrm{B}\\Sigma^0_{n}}[n+1]+\\Gamma$ is a $\\tilde\\Pi^{0}_{n+2}$-conservative extension of ${\\mathrm{I}\\Sigma^0_{n}}$ if the following condition holds:\n\\begin{itemize}\n  \\item[$(\\dag)$] for any countable recursively saturated model $(M,S)\\models {\\mathrm{B}\\Sigma^0_{n}}[n+1]$ such that $S$ is finite and for any $X\\in S$, there exists $Y\\subseteq M$ such that $(M,S\\cup\\{Y\\})\\models {\\mathrm{I}\\Sigma^0_{n}}+\\theta(X,Y)$.\n\\end{itemize}\n\\end{thm}\n\nTo show this theorem, we use the following property of recursively saturated models and resplendent models, which are introduced by Barwise and Schlipf.\nSee \\cite{Barwise-Schlipf} for the historical information of recursively saturated models and resplendent models.\n\\begin{thm}[see Sections~1.8 and 1.9 of \\cite{Kossak-Schmerl}]\\label{thm-c-resplendency}\nLet $\\mathcal{L}\\supseteq \\mathcal{L}_{{\\mathrm{PA}}}$ be a finite language, and let $\\mathcal{M}$ be a countable $\\mathcal{L}$-structure. Then the following are equivalent.\n\\begin{enumerate}\n \\item $\\mathcal{M}$ is recursively saturated.\n \\item $\\mathcal{M}$ is resplendent, \\textit{i.e.}, for any recursive set of sentences $T$ of a finite language $\\mathcal{L}'\\supseteq\\mathcal{L}$ such that $\\mathrm{Th}(\\mathcal{M})\\cup T$ is consistent, there exists an expansion $\\mathcal{M}'$ of $\\mathcal{M}$ such that $\\mathcal{M}'\\models T$.\n \\item $\\mathcal{M}$ is chronically resplendent, \\textit{i.e.}, $\\mathcal{M}$ is resplendent with the extra condition that the expansion $\\mathcal{M}'$ is resplendent as an $\\mathcal{L}'$-structure.\n\n\n\\end{enumerate}\n\\end{thm}\n\n\\begin{proof}[Proof of Theorem~\\ref{thm-con-Bn+1-vs-In}.]\nLet $\\Gamma\\equiv{\\forall} X {\\exists} Y \\theta(X,Y)$ where $\\theta$ is $\\Pi^{0}_{n+1}$ satisfy the condition $(\\dag)$, and let $\\varphi_{0}\\equiv{\\forall} X {\\forall} x\\varphi(X,x)$ be a $\\tilde\\Pi^{0}_{n+2}$-sentence where $\\varphi$ is $\\Sigma^{0}_{n+1}$.\nWe will show that ${\\mathrm{I}\\Sigma^0_{n}}\\not\\vdash \\varphi_{0}$ implies that ${\\mathsf{RCA_0}}+{\\mathrm{B}\\Sigma^0_{n}}[n+1]+\\Gamma\\not\\vdash \\varphi_{0}$.\nAssume that ${\\mathrm{I}\\Sigma^0_{n}}\\not\\vdash \\varphi_{0}$, and take a countable recursively saturated model $(M,S)\\models{\\mathrm{I}\\Sigma^0_{n}}$ such that $(M,S)\\models\\neg\\varphi_{0}$.\nThen, there exists $a\\in M$ and $A\\in S$ such that $(M,\\{A\\})\\models \\neg\\varphi(A,a)$.\nWe will construct an ($\\omega$-length) sequence of cuts $M=I_{0}\\supseteq_{e}I_{1}\\supseteq_{e}\\dots$ and a sequence of sets $A_{i}\\subseteq I_{i}$ such that\n\\begin{itemize}\n \\item $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})\\models {\\mathrm{I}\\Sigma^0_{n}}$ and $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$ is recursively saturated,\n \\item if $i<j$, then $(I_{j},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{j})$ is a $\\Sigma^{0}_{n}$-elementary substructure of $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$, and,\n \\item $(I_{i+1},\\{A_{0},\\dots,A_{i}, Z_{i},A_{i+1}\\}{\\upharpoonright} I_{i+1})\\models \\theta(Z_{i},A_{i+1})$, where $Z_{i}$ is a $k$-th $\\Delta^{0}_{1}$-definable set in $(I_{j},\\{A_{0},\\dots,A_{j}\\}{\\upharpoonright} I_{j})$ if $i=(j,k)$.\n\\end{itemize}\nSet $I_{0}=M$ and $A_{0}=A\\oplus \\{a\\}$.\nNow, given $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$, we will first find a cut $I_{i+1}\\subsetneq_{e}I_{i}$ such that $(I_{i+1},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i+1})$ is $\\Sigma^{0}_{n}$-elementary substructure of $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$ and recursively saturated.\nLet $J_{0}$ be the set of all $\\Sigma^{0}_{n}$-definable elements in $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$.\nSince $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$ is recursively saturated, $J_{0}$ is not cofinal in $I_{i}$, thus $J=\\sup J_{0}$ forms a proper cut of $I_{i}$ and it is a $\\Sigma^{0}_{n}$-elementary substructure.\nTherefore, a recursive $\\mathcal{L}_{{\\mathrm{PA}}}\\cup\\{A_{0},\\dots, A_{i}, J\\}$-theory T saying that $(J,\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} J)$ is a $\\Sigma^{0}_{n}$-elementary proper cut of $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$ is consistent with ${\\mathrm{Th}}((I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i}))$. (One can state $\\Sigma^{0}_{n}$-elementarity by using the truth predicate.)\nThus, by the chronic resplendency of Theorem~\\ref{thm-c-resplendency}, there exists $J'\\subseteq I_{i}$ such that $(I_{i},\\{A_{0},\\dots, A_{i},J'\\}{\\upharpoonright} I_{i})$ satisfies $T$ and is recursively saturated.\nLet $I_{i+1}$ be such $J'$, then $(I_{i+1},\\{A_{0},\\allowbreak\\dots,A_{i}\\}{\\upharpoonright} I_{i+1})$ is $\\Sigma^{0}_{n}$-elementary substructure of $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$ and recursively saturated.\n\nBy Theorem~\\ref{thm-elem-cut-vs-Bn}, $(I_{i+1},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i+1})\\models{\\mathrm{B}\\Sigma^0_{n}}[n+1]$, and thus $(I_{i+1},\\{A_{0},\\dots,A_{i}, Z_{i}\\}{\\upharpoonright} I_{i+1})\\models{\\mathrm{B}\\Sigma^0_{n}}[n+1]$.\n($Z_{i}\\cap I_{i+1}$ is $\\Delta^{0}_{1}$-definable in $(I_{i+1},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i+1})$ by $\\Sigma^{0}_{n}$-elementarity.)\nThus, by the condition $(\\dag)$, there exists $B\\subseteq I_{i+1}$ such that $(I_{i+1},\\{A_{0},\\dots,A_{i}, Z_{i},B\\}{\\upharpoonright} I_{i+1})\\models\\theta(Z_{i},B)$.\nBy using chronic resplendency as above, one can re-choose $B\\subseteq I_{i+1}$ so that $(I_{i+1},\\{A_{0},\\dots,A_{i}, Z_{i},B\\}{\\upharpoonright} I_{i+1})$ is recursively saturated.\nThen, put $A_{i+1}$ as such $B$.\n\n\\begin{claim*}\n$\\bar{I}=\\bigcap_{i\\in\\omega} I_{i}$ is a cut of $M$, and $(\\bar{I},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} \\bar{I})$ is a $\\Sigma^{0}_{n}$-elementary substructure of $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$.\n\\end{claim*}\n\\begin{proof}[Proof of the claim.]\nClearly $\\bar{I}$ forms a cut, and thus it is always a $\\Sigma^{0}_{0}$-elementary substructure.\nWe show $\\Sigma^{0}_{n}$-elementarity by induction on the complexity of formulas.\nLet $0<k\\le n$ and assume that $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})\\models {\\exists} x\\psi(x,c)$ where $c\\in\\bar{I}$ and $\\psi$ is $\\Pi^{0}_{k-1}$.\nBy ${\\mathrm{I}\\Sigma^0_{n}}$ in $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$, take the least $d\\in I_{i}$ such that $\\psi(d,c)$ holds.\nIf $d\\notin \\bar{I}$, then there exists $j>i$ such that $d\\notin I_{j}$, thus $(I_{j},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{j})\\models \\neg{\\exists} x\\psi(x,c)$.\nThis contradicts the second condition of the construction of $I_{i}$'s, thus $d\\in \\bar{I}$.\nHence, $(\\bar{I},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} \\bar{I})\\models \\psi(d,c)$ by the induction hypothesis.\n\\end{proof}\n\nPut $\\bar{S}=\\Delta^{0}_{1}\\text{-}\\mathrm{Def}(\\bar{I},\\{A_{i}\\mid i\\in\\omega\\}{\\upharpoonright} \\bar{I})$.\nThen, by the claim and Theorem~\\ref{thm-elem-cut-vs-Bn}, $(\\bar{I},\\bar{S})\\models{\\mathsf{RCA_0}}+{\\mathrm{B}\\Sigma^0_{n}}[n+1]$.\nBy the third condition of the construction of $A_{i}$'s and the $\\Sigma^{0}_{n}$-elementarity, we have $(\\bar{I},\\bar{S})\\models\\Gamma+\\neg\\varphi(A,a)$.\nThus, ${\\mathsf{RCA_0}}+{\\mathrm{B}\\Sigma^0_{n}}[n+1]+\\Gamma\\not\\vdash \\varphi_{0}$.\n\\end{proof}\n\n\nNow, we apply Theorem~\\ref{thm-con-Bn+1-vs-In} to ${\\mathrm{SGP}^{2}_{2}}$.\nFor this, we reformulate the low solution construction for ${\\mathrm{SGP}^{2}_{2}}$ as follows.\n\\begin{lem}\\label{lem:ISig1-preservation}\nLet $(M,S_{0})$ be a countable model of ${\\mathrm{B}\\Sigma^0_2}$ such that $S_{0}$ is finite and $f:[{\\mathbb{N}}]^{2}\\to 2$ and ${\\mathsf{L}}\\subseteq[{\\mathbb{N}}]^{<{\\mathbb{N}}}$ are $\\Delta^{0}_{1}$-definable in $(M,S_{0})$.\nThen, there exists $G\\subseteq M$ such that \n\\begin{itemize}\n \\item[] $(M,S_{0}\\cup\\{G\\})\\models {\\mathrm{I}\\Sigma^0_1}+$``$G$ is a witness that ${\\mathsf{L}}$ is not a largeness notion'', or,\n \\item[] $(M,S_{0}\\cup\\{G\\})\\models {\\mathrm{I}\\Sigma^0_1}+$``$G$ is an infinite ${\\mathsf{L}}$-grouping for $A_{f}=\\{x\\in {\\mathbb{N}}\\mid \\lim_{y\\to\\infty}f(x,y)=1\\}$''.\n\\end{itemize} \n\\end{lem}\n\\begin{proof}\nLet $(M,S)$ be a countable model of ${\\mathrm{B}\\Sigma^0_2}$ such that $S_{0}$ is finite and $f:[{\\mathbb{N}}]^{2}\\to 2$ and ${\\mathsf{L}}\\subseteq[{\\mathbb{N}}]^{<{\\mathbb{N}}}$ are $\\Delta^{0}_{1}$-definable in $(M,S_{0})$.\nBy H\\'ajek\\cite{Hajek}, we can always find an $\\omega$-extension $S\\supseteq S_{0}$ such that $(M,S)\\models {\\mathrm{B}\\Sigma^0_2}+{\\mathsf{WKL_0}}$ (see also Belanger\\cite{Belanger}).\nThen, $f,{\\mathsf{L}}\\in S$.\nThus, we will work on $(M,S)$ instead of $(M,S_{0})$.\nIf ${\\mathsf{L}}$ is not a largeness notion in $(M,S)$, take a witness $G\\in S$ of not being a largeness notion, then, we have done.\nOtherwise, we will construct an infinite ${\\mathsf{L}}$-grouping for $A_{f}$.\n\nThe following construction is a ``model-theoretic interpretation'' of Theorem~\\ref{thm:grouping-low-solution}.\nTo simplify the coding, we will only consider a minimal ${\\mathsf{L}}$-sequence, \nnamely, a sequence of the form $\\langle F_{i}\\in{\\mathsf{L}}\\mid i<k \\rangle$, \n$F_{i}\\subseteq X_{0}$, $F_{i}<F_{j}$ if $i<j$ and \n$F_{i}\\setminus\\{\\max{F_{i}}\\}\\notin {\\mathsf{L}}$, \\textit{i.e.}, each $F_{i}$ is minimal.\nA code for a minimal ${\\mathsf{L}}$-sequence is a binary sequence $\\sigma\\in 2^{<M}$ \n(which is coded in $M$) such that $\\{x<|\\sigma|\\mid \\sigma(x)=1\\}=\\bigcup_{i<k}F_{i}$ \nfor some minimal ${\\mathsf{L}}$-sequence $\\langle F_{i}\\mid i<k \\rangle$.\n(By the minimality, one can effectively decode a binary sequence to obtain the ${\\mathsf{L}}$-sequence.)\nNote that $\\sigma$ may code extra 0's after $\\max F_{k-1}$. \nThus, one can identify a code $\\sigma$ with a pair $(\\langle F_{i}\\mid i<k \\rangle, d)$ where $d=|\\sigma|$.\nWith this identification, we let $\\|\\sigma\\|_{{\\mathsf{L}}}=k$.\nGiven an ($M$-)finite sequence of sets $\\vec{Y}=\\langle Y_{j}\\mid j<l \\rangle\\in S$ \nand an ($M$-)finite set $F$, $F$ is said to be consistent with $\\vec{Y}$ \nif for any $j<l$, $(F\\subseteq Y_{j}\\vee F\\subseteq \\overline{Y_{j}})$.\nA code $\\sigma$ for a minimal ${\\mathsf{L}}$-sequence $\\langle F_{i}\\mid i<k \\rangle$ \nis said to be consistent with $\\vec{Y}$ if for any $i<k$, $F_{i}$ is consistent with $\\vec{Y}$.\nGiven $t\\in M$, we let $A_{f,t}=\\{x< t\\mid x\\in X_{0}, \\lim_{y\\to \\infty,y\\in X_{0}}f(x,y)=1\\}$. \nNote that $A_{f,t}\\in S$ since $(M,S)\\models{\\mathrm{B}\\Sigma^0_2}$.\n\nNow, we will construct $G\\subseteq M$ by arithmetical forcing. \nLet $\\mathbb{P}$ be the set of all pairs of the form $(\\sigma,\\vec{Y})$ such that\n\\begin{itemize}\n \\item $\\vec{Y}=\\langle Y_{j}\\mid j<l \\rangle$ is an ($M$-)finite sequence of sets in $S$,\n \\item $\\sigma$ is a code for a minimal ${\\mathsf{L}}$-sequence \n\twhich is consistent with $\\vec{Y}$ and $A_{f,|\\sigma|}$,\n\\end{itemize}\nand we let $(\\sigma,\\vec{Y})\\preceq(\\tau,\\vec{Z})$ \nif $\\sigma\\supseteq \\tau$ and $\\vec{Y}\\supseteq\\vec{Z}$.\nTake an $(M,S)$-generic filter $\\mathcal{G}$ of $(\\mathbb{P},\\preceq)$ \nand put $G=\\bigcup\\{\\sigma\\mid {\\exists} \\vec{Y}\\in S\\, (\\sigma,\\vec{Y})\\in \\mathcal{G}\\}$.\nThen, this $G$ is the desired.\nIt is clear by construction that $G$ is a minimal ${\\mathsf{L}}$-sequence which is consistent with $A_{f}$.\nTo see that $G$ preserves ${\\mathrm{I}\\Sigma^0_1}$ and $G$ is infinite in $(M,S)$, \nwe need to check the following are dense in $(\\mathbb{P},\\preceq)$:\n\n", "itemtype": "equation", "pos": 61479, "prevtext": "\nwhere~$n,k\\in\\omega$ and~$\\Psi$ is of the form in Definition~\\ref{def-R-like-and-rest}.\nLet $M\\models{\\mathrm{I}\\Sigma_1}$ be a countable nonstandard model, and $Z\\subseteq M$ be $M$-finite set which is $a$-dense($\\Gamma$) for some $a\\in M\\setminus \\omega$.\nLet $\\{E_{i}\\}_{i\\in\\omega}$ be an enumeration of all $M$-finite sets \nsuch that any $M$-finite set appears infinitely many times, and\n$\\{f_{i}\\}_{i\\in\\omega}$ be an enumeration of all $M$-finite functions from $[[0,\\max Z]_{{\\mathbb{N}}}]^{n}$ \nto $\\max Z$ such that $\\Phi(f_{i})$ holds.\n\nIn the following, we will construct an $\\omega$-length sequence of $M$-finite sets \n$Z=Z_{0}\\supseteq Z_{1}\\supseteq\\dots$ so that for each~$i \\in {\\mathbb{N}}$, $Z_{i}$ is $(a-i)$-dense($\\Gamma$), \n$\\min Z_{i}<\\min Z_{i+3}$, $\\Psi(f_{i}{\\upharpoonright}[[0,\\max Z_{3i}]_{{\\mathbb{N}}}]^{n}, Z_{3i+1})$, and $(\\min Z_{3i+2},\\max Z_{3i+2})_{{\\mathbb{N}}}\\cap E_{i}=\\emptyset$ if $|E_{i}|<\\min Z_{3i+1}$.\n\nAt the stage $s=3i$, let $Z_{3i}$ and $f_{i}$ be given.\nThen, one can find $Z_{3i+1}\\subseteq Z_{3i}$ which is $(a-3i-1)$-dense($\\Gamma$) such that $\\Psi(f_{i}{\\upharpoonright}[[0,\\max Z_{3i}]]^{n}, Z_{3i+1})$ by the definition of density($\\Gamma$).\n\nAt the stage $s=3i+1$, let $Z_{3i+1}$ and $E_{i}$ be given.\nIf $\\min Z_{3i+1}\\le |E_{i}|$, let $Z_{3i+2}=Z_{3i+1}.$\nIf $\\min Z_{3i+1}>|E_{i}|$, let $E_{i}=\\{e_{0},\\dots,e_{l-1}\\}$ \nwhere $e_{0}<e_{1}<\\dots<e_{l-1}$, and put \n$W^{0}=Z_{3i+1}\\cap [0,e_{0})_{{\\mathbb{N}}}$, $W^{j}=Z_{3i+1}\\cap[e_{j-1},e_{j})_{{\\mathbb{N}}}$ \nfor $1\\le j<l$, and $W^{l}=Z_{3i+1}\\cap[e_{l-1},\\infty)_{{\\mathbb{N}}}$.\nThen, $Z_{3i+1}=W^{0}\\sqcup\\dots\\sqcup W^{l}$, thus one of $W_{j}$'s is $(a-3i-2)$-dense($\\Gamma$).\nPut $Z_{3i+2}$ to be such $W_{j}$.\n\nAt the stage $s=3i+2$, Put $Z_{3i+3}=Z_{3i+2}\\setminus\\{\\min Z_{3i+2}\\}$.\n\nNow, let $I=\\sup\\{\\min Z_{i}\\mid i\\in\\omega\\}\\subseteq_{e} M$.\nBy the construction of the steps $s=3i+1$, $I$ is a semi-regular cut, thus $(I,{\\mathrm{Cod}}(M/I))\\models{\\mathsf{WKL_0}}$.\nBy the construction of the steps $s=3i+2$, $Z_{i}\\cap I$ is infinite in $I$ for any $i\\in\\omega$.\nTo check that $(I,{\\mathrm{Cod}}(M/I))\\models\\Gamma$, let $f:[I]^{n}\\to k\\in {\\mathrm{Cod}}(M/I)$.\nThen, there exists $f_{i}$ such that $f=f_{i}\\cap I$.\nBy the construction, $M\\models \\Psi(f_{i}{\\upharpoonright}[[0,\\max Z_{3i}]_{{\\mathbb{N}}}]^{n}, Z_{3i+1})$ holds, thus we have $(I,{\\mathrm{Cod}}(M/I))\\models\\Psi(f, Z_{3i+1}\\cap I)\\wedge Z_{3i+1}\\cap I$ is infinite.\n\\end{proof}\n\n\n\\begin{thm}\\label{thm-conservation-via-density-general}\nLet $\\Gamma$ be a Ramsey-like-$\\Pi^{1}_{2}$-statement.\nThen, ${\\mathsf{WKL_0}}+\\Gamma$ is a $\\tilde{\\Pi}{}^{0}_{3}$-conservative extension of ${\\mathsf{RCA_0}}+\\{m\\mbox{-}{\\widetilde{\\mathrm{PH}}{}}(\\Gamma)\\mid m\\in\\omega\\}$.\n\\end{thm}\nBy Theorem~\\ref{thm-conservation-via-density-general} and Proposition~\\ref{prop-R-like-and-rest-formulas}, \none can characterize the $\\tilde{\\Pi}^{0}_{3}$-part of any restricted-$\\Pi^{1}_{2}$-statement.\nThis is actually a (generalization of a) special case of the well-known indicator arguments (see, e.g., \\cite{Paris1978,Kaye}).\nIn general, one can replace the second condition and the initial condition for $0$-density in Definition~\\ref{def-density-with-indicator} with suitable indicator conditions for a base system $T$, then the partial conservation for $T+\\Gamma$ over $T+\\{m\\mbox{-}{\\widetilde{\\mathrm{PH}}{}}(\\Gamma)\\mid m\\in\\omega\\}$ holds, and one can even consider the $\\tilde{\\Pi}^{0}_{4}$-part in some cases.\n\nSee \\cite{Y-RIMS2013,Y-MLQ13}.\n\\begin{proof}[\\it Proof of Theorem~\\ref{thm-conservation-via-density-general}.]\nBy the usual compactness argument, one can easily check that ${\\mathsf{WKL_0}}+\\Gamma$ implies $m\\mbox{-}{\\widetilde{\\mathrm{PH}}{}}(\\Gamma)$ for any $m\\in\\omega$.\nThus, ${\\mathsf{WKL_0}}+\\Gamma$ is an extension of ${\\mathsf{RCA_0}}+\\{m\\mbox{-}{\\widetilde{\\mathrm{PH}}{}}(\\Gamma)\\mid m\\in\\omega\\}$.\n\nTo see that it is a $\\tilde{\\Pi}^{0}_{3}$-conservative extension, let $\\varphi_{0}\\equiv {\\forall} X {\\forall} x {\\exists} y {\\forall} z\\varphi(X[z], x,y,z)$ be a $\\tilde{\\Pi}^{0}_{3}$-sentence which is not provable in ${\\mathsf{RCA_0}}+\\{m\\mbox{-}{\\widetilde{\\mathrm{PH}}{}}(\\Gamma)\\mid m\\in\\omega\\}$, where $\\varphi$ is $\\Sigma^{0}_{0}$.\nTake a countable nonstandard model $(M,S)\\models{\\mathsf{RCA_0}}+\\{m\\mbox{-}{\\widetilde{\\mathrm{PH}}{}}(\\Gamma)\\mid m\\in\\omega\\}+\\neg\\varphi_{0}$.\nThen, there exist $A\\in S$ and $a\\in M$ such that $(M,S)\\models{\\forall} y {\\exists} z \\neg\\varphi(A[z],a,y,z)$.\nIn $(M,S)$, define a sequence $\\langle x_{i}\\mid i\\in M \\rangle$ so that $x_{0}=a$ and $x_{i+1}=\\min\\{x>x_{i}\\mid {\\forall} y<x_{i}{\\exists} z<x\\neg\\varphi(A[z],a,y,z)\\}$.\nBy recursive comprehension in $(M,S)$, put $X=\\{x_{i}\\mid i\\in M\\}\\in S$.\nThen, $X$ is infinite in $(M,S)$.\nBy $m\\mbox{-}{\\widetilde{\\mathrm{PH}}{}}(\\Gamma)$ for $m\\in\\omega$, there exist $m$-dense$(\\Gamma)$ finite subsets of $X$ for any $m\\in\\omega$.\nThus, by overspill for $\\Sigma^{0}_{1}$-statement, there exists an $m$-dense$(\\Gamma)$ finite subset $Z$ of $X$ for some $m\\in M\\setminus \\omega$. \nNow, by Lemma~\\ref{lem-cut-from-dense-set}, there exists $I\\subsetneq_{e} M$ such that $(I,{\\mathrm{Cod}}(M/I))\\models {\\mathsf{WKL_0}}+\\Gamma$ and $Z\\cap I$ is infinite in $I$.\nNote that ${\\mathrm{Cod}}(M/I)=\\{W\\cap I\\mid W\\mbox{ is $M$-finite}\\}=\\{W\\cap I\\mid W\\in S\\}$.\nSince $Z\\subseteq X$, $a\\le \\min Z\\in I$ and for any $w,w'\\in Z\\cap I$ such that $w<w'$, $(I,{\\mathrm{Cod}}(M/I))\\models {\\forall} y<w{\\exists} z<w'\\neg\\varphi(A\\cap I[z],a,y,z)$.\nSince $Z\\cap I$ is unbounded in $I$, we have $(I,{\\mathrm{Cod}}(M/I))\\models {\\forall} y{\\exists} z\\neg\\varphi(A\\cap I[z],a,y,z)$, which means $(I,{\\mathrm{Cod}}(M/I))\\models\\neg\\varphi_{0}$.\nThus, ${\\mathsf{WKL_0}}+\\Gamma$ does not prove $\\varphi_{0}$.\n\\end{proof}\n\nThe following generalized version of the Parsons theorem plays a key role in this section.\n\n\\begin{thm}[Generalized Parsons theorem]\\label{thm-g-Parsons}\nLet $\\psi(F)$ be a $\\Delta_{0}$-formula. Assume that\n\\begin{itemize}\n \\item[] \\rm ${\\mathrm{I}\\Sigma^0_1}\\vdash {\\forall} X\\subseteq {\\mathbb{N}}(X$ is infinite $\\to {\\exists} F\\subseteq_{{\\mathrm{fin}}} X\\psi(F))$.\n\\end{itemize}\nThen, there exists $n\\in\\omega$ such that\n\\begin{itemize}\n \\item[] \\rm ${\\mathrm{I}\\Sigma_1}\\vdash {\\forall} Z\\subseteq_{{\\mathrm{fin}}}(0,\\infty)_{{\\mathbb{N}}}(Z$ is $\\bbomega^{n}$-large $\\to {\\exists} F\\subseteq Z\\psi(F))$.\n\\end{itemize}\n\\end{thm}\nNote that one can apply this theorem for any \n$\\tilde{\\Pi}{}^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$, e.g., ${\\mathsf{WKL_0}}+{\\mathrm{B}\\Sigma^0_2}$.\n\nThis theorem quickly implies the Parsons theorem (see, e.g., \\cite{handbook-of-proof}), namely, any $\\Pi_{2}$-statement provably in ${\\mathrm{I}\\Sigma_1}$ is bounded by a primitive recursive function, as follows.\nIf a $\\Pi_{2}$-statement ${\\forall} x{\\exists} y\\theta(x,y)$ is provable within ${\\mathrm{I}\\Sigma^0_1}$, then put $\\psi(F):\\equiv ({\\forall} x<\\min F) ({\\exists} y<\\max F)\\theta(x,y)$.\nThen, ${\\mathrm{I}\\Sigma^0_1}$ proves that any infinite set contains a finite set $F$ such that $\\psi(F)$ holds.\nBy this theorem, there exists $n\\in\\omega$ such that $(Z$ is $\\bbomega^{n}$-large $\\to {\\exists} F\\subseteq Z\\psi(F))$.\nOne can easily find a primitive recursive function $h$ such that $[a,h(a)]_{{\\mathbb{N}}}$ is $\\bbomega^{n}$-large for any $a\\in\\omega$.\nThus, we have ${\\mathrm{I}\\Sigma_1}\\vdash {\\forall} x {\\exists} y<h(x)\\theta(x,y)$.\n\nThe following proof is a generalization of the proof of Theorem~\\ref{thm-Friedman-conservation}, which is the Parsons theorem extended into ${\\mathsf{WKL_0}}$. \n\n\n\\begin{proof}[Proof of Theorem~\\ref{thm-g-Parsons}.]\nAssume that ${\\mathrm{I}\\Sigma_1}\\not\\vdash {\\forall} Z\\subseteq_{{\\mathrm{fin}}}(0,\\infty)_{{\\mathbb{N}}}(Z$ \nis $\\bbomega^{n}$-large $\\to {\\exists} F\\subseteq Z\\psi(F))$ \nfor any $n\\in\\omega$, where $\\Psi(F)$ is $\\Sigma_{1}$.\nThen, there exists a countable model $M\\models{\\mathrm{I}\\Sigma_1}+\\{{\\exists} Z\\subseteq_{{\\mathrm{fin}}}(0,\\infty)_{{\\mathbb{N}}}(Z$ \nis $\\bbomega^{n}$-large $\\wedge {\\forall} F\\subseteq Z\\neg\\psi(F))\\mid n\\in\\omega\\}$ such that $M\\not\\cong\\omega$.\nBy overspill, there exist $a\\in M\\setminus \\omega$ and an $M$-finite set \n$Z\\subseteq M$ with $\\min Z>0$ such that $Z$ is $\\bbomega^{a}$-large and ${\\forall} F\\subseteq Z\\neg\\psi(F)$.\nLet $\\{E_{i}\\}_{i\\in\\omega}$ be an enumeration of all $M$-finite sets \nsuch that any $M$-finite set appears infinitely many times.\nNow, we will construct an $\\omega$-length sequence of $M$-finite sets \n$Z=Z_{0}\\supseteq Z_{1}\\supseteq\\dots$ so that $Z_{i}$ is $\\bbomega^{a-i}$-large, \n$\\min Z_{i}<\\min Z_{i+1}$ and $(\\min Z_{i+1},\\max Z_{i+1})\\cap E_{i}=\\emptyset$ if $|E_{i}|<\\min Z_{i}$.\nLet $Z_{i}$ and $E_{i}$ be given such that $Z_{i}$ is $\\bbomega^{a-i}$-large.\nIf $\\min Z_{i}\\le |E_{i}|$, let $Z_{i+1}=Z_{i}\\setminus\\{\\min Z_{i}\\}$, \nthen $Z_{i+1}$ is $\\bbomega^{a-i-1}$-large.\nIf $\\min Z_{i}>|E_{i}|$, let $E_{i}=\\{e_{0},\\dots,e_{l-1}\\}$ \nwhere $e_{0}<e_{1}<\\dots<e_{l-1}$, and let $W=Z_{i}\\setminus\\{\\min Z_{i}\\}$, \n$W^{0}=W\\cap [0,e_{0})_{{\\mathbb{N}}}$, $W^{j}=W\\cap[e_{j-1},e_{j})_{{\\mathbb{N}}}$ for $1\\le j<l$, and $W^{l}=W\\cap[e_{l-1},\\infty)_{{\\mathbb{N}}}$.\nThen, $W$ is $(\\bbomega^{a-i-1}\\cdot \\min Z_{i})$-large and $W=W^{0}\\sqcup\\dots\\sqcup W^{l}$.\nSince $l+1\\le \\min Z_{i}$, there exists $j\\le l$ such that $W^{j}$ \nis $\\bbomega^{a-i-1}$-large by Lemma~\\ref{lem-alpha-small-sum}. Then, set $Z_{i+1}=W^{j}$.\n\nNow, let $I=\\sup\\{\\min Z_{i}\\mid i\\in\\omega\\}\\subseteq_{e} M$. \nBy the construction, $I$ is a semi-regular cut, thus $(I,{\\mathrm{Cod}}(M/I))\\models{\\mathrm{I}\\Sigma^0_1}$.\nOn the other hand, $Z\\cap I\\in {\\mathrm{Cod}}(M/I)$ and $(I,{\\mathrm{Cod}}(M/I))\\models Z\\cap I$ \nis infinite $\\wedge {\\forall} F\\subseteq Z\\cap I\\neg\\psi(F)$ since $\\neg\\psi(F)$ is $\\Pi_{1}$.\nThis contradicts to ${\\mathrm{I}\\Sigma^0_1}\\vdash {\\forall} X\\subseteq {\\mathbb{N}}(X$ is infinite $\\to {\\exists} F\\subseteq_{{\\mathrm{fin}}} X\\psi(F))$.\n\\end{proof}\n\nWe are now ready to prove the main conservation theorem of the section.\n\n\\begin{proof}[Proof of Theorem~\\ref{thm-provably-large-conservative}]\nLet $\\Gamma$ be a Ramsey-like-$\\Pi^{1}_{2}$-statement, and assume that\nfor any $k\\in\\omega$,\n\\begin{itemize}\n \\item[] \\rm ${\\mathrm{I}\\Sigma^0_1}\\vdash {\\forall} X\\subseteq {\\mathbb{N}}(X$ is infinite $\\to {\\exists} F\\subseteq_{{\\mathrm{fin}}} X(F$ is $\\bbomega^{k}$-large$(\\Gamma)))$.\n\\end{itemize}\nThen, by Theorem~\\ref{thm-g-Parsons}, for each $k\\in\\omega$ there exists $n_{k}$ such that\n\\begin{itemize}\n \\item[] \\rm ${\\mathrm{I}\\Sigma^0_1}\\vdash {\\forall} Z\\subseteq_{{\\mathrm{fin}}}(0,\\infty)_{{\\mathbb{N}}}(Z$ is $\\bbomega^{n_{k}}$-large $\\to Z$ is $\\bbomega^{k}$-large$(\\Gamma))$.\n\\end{itemize}\nNow, put $h:\\omega\\to\\omega$ as $h(0)=1$ and $h(m+1)=\\max\\{n_{h(m)}, h(m)+1\\}$.\nWe will check\n\\begin{itemize}\n \\item[] \\rm ${\\mathrm{I}\\Sigma^0_1}\\vdash {\\forall} Z\\subseteq_{{\\mathrm{fin}}}(0,\\infty)_{{\\mathbb{N}}}(Z$ is $\\bbomega^{h(m)}$-large $\\to Z$ is $m$-dense$(\\Gamma))$.\n\\end{itemize}\nby induction.\nThe case $m=0$ follows from the definition.\nThe case $m=m'+1$, $\\bbomega^{h(m')}$-large sets are $m'$-dense$(\\Gamma)$ by the induction hypothesis.\nThen, the first condition of the $m'+1$-density follows from $h(m'+1)\\ge n_{h(m')}$,\nand the second condition follows from $h(m'+1)\\ge h(m')+1$ and Lemma~\\ref{lem-alpha-small-sum}.\nThus, by Theorem~\\ref{thm-omega-largeness}, ${\\mathrm{I}\\Sigma^0_1}$ proves that any infinite set contains an $m$-dense$(\\Gamma)$ set for any $m\\in\\omega$.\nHence, by Theorem~\\ref{thm-conservation-via-density-general}, ${\\mathsf{WKL_0}}+\\Gamma$ is a $\\tilde{\\Pi}{}^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{proof}\n\nWhen two conservation results are obtained, one can often amalgamate those results.\nFor example, if two $\\Pi^{1}_{2}$-theories $T_{1}$ and $T_{2}$ are $\\Pi^{1}_{1}$-conservative over a base $\\Pi^{1}_{2}$-theory $T_{0}$, then $T_{1}+T_{2}$ is also $\\Pi^{1}_{1}$-conservative over $T_{0}$ (see \\cite{Y2009}).\nSimilar amalgamation property holds for $\\tilde\\Pi^{0}_{3}$-conservation as follows.\n\\begin{thm}[Amalgamation]\\label{thm:amalgamation}\nFix $n\\ge 1$.\nLet $T$ be a theory extending ${\\mathrm{I}\\Sigma^0_1}$ which consists of sentences of the form ${\\forall} X {\\exists} Y \\theta(X,Y)$ where $\\theta$ is $\\Pi^{0}_{n+2}$,\nand let $\\Gamma_{1}$ and $\\Gamma_{2}$ be sentences of the same form as $T$.\nIf $T+\\Gamma_{i}$ is a $\\tilde\\Pi^{0}_{n+2}$-conservative extension of $T$ for $i=1,2$,\nthen, $T+\\Gamma_{1}+\\Gamma_{2}$ is a $\\tilde\\Pi^{0}_{n+2}$-conservative extension of $T$.\n\\end{thm}\n\\begin{proof}\nThe proof is essentially the same as the case for the amalgamation of two $\\Pi^{1}_{2}$-theories which are $\\Pi^{1}_{1}$-conservative over a base theory in \\cite{Y2009}.\nHere, we consider the $\\mathcal{L}_{2}$-structure $(M,S)$ as a two-sorted structure, namely, $M$ and $S$ are disjoint sets and $\\in$ is a relation on $M\\times S$.\nIn this understanding, $\\tilde\\Pi^{0}_{n+2}$-conservation implies that any model of $T$ has a $\\Sigma^{0}_{n+2}$-elementary extension which is a model of $T+\\Gamma_{i}$ for $i=1,2$.\n(This is because if $(M,S)\\models T$, then ${\\mathrm{Th}}_{\\mathcal{L}_{2}\\cup M \\cup S}(M,S)\\cap \\Sigma^{0}_{n+2}+T+\\Gamma_{i}$ is consistent.)\nNow, assume $T\\not\\vdash{\\forall} X\\psi(X)$ where $\\psi$ is $\\Pi^{0}_{n+2}$, and take a model $(M_{0},S_{0})\\models T+{\\exists} X\\neg\\psi(X)$.\nThen, one can construct a $\\Sigma^{0}_{n+2}$-elementary chain of models $(M_{0},S_{0})\\subseteq(M_{1},S_{1})\\subseteq\\dots$ such that $(M_{2j+i},S_{2j+i})\\models T+\\Gamma_{i}$ for $i=1,2$ and $j\\in \\omega$.\nBy the usual elementary chain argument, $(\\bar{M},\\bar{S})=(\\bigcup_{k\\in\\omega}M_{k}, \\bigcup_{k\\in\\omega} S_{k})$ is a $\\Sigma^{0}_{n+2}$-elementary extension of $(M_{0},S_{0})$, and therefore $(\\bar{M},\\bar{S})\\models T+\\Gamma_{1}+\\Gamma_{2}+{\\exists} X\\neg\\psi(X)$.\nHence $T+\\Gamma_{1}+\\Gamma_{2}\\not\\vdash {\\forall} X\\psi(X)$.\n\\end{proof}\nNote that ${\\mathrm{I}\\Sigma^0_1}$, ${\\mathsf{WKL_0}}$ and any Ramsey-like statement is of the form ${\\forall} X {\\exists} Y \\theta(X,Y)$ where $\\theta$ is $\\Pi^{0}_{3}$.\nTherefore, one can always use the amalgamation theorem for $\\tilde\\Pi^{0}_{3}$-conservation.\nIn particular, to prove the $\\tilde\\Pi^{0}_{3}$-conservation theorem for ${\\mathrm{RT}}^{2}_{2}$, we only need to prove $\\tilde\\Pi^{0}_{3}$-conservation theorems for ${\\mathrm{ADS}}$ and ${\\mathrm{EM}}$.\n\n\\section{Conservation theorem for ${\\mathrm{ADS}}$}\\label{section-ADS}\n\nIn this section, we will show that ${\\mathsf{WKL_0}}+{\\mathrm{ADS}}$ is a\n $\\tilde{\\Pi}{}^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\nActually, this is just a weakening of the following theorem by Chong, Slaman and Yang,\nwhere ${\\mathrm{CAC}}$ is the chain antichain principle, since ${\\mathrm{ADS}}$ is a consequence of ${\\mathrm{CAC}}$\nover~${\\mathsf{RCA_0}}$~\\cite{HS2007}.\n\n\\begin{thm}[Chong, Slaman, Yang~\\cite{CSY2012}]\\label{thm-CSY-conservation}\n${\\mathsf{WKL_0}}+{\\mathrm{CAC}}$ is a ${\\Pi}{}^{1}_{1}$-conservative extension of ${\\mathrm{B}\\Sigma^0_2}$. \n\\end{thm}\n\nHere, we will give an alternative proof by calculating the size \nof $\\bbomega^{k}$-large(${\\mathrm{psRT}}^2_2$) sets.\nTo simplify the proof below, we will use a slightly modified $\\alpha$-largeness notion.\n\n\\begin{defi}[${\\mathrm{I}\\Sigma^0_1}$]\nAny set is said to be $0$-large$^{*}$. Given some $\\alpha<\\bbomega^{\\bbomega}$, \n$X\\subseteq_{{\\mathrm{fin}}}{\\mathbb{N}}$ is said to be $\\alpha$-large$^{*}$ if\n\\begin{itemize}\n \\item $X\\setminus \\{\\min X\\}$ is $\\beta$-large$^{*}$ if $\\alpha=\\beta+1$,\n \\item $X$ is $(\\beta+\\bbomega^{n-1}\\cdot\\min X)$-large$^{*}$ if $\\alpha=\\beta+\\bbomega^{n}$.\n\\end{itemize}\n\\end{defi}\n\nTrivially, if $X\\subseteq_{{\\mathrm{fin}}}{\\mathbb{N}}$ is $\\alpha$-large, then $X$ is $\\alpha$-large$^{*}$.\n\n\\begin{lem}\nFor any $k\\in\\omega$, the following is provable within ${\\mathrm{I}\\Sigma^0_1}$.\nFor any $\\alpha<\\bbomega^{k}$ and for any $X\\subseteq_{{\\mathrm{fin}}}{\\mathbb{N}}$, \n$X$ is $\\alpha$-large if $X$ is $\\alpha+1$-large$^{*}$.\n\\end{lem}\n\\begin{proof}\nBy $\\Pi^{0}_{1}$-transfinite induction up to $\\bbomega^{k}$, which is available within ${\\mathsf{RCA_0}}$.\n\\end{proof}\n\n\\begin{lem}\\label{lem-alpha*-large-sum}\nThe following is provable within ${\\mathrm{I}\\Sigma^0_1}$.\nFor any $k,n\\in{\\mathbb{N}}$, if $X$ is a disjoint union of $X_{0},\\dots,X_{k-1}$ \nsuch that $X_{i}<X_{i+1}$ for any $i<k-1$ and each $X_{i}$ \nis $\\bbomega^{n}$-large$^{*}$, then $X$ is $\\bbomega^{n}\\cdot k$-large$^{*}$. \nThus, if $k\\le \\min X_{0}$, $X$ is $\\bbomega^{n+1}$-large$^{*}$.\n\\end{lem}\n\\begin{proof}\nSimilar to Lemma~\\ref{lem-alpha-large-sum}.\n\\end{proof}\n\n\n\\begin{lem}\\label{lem-ADS-largeness}\nFor any $k\\in\\omega$, the following is provable within ${\\mathrm{I}\\Sigma^0_1}$. \nIf a finite set $X\\subseteq{\\mathbb{N}}$ is $\\bbomega^{2k+6}$-large \nand $\\min X>3$, then $X$ is $\\bbomega^{k}$-large(${\\mathrm{psRT}}^{2}_{2}$).\n\\end{lem}\n\\begin{proof}\nGiven a coloring $f:[[0,\\max X]_{{\\mathbb{N}}}]^{2}\\to 2$, define the coloring \n$\\bar{f}:[X]^{2}\\to 2k+2$ as $\\bar{f}(x,y)=2j+i$  if $f(x,y)=i$ \nand $j=\\min\\{j'<k\\mid \\neg({\\exists} H\\subseteq[x,y)_{{\\mathbb{N}}}\\cap X$ $x\\in H$, \n$H$ is $\\bbomega^{j'+1}$-large$^{*}$ and $H\\cup\\{y\\}$ is pseudo-homogeneous for~$f$ with the color $i)\\}\\cup\\{k\\}$.\n\nBy Theorem~\\ref{SK-theorem}, take $Y\\subseteq X$ such that \n$Y$ is $\\bbomega$-large and $\\bar{f}$-homogeneous.\nLet $Y=\\{y_{0}<y_{1}<\\dots<y_{l}\\}$, and $\\bar{f}([Y]^{2})=2j+i$.\nThen, $l\\ge y_{0}$. By the definition of $\\bar{f}$, for $s=0,\\dots,l-1$, \none can take $H_{s}\\subseteq[y_{s},y_{s+1})_{{\\mathbb{N}}}$ such that $y_{s}\\in H_{s}$, \n$H_{s}$ is $\\bbomega^{j}$-large$^{*}$ and $[H_{s}\\cup\\{y_{s+1}\\}]^{2}$ is pseudo-homogeneous for~$f$ with the color $i$.\nBy Lemma~\\ref{lem-alpha*-large-sum}, $H=\\bigcup_{s=0}^{l-1}H_{s}$ is \n$\\bbomega^{j+1}$-large$^{*}$, and $[H\\cup\\{y_{k}\\}]^{2}$ is pseudo-homogeneous for~$f$ with the color $i$.\nThis $H$ assures that $\\bar{f}(y_{0},y_{k})\\neq 2j+i$ or $j=k$. Thus, we have $j=k$.\nHence $H$ is pseudo-homogeneous for~$f$ and $\\bbomega^{k+1}$-large$^{*}$, thus it is $\\bbomega^{k}$-large.\n\\end{proof}\n\n\\begin{cor}\\label{cor-con-ADS}\n${\\mathsf{WKL_0}}+{\\mathrm{psRT}}^{2}_{2}$, or equivalently, ${\\mathsf{WKL_0}}+{\\mathrm{ADS}}$ is a $\\tilde{\\Pi}^0_3$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$. \n\\end{cor}\n\\begin{proof}\nBy Theorems~\\ref{thm-omega-largeness}, \n\\ref{thm-provably-large-conservative} and Lemma~\\ref{lem-ADS-largeness}.\n\\end{proof}\n\nNote that we could have proven Corollary~\\ref{cor-con-ADS} by working with ${\\mathrm{ADS}}$ directly.\nHowever, the unnatural formulation of ${\\mathrm{ADS}}$ as a Ramsey-like-$\\Pi^1_2$-statement\nintroduces additional technicalities in the proof. Indeed, the standard formulation of ${\\mathrm{ADS}}$\ninvolves linear orders, whereas a Ramsey-like statement is about arbitrary coloring functions.\nIn this framework, a solution to ${\\mathrm{ADS}}$ is either an infinite homogeneous set, or a set whose minimal element witnesses \nthe non-transitivity of the coloring.\n\n\\section{Grouping principle}\\label{section-GP}\n\nIn this section, we introduce the grouping principle, which is a consequence\nof Ramsey's theorem. The grouping principle will be used in the conservation proof of the\nErd\\H{o}s-Moser theorem, although it is currently unknown how the two statements relate in reverse mathematics.\nThe grouping principle seems interesting to study in its own right, and we conduct a study\nof its relations with other Ramsey-type principles already studied in reverse mathematics.\n\n\\begin{definition}[${\\mathsf{RCA_0}}$, grouping principle]\nGiven a largeness notion ${\\mathsf{L}}$ and a coloring $f:[X]^{n}\\to k$, \nan \\textit{${\\mathsf{L}}$-grouping for $f$} is an infinite family \nof ${\\mathsf{L}}$-large finite sets $\\{F_0 < F_1 < \\dots \\}\\subseteq {\\mathsf{L}}$ such that \n\n", "index": 13, "text": "$$\n{\\forall} i_{1}<\\dots< i_{n}\\, {\\exists} c<k\\, {\\forall} x_{1}\\in F_{i_{1}},\\dots,{\\forall} x_{n}\\in F_{i_{n}}\\, f(x_{1},\\dots,x_{n})=c\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex7.m1\" class=\"ltx_Math\" alttext=\"{\\forall}i_{1}&lt;\\dots&lt;i_{n}\\,{\\exists}c&lt;k\\,{\\forall}x_{1}\\in F_{i_{1}},\\dots,{%&#10;\\forall}x_{n}\\in F_{i_{n}}\\,f(x_{1},\\dots,x_{n})=c\" display=\"block\"><mrow><mrow><mrow><mo>\u2200</mo><msub><mi>i</mi><mn>1</mn></msub></mrow><mo>&lt;</mo><mi mathvariant=\"normal\">\u2026</mi><mo>&lt;</mo><mrow><mpadded width=\"+1.7pt\"><msub><mi>i</mi><mi>n</mi></msub></mpadded><mo>\u2062</mo><mrow><mo>\u2203</mo><mi>c</mi></mrow></mrow><mo>&lt;</mo><mrow><mpadded width=\"+1.7pt\"><mi>k</mi></mpadded><mo>\u2062</mo><mrow><mo>\u2200</mo><msub><mi>x</mi><mn>1</mn></msub></mrow></mrow><mo>\u2208</mo><msub><mi>F</mi><msub><mi>i</mi><mn>1</mn></msub></msub></mrow><mo>,</mo><mrow><mrow><mi mathvariant=\"normal\">\u2026</mi><mo>,</mo><mrow><mo>\u2200</mo><msub><mi>x</mi><mi>n</mi></msub></mrow></mrow><mo>\u2208</mo><mrow><mpadded width=\"+1.7pt\"><msub><mi>F</mi><msub><mi>i</mi><mi>n</mi></msub></msub></mpadded><mo>\u2062</mo><mi>f</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo>,</mo><mi mathvariant=\"normal\">\u2026</mi><mo>,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mi>c</mi></mrow></mrow></math>", "type": "latex"}, {"file": "1601.00050.tex", "nexttext": "\nOne can easily see that if $(\\sigma,\\vec{Y})\\in \\mathcal{D}^{1}_{\\theta,b}$, \nthen $(\\sigma,\\vec{Y})$ forces ``if ${\\exists} n\\theta(b,n,G{\\upharpoonright} n)$, \nthere exists least $c\\le b$ such that ${\\exists} n\\theta(c,n,G{\\upharpoonright} n)$'', \nwhich guarantees $\\Sigma^{0}_{1}$-least number principle, \nand if $(\\sigma,\\vec{Y})\\in \\mathcal{D}^{2}_{e}$, then $(\\sigma,\\vec{Y})$ forces \n``$\\|G\\|_{{\\mathsf{L}}}\\ge e$'', which means $G$ is an infinite minimal ${\\mathsf{L}}$-sequence.\n\nTo see that $\\mathcal{D}^{1}_{\\theta,b}$ is dense, let $(\\sigma,\\vec{Y})$ be given.\nLet $\\Theta(x)$ be a $\\Sigma^{0}_{1}$-formula saying that ``there exists $t$ \nsuch that for any $\\vec{Z}=\\langle Z_{j}\\subseteq [|\\sigma|,t)_{{\\mathbb{N}}}\\mid j<2^{x} \\rangle$ \nthere exists $\\tau\\supseteq\\sigma$ with $|\\tau|\\le t$ such that $(\\tau$ is a minimal \n${\\mathsf{L}}$-sequence consistent with $\\vec{Y}^{\\frown}\\vec{Z}\\wedge {\\exists} n\\le |\\tau|\\theta(x,n,\\tau{\\upharpoonright} n))$.''\nWe consider the two cases.\n\\begin{description}\n \\item[Case I] $\\Theta(b)$ fails in $(M,S)$.\n\\end{description}\nIn this case, by ${\\mathsf{WKL_0}}$ in $(M,S)$, there exists $\\vec{Z}=\\langle Z_{j}\\subseteq \n[|\\sigma|,\\infty)_{{\\mathbb{N}}}\\mid j<2^{b} \\rangle$ such that ${\\forall} \\tau\\supseteq\\sigma(\\tau$ \nis a minimal ${\\mathsf{L}}$-sequence consistent with $\\vec{Y}^{\\frown}\\vec{Z}\\to {\\forall} n\\le |\\tau|\\neg\\theta(b,n,\\tau{\\upharpoonright} n))$.\nTake such $\\vec{Z}$. Then, $(\\sigma,\\vec{Y}^{\\frown}\\vec{Z})\\in \\mathcal{D}^{1}_{\\theta,b}$.\n\\begin{description}\n \\item[Case II] $\\Theta(b)$ holds in $(M,S)$.\n\\end{description}\nIn this case, by ${\\mathrm{I}\\Sigma^0_1}$ in $(M,S)$, there exists the least $c\\le b$ such that $\\Theta(c)$ holds.\nThen, by ${\\mathsf{WKL_0}}$, there exists $\\vec{W}^{d}=\\langle W^{d}_{j}\\subseteq \n[|\\sigma|,\\infty)_{{\\mathbb{N}}}\\mid j<2^{d} \\rangle$ such that ${\\forall} \\tau\\supseteq\\sigma(\\tau$ \nis a minimal ${\\mathsf{L}}$-sequence consistent with \n$\\vec{Y}^{\\frown}\\vec{W}^{d}\\to {\\forall} n\\le |\\tau|\\neg\\theta(d,n,\\tau{\\upharpoonright} n))$ for any $d<c$.\nNow, take the witness $t\\in M$ for $\\Theta(c)$, and put \n$\\vec{Z}=\\langle W^{d}_{j}\\cap[|\\sigma|,t)_{{\\mathbb{N}}}\\mid j<2^{d},d<c \\rangle^{\\frown}\\langle A_{f,t}\\cap[|\\sigma|,t)_{{\\mathbb{N}}} \\rangle$.\nThen, by $\\Theta(c)$, there exists $\\tau\\supseteq\\sigma$ \nwith $|\\tau|\\le t$ such that $\\tau$ is a minimal ${\\mathsf{L}}$-sequence \nconsistent with $\\vec{Y}^{\\frown}\\vec{Z}$ and ${\\exists} n\\le |\\tau|\\theta(c,n,\\tau{\\upharpoonright} n)$.\nThen $(\\tau,\\vec{Y}^{\\frown}\\langle W^{d}_{j}\\mid j<2^{d},d<c \\rangle)$ \nis a condition in $\\mathbb{P}$ and $(\\tau,\\vec{Y}^{\\frown}\\langle \nW^{d}_{j}\\mid j<2^{d},d<c \\rangle)\\in \\mathcal{D}^{1}_{\\theta,b}$.\n\nTo see that $\\mathcal{D}^{2}_{e}$ is dense, let $(\\sigma,\\vec{Y})$ \nbe given where $\\sigma$ is a code for $\\langle F_{i}\\mid i<k \\rangle$ \nand $\\vec{Y}=\\langle Y_{j}\\mid j<l \\rangle$.\nBy applying Lemma~\\ref{lem-largeness} $e$ times in $(M,S)$, \none can find $\\langle t_{0},\\dots, t_{e} \\rangle$ such that \n$t_{0}=|\\sigma|$ and for any $s<e$ and for any $2^{l+1}$ splitting \n$M=\\bigsqcup_{p<2^{l+1}}W_{p}$, there exists a finite subset \nof $[t_{s},t_{s+1})_{{\\mathbb{N}}}$ which is ${\\mathsf{L}}$-large and included in one of $W_{p}$.\n(${\\mathrm{I}\\Sigma^0_1}$ is enough for this iteration.)\nThus, there exists $E_{s}\\subseteq [t_{s},t_{s+1})_{{\\mathbb{N}}}$ which is \n${\\mathsf{L}}$-large and consistent with $\\vec{Y}$ and $A_{f,t_{e}}$ for any $s<e$.\nLet $\\tau\\supseteq \\sigma$ be a code for a sequence \n$\\langle F_{i}\\mid i<k \\rangle^{\\frown}\\langle E_{s}\\mid s<e \\rangle$.\nThen, $(\\tau,\\vec{Y})$ is a condition in $\\mathbb{P}$ and \n$\\|\\tau\\|_{{\\mathsf{L}}}\\ge e$, thus, $(\\tau, \\vec{Y})\\in \\mathcal{D}^{2}_{e}$.\n\\end{proof}\n\n\\begin{thm}\\label{thm:SGP-conservation}\n${\\mathsf{RCA_0}}+{\\mathrm{SGP}^{2}_{2}}$ is a $\\tilde\\Pi^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{thm}\n\\begin{proof}\nStraightforward from Lemma~\\ref{lem:stable-grouping-characterization}, Theorem~\\ref{thm-con-Bn+1-vs-In} and Lemma~\\ref{lem:ISig1-preservation}.\n\\end{proof}\n\n\nThus, by the amalgamation theorem, we have the following conservation result.\n\\begin{thm}\\label{thm:GP-conservation}\n${\\mathsf{WKL_0}}+{\\mathrm{GP}^{2}_{2}}+{\\mathrm{ADS}}$ is a $\\tilde\\Pi^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{thm}\n\\begin{proof}\nApply Theorem~\\ref{thm:amalgamation} for the conservation results Corollary~\\ref{cor-con-ADS} and Theorem~\\ref{thm:SGP-conservation}, then we can see that ${\\mathsf{WKL_0}}+{\\mathrm{ADS}}+{\\mathrm{SGP}^{2}_{2}}$ is a $\\tilde\\Pi^{0}_{3}$ conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\nBy Hirschfeldt/Shore\\cite{HS2007}, ${\\mathrm{ADS}}$ implies ${\\mathrm{COH}}$.\nThus, ${\\mathsf{WKL_0}}+{\\mathrm{GP}^{2}_{2}}+{\\mathrm{ADS}}$ is a $\\tilde\\Pi^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{proof}\n\n\\section{Conservation theorem for ${\\mathrm{RT}}^2_2$}\\label{section-RT22}\n\nIn this section, we will show that ${\\mathsf{WKL_0}}+{\\mathrm{RT}}^2_2$ is a $\\tilde{\\Pi}^0_3$-conservative \nextension of ${\\mathrm{I}\\Sigma^0_1}$\nby showing that ${\\mathsf{WKL_0}}+{\\mathrm{EM}}$ is a $\\tilde{\\Pi}^0_3$-conservative \nextension of ${\\mathrm{I}\\Sigma^0_1}$.\nFor this, we will bound the size of $\\bbomega^{k}$-large(${\\mathrm{EM}}$) sets \nby $\\bbomega^{n}$-large sets using the following finite grouping principle.\n\n\\begin{definition}[${\\mathrm{I}\\Sigma^0_1}$, finite grouping principle]\nGiven largeness notions ${\\mathsf{L}}_{1}, {\\mathsf{L}}_{2}$ and a coloring \n$f:[X]^{n}\\to k$, \\textit{$({\\mathsf{L}}_{1},{\\mathsf{L}}_{2})$-grouping for $f$} \nis a finite family of finite sets $\\langle F_{i}\\subseteq X\\mid i<l \\rangle$ such that \n\\begin{itemize}\n \\item ${\\forall} i<j<l\\, \\max F_{i}<\\min F_{j}$,\n \\item ${\\forall} i<l\\, F_{i}\\in {\\mathsf{L}}_{1}$,\n \\item for any $H\\subseteq_{{\\mathrm{fin}}}{\\mathbb{N}}$, if $H\\cap F_{i}\\neq\\emptyset$ for any $i<l$, then $H\\in {\\mathsf{L}}_{2}$, and,\n \\item ${\\forall} i_{1}<\\dots< i_{n}\\, {\\exists} c<k\\, {\\forall} x_{1}\\in F_{i_{1}},\\dots,{\\forall} x_{n}\\in F_{i_{n}}\\, f(x_{1},\\dots,x_{n})=c$.\n\\end{itemize}\nNote that if ${\\mathsf{L}}_{2}$ is regular, then the third condition \ncan be replaced with $\\{\\max F_{i}\\mid i<l\\}\\in {\\mathsf{L}}_{2}$.\nNow ${\\mathrm{FGP}}^{n}_{k}({\\mathsf{L}}_{1},{\\mathsf{L}}_{2})$ (finite grouping principle \nfor $({\\mathsf{L}}_{1},{\\mathsf{L}}_{2})$) asserts that for any infinite set $X_{0}\\subseteq{\\mathbb{N}}$, \nthere exists a finite set $X\\subseteq X_{0}$ such that for any \ncoloring $f:[X]^{n}\\to k$, there exists a $({\\mathsf{L}}_{1},{\\mathsf{L}}_{2})$-grouping for $f$.\n\n\n\n\\end{definition}\n\\begin{thm}\\label{thm-FGP}\nLet ${\\mathsf{L}}_{1}$ and ${\\mathsf{L}}_{2}$ be $\\Delta_{0}$-definable \nregular largeness notions provably in ${\\mathrm{I}\\Sigma^0_1}$. \nThen, ${\\mathrm{I}\\Sigma^0_1}$ proves ${\\mathrm{FGP}^{2}_{2}}({\\mathsf{L}}_{1},{\\mathsf{L}}_{2})$.\n\\end{thm}\n\\begin{proof}\nOne can easily check that ${\\mathrm{FGP}^{2}_{2}}({\\mathsf{L}}_{1},{\\mathsf{L}}_{2})$ is a $\\tilde\\Pi^{0}_{3}$-statement which is provable from ${\\mathsf{WKL_0}}+{\\mathrm{GP}^{2}_{2}}({\\mathsf{L}}_{1})$.\nThus, ${\\mathrm{I}\\Sigma^0_1}$ proves ${\\mathrm{FGP}^{2}_{2}}({\\mathsf{L}}_{1},{\\mathsf{L}}_{2})$ by Theorem~\\ref{thm:GP-conservation}.\n\\end{proof}\n\nNow we apply the generalized Parsons theorem to the finite grouping principle.\nActually, its upper bound also bounds $\\bbomega^{k}$-large(${\\mathrm{EM}}$) sets as follows.\n\\begin{lem}\\label{lem-EM-largeness}\nFor any $k\\in\\omega$, there exists $n\\in\\omega$ such that\n\\begin{itemize}\n \\item[] \\rm ${\\mathrm{I}\\Sigma^0_1}\\vdash {\\forall} Z\\subseteq_{{\\mathrm{fin}}}(3,\\infty)_{{\\mathbb{N}}}(Z$ \nis $\\bbomega^{n}$-large $\\to Z$ is $\\bbomega^{k}$-large(${\\mathrm{EM}}$)$)$.\n\\end{itemize}\n\\end{lem}\n\\begin{proof}\nWe will prove this by (external) induction.\nFor the case $k=1$, $n=6$ is enough by Theorem~\\ref{SK-theorem}.\nAssume now $k>1$ and $\\bbomega^{n_{0}}$-largeness implies \n$\\bbomega^{k-1}$-large(${\\mathrm{EM}}$)ness in ${\\mathrm{I}\\Sigma^0_1}$.\nBy Theorems~\\ref{thm-g-Parsons} and \\ref{thm-FGP},\ntake $n\\in\\omega$ so that \n${\\mathrm{I}\\Sigma^0_1}$ proves ${\\forall} Z\\subseteq_{{\\mathrm{fin}}}{\\mathbb{N}}(Z$ is $\\bbomega^{n}$-large $\\to$ \nany coloring $f:[Z]^{2}\\to 2$ has an $(\\bbomega^{n_{0}},\\bbomega^{6})$-grouping$)$.\nWithin ${\\mathrm{I}\\Sigma^0_1}$, given an $\\bbomega^{n}$-large set $Z\\subseteq (3,\\infty)_{{\\mathbb{N}}}$ \nand $f:[[0,\\max Z]_{{\\mathbb{N}}}]^{2}\\to 2$, we want to find $H\\subseteq Z$ such that \n$f$ is transitive on $[H]^{2}$ and $H$ is $\\bbomega^{k}$-large.\nBy the assumption, there exists an $(\\bbomega^{n_{0}},\\bbomega^{6})$-grouping \n$\\langle F_{i}\\mid i<l \\rangle\\subseteq Z$ for $f$.\nSince each $F_{i}$ is $\\bbomega^{n_{0}}$-large, it is $\\bbomega^{k-1}$-large(${\\mathrm{EM}}$), \nthus, there exists $H_{i}\\subseteq F_{i}$ such that $H_{i}$ \nis $\\bbomega^{k-1}$-large and $f$ is transitive on $[H_{i}]^{2}$. \nOn the other hand, $\\{\\max F_{i}\\mid i<l\\}$ is $\\bbomega^{6}$-large, \nthus, there exists $\\tilde{H}\\subseteq\\{\\max F_{i}\\mid i<l\\}$ \nsuch that $\\tilde{H}$ is $\\bbomega$-large and $f$ is constant on \n$[\\tilde{H}]^{2}$ by Theorem~\\ref{SK-theorem}.\nPut $H=\\bigcup\\{H_{i}\\mid i<l, \\max F_{i}\\in \\tilde{H}\\}$.\nThen, one can easily check that $H$ is $\\bbomega^{k}$-large.\nWe now show that $f$ is transitive on $[H]^{2}$. Let $a,b,c\\in H$ and \n$a<b<c$. If there exists $i<l$ such that $a,b,c\\in H_{i}$, \nthen $f$ is transitive for $a,b,c$ since $f$ is transitive on $[H_{i}]^{2}$.\nIf for some $i_{0}<i_{1}<l$, $a,b\\in H_{i_{0}}$ and $c\\in H_{i_{1}}$, \nthen, $f(a,c)=f(b,c)$, so $f$ is transitive for $a,b,c$.\nThe case $a\\in H_{i_{0}}$ and $b,c\\in H_{i_{1}}$ for some $i_{0}<i_{1}<l$ is similar.\nFinally, if for some $i_{0}<i_{1}<i_{2}<l$, $a\\in H_{i_{0}}$, \n$b\\in H_{i_{1}}$ and $c\\in H_{i_{2}}$, then $f(a,b)=f(\\max F_{i_{0}},\n\\max F_{i_{1}})=f(\\max F_{i_{0}},\\max F_{i_{2}})=f(a,c)$, \nthus $f$ is transitive for $a,b,c$.\n\\end{proof}\n\n\\begin{thm}\\label{thm-con-EM}\n${\\mathsf{WKL_0}}+{\\mathrm{EM}}$ is a $\\tilde{\\Pi}{}^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{thm}\n\\begin{proof}\nBy Theorems~\\ref{thm-omega-largeness}, \n\\ref{thm-provably-large-conservative} and Lemma~\\ref{lem-EM-largeness}.\n\\end{proof}\n\n\nNow the main theorem follows from the amalgamation theorem.\n\\begin{thm}\\label{thm-con-RT22}\n${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}$ is a $\\tilde{\\Pi}{}^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{thm}\n\\begin{proof}\nBy Theorem~\\ref{thm:amalgamation}, Corollary~\\ref{cor-con-ADS} and Theorem~\\ref{thm-con-EM}.\n\\end{proof}\n\n\nSeetapun and Slaman~\\cite{Seetapun1995strength} asked whether ${\\mathsf{RCA_0}} + {\\mathrm{RT}}^2_2$ proves the consistency of ${\\mathrm{I}\\Sigma^0_1}$,\nand Cholak, Jockusch and Slaman~\\cite{CJS} asked whether ${\\mathsf{RCA_0}} + {\\mathrm{RT}}^2_2$ proves the totality of Ackermann function.\nWe answer negatively through the main theorem.\n\\begin{cor}\n${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}$ does not imply the consistency of ${\\mathrm{I}\\Sigma^0_1}$ nor the totality of Ackermann function. \n\\end{cor}\n\nNote that one can avoid using the amalgamation theorem by directly \ncombining the bounds for large(${\\mathrm{psRT}}^{2}_{2}$)ness and large(${\\mathrm{EM}}$)ness\nin order to obtain a bound for  $\\bbomega^{k}$-large(${\\mathrm{RT}}^{2}_{2}$) sets and reprove the main conservation theorem.\n\\begin{prop}\\label{prop-RT22-largeness}\nFor any $k\\in\\omega$, there exists $n\\in\\omega$ such that\n\\begin{itemize}\n \\item[] \\rm ${\\mathrm{I}\\Sigma^0_1}\\vdash {\\forall} Z\\subseteq_{{\\mathrm{fin}}}(3,\\infty)_{{\\mathbb{N}}}(Z$ \nis $\\bbomega^{n}$-large $\\to Z$ is $\\bbomega^{k}$-large(${\\mathrm{RT}}^{2}_{2}$)$)$.\n\\end{itemize}\n\\end{prop}\n\\begin{proof}\nGiven $k\\in\\omega$, take $n\\in\\omega$ so that ${\\mathrm{I}\\Sigma^0_1}$ proves \n${\\forall} Z\\subseteq_{{\\mathrm{fin}}}(3,\\infty)_{{\\mathbb{N}}}(Z$ is $\\bbomega^{n}$-large $\\to Z$ \nis $\\bbomega^{2k+6}$-large(${\\mathrm{EM}}$)$)$ by Lemma~\\ref{lem-EM-largeness}.\nThen, within ${\\mathrm{I}\\Sigma^0_1}$, given $Z\\subseteq_{{\\mathrm{fin}}}(3,\\infty)_{{\\mathbb{N}}}$ \nwhich is $\\bbomega^{n}$-large and $f:[[0,\\max Z]_{{\\mathbb{N}}}]^{2}\\to 2$, there exists $H_{0}\\subseteq Z$ \nsuch that $H_{0}$ is $\\bbomega^{2k+6}$-large and $f$ is transitive on $[H_{0}]^{2}$.\nOne can easily find a transitive coloring $f':[[0,\\max H_{0}]_{{\\mathbb{N}}}]^{2}\\to 2$ such that $f'{\\upharpoonright}[H_{0}]^{2}=f{\\upharpoonright}[H_{0}]^{2}$.\n(Set $f'(x,y)=0$ if $x\\notin H_{0}$, $f'(x,y)=1$ if $x\\in H_{0}$ and $y\\notin H_{0}$, and $f'(x,y)=f(x,y)$ if $x,y\\in H_{0}$.)\nThen, by Lemma~\\ref{lem-ADS-largeness}, there exists $H\\subseteq H_{0}$ \nsuch that $H$ is $\\bbomega^{k}$-large and $f$ is constant on $[H]^{2}$.\nThus, $Z$ is $\\bbomega^{k}$-large(${\\mathrm{RT}}^{2}_{2}$).\n\\end{proof}\nThen, Theorem~\\ref{thm-con-RT22} follows from Theorems~\\ref{thm-omega-largeness}, \\ref{thm-provably-large-conservative} and Proposition~\\ref{prop-RT22-largeness}.\n\n\\section{Formalizing the conservation proof}\\label{section-consistency-strength}\n\nIn this section, we will formalize Theorem~\\ref{thm-con-RT22} within ${\\mathsf{PRA}}$.\nActually, most arguments we used are straightforwardly formalizable within ${\\mathsf{WKL_0}}$.\nWe however need to take care of the use of external induction and non-computable construction of models.\nWe fix a standard provability predicate $\\vdash$.\n\n\\begin{lem}\\label{lem-formalization}\nThe following are provable within ${\\mathsf{WKL_0}}$.\n\\begin{enumerate}\n \\item\\label{e-0} ${\\forall} \\varphi\\in \\Pi^{1}_{1}(({\\mathsf{WKL_0}}\\vdash \\varphi)\\to ({\\mathrm{I}\\Sigma^0_1}\\vdash \\varphi))$ \n\t\t(Theorem~\\ref{thm:harrington-conservation-wkl}).\n \\item\\label{e-2} ${\\forall} n\\in{\\mathbb{N}} ({\\mathrm{I}\\Sigma^0_1}\\vdash \\mbox{any infinite set has an $\\bbomega^{n}$-large subset})$ (Theorem~\\ref{thm-omega-largeness}).\n \\item\\label{e-2-1} ${\\forall} k\\in{\\mathbb{N}} ({\\mathrm{I}\\Sigma^0_1}\\vdash \\mbox{$X$ is $\\bbomega^{k+4}$-large}\\wedge \\min X>3 \\to \\mbox{$X$ is $\\bbomega$-large$({\\mathrm{RT}}^{2}_{k})$})$ (Theorem~\\ref{SK-theorem}).\n \\item\\label{e-1-1} The generalized Parsons theorem (Theorem~\\ref{thm-g-Parsons}).\n \\item\\label{e-1-2} The amalgamation theorem (Theorem~\\ref{thm:amalgamation}).\n \\item\\label{e-2-2} $({\\forall} n\\in{\\mathbb{N}}({\\mathrm{I}\\Sigma^0_1}\\vdash \\mbox{any infinite set has an $\\bbomega^{n}$-large$(\\Gamma)$ subset}))\\to ({\\forall} \\varphi\\in \\tilde\\Pi^{0}_{3}(({\\mathsf{WKL_0}}+\\Gamma\\vdash \\varphi)\\to ({\\mathrm{I}\\Sigma^0_1}\\vdash \\varphi)))$ for $\\Gamma\\equiv{\\mathrm{psRT}}^{2}_{2}, {\\mathrm{EM}}$ (Theorem~\\ref{thm-provably-large-conservative}).\n \\item\\label{e-3-1} ${\\forall} n\\in{\\mathbb{N}}({\\mathrm{I}\\Sigma^0_1}\\vdash \\mbox{any infinite set has an $\\bbomega^{n}$-large$({\\mathrm{psRT}}^{2}_{2})$ subset})$ (Lemma~\\ref{lem-ADS-largeness}).\n \\item\\label{e-4-0} ${\\forall} \\varphi\\in \\tilde\\Pi^{0}_{3}(({\\mathsf{WKL_0}}+{\\mathrm{GP}^{2}_{2}}\\vdash \\varphi)\\to ({\\mathrm{I}\\Sigma^0_1}\\vdash \\varphi))$ (Theorem~\\ref{thm:GP-conservation}).\n\n\n\n \\item\\label{e-4} ${\\forall} k\\in {\\mathbb{N}}({\\mathrm{I}\\Sigma^0_1}\\vdash {\\mathrm{FGP}^{2}_{2}}({\\mathsf{L}}_{\\bbomega^{k}},{\\mathsf{L}}_{\\bbomega^{6}}))$ (Theorem~\\ref{thm-FGP}).\n \\item\\label{e-5-1} ${\\forall} n\\in{\\mathbb{N}}({\\mathrm{I}\\Sigma^0_1}\\vdash \\mbox{any infinite set has an $\\bbomega^{n}$-large$({\\mathrm{EM}})$ subset})$ (Lemma~\\ref{lem-EM-largeness}).\n\n\\end{enumerate}\n\\end{lem}\n\\begin{proof}\nWe reason within ${\\mathsf{WKL_0}}$.\nFor {\\textrm{(\\ref{{e-0}})}}, several formalized proofs are known. See, e.g., \\cite{Avigad1996,Hajek}.\nFor {\\textrm{(\\ref{{e-2}})}}, the induction used here is on provability, thus it is a $\\Sigma^{0}_{1}$-induction.\nFor {\\textrm{(\\ref{{e-2-1}})}}, the original Ketonen and Solovay's proof is directly formalizable (see \\cite[Section 6]{KS81}).\nFor {\\textrm{(\\ref{{e-1-1}})}} and {\\textrm{(\\ref{{e-1-2}})}}, we can directly formalize our model-theoretic proofs of Theorems~\\ref{thm-g-Parsons} and \\ref{thm:amalgamation} by using the completeness theorem which is available within ${\\mathsf{WKL_0}}$.\nFor {\\textrm{(\\ref{{e-2-2}})}}, we can formalize the proofs of Lemma~\\ref{lem-cut-from-dense-set} and Theorem~\\ref{thm-conservation-via-density-general} by using the completeness theorem.\nTo formalize the proof of Theorem~\\ref{thm-provably-large-conservative}, we use the induction on provability.\nFor {\\textrm{(\\ref{{e-3-1}})}}, formalize the proof of Lemma~\\ref{lem-ADS-largeness}. Formalization is direct since we only deal with finite objects.\nFor {\\textrm{(\\ref{{e-4-0}})}}, formalize the argument in Section~\\ref{section-GP-con}.\nTo formalize the proof of Theorem~\\ref{thm-con-Bn+1-vs-In}, an $\\omega$-extension to be a model of ${\\mathrm{B}\\Sigma^0_2}+{\\mathsf{WKL_0}}$ is available within ${\\mathsf{WKL_0}}$ by formalizing the argument by H\\'ajek\\cite{Hajek} or Belanger\\cite{Belanger}.\nThe existence of a countable recursively saturated model is provable in ${\\mathsf{WKL_0}}$ (see \\cite[Section IX]{SOSOA}) and the Theorem~\\ref{thm-c-resplendency} can be formalized similarly.\nTo formalize the proof of Lemma~\\ref{lem:ISig1-preservation}, one can take a generic by the Baire category theorem which is available within ${\\mathsf{RCA_0}}$.\n{\\textrm{(\\ref{{e-4}})}} is straightforward from {\\textrm{(\\ref{{e-4-0}})}}.\nFor {\\textrm{(\\ref{{e-5-1}})}}, formalize the proof of Lemma~\\ref{lem-EM-largeness}. The induction used here is again on provability.\n\\end{proof}\n\nThus, we have the following formalized conservation theorem.\n\\begin{thm}\\label{thm:equi-consistency}\n ${\\mathsf{PRA}}$ proves that ${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}\\vdash\\psi$ \nimplies ${\\mathrm{I}\\Sigma^0_1}\\vdash \\psi$ for any $\\tilde{\\Pi}{}^{0}_{3}$-sentences.\n\\end{thm}\n\nNow the consistency equivalence of ${\\mathrm{I}\\Sigma^0_1}$ and ${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}$ follows from this formalized conservation theorem.\n\\begin{cor}\n Over ${\\mathsf{PRA}}$, ${\\mathrm{Con}}({\\mathrm{I}\\Sigma^0_1})$ is equivalent to ${\\mathrm{Con}}({\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2})$.\n\\end{cor}\n\n\n\\section{Open questions}\n\nIn their paper~\\cite{CSY201X}, Chong, Slaman and Yang asked whether ${\\mathrm{RT}}^2_2$ is a $\\Pi^1_1$-conservative extension of ${\\mathsf{RCA_0}} + {\\mathrm{B}\\Sigma^0_2}$.\nThis question remains open, and a positive answer would strengthen our main conservation result since\n${\\mathrm{B}\\Sigma^0_2}$ is $\\Pi^0_3$-conservative over~${\\mathrm{I}\\Sigma^0_1}$ (Theorem~\\ref{thm:bsig2-pi03-conservative-isig1}).\n\n\\begin{question}[Chong, Slaman, Yang]\\label{quest:rt22-pi11-bsig2}\nIs ${\\mathrm{RT}}^2_2$ a $\\Pi^1_1$-conservative extension of~${\\mathsf{RCA_0}} + {\\mathrm{B}\\Sigma^0_2}$?\n\\end{question}\n\nIn particular, they proved~\\cite{CSY2012} that the chain anti-chain principle is $\\Pi^1_1$-conservative over~${\\mathsf{RCA_0}} + {\\mathrm{B}\\Sigma^0_2}$.\nTherefore, in order to answer Question~\\ref{quest:rt22-pi11-bsig2}, one needs only to prove that \nthis is also the case for the Erd\\H{o}s-Moser theorem.\n\nFor the purposes of our conservation proof, we introduced the grouping principle,\nwhich seems to be interesting to study in its own right. \nThe standard proofs that a principle implies ${\\mathrm{B}\\Sigma^0_2}$ does not seem to be directly\napplicable to the grouping principle. The relation between the grouping\nprinciple and the $\\Sigma^0_2$-bounding principle is currently unknown.\n\n\\begin{question}\nDoes ${\\mathrm{GP}^{2}_{2}}$ imply~${\\mathrm{B}\\Sigma^0_2}$ over~${\\mathsf{RCA_0}}$?\n\\end{question}\n\nA proof of $\\Pi^1_1$-conservation of the grouping principle over~${\\mathrm{B}\\Sigma^0_2}$\nwould significantly simplify our conservation argument since the finite grouping\nprinciple can be easily derived from its infinite version.\n\n\\begin{question}\nIs ${\\mathrm{GP}^{2}_{2}}$ a $\\Pi^1_1$-conservative extension of ${\\mathsf{RCA_0}} + {\\mathrm{B}\\Sigma^0_2}$?\n\\end{question}\n\n\nThe grouping principle has been used to establish a density bound for the Erd\\H{o}s-Moser theorem.\nThe stable grouping principle does not imply the stable version of the Erd\\H{o}s-Moser theorem\nsince the former admits low solutions whereas the latter does not. It is however unknown\nwhether the full version of the two principles coincide.\n\n\\begin{question}\nDoes~${\\mathrm{EM}}$ imply ${\\mathrm{GP}^{2}_{2}}$ over~${\\mathsf{RCA_0}}$?\n\\end{question}\n\nOur conservation proof contains almost no information about the size of the proof, but it is interesting to know whether ${\\mathrm{RT}}^{2}_{2}$ gives shorter proofs for $\\tilde{\\Pi}{}^{0}_{3}$-consequences of ${\\mathrm{I}\\Sigma^0_1}$ or not.\n\\begin{question}\n Does ${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}$ or ${\\mathsf{WKL_0}}+{\\mathrm{psRT}}^{2}_{2}$ have a significant speed-up over ${\\mathrm{I}\\Sigma^0_1}$?\n\\end{question}\nNote that there is no significant speed-up between ${\\mathsf{WKL_0}}$ and ${\\mathrm{I}\\Sigma^0_1}$ (see Avigad\\cite{Avigad1996}).\nA killer example for this question is an existence of $m$-dense sets, \\textit{i.e.}, $m\\mbox{-}{\\widetilde{\\mathrm{PH}}{}}({\\mathrm{RT}}^{2}_{2})$ or $m\\mbox{-}{\\widetilde{\\mathrm{PH}}{}}({\\mathrm{psRT}}^{2}_{2})$.\nIt is not hard to see that $m\\mbox{-}{\\widetilde{\\mathrm{PH}}{}}({\\mathrm{RT}}^{2}_{2})$ can be proved from ${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}$ by using ${\\mathrm{RT}}^{2}_{2}$ $m$-times, and the case of ${\\mathrm{psRT}}^{2}_{2}$ is similar.\nOn the other hand, to prove $m\\mbox{-}{\\widetilde{\\mathrm{PH}}{}}({\\mathrm{psRT}}^{2}_{2})$ from ${\\mathrm{I}\\Sigma^0_1}$, what we know is the following.\n\\begin{prop}\\label{thm-ADS-density}\nFor any $m\\in\\omega$, the following is provable within ${\\mathrm{I}\\Sigma^0_1}$. \nIf a finite set $X\\subseteq{\\mathbb{N}}$ is $\\bbomega^{3^{m+1}}$-large and \n$\\min X>3$, then $X$ is $m$-dense(${\\mathrm{psRT}}^{2}_{2}$).\n\\end{prop}\n\\begin{proof}\nEasy induction by using Lemma~\\ref{lem-ADS-largeness}.\n\\end{proof}\n\\noindent\nThus, within ${\\mathrm{I}\\Sigma^0_1}$, we can obtain an $m$-dense$({\\mathrm{psRT}}^{2}_{2})$-set by using $\\Sigma^{0}_{1}$-induction $3^{m+1}$-times.\nThis might indicate that there is at most exponential speed-up for the case of ${\\mathrm{psRT}}^{2}_{2}$.\nFor the case of ${\\mathrm{RT}}^{2}_{2}$, the situation is more difficult.\nAn only upper bound for $m$-dense$({\\mathrm{RT}}^{2}_{2})$ sets obtained from our argument is the following.\n\\begin{prop}\n There exists a primitive recursive function $h:\\omega\\to\\omega$ such that for any $m\\in\\omega$, the following is provable within ${\\mathrm{I}\\Sigma^0_1}$. If a finite set $X\\subseteq\\omega$ is $\\bbomega^{h(m)}$-large then $X$ is $m$-dense$({\\mathrm{RT}}^{2}_{2})$.\n\\end{prop}\n\\begin{proof}\nBy formalizing the proof of Proposition~\\ref{prop-RT22-largeness} and applying $\\Sigma^{0}_{1}$-induction, we obtain\n", "itemtype": "equation", "pos": 98593, "prevtext": "\nNow ${\\mathrm{GP}}^{n}_{k}({\\mathsf{L}})$ (grouping principle for ${\\mathsf{L}}$) asserts \nthat for any coloring $f:[{\\mathbb{N}}]^{n}\\to k$, there exists an infinite ${\\mathsf{L}}$-grouping for $f$.\nWe write ${\\mathrm{GP}}^{n}_{k}$ for the statement saying that for any largeness notion \n${\\mathsf{L}}$, ${\\mathrm{GP}}^{n}_{k}({\\mathsf{L}})$ holds, ${\\mathrm{GP}}^{n}$ for ${\\forall} k{\\mathrm{GP}}^{n}_{k}$, \nand ${\\mathrm{GP}}$ for ${\\forall} n{\\mathrm{GP}}^{n}$.\n\\end{definition}\n\n\nNote that being a largeness notion is a $\\Pi^1_1$-statement. Therefore, an \\emph{instance}\nof~${\\mathrm{GP}^{2}_{2}}$ is a pair~$\\langle {\\mathsf{L}}, f \\rangle$ where ${\\mathsf{L}}$ is a collection of finite sets,\nand $f : [{\\mathbb{N}}]^2 \\to 2$ is a coloring.  A \\emph{solution} to an instance $\\langle {\\mathsf{L}}, f \\rangle$\nis either an ${\\mathsf{L}}$-grouping for~$f$, or an infinite set witnessing that ${\\mathsf{L}}$ is not a largeness notion,\nthat is, an infinite set with no finite subset in~${\\mathsf{L}}$.\n\n\nIn order to simplify the analysis of Ramsey's theorem for pairs,\nCholak, Jockusch and Slaman~\\cite{CJS01} split the proof of~${\\mathrm{RT}}^2_2$ into \\emph{cohesiveness}\nand a stable restriction of ${\\mathrm{RT}}^2_2$. A coloring $f : [{\\mathbb{N}}]^2 \\to k$ is \\emph{stable}\nif for every~$x$, $\\lim_y f(x, y)$ exists. ${\\mathrm{SRT}}^2_k$ is the restriction of ${\\mathrm{RT}}^2_2$ to stable colorings.\n\n\\begin{defi}[Cohesiveness]\nAn infinite set $C$ is $\\vec{R}$-cohesive for a sequence of sets $R_0, R_1, \\dots$\nif for each $i \\in {\\mathbb{N}}$, $C \\subseteq^{*} R_i$ or $C \\subseteq^{*} \\overline{R_i}$.\n${\\mathrm{COH}}$ is the statement ``Every uniform sequence of sets $\\vec{R}$\nhas an $\\vec{R}$-cohesive set.''\n\\end{defi}\n\nCohesiveness is a statement from standard computability theory.\nCholak, Jockusch and Slaman~\\cite{CJS01} claimed with an erroneous proof that it is a strict consequence of ${\\mathrm{RT}}^2_2$\nover~${\\mathsf{RCA_0}}$. Mileti~\\cite{Mileti2004Partition} fixed the proof. Hirschfeldt and Shore~\\cite{HS2007}\nproved that ${\\mathrm{COH}}$ is a consequence of~${\\mathrm{ADS}}$. Since then, many statements in reverse mathematics\nhave been split into their cohesive and their stable part~\\cite{HS2007}.\nAccordingly, we will consider  the stable version ${\\mathrm{SGP}^{2}_{2}}$ which stands for ${\\mathrm{GP}^{2}_{2}}$ for stable colorings.\nOne can prove that~${\\mathsf{RCA_0}} \\vdash {\\mathrm{COH}} + {\\mathrm{SGP}^{2}_{2}} \\rightarrow {\\mathrm{GP}^{2}_{2}}$ by the same argument\nas ${\\mathsf{RCA_0}} \\vdash {\\mathrm{COH}} + {\\mathrm{SRT}}^2_2 \\rightarrow {\\mathrm{RT}}^2_2$ ~\\cite{CJS01}. \nStable Ramsey's theorem for pairs admits a nice computability-theoretic characterization\nin terms of infinite subsets of a $\\Delta^0_2$ set.\nWe can give a similar characterization for the stable grouping principle for pairs.\n\n\\begin{definition}[${\\mathsf{RCA_0}}$]\nGiven a largeness notion~${\\mathsf{L}}$, an \\textit{${\\mathsf{L}}$-grouping} for a set~$A$ \nis an infinite family of ${\\mathsf{L}}$-large finite sets\n$\\{F_0 < F_1 < \\dots \\} \\subseteq {\\mathsf{L}}$ such that\n$(\\forall i)[F_i \\subseteq A \\vee F_i \\subseteq \\overline{A}]$\n\\end{definition}\n\nThe argument can be carried-out within ${\\mathrm{B}\\Sigma^0_2}$. Unlike ${\\mathrm{SRT}}^2_2$,\nit is currently unknown whether~${\\mathrm{SGP}^{2}_{2}}$ implies~${\\mathrm{B}\\Sigma^0_2}$ over~${\\mathsf{RCA_0}}$.\n\n\\begin{lemma}\\label{lem:stable-grouping-characterization}\n${\\mathsf{RCA_0}} + {\\mathrm{B}\\Sigma^0_2} \\vdash {\\mathrm{SGP}^{2}_{2}}({\\mathsf{L}}) \\leftrightarrow$ ``Every $\\Delta^0_2$ set has an infinite~${\\mathsf{L}}$-grouping''.\n\\end{lemma}\n\nWe will now show the existence of an $\\omega$-model of ${\\mathrm{SGP}^{2}_{2}}$ containing only low sets.\nRecall that an instance is a pair $\\langle {\\mathsf{L}}, f \\rangle$,\nand a solution is either a witness that ${\\mathsf{L}}$ is not a largeness notion, or an ${\\mathsf{L}}$-grouping for~$f$.\nWe need therefore to show that given any computable collection of finite sets~${\\mathsf{L}}$\nand any $\\Delta^0_2$ set~$A$, there is either an infinite low set~$Y$ witnessing that\n${\\mathsf{L}}$ is not a largeness notion, or a low ${\\mathsf{L}}$-grouping for~$A$.\nIn what follows, we denote by $\\mathsf{LOW}$ the collection of all low sets.\n\n\\begin{theorem}\\label{thm:grouping-low-solution}\nFor every computable set~${\\mathsf{L}}$ which is a largeness notion on $(\\omega, \\mathsf{LOW})$,\nevery $\\Delta^0_2$ set has an infinite low ${\\mathsf{L}}$-grouping.\n\\end{theorem}\n\\begin{proof}\nFix a $\\Delta^0_2$ set~$A$.\nWe will construct an infinite low ${\\mathsf{L}}$-grouping for~$A$ by an effective forcing notion\nwhose conditions are tuples~$c = (F_0, \\dots, F_k, X_0, \\dots, X_m)$ such that\n\\begin{itemize}\n\t\\item[(i)] $F_i \\in {\\mathsf{L}}$ and $F_i \\subseteq_{{\\mathrm{fin}}} A$ or~$F_i \\subseteq_{{\\mathrm{fin}}} \\overline{A}$ for each~$i \\leq k$,\n\t\\item[(ii)] $F_i < F_{i+1}$ for each~$i < k$,\n\t\\item[(iii)] $X_0 \\sqcup \\dots \\sqcup X_m$ is a low partition of~$\\omega$.\n\\end{itemize}\nA condition~$d = (F_0, \\dots, F_\\ell, Y_0, \\dots, Y_n)$ \\emph{extends} a condition~$c = (F_0, \\dots, F_k, X_0, \\dots, X_m)$\n(written~$d \\leq c$) if~$\\ell \\geq k$, for every~$i \\in (k, \\ell]_{{\\mathbb{N}}}$, $F_i \\subseteq X_j$ for some~$j \\leq n$ \nand~$Y_0, \\dots, Y_n$ refines $X_0, \\dots, X_m$, that is, for each~$i \\leq n$, there is some~$j \\leq m$ such that~$Y_i \\subseteq X_j$.\nAn \\emph{index} of the condition~$c$ is a tuple~$(F_0, \\dots, F_k, e)$ where~$\\Phi^{\\emptyset'}_e$ decides the jump\nof the partition~$X_0, \\dots, X_m$.\nWe first claim that the finite sequence of sets can be extended.\n\n\\begin{claim*}\nFor every condition $c = (F_0, \\dots, F_k, X_0, \\dots, X_m)$,\nthere is an extension~$d = (F_0, \\dots, F_\\ell,\\allowbreak X_0, \\dots, X_m)$ of~$c$ such that~$\\ell > k$.\nMoreover, an index of~$d$ can be found $\\emptyset'$-uniformly in an index of~$c$.\n\\end{claim*}\n\\begin{proof}[\\it Proof of the claim]\nWe first show that there is a set~$F > F_k$ such that~$F \\in {\\mathsf{L}} \\cap X_i$ for some~$i \\leq n$ \nand~$F \\subseteq A$ or~$F \\subseteq \\overline{A}$.\nLet~$i \\leq n$ be such that~$X_i$ is infinite.\nWe claim that there is some finite set~$F \\in {\\mathsf{L}}$ such that $F \\subseteq X_i \\cap A \\setminus [0, \\max(F_k)]_{{\\mathbb{N}}}$\nor $F \\subseteq X_i \\cap \\overline{A} \\setminus [0, \\max(F_k)]_{{\\mathbb{N}}}$.\nSuppose for the sake of contradiction that there is no such set. Then the $\\Pi^{0,X_i}_1$ class\nof all sets~$Z$ such that for every $F \\in {\\mathsf{L}}$,  $F \\not\\subseteq X_i \\cap Z \\setminus [0, \\max(F_k)]_{{\\mathbb{N}}}$\nand $F \\not \\subseteq X_i \\cap \\overline{Z} \\setminus [0, \\max(F_k)]_{{\\mathbb{N}}}$ is non-empty.\nBy the low basis theorem, there is a $Z$ such that~$Z \\oplus X_i$ is low over~$X_i$,\nhence low. The set~$Z$ or its complement contradicts the fact that \n${\\mathsf{L}}$ is a largeness notion on $(\\omega, \\mathsf{LOW})$.\n\nKnowing that such a set~$F$ exists, we can find it $\\emptyset'$-uniformly in $c$ and a $\\Delta^0_2$ index of the set~$A$.\nThe condition~$(F_0, \\dots, F_k, F, X_0, \\dots, X_m)$ is a valid extension of~$c$.\nNote that such a set~$F$ does not need to be part of an infinite~$X_i \\cap A$ or~$X_i \\cap \\overline{A}$.\nThe choice of an infinite part has simply been used to claim the existence of any such set.\n\\end{proof}\n\nWe say that an ${\\mathsf{L}}$-grouping for~$A$ $\\langle E_0 < E_1 < \\dots\\rangle$ \\emph{satisfies} a condition\n$c = (F_0, \\dots, F_k, X_0, \\dots, X_m)$ if $E_0 = F_0$, \\dots, $E_k = F_k$\nand for every~$i > k$, there is some~$j \\leq m$ such that $E_i \\subseteq X_j$.\nA condition~$c$ \\emph{forces} formula $\\varphi(G)$ if $\\varphi(\\vec{E})$\nholds for every ${\\mathsf{L}}$-grouping $\\vec{E}$ satisfying~$c$.\n\n\\begin{claim*}\nFor every condition~$c$ and every index~$e \\in \\omega$, there is an extension~$d$\nforcing either~$\\Phi^G_e(e) \\downarrow$ or~$\\Phi^G_e(e) \\uparrow$. Moreover, an index of~$d$\ncan be found $\\emptyset'$-uniformly in an index of~$c$ and~$e$.\n\\end{claim*}\n\\begin{proof}[\\it Proof of the claim]\nFix a condition $c = (F_0, \\dots, F_k, X_0, \\dots, X_m)$. We have two cases.\n\nIn the first case, for every 2-partition~$Z_0 \\cup Z_1 = \\omega$,\nthere is a sequence of finite sets~$F_{k+1}, \\dots, F_\\ell$ such that\n$F_k < F_{k+1} < \\dots < F_\\ell$, $\\Phi_e^{F_0, \\dots, F_\\ell}(e) \\downarrow$,\nand for every~$i \\in (k, \\ell]$, $F_i \\in {\\mathsf{L}}$ and there is some~$j \\leq m$\n$F_i \\subseteq Z_0 \\cap X_j$ or~$F_i \\subseteq Z_1 \\cap X_j$.\nIn particular, taking~$Z_0 = A$ and~$Z_1 = \\overline{A}$, \nthere is a sequence of finite sets~$F_{k+1}, \\dots, F_\\ell$\nsuch that~$d = (F_0, \\dots, F_\\ell, X_0, \\dots, X_m)$ is a valid extension of~$c$\nand $\\Phi_e^{F_0, \\dots, F_\\ell}(e) \\downarrow$. Such an extension can be found $\\emptyset'$-uniformly in\nan index of~$c$, $e$ and a $\\Delta^0_2$ index of~$A$.\n\nIn the second case, the $\\Pi^{0, \\vec{X}}_1$ class of all the 2-partitions~$Z_0 \\cup Z_1 = \\omega$\nsuch that $\\Phi_e^{F_0, \\dots, F_\\ell}(e) \\uparrow$ for every sequence of finite sets~$F_{k+1}, \\dots, F_\\ell$ such that\n$F_k < F_{k+1} < \\dots < F_\\ell$,\nand for every~$i \\in (k, \\ell]_{{\\mathbb{N}}}$, $F_i \\in {\\mathsf{L}}$ and there is some~$j \\leq m$\n$F_i \\subseteq Z_0 \\cap X_j$ or~$F_i \\subseteq Z_1 \\cap X_j$ is non-empty.\nBy the low basis theorem~\\cite{Jockusch197201} relativized to~$\\vec{X}$, there is a such a 2-partition~$Z_0 \\cup Z_1 = \\omega$\nsuch that~$Z_0 \\oplus Z_1 \\oplus \\vec{X}$ is low. Moreover, a lowness index for~$Z_0 \\oplus Z_1 \\oplus \\vec{X}$\ncan be found uniformly in a lowness index for~$\\vec{X}$.\nThe condition~$d = (F_0, \\dots, F_k, X_0 \\cap Z_0, X_0 \\cap Z_1, \\dots, X_m \\cap Z_0, X_m \\cap Z_1)$ \nis an extension of~$c$ forcing~$\\Phi^G_e(e) \\uparrow$.\n\nMoreover, we can $\\vec{X}'$-decide (hence $\\emptyset'$-decide) whether the $\\Pi^{0, \\vec{X}}_1$ class is empty,\nthus we can find the extension~$d$ $\\emptyset'$-effectively in an index of~$c$ and~$e$.\n\\end{proof}\n\nThanks to the claims, define an infinite, \nuniformly $\\emptyset'$-computable decreasing sequence of conditions\n$c_0 = (\\varepsilon, \\omega) \\geq c_1 \\geq c_2 \\geq \\dots$, \nwhere~$c_s = (F_0, \\dots, F_{k_s}, X^s_{0}, \\dots, X^s_{m_s})$ such that for each~$s \\in \\omega$\n\\begin{itemize}\n\t\\item[(a)] $k_s \\geq s$\n\t\\item[(b)] $c_{s+1}$ forces $\\Phi^G_s(s) \\uparrow$ or~$\\Phi^G_s(s) \\downarrow$\n\\end{itemize}\nThis sequence yields a ${\\mathsf{L}}$-grouping for~$A$ $\\langle F_0, F_1, \\dots \\rangle$\nwhich is infinite by (a) and whose jump is $\\Delta^0_2$ by (b). \nThis finishes the proof of Theorem~\\ref{thm:grouping-low-solution}.\n\\end{proof}\n\n\n\\begin{corollary}\\label{cor:sgp-only-low-sets}\n${\\mathrm{SGP}^{2}_{2}} + {\\mathrm{SADS}} + {\\mathsf{WKL_0}}$ has an $\\omega$-model with only low sets.\n\\end{corollary}\n\\begin{proof}\nBy Lemma~\\ref{lem:stable-grouping-characterization} and \nand the low basis theorem~\\cite{Jockusch197201} in a relativized form.\nAs explained, for every collection~${\\mathsf{L}}$ and every stable coloring $f : [\\omega]^2 \\to 2$, one need either to add a\nlow set witnessing that ${\\mathsf{L}}$ is not a notion of largeness, or to add an infinite low ${\\mathsf{L}}$-grouping for~$f$.\n\\end{proof}\n\n\\begin{corollary}\n${\\mathsf{RCA_0}} + {\\mathrm{SGP}^{2}_{2}} + {\\mathrm{SADS}} + {\\mathsf{WKL_0}}$ implies neither~${\\mathrm{SRT}}^2_2$, nor~${\\mathrm{SEM}}$.\n\\end{corollary}\n\\begin{proof}\nDowney, Hirschfeldt, Lempp and Solomon~\\cite{Downey200102}\nbuilt a computable instance of ${\\mathrm{SRT}}^2_2$ with no low solution.\nCorollary~\\ref{cor:sgp-only-low-sets} enables us to conclude that~${\\mathsf{RCA_0}} + {\\mathrm{SGP}^{2}_{2}} + {\\mathrm{SADS}} + {\\mathsf{WKL_0}}$\ndoes not imply ${\\mathrm{SRT}}^2_2$. Since~${\\mathsf{RCA_0}} + {\\mathrm{SADS}} + {\\mathrm{SEM}}$ implies~${\\mathrm{SRT}}^2_2$ (see \\cite{Lerman2013Separating})\nthen ${\\mathsf{RCA_0}} + {\\mathrm{SGP}^{2}_{2}} + {\\mathrm{SADS}} + {\\mathsf{WKL_0}}$ does not imply ${\\mathrm{SEM}}$.\n\\end{proof}\n\n\nAmong the computability-theoretic properties used to separate\nRamsey-type theorems in reverse mathematics, the framework\nof preservation of hyperimmunity has been especially fruitful.\n\n\\begin{definition}[Hyperimmunity]\nThe \\emph{principal function} of a set $B = \\{x_0 < x_1 < \\dots \\}$ \nis the function $p_B$ defined by~$p_B(i) = x_i$ for each~$i \\in {\\mathbb{N}}$.\nA set~$X$ is \\emph{hyperimmune} if its principal function is not dominated by any\ncomputable function. \n\\end{definition}\n\nWang~\\cite{Wang2014Definability} recently used the notion of preservation\nof the arithmetic hierarchy to separate various theorems in reverse mathematics.\nThe first author showed~\\cite{Patey2015Iterative} that a former separation\nof the Erd\\H{o}s-Moser theorem from stable Ramsey's theorem for pairs\ndue to Lerman, Solomon and Towsner~\\cite{Lerman2013Separating}\ncould be reformulated in a similar framework, yielding the notion\nof preservation of hyperimmunity.\n\n\\begin{defi}[Preservation of hyperimmunity]\nA $\\Pi^1_2$-statement~${\\mathsf{P}}$ \\emph{admits preservation of hyperimmunity} if for each set~$Z$, \neach $Z$-hyperimmune sets~$A_0, A_1, \\dots$,\nand each ${\\mathsf{P}}$-instance $X \\leq_T Z$,\nthere is a solution $Y$ to~$X$ such that the~$A$'s are $Y \\oplus Z$-hyperimmune.\n\\end{defi}\n\nIn particular, if a $\\Pi^1_2$-statement ${\\mathsf{P}}$\nadmits preservation of hyperimmunity but another statement~${\\mathsf{Q}}$ does not,\nthen ${\\mathsf{P}}$ does not imply~${\\mathsf{Q}}$ over~${\\mathsf{RCA_0}}$.\nWe now show that the grouping principle enjoys preservation of hyperimmunity\nand deduce several separations from it.\n\n\\begin{theorem}\\label{thm:sgp22-preservation-hyperimmunity}\n${\\mathrm{SGP}^{2}_{2}}$ admits preservation of hyperimmunity.\n\\end{theorem}\n\\begin{proof}\nLet~$C$ be a set and~$B_0, B_1, \\dots$ be a sequence of $C$-hyperimmune sets.\nLet~$S$ be the collection of all sets~$X$ such that the~$B$'s are $X \\oplus C$-hyperimmune.\nBy Lemma~\\ref{lem:stable-grouping-characterization}, it suffices to show that for every\n$\\Delta^{0,C}_2$ set~$A$ and every $C$-computable largeness notion~${\\mathsf{L}}$ on $(\\omega, S)$\nthere is an infinite ${\\mathsf{L}}$-grouping $\\vec{F} = \\langle F_0 < F_1 < \\dots \\rangle$ for~$A$\nsuch that the~$B$'s are $\\vec{F} \\oplus C$-hyperimmune.\nTherefore, every instance $\\langle {\\mathsf{L}}, A \\rangle$ will have a solution $Y \\in S$,\nwhich will be either a witness that ${\\mathsf{L}}$ is not a largeness notion, or an ${\\mathsf{L}}$-grouping for~$A$.\n\nFix~$A$ and~${\\mathsf{L}}$.\nWe will construct an infinite ${\\mathsf{L}}$-grouping for~$A$ by a forcing argument\nwhose conditions are tuples~$(F_0, \\dots, F_k, X)$ where\n\\begin{itemize}\n\t\\item[(i)] $F_i \\in {\\mathsf{L}}$ and $F_i \\subseteq_{{\\mathrm{fin}}} A$ or~$F_i \\subseteq_{{\\mathrm{fin}}} \\overline{A}$ for each~$i \\leq k$.\n\t\\item[(ii)] $F_i < F_{i+1}$ for each~$i < k$\n\t\\item[(iii)] $X$ is an infinite set such that the~$B$'s are~$X \\oplus C$-hyperimmune.\n\\end{itemize}\nA condition~$d = (F_0, \\dots, F_\\ell, Y)$ \\emph{extends} a condition~$c = (F_0, \\dots, F_k, X)$\n(written~$d \\leq c$) if~$\\ell \\geq k$ and for every~$i \\in (k, \\ell]_{{\\mathbb{N}}}$, $F_i \\subseteq X$.\nThe proof of the following claim is exactly the same as in Theorem~\\ref{thm:grouping-low-solution},\nusing the hyperimmune-free basis theorem instead of the low basis theorem.\n\n\\begin{claim*}\nFor every condition $c = (F_0, \\dots, F_k, X)$,\nthere is an extension~$d = (F_0, \\dots, F_\\ell, Y)$ of~$c$ such that~$\\ell > k$.\n\\end{claim*}\n\nThe following claim shows that every sufficiently generic filter yields a sequence~$\\vec{F}$\nsuch that the~$B$'s are~$\\vec{F} \\oplus C$-hyperimmune. The notion of satisfaction and of forcing\na formula $\\varphi(G)$ are defined as in Theorem~\\ref{thm:grouping-low-solution}.\n\n\\begin{claim*}\nFor every condition~$c$ and every pair of indices~$e,i \\in \\omega$, there is an extension~$d$\nforcing $\\Phi^{G \\oplus C}_e$ not to dominate~$p_{B_i}$.\n\\end{claim*}\n\\begin{proof}[\\it Proof of the claim]\nFix a condition $c = (F_0, \\dots, F_k, X)$.\nLet $f$ be the function which on input~$x$, searches \nfor a finite set of integers~$U$ such that for every 2-partition~$Z_0 \\cup Z_1 = X$,\nthere is some finite sequence of sets~$F_{k+1}, \\dots, F_\\ell$ such that\n$F_k < \\dots < F_\\ell$, $\\Phi^{(F_0, \\dots, F_\\ell) \\oplus C}_e(x) \\downarrow \\in U$\nand for every~$i \\in (k, \\ell]_{{\\mathbb{N}}}$, $F_i \\in {\\mathsf{L}} \\cap Z_0$ or~$F_i \\in {\\mathsf{L}} \\cap Z_1$.\nIf such a set~$U$ is found, $f(x) =  1 + max(U)$, otherwise~$f(x) \\uparrow$.\nThe function~$f$ is partial $X \\oplus C$-computable. We have two cases.\n\\begin{itemize}\n\t\\item Case 1: $f$ is total. By $X \\oplus C$-hyperimmunity of~$B_i$,\n\tthere is some~$x$ such that~$f(x) \\leq p_{B_i}(x)$. Let~$U$ be the finite set\n\twitnessing~$f(x) \\downarrow$. By taking~$Z_0 = X \\cap A$ and~$Z_1 = X \\cap \\overline{A}$,\n\tthere is a finite sequence of sets~$F_{k+1}, \\dots, F_\\ell$ such that\n\t$\\Phi^{(F_0, \\dots, F_\\ell) \\oplus C}_e(x) \\downarrow \\in U$\n\tand~$d = (F_0, \\dots, F_\\ell, X)$ is a valid extension of~$c$.\n\tThe condition $d$ forces~$\\Phi^{G \\oplus C}_e(x) < f(x)$.\n\n\t\\item Case 2: there is some~$x$ such that~$f(x) \\uparrow$.\n\tBy compactness, the $\\Pi^{0, X \\oplus C}_1$ class~$\\mathcal{C}$ of sets~$Z_0 \\oplus Z_1$\n\tsuch that~$Z_0 \\cup Z_1 = X$ and $\\Phi^{(F_0, \\dots, F_\\ell) \\oplus C}_e(x) \\uparrow$ \n\tfor every finite sequence of sets~$F_{k+1}, \\dots, F_\\ell$ such that\n\t$F_k < \\dots < F_\\ell$ and for every~$i \\in (k, \\ell]_{{\\mathbb{N}}}$, $F_i \\in {\\mathsf{L}} \\cap Z_0$ or~$F_i \\in {\\mathsf{L}} \\cap Z_1$\n\tis not empty. By the hyperimmune-free basis theorem~\\cite{Jockusch197201}, there exists some partition~$Z_0 \\oplus Z_1 \\in \\mathcal{C}$\n\tsuch that the~$B$'s are $Z_0 \\oplus Z_1 \\oplus C$-hyperimmune. The set~$Z_j$ is infinite for some~$j < 2$\n\tand the condition $d = (F_0, \\dots, F_k, Z_{j})$ is an extension of~$c$ forcing~$\\Phi_e^{G \\oplus C}(x) \\uparrow$.\n\\end{itemize} \n\\end{proof}\n\nLet~$\\mathcal{F}$ be a sufficiently generic filter for this notion of forcing.\nThe filter $\\mathcal{F}$ yields a sequence~$\\vec{F} = \\langle F_0, F_1, \\dots \\rangle$ \nwhich is infinite by the first claim, and such that the~$B$'s are $\\vec{F} \\oplus C$-hyperimmune by the second claim.\nThis finishes the proof of Theorem~\\ref{thm:sgp22-preservation-hyperimmunity}.\n\\end{proof}\n\n\\begin{corollary}\n${\\mathsf{RCA_0}} + {\\mathrm{GP}^{2}_{2}} + {\\mathrm{COH}} + {\\mathrm{EM}} + {\\mathsf{WKL_0}}$ does not imply ${\\mathrm{ADS}}$. \n\\end{corollary}\n\\begin{proof}\nBy the hyperimmune-free basis theorem~\\cite{Jockusch197201}, ${\\mathsf{WKL_0}}$ admits preservation of hyperimmunity.\nThe first author proved in~\\cite{Patey2015Iterative} that~${\\mathrm{COH}}$ and ${\\mathrm{EM}}$ admit preservation of hyperimmunity,\nbut that ${\\mathrm{ADS}}$ does not. Last, ${\\mathrm{GP}^{2}_{2}}$ admits preservation of hyperimmunity\nsince ${\\mathrm{COH}}+{\\mathrm{SGP}^{2}_{2}}$ implies~${\\mathrm{GP}^{2}_{2}}$ over~${\\mathsf{RCA_0}}$.\n\\end{proof}\n\n\\begin{definition}[Diagonally non-computable function]\nA function $f$ is \\emph{diagonally non-computable} (d.n.c.) relative to~$X$ if for every~$e$, $f(e) \\neq \\Phi_e^X(e)$.\n${\\mathrm{2\\mbox{-}DNC}}$ is the statement ``For every set~$X$, there is a function d.n.c.\\ relative to the jump of~$X$''.\n\\end{definition}\n\nBeware, the notation ${\\mathrm{2\\mbox{-}DNC}}$ may cause some confusion with ${\\mathrm{DNC}}_2$, the restriction to $\\{0,1\\}$-valued d.n.c.\\ functions\nwhich is equivalent to~${\\mathsf{WKL_0}}$ over~${\\mathsf{RCA_0}}$. \nThe following proof is an adaptation of the proof that the Erd\\H{o}s-Moser implies~${\\mathrm{2\\mbox{-}DNC}}$\nover~${\\mathsf{RCA_0}}$~\\cite{Patey2015Somewhere}.\n\n\\begin{theorem}\n${\\mathsf{RCA_0}} \\vdash {\\mathrm{GP}^{2}_{2}}({\\mathsf{L}}_\\bbomega) \\rightarrow {\\mathrm{2\\mbox{-}DNC}}$\n\\end{theorem}\n\\begin{proof}\nFix a set~$X$. Let $g(.,.)$ be a total $X$-computable function \nsuch that $\\Phi_e^{X'}(e)=\\lim_s g(e,s)$ if the limit exists, \nand $\\Phi^{X'}_e(e) \\uparrow$ if the limit does not exist.\nAlso fix for each~$e \\in {\\mathbb{N}}$ an enumeration $D_{e,0}, D_{e,1}, \\dots$ of all finite sets of cardinal $3^{e+1}$.\nWe define the function $f : [{\\mathbb{N}}]^2 \\to 2$ by primitive recursion.\nLet~$f_0$ be the function nowhere defined.\nAt stage~$s+1$, do the following. Start with $f_{s+1}=f_s$. \nThen, for each $e<s$, take the first pair $\\{x,y\\} \\in [(D_{e,g(e,s)} \\cap [0,s)_{{\\mathbb{N}}}) \\setminus \\bigcup_{k<e} D_{k,g(k,s)}]^{2}$ \nif it exists, and set~$f_{s+1}(x,s) = 0$ and~$f_{s+1}(y,s) = 1$. \nFinally, set $f(z, s) = 0$ for any $z<s$ such that $f_{s+1}(s,z)$ remains undefined.\nThis finishes the construction of $f_{s+1}$. \nNote that $f_{s}$ is defined on $[[0,s]_{{\\mathbb{N}}}]^2$.\nThus, $f=\\bigcup_s f_s$ must exist and is total on $[{\\mathbb{N}}]^{2}$.\n\nBy ${\\mathrm{GP}^{2}_{2}}({\\mathsf{L}}_\\bbomega)$, let $\\vec{F} = \\langle F_0, F_1, \\dots \\rangle$ \nbe an infinite ${\\mathsf{L}}_\\bbomega$-grouping for $f$.\nLet $h(e)$ be such that $D_{e, h(e)} \\subseteq F$ for some $F \\in \\vec{F}$. Such an~$F$\nexists since $D_{e, 0}, D_{e,1}, \\dots$ enumerates all finite sets of cardinality $3^{e+1}$,\nand $\\vec{F}$ contains sets of arbitrary size.\nWe claim that $h(e) \\not=\\Phi_e^{X'}(e)$ for all~$e$, which would prove ${\\mathrm{2\\mbox{-}DNC}}$. \nSuppose otherwise, i.e., suppose that $\\Phi_e^{X'}(e)=h(e)$ for some~$e$. Let~$F \\in \\vec{F}$\nbe such that~$D_{e,h(e)} \\subseteq F$.\nThen there is a stage $s_0$ such that $h(e)=g(e,s)$ for all~$s \\geq s_0$ or equivalently \n$D_{e,g(e,s)}=D_{e,h(e)} \\subseteq F$ for all~$s \\geq s_0$. We claim that for any $s$ be bigger than both \n$\\max(F)$ and $s_0$, there are some~$x, y \\in D_{e,h(e)} \\subseteq F$ such that~$f(x,s) \\neq f(y,s)$, which\ncontradicts the fact that~$\\vec{F}$ is an ${\\mathsf{L}}_\\bbomega$-grouping for~$f$.\n\nTo see this, let $s$ be such a stage. At that stage~$s$ of the construction of $f$, \na pair $\\{x,y\\} \\in [(D_{e,g(e,s)} \\cap [0,s)_{{\\mathbb{N}}}) \\setminus \\bigcup_{k<e} D_{k,g(k,s)}]^{2}$ is selected \nby a cardinality argument since $|D_{e,s} \\cap [0,s)_{{\\mathbb{N}}}| = |D_{e,s}| = 3^{e+1} > \\sum_{k < e} 3^{k+1} = |\\bigcup_{k<e} D_{k,g(k,s)}|$.\nSince $D_{e,g(e,s)} = D_{e,h(e)} \\subseteq F$, this pair is contained in $F$. \nAt this stage, we set~$f(x,s) \\neq f(y,s)$, therefore, $\\vec{F}$ is not an ${\\mathsf{L}}_\\bbomega$-grouping for~$f$, contradiction.\n\\end{proof}\n\nIn particular, ${\\mathrm{SRT}}^2_2$ does not imply ${\\mathrm{GP}^{2}_{2}}({\\mathsf{L}}_\\bbomega)$ over~${\\mathsf{RCA_0}}$\nsince Chong, Slaman and Yang~\\cite{CSY2014} built a (non-standard) model of~${\\mathrm{SRT}}^2_2 + {\\mathrm{B}\\Sigma^0_2}$\ncontaining only low sets, whereas provably in ${\\mathsf{RCA_0}}$, \nthere is no $\\Delta^0_2$ d.n.c.\\ function relative to~$\\emptyset'$.\n\n\\begin{definition}[Rainbow Ramsey theorem]\nFix $n, k \\in {\\mathbb{N}}$. A coloring function $f: [{\\mathbb{N}}]^n \\to {\\mathbb{N}}$ is \\emph{$k$-bounded}\nif for every $y \\in {\\mathbb{N}}$, ${\\mathop{\\mathrm{card}}\\nolimits}{f^{-1}(y)} \\leq k$. A set $R$ is a \\emph{rainbow} for $f$ (or an \\emph{$f$-rainbow})\nif $f$ is injective over~$[R]^n$.\n${\\mathrm{RRT}}^n_k$ is the statement ``Every $k$-bounded function $f : [{\\mathbb{N}}]^n \\to {\\mathbb{N}}$\nhas an infinite $f$-rainbow''.\n\\end{definition}\n\nMiller~\\cite{MillerAssorted} proved that the statement~${\\mathrm{2\\mbox{-}DNC}}$ is equivalent to the rainbow Ramsey theorem\nfor pairs (${\\mathrm{RRT}}^2_2$) over~${\\mathsf{RCA_0}}$. \n\n\\begin{corollary}\n${\\mathsf{RCA_0}} \\vdash {\\mathrm{GP}^{2}_{2}} \\rightarrow {\\mathrm{RRT}}^2_2$.\n\\end{corollary}\n\nSeetapun and Slaman~\\cite{Seetapun1995strength} defined a \\emph{Cardinality scheme}\nfor a set of formulas~$\\Gamma$ as follows. For every~$\\varphi(x,y) \\in \\Gamma$,\n$\\mathrm{C}\\Gamma$ contains the universal closure of the formula ``If $\\varphi(x, y)$ defines\nan injective function, then its range is unbounded''. \nConidis and Slaman~\\cite{Conidis2013Random} proved\nthat the rainbow Ramsey theorem for pairs implies the $\\Sigma_2$ cardinality scheme (${\\mathrm{C}\\Sigma}_2$).\n\n\\begin{corollary}\n${\\mathsf{RCA_0}} \\vdash {\\mathrm{GP}^{2}_{2}} \\rightarrow {\\mathrm{C}\\Sigma}_2$.\n\\end{corollary}\n\nIn particular, this shows that ${\\mathrm{GP}^{2}_{2}}$ is not $\\Pi^1_1$-conservative \nover~${\\mathsf{RCA_0}}+{\\mathrm{I}\\Sigma^0_1}$ since a Skolem hull argument shows\nthat ${\\mathrm{C}\\Sigma}_2$ is not provable in~${\\mathrm{I}\\Sigma_1}$ (see Seetapun and Slaman~\\cite{Seetapun1995strength}).\n\n\n\\section{Conservation theorem for ${\\mathrm{GP}^{2}_{2}}$}\\label{section-GP-con}\nIn this section, we will prove a conservation result for the grouping principle.\nTo calculate the size of $\\alpha$-large(${\\mathrm{EM}}$) sets in Section~\\ref{section-RT22}, we will use a finite version of the grouping principle within ${\\mathrm{I}\\Sigma^0_1}$.\nInstead of proving the finite grouping principle within ${\\mathrm{I}\\Sigma^0_1}$ directly, we would like to show a conservation theorem for the infinite grouping principle over ${\\mathrm{I}\\Sigma^0_1}$.\n\nIn Section~\\ref{section-GP}, we have seen that ${\\mathrm{SGP}^{2}_{2}}$ has an $\\omega$-model with only low sets.\nIt is well-known that a low solution construction is often able to be converted into a forcing construction of a solution satisfying $\\Sigma^{0}_{1}$-induction within a countable nonstandard model, which leads to a $\\Pi^{1}_{1}$-conservation over ${\\mathrm{I}\\Sigma^0_1}$.\nUnfortunately, our construction of a low solution for ${\\mathrm{SGP}^{2}_{2}}$ in Section~\\ref{section-GP} requires ${\\mathrm{B}\\Sigma^0_2}$ and thus it is not formalizable within ${\\mathrm{I}\\Sigma^0_1}$.\nTo overcome this situation, we show a general conservation theorem characterized by using recursively saturated models.\n\\begin{thm}\\label{thm-con-Bn+1-vs-In}\nFix $n\\ge 1$.\nLet $\\Gamma$ be a formula of the form ${\\forall} X {\\exists} Y \\theta(X,Y)$ where $\\theta$ is $\\Pi^{0}_{n+1}$.\nThen, ${\\mathsf{RCA_0}}+{\\mathrm{B}\\Sigma^0_{n}}[n+1]+\\Gamma$ is a $\\tilde\\Pi^{0}_{n+2}$-conservative extension of ${\\mathrm{I}\\Sigma^0_{n}}$ if the following condition holds:\n\\begin{itemize}\n  \\item[$(\\dag)$] for any countable recursively saturated model $(M,S)\\models {\\mathrm{B}\\Sigma^0_{n}}[n+1]$ such that $S$ is finite and for any $X\\in S$, there exists $Y\\subseteq M$ such that $(M,S\\cup\\{Y\\})\\models {\\mathrm{I}\\Sigma^0_{n}}+\\theta(X,Y)$.\n\\end{itemize}\n\\end{thm}\n\nTo show this theorem, we use the following property of recursively saturated models and resplendent models, which are introduced by Barwise and Schlipf.\nSee \\cite{Barwise-Schlipf} for the historical information of recursively saturated models and resplendent models.\n\\begin{thm}[see Sections~1.8 and 1.9 of \\cite{Kossak-Schmerl}]\\label{thm-c-resplendency}\nLet $\\mathcal{L}\\supseteq \\mathcal{L}_{{\\mathrm{PA}}}$ be a finite language, and let $\\mathcal{M}$ be a countable $\\mathcal{L}$-structure. Then the following are equivalent.\n\\begin{enumerate}\n \\item $\\mathcal{M}$ is recursively saturated.\n \\item $\\mathcal{M}$ is resplendent, \\textit{i.e.}, for any recursive set of sentences $T$ of a finite language $\\mathcal{L}'\\supseteq\\mathcal{L}$ such that $\\mathrm{Th}(\\mathcal{M})\\cup T$ is consistent, there exists an expansion $\\mathcal{M}'$ of $\\mathcal{M}$ such that $\\mathcal{M}'\\models T$.\n \\item $\\mathcal{M}$ is chronically resplendent, \\textit{i.e.}, $\\mathcal{M}$ is resplendent with the extra condition that the expansion $\\mathcal{M}'$ is resplendent as an $\\mathcal{L}'$-structure.\n\n\n\\end{enumerate}\n\\end{thm}\n\n\\begin{proof}[Proof of Theorem~\\ref{thm-con-Bn+1-vs-In}.]\nLet $\\Gamma\\equiv{\\forall} X {\\exists} Y \\theta(X,Y)$ where $\\theta$ is $\\Pi^{0}_{n+1}$ satisfy the condition $(\\dag)$, and let $\\varphi_{0}\\equiv{\\forall} X {\\forall} x\\varphi(X,x)$ be a $\\tilde\\Pi^{0}_{n+2}$-sentence where $\\varphi$ is $\\Sigma^{0}_{n+1}$.\nWe will show that ${\\mathrm{I}\\Sigma^0_{n}}\\not\\vdash \\varphi_{0}$ implies that ${\\mathsf{RCA_0}}+{\\mathrm{B}\\Sigma^0_{n}}[n+1]+\\Gamma\\not\\vdash \\varphi_{0}$.\nAssume that ${\\mathrm{I}\\Sigma^0_{n}}\\not\\vdash \\varphi_{0}$, and take a countable recursively saturated model $(M,S)\\models{\\mathrm{I}\\Sigma^0_{n}}$ such that $(M,S)\\models\\neg\\varphi_{0}$.\nThen, there exists $a\\in M$ and $A\\in S$ such that $(M,\\{A\\})\\models \\neg\\varphi(A,a)$.\nWe will construct an ($\\omega$-length) sequence of cuts $M=I_{0}\\supseteq_{e}I_{1}\\supseteq_{e}\\dots$ and a sequence of sets $A_{i}\\subseteq I_{i}$ such that\n\\begin{itemize}\n \\item $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})\\models {\\mathrm{I}\\Sigma^0_{n}}$ and $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$ is recursively saturated,\n \\item if $i<j$, then $(I_{j},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{j})$ is a $\\Sigma^{0}_{n}$-elementary substructure of $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$, and,\n \\item $(I_{i+1},\\{A_{0},\\dots,A_{i}, Z_{i},A_{i+1}\\}{\\upharpoonright} I_{i+1})\\models \\theta(Z_{i},A_{i+1})$, where $Z_{i}$ is a $k$-th $\\Delta^{0}_{1}$-definable set in $(I_{j},\\{A_{0},\\dots,A_{j}\\}{\\upharpoonright} I_{j})$ if $i=(j,k)$.\n\\end{itemize}\nSet $I_{0}=M$ and $A_{0}=A\\oplus \\{a\\}$.\nNow, given $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$, we will first find a cut $I_{i+1}\\subsetneq_{e}I_{i}$ such that $(I_{i+1},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i+1})$ is $\\Sigma^{0}_{n}$-elementary substructure of $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$ and recursively saturated.\nLet $J_{0}$ be the set of all $\\Sigma^{0}_{n}$-definable elements in $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$.\nSince $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$ is recursively saturated, $J_{0}$ is not cofinal in $I_{i}$, thus $J=\\sup J_{0}$ forms a proper cut of $I_{i}$ and it is a $\\Sigma^{0}_{n}$-elementary substructure.\nTherefore, a recursive $\\mathcal{L}_{{\\mathrm{PA}}}\\cup\\{A_{0},\\dots, A_{i}, J\\}$-theory T saying that $(J,\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} J)$ is a $\\Sigma^{0}_{n}$-elementary proper cut of $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$ is consistent with ${\\mathrm{Th}}((I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i}))$. (One can state $\\Sigma^{0}_{n}$-elementarity by using the truth predicate.)\nThus, by the chronic resplendency of Theorem~\\ref{thm-c-resplendency}, there exists $J'\\subseteq I_{i}$ such that $(I_{i},\\{A_{0},\\dots, A_{i},J'\\}{\\upharpoonright} I_{i})$ satisfies $T$ and is recursively saturated.\nLet $I_{i+1}$ be such $J'$, then $(I_{i+1},\\{A_{0},\\allowbreak\\dots,A_{i}\\}{\\upharpoonright} I_{i+1})$ is $\\Sigma^{0}_{n}$-elementary substructure of $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$ and recursively saturated.\n\nBy Theorem~\\ref{thm-elem-cut-vs-Bn}, $(I_{i+1},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i+1})\\models{\\mathrm{B}\\Sigma^0_{n}}[n+1]$, and thus $(I_{i+1},\\{A_{0},\\dots,A_{i}, Z_{i}\\}{\\upharpoonright} I_{i+1})\\models{\\mathrm{B}\\Sigma^0_{n}}[n+1]$.\n($Z_{i}\\cap I_{i+1}$ is $\\Delta^{0}_{1}$-definable in $(I_{i+1},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i+1})$ by $\\Sigma^{0}_{n}$-elementarity.)\nThus, by the condition $(\\dag)$, there exists $B\\subseteq I_{i+1}$ such that $(I_{i+1},\\{A_{0},\\dots,A_{i}, Z_{i},B\\}{\\upharpoonright} I_{i+1})\\models\\theta(Z_{i},B)$.\nBy using chronic resplendency as above, one can re-choose $B\\subseteq I_{i+1}$ so that $(I_{i+1},\\{A_{0},\\dots,A_{i}, Z_{i},B\\}{\\upharpoonright} I_{i+1})$ is recursively saturated.\nThen, put $A_{i+1}$ as such $B$.\n\n\\begin{claim*}\n$\\bar{I}=\\bigcap_{i\\in\\omega} I_{i}$ is a cut of $M$, and $(\\bar{I},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} \\bar{I})$ is a $\\Sigma^{0}_{n}$-elementary substructure of $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$.\n\\end{claim*}\n\\begin{proof}[Proof of the claim.]\nClearly $\\bar{I}$ forms a cut, and thus it is always a $\\Sigma^{0}_{0}$-elementary substructure.\nWe show $\\Sigma^{0}_{n}$-elementarity by induction on the complexity of formulas.\nLet $0<k\\le n$ and assume that $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})\\models {\\exists} x\\psi(x,c)$ where $c\\in\\bar{I}$ and $\\psi$ is $\\Pi^{0}_{k-1}$.\nBy ${\\mathrm{I}\\Sigma^0_{n}}$ in $(I_{i},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{i})$, take the least $d\\in I_{i}$ such that $\\psi(d,c)$ holds.\nIf $d\\notin \\bar{I}$, then there exists $j>i$ such that $d\\notin I_{j}$, thus $(I_{j},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} I_{j})\\models \\neg{\\exists} x\\psi(x,c)$.\nThis contradicts the second condition of the construction of $I_{i}$'s, thus $d\\in \\bar{I}$.\nHence, $(\\bar{I},\\{A_{0},\\dots,A_{i}\\}{\\upharpoonright} \\bar{I})\\models \\psi(d,c)$ by the induction hypothesis.\n\\end{proof}\n\nPut $\\bar{S}=\\Delta^{0}_{1}\\text{-}\\mathrm{Def}(\\bar{I},\\{A_{i}\\mid i\\in\\omega\\}{\\upharpoonright} \\bar{I})$.\nThen, by the claim and Theorem~\\ref{thm-elem-cut-vs-Bn}, $(\\bar{I},\\bar{S})\\models{\\mathsf{RCA_0}}+{\\mathrm{B}\\Sigma^0_{n}}[n+1]$.\nBy the third condition of the construction of $A_{i}$'s and the $\\Sigma^{0}_{n}$-elementarity, we have $(\\bar{I},\\bar{S})\\models\\Gamma+\\neg\\varphi(A,a)$.\nThus, ${\\mathsf{RCA_0}}+{\\mathrm{B}\\Sigma^0_{n}}[n+1]+\\Gamma\\not\\vdash \\varphi_{0}$.\n\\end{proof}\n\n\nNow, we apply Theorem~\\ref{thm-con-Bn+1-vs-In} to ${\\mathrm{SGP}^{2}_{2}}$.\nFor this, we reformulate the low solution construction for ${\\mathrm{SGP}^{2}_{2}}$ as follows.\n\\begin{lem}\\label{lem:ISig1-preservation}\nLet $(M,S_{0})$ be a countable model of ${\\mathrm{B}\\Sigma^0_2}$ such that $S_{0}$ is finite and $f:[{\\mathbb{N}}]^{2}\\to 2$ and ${\\mathsf{L}}\\subseteq[{\\mathbb{N}}]^{<{\\mathbb{N}}}$ are $\\Delta^{0}_{1}$-definable in $(M,S_{0})$.\nThen, there exists $G\\subseteq M$ such that \n\\begin{itemize}\n \\item[] $(M,S_{0}\\cup\\{G\\})\\models {\\mathrm{I}\\Sigma^0_1}+$``$G$ is a witness that ${\\mathsf{L}}$ is not a largeness notion'', or,\n \\item[] $(M,S_{0}\\cup\\{G\\})\\models {\\mathrm{I}\\Sigma^0_1}+$``$G$ is an infinite ${\\mathsf{L}}$-grouping for $A_{f}=\\{x\\in {\\mathbb{N}}\\mid \\lim_{y\\to\\infty}f(x,y)=1\\}$''.\n\\end{itemize} \n\\end{lem}\n\\begin{proof}\nLet $(M,S)$ be a countable model of ${\\mathrm{B}\\Sigma^0_2}$ such that $S_{0}$ is finite and $f:[{\\mathbb{N}}]^{2}\\to 2$ and ${\\mathsf{L}}\\subseteq[{\\mathbb{N}}]^{<{\\mathbb{N}}}$ are $\\Delta^{0}_{1}$-definable in $(M,S_{0})$.\nBy H\\'ajek\\cite{Hajek}, we can always find an $\\omega$-extension $S\\supseteq S_{0}$ such that $(M,S)\\models {\\mathrm{B}\\Sigma^0_2}+{\\mathsf{WKL_0}}$ (see also Belanger\\cite{Belanger}).\nThen, $f,{\\mathsf{L}}\\in S$.\nThus, we will work on $(M,S)$ instead of $(M,S_{0})$.\nIf ${\\mathsf{L}}$ is not a largeness notion in $(M,S)$, take a witness $G\\in S$ of not being a largeness notion, then, we have done.\nOtherwise, we will construct an infinite ${\\mathsf{L}}$-grouping for $A_{f}$.\n\nThe following construction is a ``model-theoretic interpretation'' of Theorem~\\ref{thm:grouping-low-solution}.\nTo simplify the coding, we will only consider a minimal ${\\mathsf{L}}$-sequence, \nnamely, a sequence of the form $\\langle F_{i}\\in{\\mathsf{L}}\\mid i<k \\rangle$, \n$F_{i}\\subseteq X_{0}$, $F_{i}<F_{j}$ if $i<j$ and \n$F_{i}\\setminus\\{\\max{F_{i}}\\}\\notin {\\mathsf{L}}$, \\textit{i.e.}, each $F_{i}$ is minimal.\nA code for a minimal ${\\mathsf{L}}$-sequence is a binary sequence $\\sigma\\in 2^{<M}$ \n(which is coded in $M$) such that $\\{x<|\\sigma|\\mid \\sigma(x)=1\\}=\\bigcup_{i<k}F_{i}$ \nfor some minimal ${\\mathsf{L}}$-sequence $\\langle F_{i}\\mid i<k \\rangle$.\n(By the minimality, one can effectively decode a binary sequence to obtain the ${\\mathsf{L}}$-sequence.)\nNote that $\\sigma$ may code extra 0's after $\\max F_{k-1}$. \nThus, one can identify a code $\\sigma$ with a pair $(\\langle F_{i}\\mid i<k \\rangle, d)$ where $d=|\\sigma|$.\nWith this identification, we let $\\|\\sigma\\|_{{\\mathsf{L}}}=k$.\nGiven an ($M$-)finite sequence of sets $\\vec{Y}=\\langle Y_{j}\\mid j<l \\rangle\\in S$ \nand an ($M$-)finite set $F$, $F$ is said to be consistent with $\\vec{Y}$ \nif for any $j<l$, $(F\\subseteq Y_{j}\\vee F\\subseteq \\overline{Y_{j}})$.\nA code $\\sigma$ for a minimal ${\\mathsf{L}}$-sequence $\\langle F_{i}\\mid i<k \\rangle$ \nis said to be consistent with $\\vec{Y}$ if for any $i<k$, $F_{i}$ is consistent with $\\vec{Y}$.\nGiven $t\\in M$, we let $A_{f,t}=\\{x< t\\mid x\\in X_{0}, \\lim_{y\\to \\infty,y\\in X_{0}}f(x,y)=1\\}$. \nNote that $A_{f,t}\\in S$ since $(M,S)\\models{\\mathrm{B}\\Sigma^0_2}$.\n\nNow, we will construct $G\\subseteq M$ by arithmetical forcing. \nLet $\\mathbb{P}$ be the set of all pairs of the form $(\\sigma,\\vec{Y})$ such that\n\\begin{itemize}\n \\item $\\vec{Y}=\\langle Y_{j}\\mid j<l \\rangle$ is an ($M$-)finite sequence of sets in $S$,\n \\item $\\sigma$ is a code for a minimal ${\\mathsf{L}}$-sequence \n\twhich is consistent with $\\vec{Y}$ and $A_{f,|\\sigma|}$,\n\\end{itemize}\nand we let $(\\sigma,\\vec{Y})\\preceq(\\tau,\\vec{Z})$ \nif $\\sigma\\supseteq \\tau$ and $\\vec{Y}\\supseteq\\vec{Z}$.\nTake an $(M,S)$-generic filter $\\mathcal{G}$ of $(\\mathbb{P},\\preceq)$ \nand put $G=\\bigcup\\{\\sigma\\mid {\\exists} \\vec{Y}\\in S\\, (\\sigma,\\vec{Y})\\in \\mathcal{G}\\}$.\nThen, this $G$ is the desired.\nIt is clear by construction that $G$ is a minimal ${\\mathsf{L}}$-sequence which is consistent with $A_{f}$.\nTo see that $G$ preserves ${\\mathrm{I}\\Sigma^0_1}$ and $G$ is infinite in $(M,S)$, \nwe need to check the following are dense in $(\\mathbb{P},\\preceq)$:\n\n", "index": 15, "text": "\\begin{align*}\n\\mathcal{D}^{1}_{\\theta,b}:=&\\left\\{(\\sigma,\\vec{Y})\\,\\Bigg|\\,\n\\begin{aligned}\n &\\quad {\\forall} \\tau\\supseteq\\sigma(\\tau\\text{ is a minimal ${\\mathsf{L}}$-sequence \n\tconsistent with }\\vec{Y}\\to {\\forall} n\\le |\\tau|\\neg\\theta(b,n,\\tau{\\upharpoonright} n))\\\\\n &\\vee {\\exists} c\\le b({\\forall} d<c{\\forall} \\tau\\supseteq\\sigma(\\tau\\text{ is a minimal \n\t${\\mathsf{L}}$-sequence consistent with }\\vec{Y}\\\\\n &\\quad\\quad\\quad\\quad   \\to {\\forall} n\\le |\\tau|\\neg\\theta(d,n,\\tau{\\upharpoonright} n))\n\t\\wedge {\\exists} n\\le |\\sigma| \\theta(c,n, \\sigma{\\upharpoonright} n)) \n\\end{aligned}\n\\right\\},\\\\\n&\\mbox{where $b\\in M$ and $\\theta(x,n,\\sigma)\\in \\Sigma^{0}_{0}$ with parameters from $(M,S)$},\\\\\n\\mathcal{D}^{2}_{e}:=&\\left\\{(\\sigma,\\vec{Y})\\mid \\|\\sigma\\|_{{\\mathsf{L}}}\\ge e\n\\right\\},\n\n\\mbox{where $e\\in M$}.\n\\end{align*}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex8.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle\\mathcal{D}^{1}_{\\theta,b}:=\" display=\"inline\"><mrow><msubsup><mi class=\"ltx_font_mathcaligraphic\">\ud835\udc9f</mi><mrow><mi>\u03b8</mi><mo>,</mo><mi>b</mi></mrow><mn>1</mn></msubsup><mo>:=</mo><mi/></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex8.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle\\left\\{(\\sigma,\\vec{Y})\\,\\Bigg{|}\\,\\begin{aligned} &amp;\\displaystyle%&#10;\\quad{\\forall}\\tau\\supseteq\\sigma(\\tau\\text{ is a minimal ${\\mathsf{L}}$-%&#10;sequence&#10;consistent with }\\vec{Y}\\to{\\forall}n\\leq|\\tau|\\neg\\theta(b,n,\\tau{%&#10;\\upharpoonright}n))\\\\&#10;&amp;\\displaystyle\\vee{\\exists}c\\leq b({\\forall}d&lt;c{\\forall}\\tau\\supseteq\\sigma(%&#10;\\tau\\text{ is a minimal&#10;${\\mathsf{L}}$-sequence consistent with }\\vec{Y}\\\\&#10;&amp;\\displaystyle\\quad\\quad\\quad\\quad\\to{\\forall}n\\leq|\\tau|\\neg\\theta(d,n,\\tau{%&#10;\\upharpoonright}n))\\wedge{\\exists}n\\leq|\\sigma|\\theta(c,n,\\sigma{%&#10;\\upharpoonright}n))\\end{aligned}\\right\\},\" display=\"inline\"><mrow><mrow><mo>{</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03c3</mi><mo>,</mo><mover accent=\"true\"><mi>Y</mi><mo stretchy=\"false\">\u2192</mo></mover><mo rspace=\"4.2pt\" stretchy=\"false\">)</mo></mrow><mo maxsize=\"260%\" minsize=\"260%\" rspace=\"4.2pt\">|</mo><mtable columnspacing=\"0pt\" rowspacing=\"0pt\"><mtr><mtd/><mtd columnalign=\"left\"><mrow><mo lspace=\"12.5pt\">\u2200</mo><mi>\u03c4</mi><mo>\u2287</mo><mi>\u03c3</mi><mrow><mo stretchy=\"false\">(</mo><mi>\u03c4</mi><mrow><mtext>\u00a0is a minimal\u00a0</mtext><mi>\ud835\uddab</mi><mtext>-sequence\nconsistent with\u00a0</mtext></mrow><mover accent=\"true\"><mi>Y</mi><mo stretchy=\"false\">\u2192</mo></mover><mo>\u2192</mo><mo>\u2200</mo><mi>n</mi><mo>\u2264</mo><mo stretchy=\"false\">|</mo><mi>\u03c4</mi><mo stretchy=\"false\">|</mo><mi mathvariant=\"normal\">\u00ac</mi><mi>\u03b8</mi><mrow><mo stretchy=\"false\">(</mo><mi>b</mi><mo>,</mo><mi>n</mi><mo>,</mo><mi>\u03c4</mi><mo>\u21be</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mtd></mtr><mtr><mtd/><mtd columnalign=\"left\"><mrow><mo>\u2228</mo><mo>\u2203</mo><mi>c</mi><mo>\u2264</mo><mi>b</mi><mrow><mo stretchy=\"false\">(</mo><mo>\u2200</mo><mi>d</mi><mo>&lt;</mo><mi>c</mi><mo>\u2200</mo><mi>\u03c4</mi><mo>\u2287</mo><mi>\u03c3</mi><mrow><mo stretchy=\"false\">(</mo><mi>\u03c4</mi><mrow><mtext>\u00a0is a minimal\u00a0</mtext><mi>\ud835\uddab</mi><mtext>-sequence consistent with\u00a0</mtext></mrow><mover accent=\"true\"><mi>Y</mi><mo stretchy=\"false\">\u2192</mo></mover></mrow></mrow></mrow></mtd></mtr><mtr><mtd/><mtd columnalign=\"left\"><mrow><mrow><mo lspace=\"42.5pt\">\u2192</mo><mo>\u2200</mo><mi>n</mi><mo>\u2264</mo><mo stretchy=\"false\">|</mo><mi>\u03c4</mi><mo stretchy=\"false\">|</mo><mi mathvariant=\"normal\">\u00ac</mi><mi>\u03b8</mi><mrow><mo stretchy=\"false\">(</mo><mi>d</mi><mo>,</mo><mi>n</mi><mo>,</mo><mi>\u03c4</mi><mo>\u21be</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2227</mo><mo>\u2203</mo><mi>n</mi><mo>\u2264</mo><mo stretchy=\"false\">|</mo><mi>\u03c3</mi><mo stretchy=\"false\">|</mo><mi>\u03b8</mi><mrow><mo stretchy=\"false\">(</mo><mi>c</mi><mo>,</mo><mi>n</mi><mo>,</mo><mi>\u03c3</mi><mo>\u21be</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow></mtd></mtr></mtable><mo>}</mo></mrow><mo>,</mo></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex9.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle\\mbox{where $b\\in M$ and $\\theta(x,n,\\sigma)\\in\\Sigma^{0}_{0}$ %&#10;with parameters from $(M,S)$},\" display=\"inline\"><mrow><mrow><mtext>where\u00a0</mtext><mrow><mi>b</mi><mo>\u2208</mo><mi>M</mi></mrow><mtext>\u00a0and\u00a0</mtext><mrow><mrow><mi>\u03b8</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo>,</mo><mi>n</mi><mo>,</mo><mi>\u03c3</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2208</mo><msubsup><mi mathvariant=\"normal\">\u03a3</mi><mn>0</mn><mn>0</mn></msubsup></mrow><mtext>\u00a0with parameters from\u00a0</mtext><mrow><mo stretchy=\"false\">(</mo><mi>M</mi><mo>,</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>,</mo></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex10.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle\\mathcal{D}^{2}_{e}:=\" display=\"inline\"><mrow><msubsup><mi class=\"ltx_font_mathcaligraphic\">\ud835\udc9f</mi><mi>e</mi><mn>2</mn></msubsup><mo>:=</mo><mi/></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex10.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle\\left\\{(\\sigma,\\vec{Y})\\mid\\|\\sigma\\|_{{\\mathsf{L}}}\\geq e\\right%&#10;\\},\\par&#10;\\mbox{where $e\\in M$}.\" display=\"inline\"><mrow><mrow><mrow><mo>{</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03c3</mi><mo>,</mo><mover accent=\"true\"><mi>Y</mi><mo stretchy=\"false\">\u2192</mo></mover><mo stretchy=\"false\">)</mo></mrow><mo>\u2223</mo><mrow><msub><mrow><mo>\u2225</mo><mi>\u03c3</mi><mo>\u2225</mo></mrow><mi>\ud835\uddab</mi></msub><mo>\u2265</mo><mi>e</mi></mrow><mo>}</mo></mrow><mo>,</mo><mrow><mtext>where\u00a0</mtext><mrow><mi>e</mi><mo>\u2208</mo><mi>M</mi></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.00050.tex", "nexttext": "\nThen, by the Parsons theorem, there exists a primitive recursive function $h:\\omega\\to \\omega$ such that ${\\mathrm{I}\\Sigma^0_1}$ proves\n", "itemtype": "equation", "pos": 122089, "prevtext": "\nOne can easily see that if $(\\sigma,\\vec{Y})\\in \\mathcal{D}^{1}_{\\theta,b}$, \nthen $(\\sigma,\\vec{Y})$ forces ``if ${\\exists} n\\theta(b,n,G{\\upharpoonright} n)$, \nthere exists least $c\\le b$ such that ${\\exists} n\\theta(c,n,G{\\upharpoonright} n)$'', \nwhich guarantees $\\Sigma^{0}_{1}$-least number principle, \nand if $(\\sigma,\\vec{Y})\\in \\mathcal{D}^{2}_{e}$, then $(\\sigma,\\vec{Y})$ forces \n``$\\|G\\|_{{\\mathsf{L}}}\\ge e$'', which means $G$ is an infinite minimal ${\\mathsf{L}}$-sequence.\n\nTo see that $\\mathcal{D}^{1}_{\\theta,b}$ is dense, let $(\\sigma,\\vec{Y})$ be given.\nLet $\\Theta(x)$ be a $\\Sigma^{0}_{1}$-formula saying that ``there exists $t$ \nsuch that for any $\\vec{Z}=\\langle Z_{j}\\subseteq [|\\sigma|,t)_{{\\mathbb{N}}}\\mid j<2^{x} \\rangle$ \nthere exists $\\tau\\supseteq\\sigma$ with $|\\tau|\\le t$ such that $(\\tau$ is a minimal \n${\\mathsf{L}}$-sequence consistent with $\\vec{Y}^{\\frown}\\vec{Z}\\wedge {\\exists} n\\le |\\tau|\\theta(x,n,\\tau{\\upharpoonright} n))$.''\nWe consider the two cases.\n\\begin{description}\n \\item[Case I] $\\Theta(b)$ fails in $(M,S)$.\n\\end{description}\nIn this case, by ${\\mathsf{WKL_0}}$ in $(M,S)$, there exists $\\vec{Z}=\\langle Z_{j}\\subseteq \n[|\\sigma|,\\infty)_{{\\mathbb{N}}}\\mid j<2^{b} \\rangle$ such that ${\\forall} \\tau\\supseteq\\sigma(\\tau$ \nis a minimal ${\\mathsf{L}}$-sequence consistent with $\\vec{Y}^{\\frown}\\vec{Z}\\to {\\forall} n\\le |\\tau|\\neg\\theta(b,n,\\tau{\\upharpoonright} n))$.\nTake such $\\vec{Z}$. Then, $(\\sigma,\\vec{Y}^{\\frown}\\vec{Z})\\in \\mathcal{D}^{1}_{\\theta,b}$.\n\\begin{description}\n \\item[Case II] $\\Theta(b)$ holds in $(M,S)$.\n\\end{description}\nIn this case, by ${\\mathrm{I}\\Sigma^0_1}$ in $(M,S)$, there exists the least $c\\le b$ such that $\\Theta(c)$ holds.\nThen, by ${\\mathsf{WKL_0}}$, there exists $\\vec{W}^{d}=\\langle W^{d}_{j}\\subseteq \n[|\\sigma|,\\infty)_{{\\mathbb{N}}}\\mid j<2^{d} \\rangle$ such that ${\\forall} \\tau\\supseteq\\sigma(\\tau$ \nis a minimal ${\\mathsf{L}}$-sequence consistent with \n$\\vec{Y}^{\\frown}\\vec{W}^{d}\\to {\\forall} n\\le |\\tau|\\neg\\theta(d,n,\\tau{\\upharpoonright} n))$ for any $d<c$.\nNow, take the witness $t\\in M$ for $\\Theta(c)$, and put \n$\\vec{Z}=\\langle W^{d}_{j}\\cap[|\\sigma|,t)_{{\\mathbb{N}}}\\mid j<2^{d},d<c \\rangle^{\\frown}\\langle A_{f,t}\\cap[|\\sigma|,t)_{{\\mathbb{N}}} \\rangle$.\nThen, by $\\Theta(c)$, there exists $\\tau\\supseteq\\sigma$ \nwith $|\\tau|\\le t$ such that $\\tau$ is a minimal ${\\mathsf{L}}$-sequence \nconsistent with $\\vec{Y}^{\\frown}\\vec{Z}$ and ${\\exists} n\\le |\\tau|\\theta(c,n,\\tau{\\upharpoonright} n)$.\nThen $(\\tau,\\vec{Y}^{\\frown}\\langle W^{d}_{j}\\mid j<2^{d},d<c \\rangle)$ \nis a condition in $\\mathbb{P}$ and $(\\tau,\\vec{Y}^{\\frown}\\langle \nW^{d}_{j}\\mid j<2^{d},d<c \\rangle)\\in \\mathcal{D}^{1}_{\\theta,b}$.\n\nTo see that $\\mathcal{D}^{2}_{e}$ is dense, let $(\\sigma,\\vec{Y})$ \nbe given where $\\sigma$ is a code for $\\langle F_{i}\\mid i<k \\rangle$ \nand $\\vec{Y}=\\langle Y_{j}\\mid j<l \\rangle$.\nBy applying Lemma~\\ref{lem-largeness} $e$ times in $(M,S)$, \none can find $\\langle t_{0},\\dots, t_{e} \\rangle$ such that \n$t_{0}=|\\sigma|$ and for any $s<e$ and for any $2^{l+1}$ splitting \n$M=\\bigsqcup_{p<2^{l+1}}W_{p}$, there exists a finite subset \nof $[t_{s},t_{s+1})_{{\\mathbb{N}}}$ which is ${\\mathsf{L}}$-large and included in one of $W_{p}$.\n(${\\mathrm{I}\\Sigma^0_1}$ is enough for this iteration.)\nThus, there exists $E_{s}\\subseteq [t_{s},t_{s+1})_{{\\mathbb{N}}}$ which is \n${\\mathsf{L}}$-large and consistent with $\\vec{Y}$ and $A_{f,t_{e}}$ for any $s<e$.\nLet $\\tau\\supseteq \\sigma$ be a code for a sequence \n$\\langle F_{i}\\mid i<k \\rangle^{\\frown}\\langle E_{s}\\mid s<e \\rangle$.\nThen, $(\\tau,\\vec{Y})$ is a condition in $\\mathbb{P}$ and \n$\\|\\tau\\|_{{\\mathsf{L}}}\\ge e$, thus, $(\\tau, \\vec{Y})\\in \\mathcal{D}^{2}_{e}$.\n\\end{proof}\n\n\\begin{thm}\\label{thm:SGP-conservation}\n${\\mathsf{RCA_0}}+{\\mathrm{SGP}^{2}_{2}}$ is a $\\tilde\\Pi^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{thm}\n\\begin{proof}\nStraightforward from Lemma~\\ref{lem:stable-grouping-characterization}, Theorem~\\ref{thm-con-Bn+1-vs-In} and Lemma~\\ref{lem:ISig1-preservation}.\n\\end{proof}\n\n\nThus, by the amalgamation theorem, we have the following conservation result.\n\\begin{thm}\\label{thm:GP-conservation}\n${\\mathsf{WKL_0}}+{\\mathrm{GP}^{2}_{2}}+{\\mathrm{ADS}}$ is a $\\tilde\\Pi^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{thm}\n\\begin{proof}\nApply Theorem~\\ref{thm:amalgamation} for the conservation results Corollary~\\ref{cor-con-ADS} and Theorem~\\ref{thm:SGP-conservation}, then we can see that ${\\mathsf{WKL_0}}+{\\mathrm{ADS}}+{\\mathrm{SGP}^{2}_{2}}$ is a $\\tilde\\Pi^{0}_{3}$ conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\nBy Hirschfeldt/Shore\\cite{HS2007}, ${\\mathrm{ADS}}$ implies ${\\mathrm{COH}}$.\nThus, ${\\mathsf{WKL_0}}+{\\mathrm{GP}^{2}_{2}}+{\\mathrm{ADS}}$ is a $\\tilde\\Pi^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{proof}\n\n\\section{Conservation theorem for ${\\mathrm{RT}}^2_2$}\\label{section-RT22}\n\nIn this section, we will show that ${\\mathsf{WKL_0}}+{\\mathrm{RT}}^2_2$ is a $\\tilde{\\Pi}^0_3$-conservative \nextension of ${\\mathrm{I}\\Sigma^0_1}$\nby showing that ${\\mathsf{WKL_0}}+{\\mathrm{EM}}$ is a $\\tilde{\\Pi}^0_3$-conservative \nextension of ${\\mathrm{I}\\Sigma^0_1}$.\nFor this, we will bound the size of $\\bbomega^{k}$-large(${\\mathrm{EM}}$) sets \nby $\\bbomega^{n}$-large sets using the following finite grouping principle.\n\n\\begin{definition}[${\\mathrm{I}\\Sigma^0_1}$, finite grouping principle]\nGiven largeness notions ${\\mathsf{L}}_{1}, {\\mathsf{L}}_{2}$ and a coloring \n$f:[X]^{n}\\to k$, \\textit{$({\\mathsf{L}}_{1},{\\mathsf{L}}_{2})$-grouping for $f$} \nis a finite family of finite sets $\\langle F_{i}\\subseteq X\\mid i<l \\rangle$ such that \n\\begin{itemize}\n \\item ${\\forall} i<j<l\\, \\max F_{i}<\\min F_{j}$,\n \\item ${\\forall} i<l\\, F_{i}\\in {\\mathsf{L}}_{1}$,\n \\item for any $H\\subseteq_{{\\mathrm{fin}}}{\\mathbb{N}}$, if $H\\cap F_{i}\\neq\\emptyset$ for any $i<l$, then $H\\in {\\mathsf{L}}_{2}$, and,\n \\item ${\\forall} i_{1}<\\dots< i_{n}\\, {\\exists} c<k\\, {\\forall} x_{1}\\in F_{i_{1}},\\dots,{\\forall} x_{n}\\in F_{i_{n}}\\, f(x_{1},\\dots,x_{n})=c$.\n\\end{itemize}\nNote that if ${\\mathsf{L}}_{2}$ is regular, then the third condition \ncan be replaced with $\\{\\max F_{i}\\mid i<l\\}\\in {\\mathsf{L}}_{2}$.\nNow ${\\mathrm{FGP}}^{n}_{k}({\\mathsf{L}}_{1},{\\mathsf{L}}_{2})$ (finite grouping principle \nfor $({\\mathsf{L}}_{1},{\\mathsf{L}}_{2})$) asserts that for any infinite set $X_{0}\\subseteq{\\mathbb{N}}$, \nthere exists a finite set $X\\subseteq X_{0}$ such that for any \ncoloring $f:[X]^{n}\\to k$, there exists a $({\\mathsf{L}}_{1},{\\mathsf{L}}_{2})$-grouping for $f$.\n\n\n\n\\end{definition}\n\\begin{thm}\\label{thm-FGP}\nLet ${\\mathsf{L}}_{1}$ and ${\\mathsf{L}}_{2}$ be $\\Delta_{0}$-definable \nregular largeness notions provably in ${\\mathrm{I}\\Sigma^0_1}$. \nThen, ${\\mathrm{I}\\Sigma^0_1}$ proves ${\\mathrm{FGP}^{2}_{2}}({\\mathsf{L}}_{1},{\\mathsf{L}}_{2})$.\n\\end{thm}\n\\begin{proof}\nOne can easily check that ${\\mathrm{FGP}^{2}_{2}}({\\mathsf{L}}_{1},{\\mathsf{L}}_{2})$ is a $\\tilde\\Pi^{0}_{3}$-statement which is provable from ${\\mathsf{WKL_0}}+{\\mathrm{GP}^{2}_{2}}({\\mathsf{L}}_{1})$.\nThus, ${\\mathrm{I}\\Sigma^0_1}$ proves ${\\mathrm{FGP}^{2}_{2}}({\\mathsf{L}}_{1},{\\mathsf{L}}_{2})$ by Theorem~\\ref{thm:GP-conservation}.\n\\end{proof}\n\nNow we apply the generalized Parsons theorem to the finite grouping principle.\nActually, its upper bound also bounds $\\bbomega^{k}$-large(${\\mathrm{EM}}$) sets as follows.\n\\begin{lem}\\label{lem-EM-largeness}\nFor any $k\\in\\omega$, there exists $n\\in\\omega$ such that\n\\begin{itemize}\n \\item[] \\rm ${\\mathrm{I}\\Sigma^0_1}\\vdash {\\forall} Z\\subseteq_{{\\mathrm{fin}}}(3,\\infty)_{{\\mathbb{N}}}(Z$ \nis $\\bbomega^{n}$-large $\\to Z$ is $\\bbomega^{k}$-large(${\\mathrm{EM}}$)$)$.\n\\end{itemize}\n\\end{lem}\n\\begin{proof}\nWe will prove this by (external) induction.\nFor the case $k=1$, $n=6$ is enough by Theorem~\\ref{SK-theorem}.\nAssume now $k>1$ and $\\bbomega^{n_{0}}$-largeness implies \n$\\bbomega^{k-1}$-large(${\\mathrm{EM}}$)ness in ${\\mathrm{I}\\Sigma^0_1}$.\nBy Theorems~\\ref{thm-g-Parsons} and \\ref{thm-FGP},\ntake $n\\in\\omega$ so that \n${\\mathrm{I}\\Sigma^0_1}$ proves ${\\forall} Z\\subseteq_{{\\mathrm{fin}}}{\\mathbb{N}}(Z$ is $\\bbomega^{n}$-large $\\to$ \nany coloring $f:[Z]^{2}\\to 2$ has an $(\\bbomega^{n_{0}},\\bbomega^{6})$-grouping$)$.\nWithin ${\\mathrm{I}\\Sigma^0_1}$, given an $\\bbomega^{n}$-large set $Z\\subseteq (3,\\infty)_{{\\mathbb{N}}}$ \nand $f:[[0,\\max Z]_{{\\mathbb{N}}}]^{2}\\to 2$, we want to find $H\\subseteq Z$ such that \n$f$ is transitive on $[H]^{2}$ and $H$ is $\\bbomega^{k}$-large.\nBy the assumption, there exists an $(\\bbomega^{n_{0}},\\bbomega^{6})$-grouping \n$\\langle F_{i}\\mid i<l \\rangle\\subseteq Z$ for $f$.\nSince each $F_{i}$ is $\\bbomega^{n_{0}}$-large, it is $\\bbomega^{k-1}$-large(${\\mathrm{EM}}$), \nthus, there exists $H_{i}\\subseteq F_{i}$ such that $H_{i}$ \nis $\\bbomega^{k-1}$-large and $f$ is transitive on $[H_{i}]^{2}$. \nOn the other hand, $\\{\\max F_{i}\\mid i<l\\}$ is $\\bbomega^{6}$-large, \nthus, there exists $\\tilde{H}\\subseteq\\{\\max F_{i}\\mid i<l\\}$ \nsuch that $\\tilde{H}$ is $\\bbomega$-large and $f$ is constant on \n$[\\tilde{H}]^{2}$ by Theorem~\\ref{SK-theorem}.\nPut $H=\\bigcup\\{H_{i}\\mid i<l, \\max F_{i}\\in \\tilde{H}\\}$.\nThen, one can easily check that $H$ is $\\bbomega^{k}$-large.\nWe now show that $f$ is transitive on $[H]^{2}$. Let $a,b,c\\in H$ and \n$a<b<c$. If there exists $i<l$ such that $a,b,c\\in H_{i}$, \nthen $f$ is transitive for $a,b,c$ since $f$ is transitive on $[H_{i}]^{2}$.\nIf for some $i_{0}<i_{1}<l$, $a,b\\in H_{i_{0}}$ and $c\\in H_{i_{1}}$, \nthen, $f(a,c)=f(b,c)$, so $f$ is transitive for $a,b,c$.\nThe case $a\\in H_{i_{0}}$ and $b,c\\in H_{i_{1}}$ for some $i_{0}<i_{1}<l$ is similar.\nFinally, if for some $i_{0}<i_{1}<i_{2}<l$, $a\\in H_{i_{0}}$, \n$b\\in H_{i_{1}}$ and $c\\in H_{i_{2}}$, then $f(a,b)=f(\\max F_{i_{0}},\n\\max F_{i_{1}})=f(\\max F_{i_{0}},\\max F_{i_{2}})=f(a,c)$, \nthus $f$ is transitive for $a,b,c$.\n\\end{proof}\n\n\\begin{thm}\\label{thm-con-EM}\n${\\mathsf{WKL_0}}+{\\mathrm{EM}}$ is a $\\tilde{\\Pi}{}^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{thm}\n\\begin{proof}\nBy Theorems~\\ref{thm-omega-largeness}, \n\\ref{thm-provably-large-conservative} and Lemma~\\ref{lem-EM-largeness}.\n\\end{proof}\n\n\nNow the main theorem follows from the amalgamation theorem.\n\\begin{thm}\\label{thm-con-RT22}\n${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}$ is a $\\tilde{\\Pi}{}^{0}_{3}$-conservative extension of ${\\mathrm{I}\\Sigma^0_1}$.\n\\end{thm}\n\\begin{proof}\nBy Theorem~\\ref{thm:amalgamation}, Corollary~\\ref{cor-con-ADS} and Theorem~\\ref{thm-con-EM}.\n\\end{proof}\n\n\nSeetapun and Slaman~\\cite{Seetapun1995strength} asked whether ${\\mathsf{RCA_0}} + {\\mathrm{RT}}^2_2$ proves the consistency of ${\\mathrm{I}\\Sigma^0_1}$,\nand Cholak, Jockusch and Slaman~\\cite{CJS} asked whether ${\\mathsf{RCA_0}} + {\\mathrm{RT}}^2_2$ proves the totality of Ackermann function.\nWe answer negatively through the main theorem.\n\\begin{cor}\n${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}$ does not imply the consistency of ${\\mathrm{I}\\Sigma^0_1}$ nor the totality of Ackermann function. \n\\end{cor}\n\nNote that one can avoid using the amalgamation theorem by directly \ncombining the bounds for large(${\\mathrm{psRT}}^{2}_{2}$)ness and large(${\\mathrm{EM}}$)ness\nin order to obtain a bound for  $\\bbomega^{k}$-large(${\\mathrm{RT}}^{2}_{2}$) sets and reprove the main conservation theorem.\n\\begin{prop}\\label{prop-RT22-largeness}\nFor any $k\\in\\omega$, there exists $n\\in\\omega$ such that\n\\begin{itemize}\n \\item[] \\rm ${\\mathrm{I}\\Sigma^0_1}\\vdash {\\forall} Z\\subseteq_{{\\mathrm{fin}}}(3,\\infty)_{{\\mathbb{N}}}(Z$ \nis $\\bbomega^{n}$-large $\\to Z$ is $\\bbomega^{k}$-large(${\\mathrm{RT}}^{2}_{2}$)$)$.\n\\end{itemize}\n\\end{prop}\n\\begin{proof}\nGiven $k\\in\\omega$, take $n\\in\\omega$ so that ${\\mathrm{I}\\Sigma^0_1}$ proves \n${\\forall} Z\\subseteq_{{\\mathrm{fin}}}(3,\\infty)_{{\\mathbb{N}}}(Z$ is $\\bbomega^{n}$-large $\\to Z$ \nis $\\bbomega^{2k+6}$-large(${\\mathrm{EM}}$)$)$ by Lemma~\\ref{lem-EM-largeness}.\nThen, within ${\\mathrm{I}\\Sigma^0_1}$, given $Z\\subseteq_{{\\mathrm{fin}}}(3,\\infty)_{{\\mathbb{N}}}$ \nwhich is $\\bbomega^{n}$-large and $f:[[0,\\max Z]_{{\\mathbb{N}}}]^{2}\\to 2$, there exists $H_{0}\\subseteq Z$ \nsuch that $H_{0}$ is $\\bbomega^{2k+6}$-large and $f$ is transitive on $[H_{0}]^{2}$.\nOne can easily find a transitive coloring $f':[[0,\\max H_{0}]_{{\\mathbb{N}}}]^{2}\\to 2$ such that $f'{\\upharpoonright}[H_{0}]^{2}=f{\\upharpoonright}[H_{0}]^{2}$.\n(Set $f'(x,y)=0$ if $x\\notin H_{0}$, $f'(x,y)=1$ if $x\\in H_{0}$ and $y\\notin H_{0}$, and $f'(x,y)=f(x,y)$ if $x,y\\in H_{0}$.)\nThen, by Lemma~\\ref{lem-ADS-largeness}, there exists $H\\subseteq H_{0}$ \nsuch that $H$ is $\\bbomega^{k}$-large and $f$ is constant on $[H]^{2}$.\nThus, $Z$ is $\\bbomega^{k}$-large(${\\mathrm{RT}}^{2}_{2}$).\n\\end{proof}\nThen, Theorem~\\ref{thm-con-RT22} follows from Theorems~\\ref{thm-omega-largeness}, \\ref{thm-provably-large-conservative} and Proposition~\\ref{prop-RT22-largeness}.\n\n\\section{Formalizing the conservation proof}\\label{section-consistency-strength}\n\nIn this section, we will formalize Theorem~\\ref{thm-con-RT22} within ${\\mathsf{PRA}}$.\nActually, most arguments we used are straightforwardly formalizable within ${\\mathsf{WKL_0}}$.\nWe however need to take care of the use of external induction and non-computable construction of models.\nWe fix a standard provability predicate $\\vdash$.\n\n\\begin{lem}\\label{lem-formalization}\nThe following are provable within ${\\mathsf{WKL_0}}$.\n\\begin{enumerate}\n \\item\\label{e-0} ${\\forall} \\varphi\\in \\Pi^{1}_{1}(({\\mathsf{WKL_0}}\\vdash \\varphi)\\to ({\\mathrm{I}\\Sigma^0_1}\\vdash \\varphi))$ \n\t\t(Theorem~\\ref{thm:harrington-conservation-wkl}).\n \\item\\label{e-2} ${\\forall} n\\in{\\mathbb{N}} ({\\mathrm{I}\\Sigma^0_1}\\vdash \\mbox{any infinite set has an $\\bbomega^{n}$-large subset})$ (Theorem~\\ref{thm-omega-largeness}).\n \\item\\label{e-2-1} ${\\forall} k\\in{\\mathbb{N}} ({\\mathrm{I}\\Sigma^0_1}\\vdash \\mbox{$X$ is $\\bbomega^{k+4}$-large}\\wedge \\min X>3 \\to \\mbox{$X$ is $\\bbomega$-large$({\\mathrm{RT}}^{2}_{k})$})$ (Theorem~\\ref{SK-theorem}).\n \\item\\label{e-1-1} The generalized Parsons theorem (Theorem~\\ref{thm-g-Parsons}).\n \\item\\label{e-1-2} The amalgamation theorem (Theorem~\\ref{thm:amalgamation}).\n \\item\\label{e-2-2} $({\\forall} n\\in{\\mathbb{N}}({\\mathrm{I}\\Sigma^0_1}\\vdash \\mbox{any infinite set has an $\\bbomega^{n}$-large$(\\Gamma)$ subset}))\\to ({\\forall} \\varphi\\in \\tilde\\Pi^{0}_{3}(({\\mathsf{WKL_0}}+\\Gamma\\vdash \\varphi)\\to ({\\mathrm{I}\\Sigma^0_1}\\vdash \\varphi)))$ for $\\Gamma\\equiv{\\mathrm{psRT}}^{2}_{2}, {\\mathrm{EM}}$ (Theorem~\\ref{thm-provably-large-conservative}).\n \\item\\label{e-3-1} ${\\forall} n\\in{\\mathbb{N}}({\\mathrm{I}\\Sigma^0_1}\\vdash \\mbox{any infinite set has an $\\bbomega^{n}$-large$({\\mathrm{psRT}}^{2}_{2})$ subset})$ (Lemma~\\ref{lem-ADS-largeness}).\n \\item\\label{e-4-0} ${\\forall} \\varphi\\in \\tilde\\Pi^{0}_{3}(({\\mathsf{WKL_0}}+{\\mathrm{GP}^{2}_{2}}\\vdash \\varphi)\\to ({\\mathrm{I}\\Sigma^0_1}\\vdash \\varphi))$ (Theorem~\\ref{thm:GP-conservation}).\n\n\n\n \\item\\label{e-4} ${\\forall} k\\in {\\mathbb{N}}({\\mathrm{I}\\Sigma^0_1}\\vdash {\\mathrm{FGP}^{2}_{2}}({\\mathsf{L}}_{\\bbomega^{k}},{\\mathsf{L}}_{\\bbomega^{6}}))$ (Theorem~\\ref{thm-FGP}).\n \\item\\label{e-5-1} ${\\forall} n\\in{\\mathbb{N}}({\\mathrm{I}\\Sigma^0_1}\\vdash \\mbox{any infinite set has an $\\bbomega^{n}$-large$({\\mathrm{EM}})$ subset})$ (Lemma~\\ref{lem-EM-largeness}).\n\n\\end{enumerate}\n\\end{lem}\n\\begin{proof}\nWe reason within ${\\mathsf{WKL_0}}$.\nFor {\\textrm{(\\ref{{e-0}})}}, several formalized proofs are known. See, e.g., \\cite{Avigad1996,Hajek}.\nFor {\\textrm{(\\ref{{e-2}})}}, the induction used here is on provability, thus it is a $\\Sigma^{0}_{1}$-induction.\nFor {\\textrm{(\\ref{{e-2-1}})}}, the original Ketonen and Solovay's proof is directly formalizable (see \\cite[Section 6]{KS81}).\nFor {\\textrm{(\\ref{{e-1-1}})}} and {\\textrm{(\\ref{{e-1-2}})}}, we can directly formalize our model-theoretic proofs of Theorems~\\ref{thm-g-Parsons} and \\ref{thm:amalgamation} by using the completeness theorem which is available within ${\\mathsf{WKL_0}}$.\nFor {\\textrm{(\\ref{{e-2-2}})}}, we can formalize the proofs of Lemma~\\ref{lem-cut-from-dense-set} and Theorem~\\ref{thm-conservation-via-density-general} by using the completeness theorem.\nTo formalize the proof of Theorem~\\ref{thm-provably-large-conservative}, we use the induction on provability.\nFor {\\textrm{(\\ref{{e-3-1}})}}, formalize the proof of Lemma~\\ref{lem-ADS-largeness}. Formalization is direct since we only deal with finite objects.\nFor {\\textrm{(\\ref{{e-4-0}})}}, formalize the argument in Section~\\ref{section-GP-con}.\nTo formalize the proof of Theorem~\\ref{thm-con-Bn+1-vs-In}, an $\\omega$-extension to be a model of ${\\mathrm{B}\\Sigma^0_2}+{\\mathsf{WKL_0}}$ is available within ${\\mathsf{WKL_0}}$ by formalizing the argument by H\\'ajek\\cite{Hajek} or Belanger\\cite{Belanger}.\nThe existence of a countable recursively saturated model is provable in ${\\mathsf{WKL_0}}$ (see \\cite[Section IX]{SOSOA}) and the Theorem~\\ref{thm-c-resplendency} can be formalized similarly.\nTo formalize the proof of Lemma~\\ref{lem:ISig1-preservation}, one can take a generic by the Baire category theorem which is available within ${\\mathsf{RCA_0}}$.\n{\\textrm{(\\ref{{e-4}})}} is straightforward from {\\textrm{(\\ref{{e-4-0}})}}.\nFor {\\textrm{(\\ref{{e-5-1}})}}, formalize the proof of Lemma~\\ref{lem-EM-largeness}. The induction used here is again on provability.\n\\end{proof}\n\nThus, we have the following formalized conservation theorem.\n\\begin{thm}\\label{thm:equi-consistency}\n ${\\mathsf{PRA}}$ proves that ${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}\\vdash\\psi$ \nimplies ${\\mathrm{I}\\Sigma^0_1}\\vdash \\psi$ for any $\\tilde{\\Pi}{}^{0}_{3}$-sentences.\n\\end{thm}\n\nNow the consistency equivalence of ${\\mathrm{I}\\Sigma^0_1}$ and ${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}$ follows from this formalized conservation theorem.\n\\begin{cor}\n Over ${\\mathsf{PRA}}$, ${\\mathrm{Con}}({\\mathrm{I}\\Sigma^0_1})$ is equivalent to ${\\mathrm{Con}}({\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2})$.\n\\end{cor}\n\n\n\\section{Open questions}\n\nIn their paper~\\cite{CSY201X}, Chong, Slaman and Yang asked whether ${\\mathrm{RT}}^2_2$ is a $\\Pi^1_1$-conservative extension of ${\\mathsf{RCA_0}} + {\\mathrm{B}\\Sigma^0_2}$.\nThis question remains open, and a positive answer would strengthen our main conservation result since\n${\\mathrm{B}\\Sigma^0_2}$ is $\\Pi^0_3$-conservative over~${\\mathrm{I}\\Sigma^0_1}$ (Theorem~\\ref{thm:bsig2-pi03-conservative-isig1}).\n\n\\begin{question}[Chong, Slaman, Yang]\\label{quest:rt22-pi11-bsig2}\nIs ${\\mathrm{RT}}^2_2$ a $\\Pi^1_1$-conservative extension of~${\\mathsf{RCA_0}} + {\\mathrm{B}\\Sigma^0_2}$?\n\\end{question}\n\nIn particular, they proved~\\cite{CSY2012} that the chain anti-chain principle is $\\Pi^1_1$-conservative over~${\\mathsf{RCA_0}} + {\\mathrm{B}\\Sigma^0_2}$.\nTherefore, in order to answer Question~\\ref{quest:rt22-pi11-bsig2}, one needs only to prove that \nthis is also the case for the Erd\\H{o}s-Moser theorem.\n\nFor the purposes of our conservation proof, we introduced the grouping principle,\nwhich seems to be interesting to study in its own right. \nThe standard proofs that a principle implies ${\\mathrm{B}\\Sigma^0_2}$ does not seem to be directly\napplicable to the grouping principle. The relation between the grouping\nprinciple and the $\\Sigma^0_2$-bounding principle is currently unknown.\n\n\\begin{question}\nDoes ${\\mathrm{GP}^{2}_{2}}$ imply~${\\mathrm{B}\\Sigma^0_2}$ over~${\\mathsf{RCA_0}}$?\n\\end{question}\n\nA proof of $\\Pi^1_1$-conservation of the grouping principle over~${\\mathrm{B}\\Sigma^0_2}$\nwould significantly simplify our conservation argument since the finite grouping\nprinciple can be easily derived from its infinite version.\n\n\\begin{question}\nIs ${\\mathrm{GP}^{2}_{2}}$ a $\\Pi^1_1$-conservative extension of ${\\mathsf{RCA_0}} + {\\mathrm{B}\\Sigma^0_2}$?\n\\end{question}\n\n\nThe grouping principle has been used to establish a density bound for the Erd\\H{o}s-Moser theorem.\nThe stable grouping principle does not imply the stable version of the Erd\\H{o}s-Moser theorem\nsince the former admits low solutions whereas the latter does not. It is however unknown\nwhether the full version of the two principles coincide.\n\n\\begin{question}\nDoes~${\\mathrm{EM}}$ imply ${\\mathrm{GP}^{2}_{2}}$ over~${\\mathsf{RCA_0}}$?\n\\end{question}\n\nOur conservation proof contains almost no information about the size of the proof, but it is interesting to know whether ${\\mathrm{RT}}^{2}_{2}$ gives shorter proofs for $\\tilde{\\Pi}{}^{0}_{3}$-consequences of ${\\mathrm{I}\\Sigma^0_1}$ or not.\n\\begin{question}\n Does ${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}$ or ${\\mathsf{WKL_0}}+{\\mathrm{psRT}}^{2}_{2}$ have a significant speed-up over ${\\mathrm{I}\\Sigma^0_1}$?\n\\end{question}\nNote that there is no significant speed-up between ${\\mathsf{WKL_0}}$ and ${\\mathrm{I}\\Sigma^0_1}$ (see Avigad\\cite{Avigad1996}).\nA killer example for this question is an existence of $m$-dense sets, \\textit{i.e.}, $m\\mbox{-}{\\widetilde{\\mathrm{PH}}{}}({\\mathrm{RT}}^{2}_{2})$ or $m\\mbox{-}{\\widetilde{\\mathrm{PH}}{}}({\\mathrm{psRT}}^{2}_{2})$.\nIt is not hard to see that $m\\mbox{-}{\\widetilde{\\mathrm{PH}}{}}({\\mathrm{RT}}^{2}_{2})$ can be proved from ${\\mathsf{WKL_0}}+{\\mathrm{RT}}^{2}_{2}$ by using ${\\mathrm{RT}}^{2}_{2}$ $m$-times, and the case of ${\\mathrm{psRT}}^{2}_{2}$ is similar.\nOn the other hand, to prove $m\\mbox{-}{\\widetilde{\\mathrm{PH}}{}}({\\mathrm{psRT}}^{2}_{2})$ from ${\\mathrm{I}\\Sigma^0_1}$, what we know is the following.\n\\begin{prop}\\label{thm-ADS-density}\nFor any $m\\in\\omega$, the following is provable within ${\\mathrm{I}\\Sigma^0_1}$. \nIf a finite set $X\\subseteq{\\mathbb{N}}$ is $\\bbomega^{3^{m+1}}$-large and \n$\\min X>3$, then $X$ is $m$-dense(${\\mathrm{psRT}}^{2}_{2}$).\n\\end{prop}\n\\begin{proof}\nEasy induction by using Lemma~\\ref{lem-ADS-largeness}.\n\\end{proof}\n\\noindent\nThus, within ${\\mathrm{I}\\Sigma^0_1}$, we can obtain an $m$-dense$({\\mathrm{psRT}}^{2}_{2})$-set by using $\\Sigma^{0}_{1}$-induction $3^{m+1}$-times.\nThis might indicate that there is at most exponential speed-up for the case of ${\\mathrm{psRT}}^{2}_{2}$.\nFor the case of ${\\mathrm{RT}}^{2}_{2}$, the situation is more difficult.\nAn only upper bound for $m$-dense$({\\mathrm{RT}}^{2}_{2})$ sets obtained from our argument is the following.\n\\begin{prop}\n There exists a primitive recursive function $h:\\omega\\to\\omega$ such that for any $m\\in\\omega$, the following is provable within ${\\mathrm{I}\\Sigma^0_1}$. If a finite set $X\\subseteq\\omega$ is $\\bbomega^{h(m)}$-large then $X$ is $m$-dense$({\\mathrm{RT}}^{2}_{2})$.\n\\end{prop}\n\\begin{proof}\nBy formalizing the proof of Proposition~\\ref{prop-RT22-largeness} and applying $\\Sigma^{0}_{1}$-induction, we obtain\n", "index": 17, "text": "\n\\[{\\forall} m\\in{\\mathbb{N}} {\\exists} k\\in{\\mathbb{N}} ({\\mathrm{I}\\Sigma^0_1}\\vdash \\mbox{$X$ is $\\bbomega^{k}$-large}\\to\\mbox{$X$ is $m$-dense$({\\mathrm{RT}}^{2}_{2})$}).\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex11.m1\" class=\"ltx_Math\" alttext=\"{\\forall}m\\in{\\mathbb{N}}{\\exists}k\\in{\\mathbb{N}}({\\mathrm{I}\\Sigma^{0}_{1}}%&#10;\\vdash\\mbox{$X$ is $\\bbomega^{k}$-large}\\to\\mbox{$X$ is $m$-dense$({\\mathrm{RT%&#10;}}^{2}_{2})$}).\" display=\"block\"><mrow><mo>\u2200</mo><mi>m</mi><mo>\u2208</mo><mi>\u2115</mi><mo>\u2203</mo><mi>k</mi><mo>\u2208</mo><mi>\u2115</mi><mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"normal\">I</mi><msubsup><mi mathvariant=\"normal\">\u03a3</mi><mn>1</mn><mn>0</mn></msubsup><mo>\u22a2</mo><mrow><mi>X</mi><mtext>\u00a0is\u00a0</mtext><msup><mi mathvariant=\"double-struck\">\u03c9</mi><mi>k</mi></msup><mtext>-large</mtext></mrow><mo>\u2192</mo><mrow><mi>X</mi><mtext>\u00a0is\u00a0</mtext><mi>m</mi><mtext>-dense</mtext><mrow><mo stretchy=\"false\">(</mo><msubsup><mi>RT</mi><mn>2</mn><mn>2</mn></msubsup><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.00050.tex", "nexttext": "\nwhere $\\vdash_{x}$ means that there exists a proof whose G\\\"odel number is smaller than $x$.\nFor $m\\in\\omega$, $k$ and $h(m)$ in the above are standard, thus, ${\\mathrm{I}\\Sigma^0_1}$ truly proves``$\\mbox{$X$ is $\\bbomega^{k}$-large}\\to\\mbox{$X$ is $m$-dense$({\\mathrm{RT}}^{2}_{2})$}$''.\n\\end{proof}\n\n\n\n\\bibliographystyle{plain}\n\\bibliography{bib}\n\n\n", "itemtype": "equation", "pos": 122402, "prevtext": "\nThen, by the Parsons theorem, there exists a primitive recursive function $h:\\omega\\to \\omega$ such that ${\\mathrm{I}\\Sigma^0_1}$ proves\n", "index": 19, "text": "\n\\[{\\forall} m\\in{\\mathbb{N}} {\\exists} k\\le h(m)  ({\\mathrm{I}\\Sigma^0_1}\\vdash_{h(m)} \\mbox{$X$ is $\\bbomega^{k}$-large}\\to\\mbox{$X$ is $m$-dense$({\\mathrm{RT}}^{2}_{2})$}),\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex12.m1\" class=\"ltx_Math\" alttext=\"{\\forall}m\\in{\\mathbb{N}}{\\exists}k\\leq h(m)({\\mathrm{I}\\Sigma^{0}_{1}}\\vdash_%&#10;{h(m)}\\mbox{$X$ is $\\bbomega^{k}$-large}\\to\\mbox{$X$ is $m$-dense$({\\mathrm{RT%&#10;}}^{2}_{2})$}),\" display=\"block\"><mrow><mo>\u2200</mo><mi>m</mi><mo>\u2208</mo><mi>\u2115</mi><mo>\u2203</mo><mi>k</mi><mo>\u2264</mo><mi>h</mi><mrow><mo stretchy=\"false\">(</mo><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"normal\">I</mi><msubsup><mi mathvariant=\"normal\">\u03a3</mi><mn>1</mn><mn>0</mn></msubsup><msub><mo>\u22a2</mo><mrow><mi>h</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>m</mi><mo stretchy=\"false\">)</mo></mrow></mrow></msub><mrow><mi>X</mi><mtext>\u00a0is\u00a0</mtext><msup><mi mathvariant=\"double-struck\">\u03c9</mi><mi>k</mi></msup><mtext>-large</mtext></mrow><mo>\u2192</mo><mrow><mi>X</mi><mtext>\u00a0is\u00a0</mtext><mi>m</mi><mtext>-dense</mtext><mrow><mo stretchy=\"false\">(</mo><msubsup><mi>RT</mi><mn>2</mn><mn>2</mn></msubsup><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow><mo>,</mo></mrow></math>", "type": "latex"}]