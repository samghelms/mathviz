[{"file": "1601.07783.tex", "nexttext": "\nwhere, $g^i = e^{-h/(R^iC^i)}$ ($h$ is the sampling time and $R^iC^i$ is the time constant of the TCL), $\\theta^i_g = R^iP^i\\eta^i$ and $\\theta^i_a[k]$ is the ambient temperature measurement at $i^{th}$ TCL. The first term represents the decaying influence of the temperature in the previous time step. While, the second term is temperature gain/loss as the TCL is switch On/Off. \n$P^i$ is the rated power of TCL which is positive in case of the air-conditioning load and negative for the heater.\nThe parameter $\\epsilon^i$ represents the noise associated with the temperature measurement of $i^{\\textrm{th}}$ TCL. \nThe detail of other parameters can be found in Tab.~\\ref{table:PV data}.\nThe state transition of the cooling TCL is given as~\\cite{6669582},\n\n", "itemtype": "equation", "pos": 8938, "prevtext": "\n\n\n\\title{Stochastic Battery Model for Aggregation of Thermostatically Controlled Loads}\n\n\\author{\\IEEEauthorblockN{Sohail Khan, Mohsin Shahzad, Usman Habib}\n\\IEEEauthorblockA{AIT Austrian Institute of Technology, Vienna, Austria\\\\\n{sohail.khan@ait.ac.at, \\{givenname.surname\\}@ait.ac.at}}\n\n\n\\and\n\\IEEEauthorblockN{Wolfgang Gawlik}\n\\IEEEauthorblockA{TU Vienna -- Austria\\\\\n{gawlik@ea.tuwien.ac.at}}\n\\and\n\\IEEEauthorblockN{Peter Palensky}\n\\IEEEauthorblockA{TU Delft -- Netherlands\\\\\n{p.palensky@tudelft.nl}}\n}\n\n\n\n\\maketitle\n\n\n\n\\begin{abstract}\n\n\n\n\n\n\nThe potential of demand side as a frequency reserve proposes interesting opportunity in handling imbalances due to intermittent renewable energy sources.\nThis paper proposes a novel approach for computing the parameters of a stochastic battery model representing the aggregation of Thermostatically Controlled Loads (TCLs).\nA hysteresis based non-disruptive control is used using priority stack algorithm to track the reference regulation signal.\nThe parameters of admissible ramp-rate and the charge limits of the battery are dynamically calculated using the information from TCLs that is the status (on/off), availability and relative temperature distance till the switching boundary.\nThe approach builds on and improves on the existing research work by providing a straight-forward mechanism for calculation of stochastic parameters of equivalent battery model.\n\nThe effectiveness of proposed approach is demonstrated by a test case having a large number of residential TCLs tracking a scaled down real frequency regulation signal.\n\\end{abstract}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\IEEEpeerreviewmaketitle\n\n\\begin{spacing}{1.2}\n\\section*{Nomenclature}\n\\addcontentsline{toc}{section}{Nomenclature}\n\n\\begin{IEEEdescription}[\\IEEEusemathlabelsep\\IEEEsetlabelwidth{$V_1,V_2$}]\n\\item[$i$] Index of the TCL, from 1 to $N$.\n\\item[$k$] Time index, from 1 to $T$.\n\\item[$\\theta^i$] Temperature of $i^{\\textrm{th}}$ TCL.\n\\item[$\\Delta^i$] Temperature dead-band width of $i^{\\textrm{th}}$ TCL.\n\\item[$\\psi$] Aggregate power deviation from the base value.\n\\item[$\\delta$] Operational status of TCL $\\in(0,\\;1)$.\n\\item[$\\rho^i$] Time duration after status change of $i^{\\textrm{th}}$ TCL.\n\\item[${\\mkern3mu\\overline{\\mkern-3mu {\\rho^i}\\mkern-3mu}\\mkern3mu}$] Short cycling time constraint of $i^{\\textrm{th}}$ TCL.\n\\item[$\\lambda^i$] TCL availability status $\\in(0,\\;1)$.\n\\item[$\\pi^i$] Normalized temperature distance to the switching boundary of $i^{\\textrm{th}}$ TCL.\n\\item[$P^i,\\; P^i_0$] Rated and nominal power of $i^{\\textrm{th}}$ TCL.\n\\end{IEEEdescription}\n\\end{spacing}\n\n\\section{Introduction}\n\nThe balance between supply and demand is the principal control objective in the power system.\nIn order to achieve this balance the planning and control is performed at various time scales ranging from day-ahead to seconds.\nThe rise in distributed generation from renewable energy sources like wind and solar have increased the uncertainty at generation-side and thus, the imbalance probability~\\cite{4808228}.\nGenerally, the balance is achieved by activating the reserve power from the online generators.\nThis approach have proved to be effective in power system.\nHowever, increase in the level and volatility of the imbalance have made it an expensive choice.\nThus the alternate sources of flexibility are highly sought after. \nAmong them, a promising alternative is the active control of Thermostatically Controlled Loads (TCLs) e.g., air conditioning and heating units~\\cite{1318707}.\nIn these loads, there exists a flexibility around the user set-point called the dead-band. \nA non-disruptive operation can be achieved by controlling the operational state of the TCL within the dead-band in order to track a reference active power signal~\\cite{6669582}.\nSuch that, the load can be increased or decreased without causing discomfort to the customers. \n\n\n\\subsection{TCL as frequency reserve}\nThe imbalance in supply and demand of active power results in frequency deviation from the nominal value.\nFrequency regulation is a real time objective and is critical for a secure operation of the system.\nThe time scale requirements ranges from seconds to minutes and thus limits the maximum admissible delay in the response of reserve resources.\nThe aggregation of residential TCLs can be a cost effective and a secure alternative to the fast generation units or storage solutions~\\cite{6832599}.\nThe ability of the TCL aggregation in responding to the real-time frequency regulation signal has been reported in~\\cite{koch2011modeling, 6858734}.\nThe impact of using this resource has been focused in several regional studies. \nSuch as, in~\\cite{7302276}, the capability of using TCLs as a storage capacity in Switzerland is discussed.\nThe potential is interesting but the infrastructure required at the TCL level to enable this technology is a limiting factor.\nThis paper aims to present a cost effective approach for assessing the availability and the dynamic capability of this resource as stochastic parameters of an equivalent battery model.\n\n\\subsection{Literature survey}\nThe aggregate behavior of large population of TCLs stems out from the modeling approaches used.\nIn literature, two approaches are generally used for modeling TCLs.\nThe individual load model of the TCL as a combination of a continuous temperature state and a discrete ``switching state'' were first presented \n\nin~\\cite{4111111}.\nAuthors in \\cite{molina2003implementation} have verified this model for the real population of TCLs. \n\n\nThe three state model capturing the temperature of thermal mass is  discussed \n\nin~\\cite{6545388}.\nMore advance models are discussed in literature that aims to model the dynamics of TCL accurately~\\cite{5762648}.\nThe simulation of individual models can be challenging for large number of TCLS.\nHowever, this approach is suited for the simple control strategies~\\cite{koch2009active}.\nThe second approach is the direct modeling of the aggregation of TCLs.\nRecently, state space models have been explored with much interest as it facilitates the control design.\nAmong such methods, partial differential equation based approach is used \n\nfor designing a sliding model control approach~\\cite{6239581}.\nThe representation of the TCL aggregation by a generalized battery and the calculation of its parameters are interesting research areas and depend on the modeling and control strategies discussed above.\n\nThe limits on the power and energy capacity that can be tracked by TCL aggregation are discussed in~\\cite{6669582}.\nThe values are calculated as function of the outdoor temperature. \nThe other factors affecting the availability like customer preferences are not considered. \n\nAuthors in~\\cite{6736573} have recently presented a generalized battery model.\nThe power limits on this model are derived using continuous power model. \nSimilarly, \n\nauthors in~\\cite{7345604} have modeled the stochastic parameters of the battery model.\nIn these papers, the power consumption at each TCL is required to be measured and sent to the central control.\nIt can be an additional expense along with the consideration of measurement uncertainty in the continuous variable. \nThe dynamic battery parameters are obtained from the historical information of the switching status of TCLs.\nAlternatively, a novel mechanism of computing the stochastic battery parameters is proposed here.\nThese parameters are the maximum ramp-up/down values and the charging/discharging potential of the battery.\nAnalytic expressions are provided to calculate these parameters using status $(u^i[k])$, availability $(\\lambda^i[k])$ and relative temperature distance to switching boundary $(\\pi^i[k])$. \nFig.~\\ref{figure:system overview} shows the working principle of the TCLs aggregation control. The regulation signal $r[k]$ is the input to the central control which communicates with the TCLs and control their operational states. The error in the tracking signal is sent back for the monitoring purpose. \n\\begin{figure} [htb]\n\\centering\n\n\\includegraphics[trim=1.2cm 0cm 0cm 0.5cm, width=0.45\\textwidth]{system_model_new}\n\\caption{Overview of the control mechanism}\n\\label{figure:system overview}\n\\end{figure}\n\n\n\n\n\n\n\n\n\n\n\nRest of the paper is organized as follows. \nThe model of TCL and stochastic battery is discussed in Sec.~\\ref{sec:problem statement}. \nThe implementation strategy of the stochastic limits based control is presented in Sec.~\\ref{sec:control scheme}. \nIn Sec.~\\ref{sec:results}, the test case and results are discussed and followed by the conclusion in Sec.~\\ref{sec:conclusion}.\n\n\\section{Stochastic Battery Model}\\label{sec:problem statement}\n\n\\subsection{Thermostatically Controlled Loads}\\label{sec:thermostatically controlled loads}\nIn order to simulate the aggregation of TCL, a simplified first order model has been reported widely in the literature~\\cite{4111111,6669582,49112}.\nIt is given by a difference equation,\n\n", "index": 1, "text": "\\begin{equation}\n\\theta^i[k+1]=g^i\\theta^i[k]+(1-g^i)(\\theta^i_a[k]-\\delta^i[k]\\theta^i_g)+\\epsilon^i[k]\n\\enspace , \n\\label{eq:TCL model}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E1.m1\" class=\"ltx_Math\" alttext=\"\\theta^{i}[k+1]=g^{i}\\theta^{i}[k]+(1-g^{i})(\\theta^{i}_{a}[k]-\\delta^{i}[k]%&#10;\\theta^{i}_{g})+\\epsilon^{i}[k]\\@math@espace,\" display=\"block\"><mrow><mrow><mrow><msup><mi>\u03b8</mi><mi>i</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow><mo stretchy=\"false\">]</mo></mrow></mrow><mo>=</mo><mrow><mrow><msup><mi>g</mi><mi>i</mi></msup><mo>\u2062</mo><msup><mi>\u03b8</mi><mi>i</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow></mrow><mo>+</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><msup><mi>g</mi><mi>i</mi></msup></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mrow><msubsup><mi>\u03b8</mi><mi>a</mi><mi>i</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow></mrow><mo>-</mo><mrow><msup><mi>\u03b4</mi><mi>i</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><msubsup><mi>\u03b8</mi><mi>g</mi><mi>i</mi></msubsup></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>+</mo><mrow><msup><mi>\u03f5</mi><mi>i</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\@math@espace</mtext></merror></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.07783.tex", "nexttext": "\nHere, $\\Delta^i$ defines the dead-band around the reference set-point~$\\theta^i_{\\textrm{ref}}$. When TCL is operating outside the dead-band it is considered non-controllable. \n\nIn order to perform the non-disruptive load control, TCLs are actively controlled while operating within the dead-band~\\cite{6669582}.\nIn the steady state it is assumed that $\\theta^i=\\theta^i_{\\textrm{ref}}$. \nThe corresponding power consumption is obtained by solving the continuous power model from~\\cite{6832599}, leading to,\n\n", "itemtype": "equation", "pos": 9848, "prevtext": "\nwhere, $g^i = e^{-h/(R^iC^i)}$ ($h$ is the sampling time and $R^iC^i$ is the time constant of the TCL), $\\theta^i_g = R^iP^i\\eta^i$ and $\\theta^i_a[k]$ is the ambient temperature measurement at $i^{th}$ TCL. The first term represents the decaying influence of the temperature in the previous time step. While, the second term is temperature gain/loss as the TCL is switch On/Off. \n$P^i$ is the rated power of TCL which is positive in case of the air-conditioning load and negative for the heater.\nThe parameter $\\epsilon^i$ represents the noise associated with the temperature measurement of $i^{\\textrm{th}}$ TCL. \nThe detail of other parameters can be found in Tab.~\\ref{table:PV data}.\nThe state transition of the cooling TCL is given as~\\cite{6669582},\n\n", "index": 3, "text": "\\begin{equation}\n\\delta^i[k+1]=\n\\left\\{\\begin{matrix}\n1 &\\theta^i[k+1] > \\theta^i_\\textrm{ref}+\\Delta^i \\\\ \n0 &\\theta^i[k+1] < \\theta^i_\\textrm{ref}-\\Delta^i \\\\ \n\\delta^i[k] &otherwise\n\\end{matrix}\\right.\n\\enspace . \n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E2.m1\" class=\"ltx_Math\" alttext=\"\\delta^{i}[k+1]=\\left\\{\\begin{matrix}1&amp;\\theta^{i}[k+1]&gt;\\theta^{i}_{\\textrm{ref%&#10;}}+\\Delta^{i}\\\\&#10;0&amp;\\theta^{i}[k+1]&lt;\\theta^{i}_{\\textrm{ref}}-\\Delta^{i}\\\\&#10;\\delta^{i}[k]&amp;otherwise\\end{matrix}\\right.\\@math@espace.\" display=\"block\"><mrow><msup><mi>\u03b4</mi><mi>i</mi></msup><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><mo>=</mo><mrow><mo>{</mo><mtable columnspacing=\"5pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mrow><mrow><msup><mi>\u03b8</mi><mi>i</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow><mo stretchy=\"false\">]</mo></mrow></mrow><mo>&gt;</mo><mrow><msubsup><mi>\u03b8</mi><mtext>ref</mtext><mi>i</mi></msubsup><mo>+</mo><msup><mi mathvariant=\"normal\">\u0394</mi><mi>i</mi></msup></mrow></mrow></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mrow><mrow><msup><mi>\u03b8</mi><mi>i</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow><mo stretchy=\"false\">]</mo></mrow></mrow><mo>&lt;</mo><mrow><msubsup><mi>\u03b8</mi><mtext>ref</mtext><mi>i</mi></msubsup><mo>-</mo><msup><mi mathvariant=\"normal\">\u0394</mi><mi>i</mi></msup></mrow></mrow></mtd></mtr><mtr><mtd columnalign=\"center\"><mrow><msup><mi>\u03b4</mi><mi>i</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow></mrow></mtd><mtd columnalign=\"center\"><mrow><mi>o</mi><mo>\u2062</mo><mi>t</mi><mo>\u2062</mo><mi>h</mi><mo>\u2062</mo><mi>e</mi><mo>\u2062</mo><mi>r</mi><mo>\u2062</mo><mi>w</mi><mo>\u2062</mo><mi>i</mi><mo>\u2062</mo><mi>s</mi><mo>\u2062</mo><mi>e</mi></mrow></mtd></mtr></mtable><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\@math@espace</mtext></merror><mo>.</mo></mrow></mrow></math>", "type": "latex"}, {"file": "1601.07783.tex", "nexttext": "\nIt is reported in~\\cite{6669582}, that $P_i^o[k]$ can be considered as average power consumed by the TCL operating in the steady state.\nThe baseline power consumption of the TCL aggregation is given as,\n\n", "itemtype": "equation", "pos": 10588, "prevtext": "\nHere, $\\Delta^i$ defines the dead-band around the reference set-point~$\\theta^i_{\\textrm{ref}}$. When TCL is operating outside the dead-band it is considered non-controllable. \n\nIn order to perform the non-disruptive load control, TCLs are actively controlled while operating within the dead-band~\\cite{6669582}.\nIn the steady state it is assumed that $\\theta^i=\\theta^i_{\\textrm{ref}}$. \nThe corresponding power consumption is obtained by solving the continuous power model from~\\cite{6832599}, leading to,\n\n", "index": 5, "text": "\\begin{equation}\nP_i^o[k] = \n\\frac{\\theta^i_a[k]-\\theta^i_r}{\\eta^iR^i}\n\\enspace .\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E3.m1\" class=\"ltx_Math\" alttext=\"P_{i}^{o}[k]=\\frac{\\theta^{i}_{a}[k]-\\theta^{i}_{r}}{\\eta^{i}R^{i}}\\@math@espace.\" display=\"block\"><mrow><mrow><mrow><msubsup><mi>P</mi><mi>i</mi><mi>o</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow></mrow><mo>=</mo><mrow><mfrac><mrow><mrow><msubsup><mi>\u03b8</mi><mi>a</mi><mi>i</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow></mrow><mo>-</mo><msubsup><mi>\u03b8</mi><mi>r</mi><mi>i</mi></msubsup></mrow><mrow><msup><mi>\u03b7</mi><mi>i</mi></msup><mo>\u2062</mo><msup><mi>R</mi><mi>i</mi></msup></mrow></mfrac><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\@math@espace</mtext></merror></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07783.tex", "nexttext": "\nThe instantaneous active power consumption at $k$ is the sum of the rated power of all active TCLs. It is given as,\n\n", "itemtype": "equation", "pos": 10889, "prevtext": "\nIt is reported in~\\cite{6669582}, that $P_i^o[k]$ can be considered as average power consumed by the TCL operating in the steady state.\nThe baseline power consumption of the TCL aggregation is given as,\n\n", "index": 7, "text": "\\begin{equation}\nP_{\\textrm{base}}[k] = \\sum_i P_o^i\n\\enspace .\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E4.m1\" class=\"ltx_Math\" alttext=\"P_{\\textrm{base}}[k]=\\sum_{i}P_{o}^{i}\\@math@espace.\" display=\"block\"><mrow><mrow><mrow><msub><mi>P</mi><mtext>base</mtext></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow></mrow><mo>=</mo><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mi>i</mi></munder><mrow><msubsup><mi>P</mi><mi>o</mi><mi>i</mi></msubsup><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\@math@espace</mtext></merror></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07783.tex", "nexttext": "\nThe difference between the aggregate and baseline power consumption is given as,\n\n", "itemtype": "equation", "pos": 11084, "prevtext": "\nThe instantaneous active power consumption at $k$ is the sum of the rated power of all active TCLs. It is given as,\n\n", "index": 9, "text": "\\begin{equation}\nP_{\\textrm{agg}}[k] = \\sum_i \\delta^i[k]P^i\n\\enspace .\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E5.m1\" class=\"ltx_Math\" alttext=\"P_{\\textrm{agg}}[k]=\\sum_{i}\\delta^{i}[k]P^{i}\\@math@espace.\" display=\"block\"><mrow><mrow><mrow><msub><mi>P</mi><mtext>agg</mtext></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow></mrow><mo>=</mo><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mi>i</mi></munder><mrow><msup><mi>\u03b4</mi><mi>i</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><msup><mi>P</mi><mi>i</mi></msup><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\@math@espace</mtext></merror></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07783.tex", "nexttext": "\nIn this study the air-conditioning TCLs are considered. Thus, $\\psi[k]>0$ when the average temperature of the TCL is below the set-point.\nIt indicates the natural phenomenon of temperature decrease when TCL is active.\nIn order to use TCLs as a frequency reserve, the reference power imbalance signal, $r[k]$, must be followed in real-time.\nThis can be achieved by adjusting the number of active TCLs in the aggregation in real-time.\nIf the TCLs are collectively modeled by a battery, then the reference signal can charge or discharge the battery when $r[k] > \\psi[k]$ and $r[t] < \\psi[k]$ respectively.\nThe charging process shall turn On while turning Off TCLs is refered as discharging process.\n\n\n\\subsection{Stochastic Battery Model Parameters} \\label{sec: stochastic battery model}\nThe capacity and maximum charge/discharge rates of a stochastic battery model are given as~\\cite{6832599},\n\n", "itemtype": "equation", "pos": 11252, "prevtext": "\nThe difference between the aggregate and baseline power consumption is given as,\n\n", "index": 11, "text": "\\begin{equation}\n\\psi[k] =  \nP_{\\textrm{agg}}[k] - P_{\\textrm{base}}[k]\n\\enspace .\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E6.m1\" class=\"ltx_Math\" alttext=\"\\psi[k]=P_{\\textrm{agg}}[k]-P_{\\textrm{base}}[k]\\@math@espace.\" display=\"block\"><mrow><mrow><mrow><mi>\u03c8</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow></mrow><mo>=</mo><mrow><mrow><msub><mi>P</mi><mtext>agg</mtext></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow></mrow><mo>-</mo><mrow><msub><mi>P</mi><mtext>base</mtext></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\@math@espace</mtext></merror></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07783.tex", "nexttext": "\nhere,\n$a_i=1/(R_iC_i)$, \n$b_i=\\eta_i/C_i$ and $d = \n1/N\n\\sum_i\n1/(R_iC_i)$.\nThis formulation enables the calculation of the maximum capacity [kWh] available in the system as a stochastic variable. \nHowever, the availability of the TCL is a limiting factor in this regard.\n\nThe consideration of the availability of TCLs results in a dynamic stochastic model of the battery parameters.\nThe are formulated as,\n\n", "itemtype": "equation", "pos": 12242, "prevtext": "\nIn this study the air-conditioning TCLs are considered. Thus, $\\psi[k]>0$ when the average temperature of the TCL is below the set-point.\nIt indicates the natural phenomenon of temperature decrease when TCL is active.\nIn order to use TCLs as a frequency reserve, the reference power imbalance signal, $r[k]$, must be followed in real-time.\nThis can be achieved by adjusting the number of active TCLs in the aggregation in real-time.\nIf the TCLs are collectively modeled by a battery, then the reference signal can charge or discharge the battery when $r[k] > \\psi[k]$ and $r[t] < \\psi[k]$ respectively.\nThe charging process shall turn On while turning Off TCLs is refered as discharging process.\n\n\n\\subsection{Stochastic Battery Model Parameters} \\label{sec: stochastic battery model}\nThe capacity and maximum charge/discharge rates of a stochastic battery model are given as~\\cite{6832599},\n\n", "index": 13, "text": "\\begin{equation}\n\\begin{split}\nC\n&=\n\\sum_i\n\\left(\n1+\n\\left | 1-\\frac{a_i}{\\alpha} \\right |\n\\right)\n\\frac{\\Delta_i}{b_i}\\\\\nR_+\n&=\n\\sum_i \n\\left(\nP_i-P_i^o\n\\right)\\\\\nR_-\n&=\n\\sum_iP_i^o\n\\end{split}\n\\enspace ,\n\\label{eq:deterministic battery model}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E7.m1\" class=\"ltx_Math\" alttext=\"\\begin{split}\\displaystyle C&amp;\\displaystyle=\\sum_{i}\\left(1+\\left|1-\\frac{a_{i}%&#10;}{\\alpha}\\right|\\right)\\frac{\\Delta_{i}}{b_{i}}\\\\&#10;\\displaystyle R_{+}&amp;\\displaystyle=\\sum_{i}\\left(P_{i}-P_{i}^{o}\\right)\\\\&#10;\\displaystyle R_{-}&amp;\\displaystyle=\\sum_{i}P_{i}^{o}\\end{split}\\@math@espace,\" display=\"block\"><mrow><mrow><mtable columnspacing=\"0pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"right\"><mi>C</mi></mtd><mtd columnalign=\"left\"><mrow><mi/><mo>=</mo><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mi>i</mi></munder><mrow><mrow><mo>(</mo><mrow><mn>1</mn><mo>+</mo><mrow><mo>|</mo><mrow><mn>1</mn><mo>-</mo><mfrac><msub><mi>a</mi><mi>i</mi></msub><mi>\u03b1</mi></mfrac></mrow><mo>|</mo></mrow></mrow><mo>)</mo></mrow><mo>\u2062</mo><mfrac><msub><mi mathvariant=\"normal\">\u0394</mi><mi>i</mi></msub><msub><mi>b</mi><mi>i</mi></msub></mfrac></mrow></mrow></mrow></mtd></mtr><mtr><mtd columnalign=\"right\"><msub><mi>R</mi><mo>+</mo></msub></mtd><mtd columnalign=\"left\"><mrow><mi/><mo>=</mo><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mi>i</mi></munder><mrow><mo>(</mo><mrow><msub><mi>P</mi><mi>i</mi></msub><mo>-</mo><msubsup><mi>P</mi><mi>i</mi><mi>o</mi></msubsup></mrow><mo>)</mo></mrow></mrow></mrow></mtd></mtr><mtr><mtd columnalign=\"right\"><msub><mi>R</mi><mo>-</mo></msub></mtd><mtd columnalign=\"left\"><mrow><mi/><mo>=</mo><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mi>i</mi></munder><msubsup><mi>P</mi><mi>i</mi><mi>o</mi></msubsup></mrow></mrow></mtd></mtr></mtable><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\@math@espace</mtext></merror></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.07783.tex", "nexttext": "\nwhere, the $\\lambda^i[k]$ is the availability of $i^{\\textrm{\\textrm{th}}}$ TCL given as,\n\n", "itemtype": "equation", "pos": 12909, "prevtext": "\nhere,\n$a_i=1/(R_iC_i)$, \n$b_i=\\eta_i/C_i$ and $d = \n1/N\n\\sum_i\n1/(R_iC_i)$.\nThis formulation enables the calculation of the maximum capacity [kWh] available in the system as a stochastic variable. \nHowever, the availability of the TCL is a limiting factor in this regard.\n\nThe consideration of the availability of TCLs results in a dynamic stochastic model of the battery parameters.\nThe are formulated as,\n\n", "index": 15, "text": "\\begin{equation}\n\\begin{split}\nC'\n&=\n\\sum_i\n\\lambda^i[k]\n\\left(\n1+\n\\left | 1-\\frac{a_i}{\\alpha} \\right |\n\\right)\n\\frac{\\Delta_i}{b_i}\\\\\nR'_+\n&=\nR_+\n-\n\\sum_i \n(1-\\lambda^i[k])\nP_i\\\\\nR'_-\n&=\nR_-\n+\n\\sum_i \n(1-\\lambda^i[k])\nP_i\n\\end{split}\n\\enspace ,\n\\label{eq:stochastic battery model}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E8.m1\" class=\"ltx_Math\" alttext=\"\\begin{split}\\displaystyle C^{\\prime}&amp;\\displaystyle=\\sum_{i}\\lambda^{i}[k]%&#10;\\left(1+\\left|1-\\frac{a_{i}}{\\alpha}\\right|\\right)\\frac{\\Delta_{i}}{b_{i}}\\\\&#10;\\displaystyle R^{\\prime}_{+}&amp;\\displaystyle=R_{+}-\\sum_{i}(1-\\lambda^{i}[k])P_{%&#10;i}\\\\&#10;\\displaystyle R^{\\prime}_{-}&amp;\\displaystyle=R_{-}+\\sum_{i}(1-\\lambda^{i}[k])P_{%&#10;i}\\end{split}\\@math@espace,\" display=\"block\"><mrow><mrow><mtable columnspacing=\"0pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"right\"><msup><mi>C</mi><mo>\u2032</mo></msup></mtd><mtd columnalign=\"left\"><mrow><mi/><mo>=</mo><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mi>i</mi></munder><mrow><msup><mi>\u03bb</mi><mi>i</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mrow><mo>(</mo><mrow><mn>1</mn><mo>+</mo><mrow><mo>|</mo><mrow><mn>1</mn><mo>-</mo><mfrac><msub><mi>a</mi><mi>i</mi></msub><mi>\u03b1</mi></mfrac></mrow><mo>|</mo></mrow></mrow><mo>)</mo></mrow><mo>\u2062</mo><mfrac><msub><mi mathvariant=\"normal\">\u0394</mi><mi>i</mi></msub><msub><mi>b</mi><mi>i</mi></msub></mfrac></mrow></mrow></mrow></mtd></mtr><mtr><mtd columnalign=\"right\"><msubsup><mi>R</mi><mo>+</mo><mo>\u2032</mo></msubsup></mtd><mtd columnalign=\"left\"><mrow><mi/><mo>=</mo><mrow><msub><mi>R</mi><mo>+</mo></msub><mo>-</mo><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mi>i</mi></munder><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><msup><mi>\u03bb</mi><mi>i</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow></mrow></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><msub><mi>P</mi><mi>i</mi></msub></mrow></mrow></mrow></mrow></mtd></mtr><mtr><mtd columnalign=\"right\"><msubsup><mi>R</mi><mo>-</mo><mo>\u2032</mo></msubsup></mtd><mtd columnalign=\"left\"><mrow><mi/><mo>=</mo><mrow><msub><mi>R</mi><mo>-</mo></msub><mo>+</mo><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mi>i</mi></munder><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><msup><mi>\u03bb</mi><mi>i</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow></mrow></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><msub><mi>P</mi><mi>i</mi></msub></mrow></mrow></mrow></mrow></mtd></mtr></mtable><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\@math@espace</mtext></merror></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.07783.tex", "nexttext": "\nThe stochastic ramp-limit constraint on the reference signal is considered by the following equation,\n\n", "itemtype": "equation", "pos": 13297, "prevtext": "\nwhere, the $\\lambda^i[k]$ is the availability of $i^{\\textrm{\\textrm{th}}}$ TCL given as,\n\n", "index": 17, "text": "\\begin{equation}\n\\lambda^i[k]=\n\\left\\{\\begin{matrix}\n1 & \\rho^i[k]>{\\mkern3mu\\overline{\\mkern-3mu {\\rho^i}\\mkern-3mu}\\mkern3mu} \\;\\&\\; {\\mkern3mu\\underline{\\mkern-3mu {\\theta^i}\\mkern-3mu}\\mkern3mu}\\leq\\theta^i[k]\\leq{\\mkern3mu\\overline{\\mkern-3mu {\\theta^i}\\mkern-3mu}\\mkern3mu}\\\\ \n0 & \\textrm{otherwise}\n\\end{matrix}\\right.\n\\enspace .\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E9.m1\" class=\"ltx_Math\" alttext=\"\\lambda^{i}[k]=\\left\\{\\begin{matrix}1&amp;\\rho^{i}[k]&gt;{\\mkern 3.0mu \\overline{%&#10;\\mkern-3.0mu {\\rho^{i}}\\mkern-3.0mu }\\mkern 3.0mu }\\;\\&amp;\\;{\\mkern 3.0mu %&#10;\\underline{\\mkern-3.0mu {\\theta^{i}}\\mkern-3.0mu }\\mkern 3.0mu }\\leq\\theta^{i}%&#10;[k]\\leq{\\mkern 3.0mu \\overline{\\mkern-3.0mu {\\theta^{i}}\\mkern-3.0mu }\\mkern 3%&#10;.0mu }\\\\&#10;0&amp;\\textrm{otherwise}\\end{matrix}\\right.\\@math@espace.\" display=\"block\"><mrow><msup><mi>\u03bb</mi><mi>i</mi></msup><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow><mo>=</mo><mrow><mo>{</mo><mtable columnspacing=\"5pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mrow><mrow><msup><mi>\u03c1</mi><mi>i</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow></mrow><mo>&gt;</mo><mrow><mpadded width=\"+2.8pt\"><mover accent=\"true\"><msup><mi>\u03c1</mi><mi>i</mi></msup><mo>\u00af</mo></mover></mpadded><mo rspace=\"5.3pt\">&amp;</mo><munder accentunder=\"true\"><msup><mi>\u03b8</mi><mi>i</mi></msup><mo>\u00af</mo></munder></mrow><mo>\u2264</mo><mrow><msup><mi>\u03b8</mi><mi>i</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow></mrow><mo>\u2264</mo><mover accent=\"true\"><msup><mi>\u03b8</mi><mi>i</mi></msup><mo>\u00af</mo></mover></mrow></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mtext>otherwise</mtext></mtd></mtr></mtable><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\@math@espace</mtext></merror><mo>.</mo></mrow></mrow></math>", "type": "latex"}, {"file": "1601.07783.tex", "nexttext": "\nWhile the state of the charge constraint is implemented as,\n\n", "itemtype": "equation", "pos": 13751, "prevtext": "\nThe stochastic ramp-limit constraint on the reference signal is considered by the following equation,\n\n", "index": 19, "text": "\\begin{equation}\nR'_- \\leq r[k] \\leq R'_+\n\\enspace . \n\\label{eq:stochastic limit constraint}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E10.m1\" class=\"ltx_Math\" alttext=\"R^{\\prime}_{-}\\leq r[k]\\leq R^{\\prime}_{+}\\@math@espace.\" display=\"block\"><mrow><mrow><msubsup><mi>R</mi><mo>-</mo><mo>\u2032</mo></msubsup><mo>\u2264</mo><mrow><mi>r</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow></mrow><mo>\u2264</mo><mrow><msubsup><mi>R</mi><mo>+</mo><mo>\u2032</mo></msubsup><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\@math@espace</mtext></merror></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07783.tex", "nexttext": "\n\\textit{Note:} The temperature difference $(\\theta^i_{ref}-\\theta^i[k])$ in Eq.~\\ref{eq:stochastic charging constraint} represents the temperature decrease when the AC is On. Equivalently, it represents the charging of the battery. \nStochastic battery model is shown in Fig.~\\ref{figure:battery model}. The dynamics of the variables are bounded by the stochastic limits and are given as,\n\n", "itemtype": "equation", "pos": 13919, "prevtext": "\nWhile the state of the charge constraint is implemented as,\n\n", "index": 21, "text": "\\begin{equation}\n-C' \\leq \\left( x[k] = \\sum_{i}\\left[ \\frac{\\theta^i_{\\textrm{ref}}-\\theta^i[k]}{b_i}\\right]\\right) \\leq C'\n\\enspace . \n\\label{eq:stochastic charging constraint}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E11.m1\" class=\"ltx_Math\" alttext=\"-C^{\\prime}\\leq\\left(x[k]=\\sum_{i}\\left[\\frac{\\theta^{i}_{\\textrm{ref}}-\\theta%&#10;^{i}[k]}{b_{i}}\\right]\\right)\\leq C^{\\prime}\\@math@espace.\" display=\"block\"><mrow><mo>-</mo><msup><mi>C</mi><mo>\u2032</mo></msup><mo>\u2264</mo><mrow><mo>(</mo><mi>x</mi><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow><mo>=</mo><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mi>i</mi></munder><mrow><mo>[</mo><mfrac><mrow><msubsup><mi>\u03b8</mi><mtext>ref</mtext><mi>i</mi></msubsup><mo>-</mo><mrow><msup><mi>\u03b8</mi><mi>i</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow></mrow></mrow><msub><mi>b</mi><mi>i</mi></msub></mfrac><mo>]</mo></mrow><mo>)</mo></mrow><mo>\u2264</mo><msup><mi>C</mi><mo>\u2032</mo></msup><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\@math@espace</mtext></merror><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07783.tex", "nexttext": "\nwhere, the dissipation rate ($d$) is given as, \n\n", "itemtype": "equation", "pos": 14501, "prevtext": "\n\\textit{Note:} The temperature difference $(\\theta^i_{ref}-\\theta^i[k])$ in Eq.~\\ref{eq:stochastic charging constraint} represents the temperature decrease when the AC is On. Equivalently, it represents the charging of the battery. \nStochastic battery model is shown in Fig.~\\ref{figure:battery model}. The dynamics of the variables are bounded by the stochastic limits and are given as,\n\n", "index": 23, "text": "\\begin{equation} \\label{eq1}\n\\begin{gathered}\n\n\n\n\\dot{x}[k] = -d x[k] - p[k], \\; x(0)=0, \\; \n\\left | x[k] \\right | \\leq C'\n\\quad\n\n\\end{gathered}\n\\enspace ,\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E12.m1\" class=\"ltx_Math\" alttext=\"\\begin{gathered}\\displaystyle\\par&#10;\\par&#10;\\par&#10;\\dot{x}[k]=-dx[k]-p[k],\\;x(0)=0,\\;%&#10;\\left|x[k]\\right|\\leq C^{\\prime}\\par&#10;\\end{gathered}\\@math@espace,\" display=\"block\"><mrow><mrow><mtable displaystyle=\"true\"><mtr><mtd columnalign=\"center\"><mrow><mrow><mrow><mover accent=\"true\"><mi>x</mi><mo>\u02d9</mo></mover><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow></mrow><mo>=</mo><mrow><mrow><mo>-</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>x</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow></mrow></mrow><mo>-</mo><mrow><mi>p</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow></mrow></mrow></mrow><mo rspace=\"5.3pt\">,</mo><mrow><mrow><mrow><mi>x</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mn>0</mn></mrow><mo rspace=\"5.3pt\">,</mo><mrow><mrow><mo>|</mo><mrow><mi>x</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>k</mi><mo stretchy=\"false\">]</mo></mrow></mrow><mo>|</mo></mrow><mo>\u2264</mo><msup><mi>C</mi><mo>\u2032</mo></msup></mrow></mrow></mrow></mtd></mtr></mtable><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\@math@espace</mtext></merror></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.07783.tex", "nexttext": "\n\\begin{figure} [htb]\n\\centering\n\n\\includegraphics[trim=0cm 0.2cm 0cm 0.5cm, width=0.3\\textwidth]{battery_model_new2}\n\\caption{Stochastic Battery Model}\n\\label{figure:battery model}\n\\end{figure}\n\n\\section{Control Scheme}\\label{sec:control scheme}\n\\subsection{Hysteresis Based Control}\nA hysteresis based control approach is used in this work. \nIn this approach, each TCL communicates its operational status, availability and temperature distance information to the central control.\nThe relative temperature distance $\\pi^i[k]$ of a TCL from its switching boundary is used as a priority variable. \nThe central control formulate the merit order to turn On/Off the units based on the least distance to the switching boundary.\nThis approach decreases the cycling of TCL units.\nThe frequency regulation signal from an energy market is considered as a reference input. \nThis real time signal is used to change the state of $i^{\\textrm{th}}$ TCL corresponding to the regulation requirements.\nThe condition when $\\psi[k]$ is equal to $r[k]$ indicates the successful tracking.\nWhen $r[k]>\\psi[k]$, \nthe algorithm at central control turns sufficient number of available units ON.\nThis step is termed as charging of the battery.\nIn case of AC loads the impact will be decrease in the average TCL temperature from the set-point value.\nSimilarly, in converse case sufficient number of On units are turned Off to follow the regulation signal.\nThe operational mechanism at the central control is shown in Alg.~\\ref{algo: central control}.\n\n\n\n\n\nThe algorithm facilitates the addition/removal of the TCLs in the network dynamically.\nThis can be easily captured during the update of the stochastic battery limits in Eq.~\\ref{eq:stochastic battery model}.\nThe state transitions $\\delta^i_*[k]$ triggered by the central control are communicated to the TCLs using the communication network.\nAt individual TCL level, a local control strategy is applied to respond to this input.\nThe control algorithm at the TCL is outlined in Alg.~\\ref{algo: TCL control}.\nThe evolution of the TCL internal temperature is modeled by Eq.~\\ref{eq:TCL model}.\nThe TCL is available if the temperature lies in the dead-band region and the short cycling constraint is fulfilled.\nThe short cycling constraint implies the minimum duration of time that a TCL must remain in a state after a state transition.\nThe cycling is represented by $\\rho^i[k]$.\nThe violation of this constraint or the operation of the TCL outside the dead-band implies the non-availability.\nThe temperature distance of the TCL from the switching boundary is normalized with respect to the dead-band width before transmitted to the central control. \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\begin{figure}\n\n\\removelatexerror\n\\begin{algorithm}[H]\n\\label{algo: central control}\n\\caption{Algorithm at Main Control}\n\\SetKwInOut{Input}{Input}\\SetKwInOut{Output}{Output}\n\\Input{TCL $i$ data $(u_i(t),\\;\\lambda^i(t),\\;\\pi^i(t))$}\n\\Output{Forced state of the TCL $\\delta^i_\\ast$}\n\\BlankLine\n\\emph{Calculate battery parameters $(C,\\;n_+,\\;n_-)$}\\; \n\\For( \\emph{(Time iteration loop)}){$t := 1 \\cdots T$}\n   {\n      Sample input frequency regulation signal $r(t)$\\;\n      \\For( \\emph{(TCL iteration loop)}){$i := 1 \\cdots N$}\n   {\n      Sort priority list of available On/Off TCLs\\;\n   }\n   }\n\\emph{Update stochastic battery limits $(C',\\;n'_+,\\;n'_-)$}\\;\n     \\If{$(R'_+ \\leq r(t) \\leq R'_- )$}\n     \t{\n     \t$\\xi = r(t)-\\psi(t)$ \\;\n     \t\\If(\\emph{(Priority list based control)}){$r(t) < \\psi(t)$}\n     \t\t{Turn Off available TCLs till $\\delta P < \\xi$\\;}\n     \t\\Else\n     \t\t{Turn On available TCLs till $\\delta P < -\\xi$\\;}\n     \t}\n     \\Else\n     \t{\\emph{Regulation not possible}\\;}\n\\end{algorithm}\n\\vspace{-10pt}\n\\end{figure}\n\\begin{figure}\n\\removelatexerror\n\\begin{algorithm}[H]\n\\label{algo: TCL control}\n\\caption{Algorithm at TCL}\n\\KwIn{Control signal $\\delta^i_*(t)$}\n\\KwOut{$(u_i(t+1),\\;\\lambda^i(t+1),\\;\\pi^i(t+1))$ }\n$(\\theta^i(t+1), \\delta^i(t+1), \\lambda^i(t+1))= 0$\\;\n\\If {$\\rho^i(t)>{\\mkern3mu\\overline{\\mkern-3mu {\\rho^i}\\mkern-3mu}\\mkern3mu}$}\n\t{$\\lambda^i(t+1)\\;=\\;1$\\;\n\t\\If {$\\delta^i_*(t)$ is received}\n\t{$\\delta^i(t) = \\delta^i_*(t)$\\;\n\t $\\rho^i(t)=0$\\;}\n\t }\n$\\rho^i(t+1)=\\rho^i(t)+1$\\;\n\n\n$\\theta^i(t+1)=g^i\\theta^i(t)+(1-g^i)(\\theta^i_a(t)-\n\\delta^i(t)\\theta^i_g)+\\epsilon^i(t)$\\;\n\\If {\n${\\mkern3mu\\underline{\\mkern-3mu {\\theta^i}\\mkern-3mu}\\mkern3mu} \\leq \\theta^i(t+1) \\leq {\\mkern3mu\\overline{\\mkern-3mu {\\theta^i}\\mkern-3mu}\\mkern3mu}$}\n{$\\delta^i(t+1)=\\delta^i(t)$\\; \n}\n\\Else\n{\n$\\lambda^i(t+1)=0$\\;\n\\If {$\\theta^i(t+1)<{\\mkern3mu\\underline{\\mkern-3mu {\\theta^i}\\mkern-3mu}\\mkern3mu}$}\n{\n$\\delta^i(t+1)=0$\\; \n\\If {$\\delta^i(t)=1$}\n{\n$\\rho^i(t+1)=0$\n}\n}\n\\If {$\\theta^i(t+1)>{\\mkern3mu\\underline{\\mkern-3mu {\\theta^i}\\mkern-3mu}\\mkern3mu}$}\n{\n$\\delta^i(t+1)=1$\\; \n\\If {$\\delta^i(t)=0$}\n{\n$\\rho^i(t+1)=0$\n}\n}\n}\n\\lIf{$\\delta^i(t+1)=1$} \n{$\\pi^i(t)\\; = \\; \\left(\\theta^i(t+1)-{\\mkern3mu\\underline{\\mkern-3mu {\\theta^i}\\mkern-3mu}\\mkern3mu}\\right)/\\Delta^i$}\n\\lIf{$\\delta^i(t+1)=0$} \n{$\\pi^i(t)\\; = \\; \\left({\\mkern3mu\\underline{\\mkern-3mu {\\theta^i}\\mkern-3mu}\\mkern3mu}-\\theta^i(t+1)\\right)/\\Delta^i$}\n\\end{algorithm}\n\\vspace{-10pt}\n\\end{figure}\n\n\n\nThe real time reference signal is compared to the stochastic limits from Eq.~\\ref{eq:stochastic limit constraint}.\nThese limits can be used as a filter to guarantee the tracking of the reference signal.\nIf violated, the residual can be allocated to the other resources in the network like spinning reserves and storage.\nFurthermore, the methodology provides a stochastic energy state estimation of the TCLs aggregation.\n\n\\subsection{Regulatory requirements}\nEach system operator has specific regulatory requirements for enable the participation of demand side in the frequency regulation process.\nFor example, CAISO has defined the non-generator resources to provide power bid on the basis of their 15-minute energy capacity~\\cite{6858734}. \nThere are strict requirements on the telemetry of the TCL data.\nIn this case, TCLs are required to update their state of charge and instantaneous power status every 4 seconds.\nThe minimum resource size restriction also limits the potential of this resource. \nCAISO defines minimum resource size of 0.5 MW for a TCL.\nThis paper target small scale TCLs and the regulatory requirements are considered during the control design.\nIt compliments the findings proposed in~\\cite{7345604} that the control of large number of residential TCLs can provide a reliable regulation service if the uncertainty in the availability are inherently taken into account during the operation.\n\n\n\n\\section{Results}\\label{sec:results}\n\\subsection{Experimental setup}\nThe aggregation is composed of $1000$ TCLs.\nThe specifications are obtained using the table~\\ref{table:PV data}.\nThe parameters of each TCL are obtained by sampling the normal distribution around the values. \nHere, the limits are taken as the percentage deviation from the mentioned quantity.\nThese limits can be controlled to alter the heterogeneity in the aggregation. \nThe heterogeneity of $30 \\%$ is considered.\nThe TCL model time step is $10.02\\;sec$.\n\\begin{table}[htp]\n\\begin{center}\n\\caption{Parameters of a typical residential AC TCL \\cite{6832599}}\n\\label{table:PV data}\n    \\begin{tabular}{ | p{1.3cm} | p{3.8cm}| p{0.9cm} | p{1.1cm}| } \n    \\hline\n    Parameter & Description  & Value & Unit  \\\\ \\hline\n    \\hline\n\t$C^i$ & Thermal capacitance & 2 & kWh/$^{\\circ}$C\t\t\\\\ \n\t\n\t$R^i$ & Thermal resistance & 2 & $^{\\circ}$C/kW\\\\ \t\t\n\t$\\theta^i_{ref}$ & Temperature & 22.5 & $^{\\circ}$C\t\t\\\\ \n\t\n\t$\\Delta$ & dead-band length & 2.5 & $^{\\circ}$C\t\t\t\\\\ \n\t\n\t$P^i$ & Nominal power & 5.6 & kW\\\\ \n\t\n\t$\\eta$ & Coefficient of performance  & 0.3 & \\\\ \\hline\n\t\\end{tabular}\n\\end{center}\n\\end{table}\nThe TCLs are initialized at the steady state temperature condition $\\theta^i[k]=\\theta^i_{ref}$.\nThe reference signal is a normalized scaled down version of the frequency regulation signal from the PJM market~\\cite{pjm_regulation_data} and is used to test the tracking performance of the stochastic battery model.\n\\subsection{Simulation Results}\nFig.~\\ref{figure:state transition of a tcl 2 sec} provides as insight into the temperature dynamics of the TCL when actively controlled externally.\nIt can be observed that the temperature evolves in dead-band and the state transition occurs at the boundaries.\nWhile in between the temperature limits, the external signal can change the operational state provided the short cycling constraint is fulfilled.\nFig.~\\ref{figure:state transition of a tcl 6 sec} shows the impact of the short cycling duration when increased from $2 sec.$ to $6 sec$. \nThe short cycling duration values are selected for the proof of concept and can be conveniently changed to represent the actual requirements.\nIt is observed that when time is between $780$ to $950$ the TCL experiences repeated activation. \nThis phenomenon is explained later on when the tracking of regulation signal is discussed.\n\\begin{figure} [htb]\n\\centering\n\n\\begin{overpic}[trim=0.2cm 0.5cm 0.4cm 0.5cm, width=0.48\\textwidth]{tcl_state_transitions_2_sec}\n\\linethickness{1pt}\n\\put(76,48){\\color{black}\\line(1,0){12}}\n\\put (16,48)  {${\\mkern3mu\\overline{\\mkern-3mu {\\theta^i}\\mkern-3mu}\\mkern3mu}$}\n\\put (16,6) {${\\mkern3mu\\underline{\\mkern-3mu {\\theta^i}\\mkern-3mu}\\mkern3mu}$}\n\\end{overpic}\n\\caption{TCL state transition dynamics (short-cycle duration: 2 sec)}\n\\label{figure:state transition of a tcl 2 sec}\n\\end{figure} \n\\begin{figure} [htb]\n\\centering\n\n\\begin{overpic}[trim=0.2cm 0.5cm 0.4cm 1cm, width=0.48\\textwidth]{tcl_state_transitions_6_sec}\n\\linethickness{1pt}\n\\put(74,53){\\color{black}\\line(1,0){13}}\n\\put (16,53)  {${\\mkern3mu\\overline{\\mkern-3mu {\\theta^i}\\mkern-3mu}\\mkern3mu}$}\n\\put (16,7) {${\\mkern3mu\\underline{\\mkern-3mu {\\theta^i}\\mkern-3mu}\\mkern3mu}$}\n\\end{overpic}\n\\caption{TCL state transition dynamics (short-cycle duration: 6 sec)}\n\\label{figure:state transition of a tcl 6 sec}\n\\end{figure} \n\n\nThe repeated activation phenomenon can be observed by analysis of the regulation signal dynamics.\nThe tracking performance for the test case is shown in Fig.~\\ref{figure:tracking of regulation signal}.\nThe TCLs aggregation tracks the regulation signal till $k=780\\;\\textrm{sec}$.\nThe tracking is lost onward despite the reference signal occurring within the regulation bounds.\nThe reason behind is that the reference signal violates the stochastic limit constraints.\nThis aspect is captured by dynamic limits in Eq.~\\ref{eq:stochastic battery model}.\nThe tracking error as the result of violation of this constraint can be seen in {Fig.\\xspace}~\\ref{figure:tracking error}.\nThe stochastic regulation limits for this case are shown in Fig.\\ref{figure:stochastic regulation limits}.\nIt can be observed that the reference signal violates the stochastic ramp-rate limits.\nThe reasons behind the decrease in the permissible ramp-rate limits is the the unavailability of the TCLs shown in Fig.~\\ref{figure:tcl availability}.\nFurthermore, the stochastic capacity limit of the battery given as $C'$ also changes with time. The dynamics are shown in Fig.~\\ref{figure:state of charge dynamics}. \nThe formulation provides dynamic bounds on these variables.\nThe tracking of the regulation signal is ensured if the stochastic SoC and ramp-rate limits are fulfilled.\n\\begin{figure} [htb]\n\\centering\n\n\\begin{overpic}[trim=0cm 0cm 0cm 1cm, width=0.48\\textwidth]{tracking_error}\n\\put (45,-3)  {\\footnotesize$\\textrm{Time [sec]}$}\n\\end{overpic}\n\\caption{Tracking error}\n\\label{figure:tracking error}\n\\end{figure} \n\\begin{figure} [htb]\n\\centering\n\n\\begin{overpic}[trim=0cm 0.5cm 0cm 0.5cm, width=0.5\\textwidth]{tracking_regulation_signal}\n\\put (18,52)  {\\footnotesize$R_+$}\n\\put (18,09) {\\footnotesize$R_-$}\n\\end{overpic}\n\\caption{Tracking performance of the regulation signal}\n\\label{figure:tracking of regulation signal}\n\\end{figure} \n\\begin{figure} [htb]\n\\centering\n\n\\begin{overpic}[trim=0cm 0.5cm 0cm 0.5cm, width=0.5\\textwidth]{stochastic_regulation_limits}\n\\linethickness{1pt}\n\\put(17.1,42.1){\\color{red}\\line(1,0){2.5}}\n\\put(17.1,37.6){\\color{blue}\\line(1,0){2.5}}\n\n\n\n\n\\end{overpic}\n\\caption{Tracking performance comparison with stochastic regulation limits}\n\\label{figure:stochastic regulation limits}\n\\end{figure} \n\\begin{figure} [htb]\n\\centering\n\n\\begin{overpic}[trim=0cm 0.5cm 0cm 0.5cm, width=0.5\\textwidth]{state_of_charge_dynamics}\n\\linethickness{1pt}\n\\put(17.1,47.7){\\color{red}\\line(1,0){2.5}}\n\\put(17.1,43.5){\\color{blue}\\line(1,0){2.5}}\n\n\n\n\n\\end{overpic}\n\\caption{State of charge dynamics of the stochastic battery model}\n\\label{figure:state of charge dynamics}\n\\end{figure} \n\\begin{figure} [htb]\n\\centering\n\n\\begin{overpic}[trim=0cm -0.2cm 0cm 0.5cm, width=0.5\\textwidth]{number_of_available_tcls}\n\\put (45,-2)  {\\footnotesize$\\textrm{Time [sec]}$}\n\n\n\n\n\n\n\n\n\n\\end{overpic}\n\\caption{TCL availability dynamics}\n\\label{figure:tcl availability}\n\\end{figure} \n\n\n\\subsection{Outlook}\nThe results shows that stochastic modeling of resources during operation shall be an important aspect of demand side management.\nIn order to ensure the regulatory requirements, the need to actively control the resources is inevitable~\\cite{6832599}.\nThe proposed formulation can be used to actively plan alternate resources based on the state of the stochastic battery model.\nThe dynamics of the regulation signal can be filtered based on the proposed battery model and the required flexibility can be allocated to other resources. \nA mechanism proposed in~\\cite{7346488} can be used for this purpose.\nApart from the direct control of the loads, the price based and incentive based approach can be integrated in this framework as well.\nIn this case the price or incentives can alter the behavior of the TCL loads.\nThe information about the stochastic battery model parameters thus provide a reference to facilitate operation under uncertainty.\nIn case of the uncertain short cycling duration and communication delay, a joint probability distribution can be used to predict the tracking accuracy while using this model.\n\n\n\n\\section{Conclusion}\\label{sec:conclusion} \nThis paper presents an novel approach that builds upon the existing literature for calculating the stochastic parameters of battery representing the TCL aggregation.\nThe parameters of stochastic state of charge and capacity limits are computed while considering resources availability directly.\nThe result are the probabilistic bounds on the regulation signal dynamics that if observed guarantee the tracking.\nThe presented approach prevents the calculation of the power at each TCL thus decreasing the operational cost. \nAlternatively, it is proposed here that the TCL ratings is provided in form of the contract with the central control. \nThe availability signal is communicated by the TCL to represent its current state.\nA TCL is required to communicate the availability, status and relative temperature distance to switching boundary which can be achieved with a nominal bandwidth.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\begin{thebibliography}{1}\n\n\\bibitem{4808228}\nY.~Makarov, C.~Loutan, J.~Ma, and P.~de~Mello, ``Operational impacts of wind\n  generation on california power systems,'' \\emph{Power Systems, IEEE\n  Transactions on}, vol.~24, no.~2, pp. 1039--1050, May 2009.\n\n\\bibitem{1318707}\nN.~Lu and D.~Chassin, ``A state-queueing model of thermostatically controlled\n  appliances,'' \\emph{Power Systems, IEEE Transactions on}, vol.~19, no.~3, pp.\n  1666--1673, Aug 2004.\n\n\\bibitem{6669582}\nJ.~Mathieu, M.~Kamgarpour, J.~Lygeros, and D.~Callaway, ``Energy arbitrage with\n  thermostatically controlled loads,'' in \\emph{Control Conference (ECC), 2013\n  European}, July 2013, pp. 2519--2526.\n\n\\bibitem{6832599}\nH.~Hao, B.~Sanandaji, K.~Poolla, and T.~Vincent, ``Aggregate flexibility of\n  thermostatically controlled loads,'' \\emph{Power Systems, IEEE Transactions\n  on}, vol.~30, no.~1, pp. 189--198, Jan 2015.\n\n\\bibitem{koch2011modeling}\nS.~Koch, J.~L. Mathieu, and D.~S. Callaway, ``Modeling and control of\n  aggregated heterogeneous thermostatically controlled loads for ancillary\n  services,'' in \\emph{Proc. PSCC}, 2011, pp. 1--7.\n\n\\bibitem{6858734}\nH.~Hao, B.~Sanandaji, K.~Poolla, and T.~Vincent, ``Frequency regulation from\n  flexible loads: Potential, economics, and implementation,'' in \\emph{American\n  Control Conference (ACC), 2014}, June 2014, pp. 65--72.\n\n\\bibitem{7302276}\nG.~Maitre, G.~Basso, C.~Steiner, D.~Gabioud, and P.~Roduit, ``Distributed grid\n  storage by ordinary house heating variations: A swiss case study,'' in\n  \\emph{Digital System Design (DSD), 2015 Euromicro Conference on}, Aug 2015,\n  pp. 241--249.\n\n\\bibitem{4111111}\nS.~Ihara and F.~Schweppe, ``Physically based modeling of cold load pickup,''\n  \\emph{Power Apparatus and Systems, IEEE Transactions on}, vol. PAS-100,\n  no.~9, pp. 4142--4150, Sept 1981.\n\n\\bibitem{molina2003implementation}\nG.~A.~F. Molina, A. and l.~J.A., {Implementation\n  and assessment of physically based electrical load models: application to\n  direct load control residential programmes},''\n  {IEE Proceedings - Generation, Transmission\n  and Distribution}, vol. 150, pp. 61--66(5), January 2003.\n\n\\bibitem{6545388}\nW.~Zhang, J.~Lian, C.-Y. Chang, and K.~Kalsi, ``Aggregated modeling and control\n  of air conditioning loads for demand response,'' \\emph{Power Systems, IEEE\n  Transactions on}, vol.~28, no.~4, pp. 4655--4664, Nov 2013.\n\n\\bibitem{5762648}\nK.~Schneider, J.~Fuller, and D.~Chassin, ``Multi-state load models for\n  distribution system analysis,'' \\emph{Power Systems, IEEE Transactions on},\n  vol.~26, no.~4, pp. 2425--2433, Nov 2011.\n\n\\bibitem{koch2009active}\nS.~Koch, M.~Zima, and G.~Andersson, ``Active coordination of thermal household\n  appliances for load management purposes,'' in \\emph{IFAC Symposium on Power\n  Plants and Power Systems Control}.\\hskip 1em plus 0.5em minus 0.4em\\relax\n  Citeseer, 2009.\n\n\\bibitem{6239581}\nS.~Bashash and H.~Fathy, ``Modeling and control of aggregate air conditioning\n  loads for robust renewable power management,'' \\emph{Control Systems\n  Technology, IEEE Transactions on}, vol.~21, no.~4, pp. 1318--1327, July 2013.\n\n\\bibitem{6736573}\nH.~Hao, B.~Sanandaji, K.~Poolla, and T.~Vincent, ``A generalized battery model\n  of a collection of thermostatically controlled loads for providing ancillary\n  service,'' in \\emph{Communication, Control, and Computing (Allerton), 2013\n  51st Annual Allerton Conference on}, Oct 2013, pp. 551--558.\n\n\\bibitem{7345604}\nB.~Sanandaji, T.~Vincent, and K.~Poolla, ``Ramping rate flexibility of\n  residential hvac loads,'' \\emph{Sustainable Energy, IEEE Transactions on},\n  vol.~PP, no.~99, pp. 1--10, 2015.\n\n\\bibitem{49112}\nR.~Mortensen and K.~Haggerty, ``Dynamics of heating and cooling loads: models,\n  simulation, and actual utility data,'' \\emph{Power Systems, IEEE Transactions\n  on}, vol.~5, no.~1, pp. 243--249, Feb 1990.\n\n\\bibitem{pjm_regulation_data}\nPJM, ``{RTO Regulation Signal Data}.'' [Online]. Available:\n  {http://www.pjm.com/markets-and-operations/ancillary-services.aspx}\n\n\\bibitem{7346488}\nS.~Khan, W.~Gawlik, and P.~Palensky, ``Reserve capability assessment\n  considering correlated uncertainty in microgrid,'' \\emph{Sustainable Energy,\n  IEEE Transactions on}, vol.~PP, no.~99, pp. 1--10, 2015.\n\n\\end{thebibliography}\n\n\n\n\n", "itemtype": "equation", "pos": 14720, "prevtext": "\nwhere, the dissipation rate ($d$) is given as, \n\n", "index": 25, "text": "\\begin{equation}\nd = \n\\frac{1}{N}\n\\sum_{k=1}^N\n\\frac{1}{R_iC_i}\n\\enspace .\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E13.m1\" class=\"ltx_Math\" alttext=\"d=\\frac{1}{N}\\sum_{k=1}^{N}\\frac{1}{R_{i}C_{i}}\\@math@espace.\" display=\"block\"><mrow><mrow><mi>d</mi><mo>=</mo><mrow><mfrac><mn>1</mn><mi>N</mi></mfrac><mo>\u2062</mo><mrow><munderover><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mrow><mfrac><mn>1</mn><mrow><msub><mi>R</mi><mi>i</mi></msub><mo>\u2062</mo><msub><mi>C</mi><mi>i</mi></msub></mrow></mfrac><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\@math@espace</mtext></merror></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}]