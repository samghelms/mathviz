[{"file": "1601.08017.tex", "nexttext": "\nwhere $u_i$ is the control signal. The droop controller balances the active power demand through simple proportional control\n\n", "itemtype": "equation", "pos": 8949, "prevtext": "\n\\maketitle\n\\thispagestyle{empty}\n\\pagestyle{empty}\n\n\\begin{abstract}\nThis paper investigates transient performance of inverter-based microgrids in terms of the resistive power losses incurred in regulating frequency under persistent stochastic disturbances. We model the inverters as second-order oscillators and compare two algorithms for frequency regulation: the standard frequency droop controller and a distributed proportional-integral (PI) controller. The transient power losses can then be quantified using an input-output {$\\mathcal{H}_2$ } norm. We show that the distributed PI-controller, which has previously been proposed for secondary frequency control (the elimination of static errors), also has the potential to significantly improve performance by reducing transient power losses. This loss reduction is shown to be larger in a loosely interconnected network than in a highly interconnected one, whereas losses do not depend on connectivity if standard droop control is employed. \n\n\n\nMoreover, our results indicate that there is an optimal tuning of the distributed PI-controller for loss reduction.\n\nOverall, our results provide an additional argument in favor of  distributed algorithms for secondary frequency control in microgrids. \n\\end{abstract}\n\n\n\\section{Introduction}\n\\label{sec:intro}\nDriven by environmental concerns and several economic factors, the electric power system is moving from a centralized generation paradigm towards a more distributed one. Local, small-scale  generation resources are expected to become prevalent in future power networks, as the penetration of renewable energy sources increases \\cite{smart_report2012, Farhangi2010}. The \\emph{microgrid} concept has gained popularity as a key strategy to facilitate this transition \\cite{Markvart2006, Lasseter2002}. Microgrids are networks composed of distributed generation (DG) units, loads and energy storage elements which can either connect to a larger power grid, or operate independently from it, in ``islanded'' mode. \n\nThe DG units within the microgrid are typically interfaced with the AC network via DC/AC or AC/AC power converters, or \\emph{inverters}. The network's stability, synchronization and power balance depend on control actions taken in these inverters \\cite{Lopes2006, ZhongHornik}. The standard control scheme employed to stabilize the system and achieve active power sharing, i.e., a desired steady-state distribution of power injections of inverter units, is \\emph{droop control}, effectively a decentralized proportional controller. While droop control, under reasonable conditions (see e.g. \\cite{SimpsonPorco2013}), is successful at stabilizing the network, it typically causes the steady-state network frequency to deviate from its nominal value \\cite{Lopes2006}.\n\nThis deficiency motivates so-called secondary control, the goal of which is to eliminate the static error. In order to achieve this goal, control architectures with various degrees of centralization have been proposed. Unless carefully tuned, decentralized secondary controllers destroy the power sharing properties established by the droop controller, and may lead to a violation of generation constraints \\cite{Andreasson2014ACC,Dorfler2014}. Conversely, centralized control requires a dense communication architecture and conflicts with the microgrid paradigm of autonomous management and scalability. This has motivated the development of distributed control algorithms which simultaneously eliminate frequency errors and maintain the optimality properties of droop control \\cite{SimpsonPorco2013, SimpsonPorco2015,Andreasson2014ACC, ZhaoMallada2015}.\n\nIn this paper, we study one such control algorithm, which builds on the standard droop control and combines it with integral control and distributed averaging algorithms. Stability and power sharing properties of such distributed PI-controllers have been studied in \\cite{SimpsonPorco2013, SimpsonPorco2015} for first-order inverter models, and in \\cite{Andreasson2014ACC,Andreasson2014TAC} for synchronous generator networks represented by second-order oscillators. Here, we model an inverter-based network with second-order dynamics and similar control laws. However, the most novel aspect of our paper lies in the analysis of transient performance, not in the stability analysis.\n\nWe consider performance in terms of the resistive power losses incurred in regulating frequency under persistent small disturbances. These losses are associated with power flows that arise from fluctuating phase angle differences, and can be regarded as a measure of control effort. The total transient power losses can be quantified through the {$\\mathcal{H}_2$ } norm of an input-output system describing the coupled inverter dynamics, with an appropriately defined output. \n\n$\\mathcal{H}_2-$based performance bounds have previously been used in \\cite{Bamieh2012} to derive fundamental performance limits for large-scale vehicular platoons and consensus networks with spatial invariance. By exploiting spatial invariance properties, similar bounds for voltage regulation in DC power networks were derived in \\cite{Rinehart2011}. For general coupled oscillator networks, robustness with respect to disturbances was studied in \\cite{SiamiMotee2013} and methods to reduce inter-nodal interactions due to disturbances were proposed by \\cite{Grunberg2014}. \n\nThe present work adheres to \\cite{BamiehGayme2013, Tegling2014}, where performance in terms of power losses was evaluated for synchronous generator networks, and to \\cite{Tegling2015}, where droop-controlled microgrids with variable voltage dynamics were studied. These works showed that under the assumption of uniform generator parameters, the losses associated with frequency synchronization will scale unboundedly with the network size, but not depend on the network's connectivity. While the losses' scaling with network size seems to be a fundamental performance limit (c.f. \\cite{Bamieh2012}), the main result of the present work shows that their absolute magnitudes can be decreased significantly through distributed PI-control. Moreover, the relative performance improvement over droop control is larger for a sparsely interconnected network than for a highly interconnected one. \n\nThe fact that performance of frequency regulation, in terms of power losses, improves with decreasing network connectivity  stands in sharp contrast to typical power system stability and performance results, which predict highly interconnected networks to be easier to synchronize \\cite{Pecora1998, Schiffer2014}, be more coherent \\cite{Bamieh2012} and have higher rates of convergence \\cite{Tang2011}. Our results indicate that there is a trade-off between different performance objectives and that additional power lines incur costs in terms of losses. \n\n\nMoreover, our results show that there is an optimal tuning of the distributed PI-controller. Too high or low controller gains will unnecessarily increase the power losses. In particular, while the controller requires distributed averaging over a communication layer in order to achieve consensus over the convergence point, the communication gains should be kept small to optimize performance. \n\nThe remainder of this paper is organized as follows. We introduce the models for the inverters and the control strategies in Section~\\ref{sec:setup}. In Section~\\ref{sec:eval}, we evaluate performance and discuss network topology dependencies. In Section~\\ref{sec:analysis}, optimal tuning of the distributed PI-controller is discussed, before we conclude in Section~\\ref{sec:discussion}.  \n\n\\section{Problem setup}\n\\label{sec:setup}\nConsider a network $\\mathcal{G} = \\{\\mathcal{V}, \\mathcal{E}\\}$, where $\\mathcal{V} = \\{1, \\ldots, N\\}$ is the set of nodes and $\\mathcal{E} = \\{e_{ij}\\}$ represents the set of edges, or network lines. Each network line is represented by a constant (complex) admittance $y_{ij} = g_{ij} - \\mathbf{j}b_{ij}$, {where $g_{ij}, b_{ij} > 0$}. Throughout this paper, we will assume a Kron-reduced network model (see e.g. \\cite{Varaiya1985, Nishikawa2015}), {where the reduction procedure eliminates the constant-impedance loads and absorbs their effects into} the network lines $\\mathcal{E}$, along with any phase-shifting transformers. Consequently, every node $i \\in \\mathcal{V}$ represents a generation unit with a power inverter as its grid interface. Each node has an associated phase angle $\\theta_i$ and voltage magnitude $|V_i|$. \n\nIn this paper, we will focus on how frequency control impacts the performance in terms of resistive losses; see \\cite{Tegling2015} for the impact of voltage droop control. \n\n\n\n\n\n\n\\subsection{Inverter and droop control model}\n\\label{sec:model}\nWe first introduce the model for standard frequency droop controller. We assume the inverters at nodes $i \\in \\mathcal{V}$ to be AC voltage sources, whose frequency output can be regulated according to:\n\n", "index": 1, "text": "\\begin{equation}\n\\label{eq:control}\n\\dot{\\theta}_i = u_i,\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E1.m1\" class=\"ltx_Math\" alttext=\"\\dot{\\theta}_{i}=u_{i},\" display=\"block\"><mrow><mrow><msub><mover accent=\"true\"><mi>\u03b8</mi><mo>\u02d9</mo></mover><mi>i</mi></msub><mo>=</mo><msub><mi>u</mi><mi>i</mi></msub></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\nwhere the controller gain $m_i>0$ is called the \\emph{droop coefficient}, $\\omega^*$ and $P^*_i$ are the frequency and active power setpoints, and $\\hat{P}_i$ is the measured active power. Following \\cite{Schiffer2014}, we assume measurement delay dynamics where $\\hat{P}_i$ is measured and processed through a low-pass filter as\n\n", "itemtype": "equation", "pos": 9147, "prevtext": "\nwhere $u_i$ is the control signal. The droop controller balances the active power demand through simple proportional control\n\n", "index": 3, "text": "\\begin{equation}\n\\label{eq:droop}\nu_i = \\omega^* - m_i (\\hat{P}_i - P_i^*), \n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E2.m1\" class=\"ltx_Math\" alttext=\"u_{i}=\\omega^{*}-m_{i}(\\hat{P}_{i}-P_{i}^{*}),\" display=\"block\"><mrow><mrow><msub><mi>u</mi><mi>i</mi></msub><mo>=</mo><mrow><msup><mi>\u03c9</mi><mo>*</mo></msup><mo>-</mo><mrow><msub><mi>m</mi><mi>i</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msub><mover accent=\"true\"><mi>P</mi><mo stretchy=\"false\">^</mo></mover><mi>i</mi></msub><mo>-</mo><msubsup><mi>P</mi><mi>i</mi><mo>*</mo></msubsup></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\nwhere $\\tau_i>0$ is the time constant of the filter and $P_i$ is the actual power injection to the network at node $i$.\n\nNow, we substitute \\eqref{eq:droop} into \\eqref{eq:control} and introduce the inverter frequency $\\omega_i = \\dot{\\theta}_i$ to obtain\n\n", "itemtype": "equation", "pos": 9569, "prevtext": "\nwhere the controller gain $m_i>0$ is called the \\emph{droop coefficient}, $\\omega^*$ and $P^*_i$ are the frequency and active power setpoints, and $\\hat{P}_i$ is the measured active power. Following \\cite{Schiffer2014}, we assume measurement delay dynamics where $\\hat{P}_i$ is measured and processed through a low-pass filter as\n\n", "index": 5, "text": "\\begin{equation}\n\\label{eq:filter}\n\\tau_i \\dot{\\hat{P}}_i  = -\\hat{P}_i +P_i\\,,\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E3.m1\" class=\"ltx_Math\" alttext=\"\\tau_{i}\\dot{\\hat{P}}_{i}=-\\hat{P}_{i}+P_{i}\\,,\" display=\"block\"><mrow><mrow><mrow><msub><mi>\u03c4</mi><mi>i</mi></msub><mo>\u2062</mo><msub><mover accent=\"true\"><mover accent=\"true\"><mi>P</mi><mo stretchy=\"false\">^</mo></mover><mo>\u02d9</mo></mover><mi>i</mi></msub></mrow><mo>=</mo><mrow><mrow><mo>-</mo><msub><mover accent=\"true\"><mi>P</mi><mo stretchy=\"false\">^</mo></mover><mi>i</mi></msub></mrow><mo>+</mo><mpadded width=\"+1.7pt\"><msub><mi>P</mi><mi>i</mi></msub></mpadded></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\nTaking the derivative of \\eqref{eq:freq} with respect to time gives $\\dot{\\omega}_i = -m_i \\dot{\\hat{P}}_i$ and by \\eqref{eq:filter} we have that $\\dot{\\omega}_i = \\frac{m_i}{\\tau_i} (\\hat{P}_i -P_i)$. Now, we can substitute $\\hat{P}_i$ using \\eqref{eq:freq} and obtain the frequency control dynamics as\n\n", "itemtype": "equation", "pos": 9920, "prevtext": "\nwhere $\\tau_i>0$ is the time constant of the filter and $P_i$ is the actual power injection to the network at node $i$.\n\nNow, we substitute \\eqref{eq:droop} into \\eqref{eq:control} and introduce the inverter frequency $\\omega_i = \\dot{\\theta}_i$ to obtain\n\n", "index": 7, "text": "\\begin{equation}\n\\label{eq:freq}\n\\omega_i = \\omega^*- m_i(\\hat{P}_i - P_i^*).\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E4.m1\" class=\"ltx_Math\" alttext=\"\\omega_{i}=\\omega^{*}-m_{i}(\\hat{P}_{i}-P_{i}^{*}).\" display=\"block\"><mrow><mrow><msub><mi>\u03c9</mi><mi>i</mi></msub><mo>=</mo><mrow><msup><mi>\u03c9</mi><mo>*</mo></msup><mo>-</mo><mrow><msub><mi>m</mi><mi>i</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msub><mover accent=\"true\"><mi>P</mi><mo stretchy=\"false\">^</mo></mover><mi>i</mi></msub><mo>-</mo><msubsup><mi>P</mi><mi>i</mi><mo>*</mo></msubsup></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": " \n\n\\begin{rem} The second-order frequency droop control model \\eqref{eq:droopdyn} for inverter-based networks is analogous to the classical machine model for synchronous generators. The models are equivalent with respect to the performance measure considered here, see \\cite{Tegling2014, Tegling2015}. We regard the parameters {$\\tau_i, m_i$} in \\eqref{eq:droopdyn} as design parameters and thus assume inverter-based networks throughout, although the setting can easily be extended to networks with both inverters and synchronous generators. We refer to \\cite{Andreasson2014ACC} for a discussion on distributed PI control in synchronous generator networks. \n\\end{rem}\n\n\\subsection{Distributed averaging proportional integral (DAPI) controller}\n\\label{sec:dapi}\n The droop controller \\eqref{eq:droop} is completely decentralized, requiring only local measurements of active power for implementation. Under reasonable conditions, \\eqref{eq:droop} guarantees desired power sharing, and synchronizes the inverter network to a common steady-state frequency $\\omega_{\\rm ss}$; see \\cite{SimpsonPorco2013} for an analysis. However, as droop control is effectively proportional control, it typically leads to static deviations of the steady-state frequency $\\omega_{\\rm ss}$ from the nominal frequency $\\omega^*$. This deficiency motivates so-called secondary integral control, the goal of which is to eliminate this static error. \n \nFollowing \\cite{SimpsonPorco2013, Andreasson2014ACC}, in this paper we consider a distributed integral control strategy which we refer to as \\emph{distributed averaging proportional integral (DAPI)} control. For this purpose, assume that the physical network, as described by $\\mathcal{G} = \\{\\mathcal{V}, \\mathcal{E}\\}$, is also equipped with a communication network represented by the graph $\\mathcal{G}^C = \\{\\mathcal{V}, \\mathcal{E}^C\\}$. Let $\\mathcal{N}^{C}_i$ denote the neighbor set of node $i$ in $\\mathcal{G}^C $. The controller takes the form \n\\begin{subequations}\n\\label{eq:dapidyn}\n\n", "itemtype": "equation", "pos": -1, "prevtext": "\nTaking the derivative of \\eqref{eq:freq} with respect to time gives $\\dot{\\omega}_i = -m_i \\dot{\\hat{P}}_i$ and by \\eqref{eq:filter} we have that $\\dot{\\omega}_i = \\frac{m_i}{\\tau_i} (\\hat{P}_i -P_i)$. Now, we can substitute $\\hat{P}_i$ using \\eqref{eq:freq} and obtain the frequency control dynamics as\n\n", "index": 9, "text": "\\begin{equation}\n\\label{eq:droopdyn}\n\\begin{aligned}\n\\dot{\\theta}_i & = \\omega_i \\\\\n\\tau_i \\dot{\\omega}_i & = -\\omega_i + \\omega^* - m_i(P_i - P_i^*).\n\\end{aligned}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E5X.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle\\dot{\\theta}_{i}\" display=\"inline\"><msub><mover accent=\"true\"><mi>\u03b8</mi><mo>\u02d9</mo></mover><mi>i</mi></msub></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E5X.m3\" class=\"ltx_Math\" alttext=\"\\displaystyle=\\omega_{i}\" display=\"inline\"><mrow><mi/><mo>=</mo><msub><mi>\u03c9</mi><mi>i</mi></msub></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E5Xa.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle\\tau_{i}\\dot{\\omega}_{i}\" display=\"inline\"><mrow><msub><mi>\u03c4</mi><mi>i</mi></msub><mo>\u2062</mo><msub><mover accent=\"true\"><mi>\u03c9</mi><mo>\u02d9</mo></mover><mi>i</mi></msub></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E5Xa.m3\" class=\"ltx_Math\" alttext=\"\\displaystyle=-\\omega_{i}+\\omega^{*}-m_{i}(P_{i}-P_{i}^{*}).\" display=\"inline\"><mrow><mrow><mi/><mo>=</mo><mrow><mrow><mrow><mo>-</mo><msub><mi>\u03c9</mi><mi>i</mi></msub></mrow><mo>+</mo><msup><mi>\u03c9</mi><mo>*</mo></msup></mrow><mo>-</mo><mrow><msub><mi>m</mi><mi>i</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msub><mi>P</mi><mi>i</mi></msub><mo>-</mo><msubsup><mi>P</mi><mi>i</mi><mo>*</mo></msubsup></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\n\\end{subequations}\nwhere $\\Omega_i$ is the secondary control variable and $k_i>0$ and $c_{ij} = c_{ji} >0, ~i \\in \\mathcal{V}, j \\in \\mathcal{N}^{C}_i$ are controller parameters. Notice that equations \\eqref{eq:thetadapi}~-~\\eqref{eq:omegadapi} are the droop controller dynamics \\eqref{eq:droopdyn}, but with the additional secondary control input $\\Omega_i$. { Hence, \\eqref{eq:Omegadapi} can be thought of as a distributed integral controller appended to \\eqref{eq:thetadapi}~-~\\eqref{eq:omegadapi}.}\n\nAs shown in \\cite{SimpsonPorco2013}, if the communication network $\\mathcal{G}^{C}$ among the inverters is connected, the distributed controller \\eqref{eq:dapidyn} restores the network frequency to $\\omega^*$ while maintaining an optimal steady-state distribution of power injections among the inverters established by droop control. When all gains $c_{ij}$ are zero, \\eqref{eq:Omegadapi} degenerates into a decentralized integral controller, and in this case \\eqref{eq:dapidyn} possesses a large subspace of undesirable equilibria \\cite[Lemma 4.1]{Dorfler2014}. \n\n\nTo simplify upcoming notation, we define the weighted Laplacian matrix $L_C \\in \\mathbb{R}^{N \\times N}$ of the communication graph $\\mathcal{G}^C $ by ($L_{C,ij}$ denotes the element at row $i$ and column $j$):\n\n", "itemtype": "equation", "pos": 12518, "prevtext": " \n\n\\begin{rem} The second-order frequency droop control model \\eqref{eq:droopdyn} for inverter-based networks is analogous to the classical machine model for synchronous generators. The models are equivalent with respect to the performance measure considered here, see \\cite{Tegling2014, Tegling2015}. We regard the parameters {$\\tau_i, m_i$} in \\eqref{eq:droopdyn} as design parameters and thus assume inverter-based networks throughout, although the setting can easily be extended to networks with both inverters and synchronous generators. We refer to \\cite{Andreasson2014ACC} for a discussion on distributed PI control in synchronous generator networks. \n\\end{rem}\n\n\\subsection{Distributed averaging proportional integral (DAPI) controller}\n\\label{sec:dapi}\n The droop controller \\eqref{eq:droop} is completely decentralized, requiring only local measurements of active power for implementation. Under reasonable conditions, \\eqref{eq:droop} guarantees desired power sharing, and synchronizes the inverter network to a common steady-state frequency $\\omega_{\\rm ss}$; see \\cite{SimpsonPorco2013} for an analysis. However, as droop control is effectively proportional control, it typically leads to static deviations of the steady-state frequency $\\omega_{\\rm ss}$ from the nominal frequency $\\omega^*$. This deficiency motivates so-called secondary integral control, the goal of which is to eliminate this static error. \n \nFollowing \\cite{SimpsonPorco2013, Andreasson2014ACC}, in this paper we consider a distributed integral control strategy which we refer to as \\emph{distributed averaging proportional integral (DAPI)} control. For this purpose, assume that the physical network, as described by $\\mathcal{G} = \\{\\mathcal{V}, \\mathcal{E}\\}$, is also equipped with a communication network represented by the graph $\\mathcal{G}^C = \\{\\mathcal{V}, \\mathcal{E}^C\\}$. Let $\\mathcal{N}^{C}_i$ denote the neighbor set of node $i$ in $\\mathcal{G}^C $. The controller takes the form \n\\begin{subequations}\n\\label{eq:dapidyn}\n\n", "index": 11, "text": "\\begin{align} \\label{eq:thetadapi}\n\\dot{\\theta}_i & = \\omega_i \\\\ \\label{eq:omegadapi}\n\\tau_i \\dot{\\omega}_i & = -\\omega_i + \\omega^* - m_i(P_i - P_i^*) + \\Omega_i \\\\ \\label{eq:Omegadapi}\nk_i \\dot{\\Omega}_i & = -\\omega_i + \\omega^* - \\sum_{j  \\in \\mathcal{N}^{C}_i } c_{ij}(\\Omega_i - \\Omega_j),\n\\end{align}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E6.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle\\dot{\\theta}_{i}\" display=\"inline\"><msub><mover accent=\"true\"><mi>\u03b8</mi><mo>\u02d9</mo></mover><mi>i</mi></msub></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E6.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle=\\omega_{i}\" display=\"inline\"><mrow><mi/><mo>=</mo><msub><mi>\u03c9</mi><mi>i</mi></msub></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E7.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle\\tau_{i}\\dot{\\omega}_{i}\" display=\"inline\"><mrow><msub><mi>\u03c4</mi><mi>i</mi></msub><mo>\u2062</mo><msub><mover accent=\"true\"><mi>\u03c9</mi><mo>\u02d9</mo></mover><mi>i</mi></msub></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E7.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle=-\\omega_{i}+\\omega^{*}-m_{i}(P_{i}-P_{i}^{*})+\\Omega_{i}\" display=\"inline\"><mrow><mi/><mo>=</mo><mrow><mrow><mrow><mrow><mo>-</mo><msub><mi>\u03c9</mi><mi>i</mi></msub></mrow><mo>+</mo><msup><mi>\u03c9</mi><mo>*</mo></msup></mrow><mo>-</mo><mrow><msub><mi>m</mi><mi>i</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msub><mi>P</mi><mi>i</mi></msub><mo>-</mo><msubsup><mi>P</mi><mi>i</mi><mo>*</mo></msubsup></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>+</mo><msub><mi mathvariant=\"normal\">\u03a9</mi><mi>i</mi></msub></mrow></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E8.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle k_{i}\\dot{\\Omega}_{i}\" display=\"inline\"><mrow><msub><mi>k</mi><mi>i</mi></msub><mo>\u2062</mo><msub><mover accent=\"true\"><mi mathvariant=\"normal\">\u03a9</mi><mo>\u02d9</mo></mover><mi>i</mi></msub></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E8.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle=-\\omega_{i}+\\omega^{*}-\\sum_{j\\in\\mathcal{N}^{C}_{i}}c_{ij}(%&#10;\\Omega_{i}-\\Omega_{j}),\" display=\"inline\"><mrow><mrow><mi/><mo>=</mo><mrow><mrow><mrow><mo>-</mo><msub><mi>\u03c9</mi><mi>i</mi></msub></mrow><mo>+</mo><msup><mi>\u03c9</mi><mo>*</mo></msup></mrow><mo>-</mo><mrow><mstyle displaystyle=\"true\"><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>j</mi><mo>\u2208</mo><msubsup><mi class=\"ltx_font_mathcaligraphic\">\ud835\udca9</mi><mi>i</mi><mi>C</mi></msubsup></mrow></munder></mstyle><mrow><msub><mi>c</mi><mrow><mi>i</mi><mo>\u2062</mo><mi>j</mi></mrow></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msub><mi mathvariant=\"normal\">\u03a9</mi><mi>i</mi></msub><mo>-</mo><msub><mi mathvariant=\"normal\">\u03a9</mi><mi>j</mi></msub></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": " \n\n\\begin{rem}\n\\label{rem:1storder}\nThe models \\eqref{eq:droopdyn} and \\eqref{eq:dapidyn} reduce to the first-order inverter models considered in \\cite{SimpsonPorco2015} for $\\tau_i = 0$ for all $i \\in \\mathcal{V}$.\n\\end{rem}\n\n\\subsection{Power flow}\nIntroducing $\\theta_{ij} = (\\theta_i - \\theta_j)$ as the phase angle difference between neighboring nodes, we can write the active power injected to the grid at node $i\\in \\mathcal{V}$ as\n\n", "itemtype": "equation", "pos": -1, "prevtext": "\n\\end{subequations}\nwhere $\\Omega_i$ is the secondary control variable and $k_i>0$ and $c_{ij} = c_{ji} >0, ~i \\in \\mathcal{V}, j \\in \\mathcal{N}^{C}_i$ are controller parameters. Notice that equations \\eqref{eq:thetadapi}~-~\\eqref{eq:omegadapi} are the droop controller dynamics \\eqref{eq:droopdyn}, but with the additional secondary control input $\\Omega_i$. { Hence, \\eqref{eq:Omegadapi} can be thought of as a distributed integral controller appended to \\eqref{eq:thetadapi}~-~\\eqref{eq:omegadapi}.}\n\nAs shown in \\cite{SimpsonPorco2013}, if the communication network $\\mathcal{G}^{C}$ among the inverters is connected, the distributed controller \\eqref{eq:dapidyn} restores the network frequency to $\\omega^*$ while maintaining an optimal steady-state distribution of power injections among the inverters established by droop control. When all gains $c_{ij}$ are zero, \\eqref{eq:Omegadapi} degenerates into a decentralized integral controller, and in this case \\eqref{eq:dapidyn} possesses a large subspace of undesirable equilibria \\cite[Lemma 4.1]{Dorfler2014}. \n\n\nTo simplify upcoming notation, we define the weighted Laplacian matrix $L_C \\in \\mathbb{R}^{N \\times N}$ of the communication graph $\\mathcal{G}^C $ by ($L_{C,ij}$ denotes the element at row $i$ and column $j$):\n\n", "index": 13, "text": "\\begin{equation}\n\\label{eq:Lcdef}\nL_{C,ij} = \\begin{cases} -c_{ij} & \\text{if }j \\in \\mathcal{N}^{C}_i, ~j \\neq i \\\\\n\\sum_{k \\in \\mathcal{N}^{C}_i} c_{ik } & \\text{if } j = i\\\\\n0 & \\text{otherwise} \\end{cases}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E9.m1\" class=\"ltx_Math\" alttext=\"L_{C,ij}=\\begin{cases}-c_{ij}&amp;\\text{if }j\\in\\mathcal{N}^{C}_{i},~{}j\\neq i\\\\&#10;\\sum_{k\\in\\mathcal{N}^{C}_{i}}c_{ik}&amp;\\text{if }j=i\\\\&#10;0&amp;\\text{otherwise}\\end{cases}\" display=\"block\"><mrow><msub><mi>L</mi><mrow><mi>C</mi><mo>,</mo><mrow><mi>i</mi><mo>\u2062</mo><mi>j</mi></mrow></mrow></msub><mo>=</mo><mrow><mo>{</mo><mtable columnspacing=\"5pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"left\"><mrow><mo>-</mo><msub><mi>c</mi><mrow><mi>i</mi><mo>\u2062</mo><mi>j</mi></mrow></msub></mrow></mtd><mtd columnalign=\"left\"><mrow><mrow><mrow><mtext>if\u00a0</mtext><mo>\u2062</mo><mi>j</mi></mrow><mo>\u2208</mo><msubsup><mi class=\"ltx_font_mathcaligraphic\">\ud835\udca9</mi><mi>i</mi><mi>C</mi></msubsup></mrow><mo rspace=\"5.8pt\">,</mo><mrow><mi>j</mi><mo>\u2260</mo><mi>i</mi></mrow></mrow></mtd></mtr><mtr><mtd columnalign=\"left\"><mrow><mstyle displaystyle=\"false\"><msub><mo largeop=\"true\" symmetric=\"true\">\u2211</mo><mrow><mi>k</mi><mo>\u2208</mo><msubsup><mi class=\"ltx_font_mathcaligraphic\">\ud835\udca9</mi><mi>i</mi><mi>C</mi></msubsup></mrow></msub></mstyle><msub><mi>c</mi><mrow><mi>i</mi><mo>\u2062</mo><mi>k</mi></mrow></msub></mrow></mtd><mtd columnalign=\"left\"><mrow><mrow><mtext>if\u00a0</mtext><mo>\u2062</mo><mi>j</mi></mrow><mo>=</mo><mi>i</mi></mrow></mtd></mtr><mtr><mtd columnalign=\"left\"><mn>0</mn></mtd><mtd columnalign=\"left\"><mtext>otherwise</mtext></mtd></mtr></mtable></mrow></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\nHere, $\\mathcal{N}_i$ denotes the neighbor set of node $i$ in $\\mathcal{G}$. $g_{ij}$ and $b_{ij}$ are respectively the conductance and susceptance associated with the line $e_{ij}$, and $\\bar{g}_i$ is the shunt conductance of node $i$. As per convention in power flow analysis, we assume that all quantities in \\eqref{eq:powerflow} have been normalized by system constants and are measured in per unit (p.u.). \n\n\n\nIn what follows, we will use a simplified model in which we consider small deviations from a stable operating point. We can therefore approximate the power flows using the standard linear power flow assumptions. These include assuming constant voltages, $|V_i|= 1$~p.u. for all $i \\in \\mathcal{V}$ and retaining only the linear terms of \\eqref{eq:powerflow}, and lead to\n\n", "itemtype": "equation", "pos": 14771, "prevtext": " \n\n\\begin{rem}\n\\label{rem:1storder}\nThe models \\eqref{eq:droopdyn} and \\eqref{eq:dapidyn} reduce to the first-order inverter models considered in \\cite{SimpsonPorco2015} for $\\tau_i = 0$ for all $i \\in \\mathcal{V}$.\n\\end{rem}\n\n\\subsection{Power flow}\nIntroducing $\\theta_{ij} = (\\theta_i - \\theta_j)$ as the phase angle difference between neighboring nodes, we can write the active power injected to the grid at node $i\\in \\mathcal{V}$ as\n\n", "index": 15, "text": "\\begin{equation}\n\\label{eq:powerflow}\nP_i = \\bar{g}_i |V_i|^2 + \\sum_{j \\in \\mathcal{N}_i} |V_i||V_j|(g_{ij}\\cos\\theta_{ij} + b_{ij}\\sin \\theta_{ij} ).\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E10.m1\" class=\"ltx_Math\" alttext=\"P_{i}=\\bar{g}_{i}|V_{i}|^{2}+\\sum_{j\\in\\mathcal{N}_{i}}|V_{i}||V_{j}|(g_{ij}%&#10;\\cos\\theta_{ij}+b_{ij}\\sin\\theta_{ij}).\" display=\"block\"><mrow><mrow><msub><mi>P</mi><mi>i</mi></msub><mo>=</mo><mrow><mrow><msub><mover accent=\"true\"><mi>g</mi><mo stretchy=\"false\">\u00af</mo></mover><mi>i</mi></msub><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">|</mo><msub><mi>V</mi><mi>i</mi></msub><mo stretchy=\"false\">|</mo></mrow><mn>2</mn></msup></mrow><mo>+</mo><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>j</mi><mo>\u2208</mo><msub><mi class=\"ltx_font_mathcaligraphic\">\ud835\udca9</mi><mi>i</mi></msub></mrow></munder><mrow><mrow><mo stretchy=\"false\">|</mo><msub><mi>V</mi><mi>i</mi></msub><mo stretchy=\"false\">|</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">|</mo><msub><mi>V</mi><mi>j</mi></msub><mo stretchy=\"false\">|</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mrow><msub><mi>g</mi><mrow><mi>i</mi><mo>\u2062</mo><mi>j</mi></mrow></msub><mo>\u2062</mo><mrow><mi>cos</mi><mo>\u2061</mo><msub><mi>\u03b8</mi><mrow><mi>i</mi><mo>\u2062</mo><mi>j</mi></mrow></msub></mrow></mrow><mo>+</mo><mrow><msub><mi>b</mi><mrow><mi>i</mi><mo>\u2062</mo><mi>j</mi></mrow></msub><mo>\u2062</mo><mrow><mi>sin</mi><mo>\u2061</mo><msub><mi>\u03b8</mi><mrow><mi>i</mi><mo>\u2062</mo><mi>j</mi></mrow></msub></mrow></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\nSee e.g. \\cite{Purchala2005} for a general analysis of the applicability of such assumptions and \\cite{Tegling2015} for an error estimate with respect to the performance measure of interest.\n\nIn upcoming notation, we will use the network admittance matrix $Y\\in \\mathbb{C}^{N \\times N}$, given by $Y_{ii} = \\bar{g}_i +\\sum_{k \\in \\mathcal{N}_i} y_{ik}$, $Y_{ij} = -y_{ij}$ if $j \\in \\mathcal{N}_i, ~j \\neq i$ and zero otherwise. \nThe matrix $Y$ can be partitioned into a real and an imaginary part:\n\n", "itemtype": "equation", "pos": 15724, "prevtext": "\nHere, $\\mathcal{N}_i$ denotes the neighbor set of node $i$ in $\\mathcal{G}$. $g_{ij}$ and $b_{ij}$ are respectively the conductance and susceptance associated with the line $e_{ij}$, and $\\bar{g}_i$ is the shunt conductance of node $i$. As per convention in power flow analysis, we assume that all quantities in \\eqref{eq:powerflow} have been normalized by system constants and are measured in per unit (p.u.). \n\n\n\nIn what follows, we will use a simplified model in which we consider small deviations from a stable operating point. We can therefore approximate the power flows using the standard linear power flow assumptions. These include assuming constant voltages, $|V_i|= 1$~p.u. for all $i \\in \\mathcal{V}$ and retaining only the linear terms of \\eqref{eq:powerflow}, and lead to\n\n", "index": 17, "text": "\\begin{equation}\n\\label{eq:linprwflow}\nP_i \\approx \\sum_{j \\in \\mathcal{N}_i} b_{ij} (\\theta_i - \\theta_j ) .\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E11.m1\" class=\"ltx_Math\" alttext=\"P_{i}\\approx\\sum_{j\\in\\mathcal{N}_{i}}b_{ij}(\\theta_{i}-\\theta_{j}).\" display=\"block\"><mrow><mrow><msub><mi>P</mi><mi>i</mi></msub><mo>\u2248</mo><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>j</mi><mo>\u2208</mo><msub><mi class=\"ltx_font_mathcaligraphic\">\ud835\udca9</mi><mi>i</mi></msub></mrow></munder><mrow><msub><mi>b</mi><mrow><mi>i</mi><mo>\u2062</mo><mi>j</mi></mrow></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msub><mi>\u03b8</mi><mi>i</mi></msub><mo>-</mo><msub><mi>\u03b8</mi><mi>j</mi></msub></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": " \nwhere $L_G$ denotes the network's conductance matrix and $L_B$ its susceptance matrix. By definition, the matrices $L_B$ and $L_G$ are weighted graph Laplacians of $\\mathcal{G}$, with edge weights respectively defined by $b_{ij}$ and $g_{ij}$.  \n\nNow, let the operating point around which the power flow equation is linearized be given by the constant setpoints $P^*,~\\omega^*$, which WLOG we can transfer to the origin through a change of variables. The system is subject to small disturbances or persistent small amplitude noise, representing e.g. generation and load fluctuations, which we model as a distributed disturbance input $w$ acting on the inverters. By substituting  \\eqref{eq:linprwflow} into the respective inverter control dynamics \\eqref{eq:droopdyn}, \\eqref{eq:dapidyn}, we can then formulate the following systems in state-space form:\n\\vspace{3pt}\n\n\n\n\\noindent \\textit{Standard droop control:}\n \n", "itemtype": "equation", "pos": -1, "prevtext": "\nSee e.g. \\cite{Purchala2005} for a general analysis of the applicability of such assumptions and \\cite{Tegling2015} for an error estimate with respect to the performance measure of interest.\n\nIn upcoming notation, we will use the network admittance matrix $Y\\in \\mathbb{C}^{N \\times N}$, given by $Y_{ii} = \\bar{g}_i +\\sum_{k \\in \\mathcal{N}_i} y_{ik}$, $Y_{ij} = -y_{ij}$ if $j \\in \\mathcal{N}_i, ~j \\neq i$ and zero otherwise. \nThe matrix $Y$ can be partitioned into a real and an imaginary part:\n\n", "index": 19, "text": "\\begin{equation} \\label{eq:defY}\nY = L_G + \\mathrm{diag}\\{\\bar{g}\\} - \\mathbf{j}(L_B) , \n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E12.m1\" class=\"ltx_Math\" alttext=\"Y=L_{G}+\\mathrm{diag}\\{\\bar{g}\\}-\\mathbf{j}(L_{B}),\" display=\"block\"><mrow><mrow><mi>Y</mi><mo>=</mo><mrow><mrow><msub><mi>L</mi><mi>G</mi></msub><mo>+</mo><mrow><mi>diag</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">{</mo><mover accent=\"true\"><mi>g</mi><mo stretchy=\"false\">\u00af</mo></mover><mo stretchy=\"false\">}</mo></mrow></mrow></mrow><mo>-</mo><mrow><mi>\ud835\udc23</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mi>L</mi><mi>B</mi></msub><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\n\n\\noindent \\textit{DAPI control:}\n\n", "itemtype": "equation", "pos": 17367, "prevtext": " \nwhere $L_G$ denotes the network's conductance matrix and $L_B$ its susceptance matrix. By definition, the matrices $L_B$ and $L_G$ are weighted graph Laplacians of $\\mathcal{G}$, with edge weights respectively defined by $b_{ij}$ and $g_{ij}$.  \n\nNow, let the operating point around which the power flow equation is linearized be given by the constant setpoints $P^*,~\\omega^*$, which WLOG we can transfer to the origin through a change of variables. The system is subject to small disturbances or persistent small amplitude noise, representing e.g. generation and load fluctuations, which we model as a distributed disturbance input $w$ acting on the inverters. By substituting  \\eqref{eq:linprwflow} into the respective inverter control dynamics \\eqref{eq:droopdyn}, \\eqref{eq:dapidyn}, we can then formulate the following systems in state-space form:\n\\vspace{3pt}\n\n\n\n\\noindent \\textit{Standard droop control:}\n \n", "index": 21, "text": "\\begin{align}\n\\label{eq:ssdroop}\n\\begin{bmatrix}\n\\dot{\\theta} \\\\ \\dot{\\omega} \n\\end{bmatrix}& = \\begin{bmatrix}\n0 & I \\\\ -MT^{-1}L_B & -T^{-1}\n\\end{bmatrix} \\begin{bmatrix}\n\\theta \\\\ \\omega\n\\end{bmatrix} +\\begin{bmatrix}\n0 \\\\ T^{-1}\n\\end{bmatrix}w \\\\ \\nonumber\n& =: A_{\\mathrm{std}} \\psi_{\\mathrm{std}} + B_{\\mathrm{std}}w,\n\\end{align}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E13.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle\\begin{bmatrix}\\dot{\\theta}\\\\&#10;\\dot{\\omega}\\end{bmatrix}\" display=\"inline\"><mrow><mo>[</mo><mtable rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mover accent=\"true\"><mi>\u03b8</mi><mo>\u02d9</mo></mover></mtd></mtr><mtr><mtd columnalign=\"center\"><mover accent=\"true\"><mi>\u03c9</mi><mo>\u02d9</mo></mover></mtd></mtr></mtable><mo>]</mo></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E13.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle=\\begin{bmatrix}0&amp;I\\\\&#10;-MT^{-1}L_{B}&amp;-T^{-1}\\end{bmatrix}\\begin{bmatrix}\\theta\\\\&#10;\\omega\\end{bmatrix}+\\begin{bmatrix}0\\\\&#10;T^{-1}\\end{bmatrix}w\" display=\"inline\"><mrow><mi/><mo>=</mo><mrow><mrow><mrow><mo>[</mo><mtable columnspacing=\"5pt\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mi>I</mi></mtd></mtr><mtr><mtd columnalign=\"center\"><mrow><mo>-</mo><mrow><mi>M</mi><mo>\u2062</mo><msup><mi>T</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup><mo>\u2062</mo><msub><mi>L</mi><mi>B</mi></msub></mrow></mrow></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><msup><mi>T</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup></mrow></mtd></mtr></mtable><mo>]</mo></mrow><mo>\u2062</mo><mrow><mo>[</mo><mtable rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mi>\u03b8</mi></mtd></mtr><mtr><mtd columnalign=\"center\"><mi>\u03c9</mi></mtd></mtr></mtable><mo>]</mo></mrow></mrow><mo>+</mo><mrow><mrow><mo>[</mo><mtable rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><msup><mi>T</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup></mtd></mtr></mtable><mo>]</mo></mrow><mo>\u2062</mo><mi>w</mi></mrow></mrow></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex1.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle=:A_{\\mathrm{std}}\\psi_{\\mathrm{std}}+B_{\\mathrm{std}}w,\" display=\"inline\"><mrow><mo>=</mo><mo>:</mo><msub><mi>A</mi><mi>std</mi></msub><msub><mi>\u03c8</mi><mi>std</mi></msub><mo>+</mo><msub><mi>B</mi><mi>std</mi></msub><mi>w</mi><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": " \nHere, we have introduced the column vectors $\\theta, ~\\omega, ~\\Omega$ containing the states $\\theta_i,~\\omega_i, ~\\Omega_i$, $i \\in \\mathcal{V}$, {with total state vectors $\\psi_{\\rm std} = (\\theta,\\omega)^T$ and $\\psi_{\\rm DAPI} = (\\theta,\\omega,\\Omega)^T$}. The system parameters are given by $M = \\mathrm{diag}\\{m_i\\}$, $T = \\mathrm{diag}\\{\\tau_i\\}$, and  $K = \\mathrm{diag}\\{k_i\\}$.\n\n\n\\subsection{System performance}\n\nIn this paper, we are concerned with the performance of the systems \\eqref{eq:ssdroop}~-~\\eqref{eq:ssdapi} in terms of the resistive power losses incurred in returning the system to a synchronous state following a small transient event, or in maintaining this state under persistent stochastic disturbances $w$. These losses are associated with the power flows that arise from fluctuating phase angle differences, and can be regarded as the control effort required to drive the system to a steady state with desired active power sharing. \n\nTo define the relevant performance measure, we adopt the approach first presented in \\cite{BamiehGayme2013}. Consider the real power loss over the edge $e_{ij}$, given by Ohm's law as $P^{\\rm loss}_{ij} = g_{ij}|V_i - V_j|^2$. If we enforce the linear power flow assumptions and retain only the terms that are quadratic in the state variables, standard trigonometric methods give that $P^{\\rm loss}_{ij} \\approx g_{ij}(\\theta_i - \\theta_j)^2$. Since $\\theta_i$ represents deviations from an operating point, this is equivalent to the power loss over the edge during the transient. The total instantaneous losses over the network are then approximately\n\n", "itemtype": "equation", "pos": -1, "prevtext": "\n\n\\noindent \\textit{DAPI control:}\n\n", "index": 23, "text": "\\begin{align} \\nonumber \n\\begin{bmatrix}\n\\dot{\\theta} \\\\ \\dot{\\omega} \\\\ \\dot{\\Omega}\n\\end{bmatrix} = &\\begin{bmatrix}\n0 & I & 0 \\\\\n-MT^{-1}L_B & -T^{-1} & T^{-1}\\\\\n0 & -K^{-1} & -K^{-1}L_C\n\\end{bmatrix} \\begin{bmatrix}\n\\theta \\\\ \\omega \\\\ \\Omega\n\\end{bmatrix} \\\\ \\label{eq:ssdapi}  &  + \\begin{bmatrix}\n0 \\\\ T^{-1} \\\\ 0 \n\\end{bmatrix}w  =: A_{\\mathrm{DAPI}} \\psi_{\\mathrm{DAPI}} + B_{\\mathrm{DAPI}}w.\n\\end{align}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex2.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle\\begin{bmatrix}\\dot{\\theta}\\\\&#10;\\dot{\\omega}\\\\&#10;\\dot{\\Omega}\\end{bmatrix}=\" display=\"inline\"><mrow><mrow><mo>[</mo><mtable rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mover accent=\"true\"><mi>\u03b8</mi><mo>\u02d9</mo></mover></mtd></mtr><mtr><mtd columnalign=\"center\"><mover accent=\"true\"><mi>\u03c9</mi><mo>\u02d9</mo></mover></mtd></mtr><mtr><mtd columnalign=\"center\"><mover accent=\"true\"><mi mathvariant=\"normal\">\u03a9</mi><mo>\u02d9</mo></mover></mtd></mtr></mtable><mo>]</mo></mrow><mo>=</mo><mi/></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex2.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle\\begin{bmatrix}0&amp;I&amp;0\\\\&#10;-MT^{-1}L_{B}&amp;-T^{-1}&amp;T^{-1}\\\\&#10;0&amp;-K^{-1}&amp;-K^{-1}L_{C}\\end{bmatrix}\\begin{bmatrix}\\theta\\\\&#10;\\omega\\\\&#10;\\Omega\\end{bmatrix}\" display=\"inline\"><mrow><mrow><mo>[</mo><mtable columnspacing=\"5pt\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mi>I</mi></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><mrow><mo>-</mo><mrow><mi>M</mi><mo>\u2062</mo><msup><mi>T</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup><mo>\u2062</mo><msub><mi>L</mi><mi>B</mi></msub></mrow></mrow></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><msup><mi>T</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup></mrow></mtd><mtd columnalign=\"center\"><msup><mi>T</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><msup><mi>K</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup></mrow></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><mrow><msup><mi>K</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup><mo>\u2062</mo><msub><mi>L</mi><mi>C</mi></msub></mrow></mrow></mtd></mtr></mtable><mo>]</mo></mrow><mo>\u2062</mo><mrow><mo>[</mo><mtable rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mi>\u03b8</mi></mtd></mtr><mtr><mtd columnalign=\"center\"><mi>\u03c9</mi></mtd></mtr><mtr><mtd columnalign=\"center\"><mi mathvariant=\"normal\">\u03a9</mi></mtd></mtr></mtable><mo>]</mo></mrow></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E14.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle+\\begin{bmatrix}0\\\\&#10;T^{-1}\\\\&#10;0\\end{bmatrix}w=:A_{\\mathrm{DAPI}}\\psi_{\\mathrm{DAPI}}+B_{\\mathrm{DAPI}}w.\" display=\"inline\"><mrow><mo>+</mo><mrow><mo>[</mo><mtable rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><msup><mi>T</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr></mtable><mo>]</mo></mrow><mi>w</mi><mo>=</mo><mo>:</mo><msub><mi>A</mi><mi>DAPI</mi></msub><msub><mi>\u03c8</mi><mi>DAPI</mi></msub><mo>+</mo><msub><mi>B</mi><mi>DAPI</mi></msub><mi>w</mi><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\nwhich we can write as the quadratic form $\\mathbf{P}^{\\mathrm{loss}}  = \\theta^* L_G \\theta$. Since $L_G$ is a positive semidefinite graph Laplacian, it has a unique positive semidefinite square-root $L_G^{1/2}$. We can therefore define outputs of the systems \\eqref{eq:ssdroop}~-~\\eqref{eq:ssdapi} respectively as \n\n", "itemtype": "equation", "pos": 19767, "prevtext": " \nHere, we have introduced the column vectors $\\theta, ~\\omega, ~\\Omega$ containing the states $\\theta_i,~\\omega_i, ~\\Omega_i$, $i \\in \\mathcal{V}$, {with total state vectors $\\psi_{\\rm std} = (\\theta,\\omega)^T$ and $\\psi_{\\rm DAPI} = (\\theta,\\omega,\\Omega)^T$}. The system parameters are given by $M = \\mathrm{diag}\\{m_i\\}$, $T = \\mathrm{diag}\\{\\tau_i\\}$, and  $K = \\mathrm{diag}\\{k_i\\}$.\n\n\n\\subsection{System performance}\n\nIn this paper, we are concerned with the performance of the systems \\eqref{eq:ssdroop}~-~\\eqref{eq:ssdapi} in terms of the resistive power losses incurred in returning the system to a synchronous state following a small transient event, or in maintaining this state under persistent stochastic disturbances $w$. These losses are associated with the power flows that arise from fluctuating phase angle differences, and can be regarded as the control effort required to drive the system to a steady state with desired active power sharing. \n\nTo define the relevant performance measure, we adopt the approach first presented in \\cite{BamiehGayme2013}. Consider the real power loss over the edge $e_{ij}$, given by Ohm's law as $P^{\\rm loss}_{ij} = g_{ij}|V_i - V_j|^2$. If we enforce the linear power flow assumptions and retain only the terms that are quadratic in the state variables, standard trigonometric methods give that $P^{\\rm loss}_{ij} \\approx g_{ij}(\\theta_i - \\theta_j)^2$. Since $\\theta_i$ represents deviations from an operating point, this is equivalent to the power loss over the edge during the transient. The total instantaneous losses over the network are then approximately\n\n", "index": 25, "text": "\\begin{equation}\n\\label{eq:pwrloss}\n\\mathbf{P}^{\\mathrm{loss}} = \\sum_{j \\in \\mathcal{N}_i} g_{ij}(\\theta_i - \\theta_j)^2,\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E15.m1\" class=\"ltx_Math\" alttext=\"\\mathbf{P}^{\\mathrm{loss}}=\\sum_{j\\in\\mathcal{N}_{i}}g_{ij}(\\theta_{i}-\\theta_%&#10;{j})^{2},\" display=\"block\"><mrow><mrow><msup><mi>\ud835\udc0f</mi><mi>loss</mi></msup><mo>=</mo><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>j</mi><mo>\u2208</mo><msub><mi class=\"ltx_font_mathcaligraphic\">\ud835\udca9</mi><mi>i</mi></msub></mrow></munder><mrow><msub><mi>g</mi><mrow><mi>i</mi><mo>\u2062</mo><mi>j</mi></mrow></msub><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">(</mo><mrow><msub><mi>\u03b8</mi><mi>i</mi></msub><mo>-</mo><msub><mi>\u03b8</mi><mi>j</mi></msub></mrow><mo stretchy=\"false\">)</mo></mrow><mn>2</mn></msup></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": " which both give that $\\mathbf{P}^{\\mathrm{loss}} = y^*y$. We now have two input-output mappings from $w$ to $y$: $H_{\\mathrm{std}}$ given by \\eqref{eq:droopdyn}, \\eqref{eq:outputdroop} and $H_{\\mathrm{DAPI}}$ given by \\eqref{eq:dapidyn}, \\eqref{eq:outputdapi}, which are linear-quadratic approximations of the full nonlinear problems. \n\nThe instantaneous resistive losses incurred in the transient are thus approximated by the (squared) Euclidean norm of the output $y$. Provided that the system $H$ is input-output stable, we can thus evaluate the losses due to a white noise disturbance input as the system's {$\\mathcal{H}_2$ } norm, which is  \n", "itemtype": "equation", "pos": -1, "prevtext": "\nwhich we can write as the quadratic form $\\mathbf{P}^{\\mathrm{loss}}  = \\theta^* L_G \\theta$. Since $L_G$ is a positive semidefinite graph Laplacian, it has a unique positive semidefinite square-root $L_G^{1/2}$. We can therefore define outputs of the systems \\eqref{eq:ssdroop}~-~\\eqref{eq:ssdapi} respectively as \n\n", "index": 27, "text": "\\begin{align} \\label{eq:outputdroop}\ny &= \\begin{bmatrix}\nL_G^{1/2} & 0 \n\\end{bmatrix} \\psi_{\\mathrm{std}} =: C_{\\mathrm{std}} \\psi_{std} \\\\ \\label{eq:outputdapi}\ny &= \\begin{bmatrix}\nL_G^{1/2} & 0  & 0\n\\end{bmatrix}\\psi_{\\mathrm{DAPI}} =: C_{\\mathrm{DAPI}} \\psi_{DAPI}\n\\end{align}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E16.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle y\" display=\"inline\"><mi>y</mi></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E16.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle=\\begin{bmatrix}L_{G}^{1/2}&amp;0\\end{bmatrix}\\psi_{\\mathrm{std}}=:C_%&#10;{\\mathrm{std}}\\psi_{std}\" display=\"inline\"><mrow><mo>=</mo><mrow><mo>[</mo><mtable columnspacing=\"5pt\"><mtr><mtd columnalign=\"center\"><msubsup><mi>L</mi><mi>G</mi><mrow><mn>1</mn><mo>/</mo><mn>2</mn></mrow></msubsup></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr></mtable><mo>]</mo></mrow><msub><mi>\u03c8</mi><mi>std</mi></msub><mo>=</mo><mo>:</mo><msub><mi>C</mi><mi>std</mi></msub><msub><mi>\u03c8</mi><mrow><mi>s</mi><mo>\u2062</mo><mi>t</mi><mo>\u2062</mo><mi>d</mi></mrow></msub></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E17.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle y\" display=\"inline\"><mi>y</mi></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E17.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle=\\begin{bmatrix}L_{G}^{1/2}&amp;0&amp;0\\end{bmatrix}\\psi_{\\mathrm{DAPI}}=%&#10;:C_{\\mathrm{DAPI}}\\psi_{DAPI}\" display=\"inline\"><mrow><mo>=</mo><mrow><mo>[</mo><mtable columnspacing=\"5pt\"><mtr><mtd columnalign=\"center\"><msubsup><mi>L</mi><mi>G</mi><mrow><mn>1</mn><mo>/</mo><mn>2</mn></mrow></msubsup></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr></mtable><mo>]</mo></mrow><msub><mi>\u03c8</mi><mi>DAPI</mi></msub><mo>=</mo><mo>:</mo><msub><mi>C</mi><mi>DAPI</mi></msub><msub><mi>\u03c8</mi><mrow><mi>D</mi><mo>\u2062</mo><mi>A</mi><mo>\u2062</mo><mi>P</mi><mo>\u2062</mo><mi>I</mi></mrow></msub></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\nThe use of the {$\\mathcal{H}_2$ } norm to quantify power losses can also be motivated under other input scenarios, see \\cite{Tegling2014} for a detailed discussion. \n\\begin{rem}\nThe systems \\eqref{eq:ssdroop}~-~\\eqref{eq:ssdapi} represent linearized control dynamics in which line resistances are not present in the first approximation, having been assumed small compared to the line reactances. The outputs \\eqref{eq:outputdroop}~-~\\eqref{eq:outputdapi} represent quadratic approximations of the power losses and measure the effect of non-zero line resistances, given the state trajectories arising from the control dynamics. A rigorous justification for these assumptions are given in \\cite{Tegling2015}.\n\\end{rem}\n\n\\section{Performance analysis}\n\\label{sec:eval}\nIn this section, we derive closed-form expressions for the performance of the systems \\eqref{eq:ssdroop}~-~\\eqref{eq:ssdapi} with respect to the outputs \\eqref{eq:outputdroop}~-~\\eqref{eq:outputdapi}, \n\n\nunder the following Assumptions:\n\\begin{enumerate}[(i)]\n\\item \\textit{Identical inverters.} All inverters have identical parameter settings and low-pass filters, i.e., $M = \\mathrm{diag}\\{m\\}$, $T = \\mathrm{diag}\\{\\tau\\}$, $K = \\mathrm{diag}\\{k\\}$.\n\\item \\emph{Uniform resistance-to-reactance ratios.} The ratio of resistance to reactance, equivalently conductance to susceptance, of all lines are uniform and constant, i.e., \n\n", "itemtype": "equation", "pos": 21149, "prevtext": " which both give that $\\mathbf{P}^{\\mathrm{loss}} = y^*y$. We now have two input-output mappings from $w$ to $y$: $H_{\\mathrm{std}}$ given by \\eqref{eq:droopdyn}, \\eqref{eq:outputdroop} and $H_{\\mathrm{DAPI}}$ given by \\eqref{eq:dapidyn}, \\eqref{eq:outputdapi}, which are linear-quadratic approximations of the full nonlinear problems. \n\nThe instantaneous resistive losses incurred in the transient are thus approximated by the (squared) Euclidean norm of the output $y$. Provided that the system $H$ is input-output stable, we can thus evaluate the losses due to a white noise disturbance input as the system's {$\\mathcal{H}_2$ } norm, which is  \n", "index": 29, "text": "\n\\[||H||_2^2 = \\lim_{t\\rightarrow \\infty }\\mathbb{E}\\{y^*(t)y(t)\\}. \\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex3.m1\" class=\"ltx_Math\" alttext=\"||H||_{2}^{2}=\\lim_{t\\rightarrow\\infty}\\mathbb{E}\\{y^{*}(t)y(t)\\}.\" display=\"block\"><mrow><mrow><msubsup><mrow><mo fence=\"true\">||</mo><mi>H</mi><mo fence=\"true\">||</mo></mrow><mn>2</mn><mn>2</mn></msubsup><mo>=</mo><mrow><munder><mo movablelimits=\"false\">lim</mo><mrow><mi>t</mi><mo>\u2192</mo><mi mathvariant=\"normal\">\u221e</mi></mrow></munder><mo>\u2061</mo><mrow><mi>\ud835\udd3c</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">{</mo><mrow><msup><mi>y</mi><mo>*</mo></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>t</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mi>y</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>t</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">}</mo></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\nfor all $e_{ij} \\in \\mathcal{E}$. This implies $L_G= \\alpha L_B$.\n\\item \\emph{Communication network topology.} The topology of the communication network $\\mathcal{G}^{C}$ is identical to that of the physical network $\\mathcal{G}$. We also assume \n\n", "itemtype": "equation", "pos": 22617, "prevtext": "\nThe use of the {$\\mathcal{H}_2$ } norm to quantify power losses can also be motivated under other input scenarios, see \\cite{Tegling2014} for a detailed discussion. \n\\begin{rem}\nThe systems \\eqref{eq:ssdroop}~-~\\eqref{eq:ssdapi} represent linearized control dynamics in which line resistances are not present in the first approximation, having been assumed small compared to the line reactances. The outputs \\eqref{eq:outputdroop}~-~\\eqref{eq:outputdapi} represent quadratic approximations of the power losses and measure the effect of non-zero line resistances, given the state trajectories arising from the control dynamics. A rigorous justification for these assumptions are given in \\cite{Tegling2015}.\n\\end{rem}\n\n\\section{Performance analysis}\n\\label{sec:eval}\nIn this section, we derive closed-form expressions for the performance of the systems \\eqref{eq:ssdroop}~-~\\eqref{eq:ssdapi} with respect to the outputs \\eqref{eq:outputdroop}~-~\\eqref{eq:outputdapi}, \n\n\nunder the following Assumptions:\n\\begin{enumerate}[(i)]\n\\item \\textit{Identical inverters.} All inverters have identical parameter settings and low-pass filters, i.e., $M = \\mathrm{diag}\\{m\\}$, $T = \\mathrm{diag}\\{\\tau\\}$, $K = \\mathrm{diag}\\{k\\}$.\n\\item \\emph{Uniform resistance-to-reactance ratios.} The ratio of resistance to reactance, equivalently conductance to susceptance, of all lines are uniform and constant, i.e., \n\n", "index": 31, "text": "\\begin{equation}\n\\label{eq:alphadef}\n\\alpha : = \\frac{g_{ij}}{b_{ij}}, \n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E18.m1\" class=\"ltx_Math\" alttext=\"\\alpha:=\\frac{g_{ij}}{b_{ij}},\" display=\"block\"><mrow><mrow><mi>\u03b1</mi><mo>:=</mo><mfrac><msub><mi>g</mi><mrow><mi>i</mi><mo>\u2062</mo><mi>j</mi></mrow></msub><msub><mi>b</mi><mrow><mi>i</mi><mo>\u2062</mo><mi>j</mi></mrow></msub></mfrac></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\ni.e., $\\gamma = \\frac{c_{ij}}{b_{ij}}$, with $\\gamma\\ge 0$, for all $e_{ij}\\in \\mathcal{E} = \\mathcal{E}^C$.\n\\end{enumerate}\nAssumption (ii), which is also applied in e.g. \\cite{LuChu2013, Dorfler2014}, can be motivated first by a uniformity in the physical line properties in a microgrid (i.e., materials and dimensions). Kron reduction of a network also increases its uniformity in node degrees \\cite{Motter2013}. This makes the line properties more uniform in an effective network model.\n\nAssumption (iii) implies that the secondary control layer is set up along the physical network lines, and is shown in \\cite{Andreasson2014ACC} to constitute a sufficient criterion for load sharing with minimized generation costs. For analytical tractability purposes, we also impose the assumption of uniform communication gains with respect to the line susceptances, so that $L_C = \\gamma L_B$. In Section~\\ref{sec:discussion}, we discuss possible implications of a relaxation of that assumption. \n\n\n\n\\subsection{Input-output analysis}\nThe susceptance matrix $L_B$ is a weighted graph Laplacian and as such, it has a well-known eigenvalue at zero with the associated eigenvector $\\mathbf{1} = (1,1,\\ldots,1)^T$, that is, $L_B\\mathbf{1} = 0$. The system matrices $A_{\\mathrm{std}}$ in \\eqref{eq:ssdroop} and $A_{\\mathrm{DAPI}}$ in \\eqref{eq:ssdapi} inherit this zero eigenvalue, which corresponds to a uniform drift of all phase angles $\\theta$. This mode is, however, unobservable from the outputs, keeping the systems $H_{\\rm std}$ and $H_{\\rm DAPI}$ input-output stable:\n\\begin{proposition}\n\\label{prop:stability}\nProvided $\\gamma,~m,~k,~\\tau > 0$ and that $\\mathcal{G}$ is connected, the mappings  $H_{\\rm std}$ and $H_{\\rm DAPI}$ from $w$ to $y$ are input-output stable and their {$\\mathcal{H}_2$ } norms are bounded.\n\\end{proposition}\n\\begin{proof}\nSee appendix.\n\\end{proof}\nThe derivation of our main result relies on a unitary state transformation which divides the systems $H_{\\rm std}$ and $H_{\\rm DAPI}$ into $N$ decoupled subsystems, each associated with an eigenvalue $\\lambda_n$ of $L_B$, for $n = 1,\\ldots, N$. The {$\\mathcal{H}_2$ } norm of the subsystem corresponding to the zero mode vanishes. Therefore, the full system's squared {$\\mathcal{H}_2$ } norm becomes the sum of that of $N-1$ subsystems, as seen from Theorem~\\ref{lem:mainres}. The details of the derivation are outlined in the appendix. \n\\begin{theorem} \\label{lem:mainres} Under Assumptions (i)~-~(iii), \nthe squared {$\\mathcal{H}_2$ } norm of the input-output mapping $H_\\mathrm{std}$ is\n\n", "itemtype": "equation", "pos": 22951, "prevtext": "\nfor all $e_{ij} \\in \\mathcal{E}$. This implies $L_G= \\alpha L_B$.\n\\item \\emph{Communication network topology.} The topology of the communication network $\\mathcal{G}^{C}$ is identical to that of the physical network $\\mathcal{G}$. We also assume \n\n", "index": 33, "text": "\\begin{equation}\n\\label{eq:gammadef}\nL_C = \\gamma L_B,\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E19.m1\" class=\"ltx_Math\" alttext=\"L_{C}=\\gamma L_{B},\" display=\"block\"><mrow><mrow><msub><mi>L</mi><mi>C</mi></msub><mo>=</mo><mrow><mi>\u03b3</mi><mo>\u2062</mo><msub><mi>L</mi><mi>B</mi></msub></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\nThe corresponding norm of the mapping $H_\\mathrm{DAPI}$ is\n\n", "itemtype": "equation", "pos": 25584, "prevtext": "\ni.e., $\\gamma = \\frac{c_{ij}}{b_{ij}}$, with $\\gamma\\ge 0$, for all $e_{ij}\\in \\mathcal{E} = \\mathcal{E}^C$.\n\\end{enumerate}\nAssumption (ii), which is also applied in e.g. \\cite{LuChu2013, Dorfler2014}, can be motivated first by a uniformity in the physical line properties in a microgrid (i.e., materials and dimensions). Kron reduction of a network also increases its uniformity in node degrees \\cite{Motter2013}. This makes the line properties more uniform in an effective network model.\n\nAssumption (iii) implies that the secondary control layer is set up along the physical network lines, and is shown in \\cite{Andreasson2014ACC} to constitute a sufficient criterion for load sharing with minimized generation costs. For analytical tractability purposes, we also impose the assumption of uniform communication gains with respect to the line susceptances, so that $L_C = \\gamma L_B$. In Section~\\ref{sec:discussion}, we discuss possible implications of a relaxation of that assumption. \n\n\n\n\\subsection{Input-output analysis}\nThe susceptance matrix $L_B$ is a weighted graph Laplacian and as such, it has a well-known eigenvalue at zero with the associated eigenvector $\\mathbf{1} = (1,1,\\ldots,1)^T$, that is, $L_B\\mathbf{1} = 0$. The system matrices $A_{\\mathrm{std}}$ in \\eqref{eq:ssdroop} and $A_{\\mathrm{DAPI}}$ in \\eqref{eq:ssdapi} inherit this zero eigenvalue, which corresponds to a uniform drift of all phase angles $\\theta$. This mode is, however, unobservable from the outputs, keeping the systems $H_{\\rm std}$ and $H_{\\rm DAPI}$ input-output stable:\n\\begin{proposition}\n\\label{prop:stability}\nProvided $\\gamma,~m,~k,~\\tau > 0$ and that $\\mathcal{G}$ is connected, the mappings  $H_{\\rm std}$ and $H_{\\rm DAPI}$ from $w$ to $y$ are input-output stable and their {$\\mathcal{H}_2$ } norms are bounded.\n\\end{proposition}\n\\begin{proof}\nSee appendix.\n\\end{proof}\nThe derivation of our main result relies on a unitary state transformation which divides the systems $H_{\\rm std}$ and $H_{\\rm DAPI}$ into $N$ decoupled subsystems, each associated with an eigenvalue $\\lambda_n$ of $L_B$, for $n = 1,\\ldots, N$. The {$\\mathcal{H}_2$ } norm of the subsystem corresponding to the zero mode vanishes. Therefore, the full system's squared {$\\mathcal{H}_2$ } norm becomes the sum of that of $N-1$ subsystems, as seen from Theorem~\\ref{lem:mainres}. The details of the derivation are outlined in the appendix. \n\\begin{theorem} \\label{lem:mainres} Under Assumptions (i)~-~(iii), \nthe squared {$\\mathcal{H}_2$ } norm of the input-output mapping $H_\\mathrm{std}$ is\n\n", "index": 35, "text": "\\begin{equation}\n\\boxed{\n\\label{eq:stdnorm}\n||H_{\\mathrm{droop}}||_2^2 = \\frac{\\alpha}{2m}(N-1).}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E20.m1\" class=\"ltx_Math\" alttext=\"\\boxed{||H_{\\mathrm{droop}}||_{2}^{2}=\\frac{\\alpha}{2m}(N-1).}\" display=\"block\"><menclose notation=\"box\"><mrow><mo stretchy=\"false\">|</mo><mo stretchy=\"false\">|</mo><msub><mi>H</mi><mi>droop</mi></msub><mo stretchy=\"false\">|</mo><msubsup><mo stretchy=\"false\">|</mo><mn>2</mn><mn>2</mn></msubsup><mo>=</mo><mfrac><mi>\u03b1</mi><mrow><mn>2</mn><mo>\u2062</mo><mi>m</mi></mrow></mfrac><mrow><mo stretchy=\"false\">(</mo><mi>N</mi><mo>-</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><mo>.</mo></mrow></menclose></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\nThese expressions represent the expected power losses due to a white noise disturbance input $w$.\n\\end{theorem}\n\\begin{proof}\nSee appendix. \n\\end{proof}\n\nThe result in \\eqref{eq:stdnorm} is the same as was obtained for networks of synchronous generators in \\cite{BamiehGayme2013}, identifying the droop coefficient $m$ with the generator damping. In \\cite{Sjodin2014}, the result was shown also to hold for the performance of heterogeneous networks of both droop-controlled inverters, dynamic loads and synchronous generators. These power losses scale linearly with the number of nodes $N$, and seem to constitute a fundamental limitation to performance in networks where power flows are the mechanism by which the system regulates frequency \\cite{Tegling2014}. When a secondary control layer is added through the DAPI control, the losses still grow with the number of nodes, but they are smaller in absolute terms. Consider the following Corollary to Theorem~\\ref{lem:mainres}:\n\\begin{corollary}\nFor all $m,k, \\tau, \\gamma >0$, \n", "itemtype": "equation", "pos": 25756, "prevtext": "\nThe corresponding norm of the mapping $H_\\mathrm{DAPI}$ is\n\n", "index": 37, "text": "\\begin{equation}\n\\boxed{\n\\label{eq:dapinorm}\n||H_{\\mathrm{DAPI}}||_2^2 =  \\frac{\\alpha}{2m} \\sum_{n = 2}^N \\frac{1}{1+ \\frac{\\gamma \\tau \\lambda_n +k}{ \\gamma \\lambda_n (\\gamma \\tau \\lambda_n +k) + k^2m \\lambda_n }}.}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E21.m1\" class=\"ltx_Math\" alttext=\"\\boxed{||H_{\\mathrm{DAPI}}||_{2}^{2}=\\frac{\\alpha}{2m}\\sum_{n=2}^{N}\\frac{1}{1%&#10;+\\frac{\\gamma\\tau\\lambda_{n}+k}{\\gamma\\lambda_{n}(\\gamma\\tau\\lambda_{n}+k)+k^{%&#10;2}m\\lambda_{n}}}.}\" display=\"block\"><menclose notation=\"box\"><mrow><mo stretchy=\"false\">|</mo><mo stretchy=\"false\">|</mo><msub><mi>H</mi><mi>DAPI</mi></msub><mo stretchy=\"false\">|</mo><msubsup><mo stretchy=\"false\">|</mo><mn>2</mn><mn>2</mn></msubsup><mo>=</mo><mfrac><mi>\u03b1</mi><mrow><mn>2</mn><mo>\u2062</mo><mi>m</mi></mrow></mfrac><munderover><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>n</mi><mo>=</mo><mn>2</mn></mrow><mi>N</mi></munderover><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><mfrac><mrow><mrow><mi>\u03b3</mi><mo>\u2062</mo><mi>\u03c4</mi><mo>\u2062</mo><msub><mi>\u03bb</mi><mi>n</mi></msub></mrow><mo>+</mo><mi>k</mi></mrow><mrow><mrow><mi>\u03b3</mi><mo>\u2062</mo><msub><mi>\u03bb</mi><mi>n</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mrow><mi>\u03b3</mi><mo>\u2062</mo><mi>\u03c4</mi><mo>\u2062</mo><msub><mi>\u03bb</mi><mi>n</mi></msub></mrow><mo>+</mo><mi>k</mi></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>+</mo><mrow><msup><mi>k</mi><mn>2</mn></msup><mo>\u2062</mo><mi>m</mi><mo>\u2062</mo><msub><mi>\u03bb</mi><mi>n</mi></msub></mrow></mrow></mfrac></mrow></mfrac><mo>.</mo></mrow></menclose></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\ni.e., the expected power losses due to the disturbance $w$ are smaller with the DAPI control strategy than with the standard droop control.\n\\end{corollary}\n\\begin{proof}\nNotice that $1+ \\frac{\\gamma \\tau \\lambda_n +k}{ \\gamma \\lambda_n (\\gamma \\tau \\lambda_n +k) + k^2m \\lambda_n}>1$, since all terms are positive. Hence, $||H_{\\mathrm{DAPI}}||_2^2< \\frac{\\alpha}{2m} \\sum_{n = 2}^N 1 = \\frac{\\alpha}{2m}(N-1) = ||H_{\\mathrm{droop}}||_2^2 $.\n\\end{proof}\n\nWe note that the norms \\eqref{eq:stdnorm} and \\eqref{eq:dapinorm} both scale linearly with network's resistance-to-reactance ratio $\\alpha$, and hence that the ratio of the norms is independent of $\\alpha$. This suggests that, to first order, the relative performance improvement of distributed PI-control over droop control does not deteriorate as grid resistances increase. \n\\begin{figure}\n\\centering\n\\includegraphics[width = 0.5\\textwidth]{Figures/linecomplete}\n\\caption{{$\\mathcal{H}_2$ } norms in \\eqref{eq:stdnorm}~-~\\eqref{eq:dapinorm} for sample networks of size $N$ with line graph and complete graph topologies. Note that $||H_{\\rm std}||_2^2$ in \\eqref{eq:stdnorm} is topology-independent. Here, $k = \\gamma = m = 1$, and line susceptances $b_{ij}$ are uniformly distributed on two intervals of length 1 with mean $\\bar{b} = \\{1,2\\}$. Smaller $b_{ij}$ implies smaller eigenvalues of $L_B$, and thus smaller norms.  }\n\\label{fig:linecomplete}\n\\end{figure}\n\n\\subsection{Topology dependence of losses}\nIt is interesting to note that while the losses under standard droop control \\eqref{eq:stdnorm} are entirely independent of network topology, the losses that are incurred under DAPI control \\eqref{eq:dapinorm} depend on network topology through the eigenvalues $\\lambda_n$ of $L_B$. In fact, the expression is monotonically increasing in $\\lambda_n$, implying that losses grow with increasing network connectivity. {This in particular implies that the relative performance improvement of DAPI control over droop control will be largest for sparse network topologies, such as those found in standard distribution networks and microgrids.} The best performance can be expected to be achieved for a line graph topology. In Fig.~\\ref{fig:linecomplete} we compare such a topology to a complete graph with respect to the results in Theorem~\\ref{lem:mainres}. Although losses for both topologies grow with the network size, as discussed in the previous section, the comparison confirms the lower losses obtained in the line graph case.  \n\nThe fact that a loosely interconnected network may outperform a highly interconnected network by incurring smaller power losses in maintaining synchrony is surprising in light of typical notions of power system stability. For example, the connectivity of a network is directly related to its ability to synchronize \\cite{Dorfler2010,Pecora1998,Schiffer2014} as well as its damping and rate of convergence \\cite{Tang2011}. Our results show that, although additional network lines may improve phase coherence and stability, they also lead to additional power flows that incur losses. Hence, there is a trade-off between performance objectives.\n\n\n\n\n\n\n\n\\begin{figure}\n\\centering\n\\includegraphics[width = 0.48\\textwidth]{Figures/gamma}\n\\caption{{$\\mathcal{H}_2$ } norms in \\eqref{eq:dapinorm} as a function of $\\gamma$ for a complete graph with $N = 50$ nodes. Here, $k = m = 1$, and the filter time constant $\\tau \\in \\{0,1,4\\}$. For $\\tau = 0$, the system \\eqref{eq:ssdapi} reduces to a first order model, and the optimal $\\gamma^* = 0$.   }\n\\label{fig:gamma}\n\\end{figure}\n\n\\section{Control design for loss reduction }\n\\label{sec:analysis}\nIn the previous section, we established that the DAPI control strategy improves performance in terms of transient power losses for droop-controlled microgrids. In this section, we discuss tuning of the secondary control. That is, how should the integral action $k$ in \\eqref{eq:dapidyn} and the communication gain parameter $\\gamma$ in \\eqref{eq:gammadef} be chosen to minimize transient losses, with respect to a given droop-controlled network.  \n\n\n\n\\subsection{Communication gain}\nAs discussed in Section~\\ref{sec:setup}, distributed PI control requires a communication network through which inverters can communicate their secondary control variables $\\Omega_i$. \nWhile any non-zero gains $c_{ij}$ for the distributed averaging will guarantee that the control objectives are reached \\cite{SimpsonPorco2015}, an important control design question is how to choose these gains to optimize {the transient performance considered herein}. In our case, this choice is reflected through the communication gain ratio $\\gamma$ in \\eqref{eq:gammadef}.\n\n\\begin{figure*}[h]\n\\centering\n\\includegraphics[width = 0.95\\textwidth]{Figures/simulation2}\n\\caption{Simulation of the system \\eqref{eq:ssdapi} on a 20-node line network, with associated power losses \\eqref{eq:pwrloss}. Here, $m = k = \\tau = 1$ and $\\gamma = 0.1$ (upper panel) and $\\gamma = 10$ (lower panel). }\n\\label{fig:simulation}\n\\end{figure*}\n\nFig.~\\ref{fig:gamma} displays the transient power losses associated with the DAPI control, as given by \\eqref{eq:dapinorm}, as a function of $\\gamma$ for a sample network with a complete graph structure. As the figure indicates, it turns out that there exists a distinct optimal value for $\\gamma \\ge 0$:\n\\begin{lemma}\n\\label{lem:optimum}\nFor a given network with DAPI control \\eqref{eq:ssdapi} and under Assumptions (i)~-~(iii) of Section~\\ref{sec:eval}, there is a unique communication gain ratio $\\gamma^* $ which minimizes the {$\\mathcal{H}_2$ } norm of the system. \n\\end{lemma}\n\\begin{proof}\nThe optimum is given by the positive root of the equation $\\frac{\\rm d}{\\mathrm{d}\\gamma}||H_{\\rm DAPI}||_2^2 \\big|_{\\gamma = \\gamma^*} = 0$.  If there is no such root, $\\gamma^*=0$. The details are omitted due to space limitations.  \n\\end{proof}\nThe value of $\\gamma^*$ is strongly dependent on the network parameters, but once these are given, it is easy to find the optimal tuning. We note in particular, that in the idealized limit where the time constant $\\tau = 0$, we obtain a first order model (see Remark~\\ref{rem:1storder}), for which $\\gamma^* = 0$ minimizes losses. This means that if the dynamics of \\eqref{eq:dapidyn} are fast, small communication gains are recommended. If $\\gamma$ is set too large, the distributed averaging term of \\eqref{eq:dapidyn} converges too fast compared to the phase angles, and deteriorates the damping effect of the secondary control. A simulation of this case is shown in Fig.~\\ref{fig:simulation}.\n\nFor complete graphs, the potential for performance improvement is smaller than for more sparsely connected networks. An optimized controller tuning is therefore particularly relevant. For this case, we provide a closed-form expression for $\\gamma^*$:\n\\begin{corollary}\n\\label{lem:completeoptimum}\nIf the graph underlying the network $\\mathcal{G}$ is complete and the line susceptances $b_{ij} = b$ for all $e_{ij} \\in \\mathcal{E}$, then $\\gamma^*$ is given by\n\n", "itemtype": "equation", "pos": 27018, "prevtext": "\nThese expressions represent the expected power losses due to a white noise disturbance input $w$.\n\\end{theorem}\n\\begin{proof}\nSee appendix. \n\\end{proof}\n\nThe result in \\eqref{eq:stdnorm} is the same as was obtained for networks of synchronous generators in \\cite{BamiehGayme2013}, identifying the droop coefficient $m$ with the generator damping. In \\cite{Sjodin2014}, the result was shown also to hold for the performance of heterogeneous networks of both droop-controlled inverters, dynamic loads and synchronous generators. These power losses scale linearly with the number of nodes $N$, and seem to constitute a fundamental limitation to performance in networks where power flows are the mechanism by which the system regulates frequency \\cite{Tegling2014}. When a secondary control layer is added through the DAPI control, the losses still grow with the number of nodes, but they are smaller in absolute terms. Consider the following Corollary to Theorem~\\ref{lem:mainres}:\n\\begin{corollary}\nFor all $m,k, \\tau, \\gamma >0$, \n", "index": 39, "text": "\n\\[\n||H_{\\mathrm{DAPI}}||_2^2 < ||H_{\\mathrm{droop}}||_2^2 ,\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex4.m1\" class=\"ltx_Math\" alttext=\"||H_{\\mathrm{DAPI}}||_{2}^{2}&lt;||H_{\\mathrm{droop}}||_{2}^{2},\" display=\"block\"><mrow><mrow><msubsup><mrow><mo fence=\"true\">||</mo><msub><mi>H</mi><mi>DAPI</mi></msub><mo fence=\"true\">||</mo></mrow><mn>2</mn><mn>2</mn></msubsup><mo>&lt;</mo><msubsup><mrow><mo fence=\"true\">||</mo><msub><mi>H</mi><mi>droop</mi></msub><mo fence=\"true\">||</mo></mrow><mn>2</mn><mn>2</mn></msubsup></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\nfor $Nb m \\tau>1$. Otherwise, $\\gamma^* = 0$\n\\end{corollary}\n\\begin{proof}\nWhen edge weights $b$ are uniform, the $N-1$ non-zero eigenvalues of the complete graph Laplacian $L_B \\in \\mathbb{R}^{N\\times N}$ are all given by $Nb$. It then suffices to evaluate $\\frac{\\mathrm{d}}{\\mathrm{d}\\gamma}\\frac{1}{1+ \\frac{\\gamma \\tau Nb +k}{ \\gamma Nb (\\gamma \\tau Nb +k) + k^2m Nb}} = 0 $ and the result follows. \n\\end{proof}\n\n\n\n\\subsection{Integral action}\nIn the limit where $k \\rightarrow \\infty$ the integral action in the DAPI control \\eqref{eq:dapidyn} vanishes and the standard droop control dynamics \\eqref{eq:droopdyn} are retrieved, with the associated performance given by \\eqref{eq:stdnorm}. It is then easy to show based on \\eqref{eq:dapinorm} that as $k$ decreases, losses are reduced monotonically and at an increasing rate. In the theoretical limit of an infinitely large integral gain, where $k = 0$, the system can become arbitrarily well damped and losses minimized. Fig.~\\ref{fig:kgamma} displays the relative performance improvement achieved through the DAPI strategy as a function of $k$, for a hypothetical network based on the IEEE 57-bus benchmark system topology \\cite{testarchive}.\n\nOur results also indicate that with a decreasing integral action ($1/k$), the importance of the distributed averaging term in \\eqref{eq:dapidyn} increases. That is, the optimal communication gain given by $\\gamma^*$ grows. For a complete graph with uniform edge weights, this relationship is linear, according to Corollary~\\ref{lem:completeoptimum}. For general network topologies, the relationship between $k$ and $\\gamma^*$ is well approximated by a linear function as in Fig.~4, but we defer a detailed discussion to future work. \n\n\\begin{figure}\n\\centering\n\\includegraphics[width = 0.5\\textwidth]{Figures/kgamma}\n\\caption{Relative loss reduction with DAPI control for a test network based on the IEEE 57 bus benchmark system topology, at the optimal communication gain ratio $\\gamma^*$, as function of integral action $k$. Here, $m = \\tau = 1$.  }\n\\label{fig:kgamma}\n\\end{figure}\n\n\n\\section{Discussion}\n\\label{sec:discussion}\nIn this paper, we have evaluated transient performance of an inverter-based microgrid in terms of the power losses incurred in regulating the frequency to a synchronous state after a disturbance, or in maintaining this state under persistent small disturbances. We compared two control strategies: the standard frequency droop controller and a distributed averaging PI (DAPI) controller and found that the latter has the potential to significantly reduce the transient power losses. This relative performance improvement compared to droop control is largest for sparse network topologies, such as those found in standard distribution networks and microgrids.  \n\nThis result is in sharp contrast to both previous results in \\cite{BamiehGayme2013,Sjodin2014,Tegling2014}, where transient power losses were shown to be independent of network connectivity, as well as to standard notions of power system stability, which typically predict highly interconnected networks to have better performance. The apparent reason for our results is the self-damping terms $-\\omega_i + \\omega^*$ added to the consensus dynamics in \\eqref{eq:Omegadapi}. These terms attenuate disturbances independently of the power flows. Increasing connectivity by introducing more lines generates more power flows, which do not affect the self damping, but increase losses.  \n\nIt is important to note, however, that the losses' scaling with the size of the network remains unchanged by the DAPI strategy, and seems to be a fundamental performance limit in systems where differences in active power flow are the mechanism by which the system regulates frequency, see \\cite{Tegling2014}. Therefore, even though transient power losses typically represent a small percentage of the  total power flow, our results indicate that they may become significant when power networks become increasingly distributed and the number of generators grows. Since DAPI control both reduces transient losses and eliminates control errors, our results provide additional arguments in favor of distributed algorithms for secondary frequency control in microgrids.\n\nWe also derived results on optimal tuning of the DAPI controller for loss reduction. In particular, the distributed averaging term of \\eqref{eq:dapidyn}: $\\sum_{j \\in \\mathcal{N}^C_i} c_{ij}(\\Omega_i - \\Omega_j)$ should be tuned such that $c_{ij} = \\gamma^*b_{ij}$, where $b_{ij}$ is the line susceptance and $\\gamma^*$ is a unique positive optimizer. Too large communication gains $c_{ij}$ cause a too strong reliance on the distributed averaging in relation to the integral control, which deteriorates damping and increases losses. In the present work, we made the restrictive assumption that the graph topology for the distributed averaging follows that of the physical network, and found controller tunings that minimize losses. With more degrees of freedom, we conjecture that losses can be even further reduced by judicious control design. An important direction for future work is therefore to find an optimal topology configuration of the communication network. \n\n\n\n\nWe would like to thank Bassam Bamieh (UCSB) and Dennice Gayme (the Johns Hopkins University) for their many insightful comments and several interesting discussions. Funding support from the Swedish Research Council through grant 2013-5523 and the Swedish Foundation for Strategic Research through the project ICT-Psi is also gratefully acknowledged.\n\\section*{Appendix}\n\\subsection{Proof of Proposition~\\ref{prop:stability} and Theorem~\\ref{lem:mainres} }\nWe follow the approach in \\cite{BamiehGayme2013} and transform the state vectors of $H_{\\mathrm{std}}$ and $H_{\\mathrm{DAPI}}$ so that: $\\theta = U\\hat{\\theta}$, $\\omega = U\\hat{\\omega}$ and $\\Omega = U \\hat{\\Omega}$. Let $U$ be the unitary matrix which diagonalizes $L_B$. That is, $L_B = U^*\\Lambda_B U$ with  $\\Lambda_B = \\mathrm{diag}\\{\\lambda_1, \\lambda_2, \\ldots, \\lambda_N\\}$. Note that by assumptions (ii)~-~(iii), $L_B,~L_C$ and $L_G^{1/2}$ are simultaneously diagonalizable, so $U^*L_CU = \\gamma \\Lambda_B$ and $U^*L_G^{1/2}U = \\sqrt{\\alpha} \\Lambda_B^{1/2}$. Given that the {$\\mathcal{H}_2$ } norm is unitarily invariant, we can also define $\\hat{y} = U^*y$ and $\\hat{w} = U^*w$. \n\nThrough these transformations, we obtain the systems $\\hat{H}_{\\mathrm{std}}$ and $\\hat{H}_{\\mathrm{DAPI}}$ in which all blocks have been diagonalized. They thus each represent $N$ decoupled subsystems:\n\n\\noindent \\textit{Standard droop control:}\n\n", "itemtype": "equation", "pos": 34113, "prevtext": "\ni.e., the expected power losses due to the disturbance $w$ are smaller with the DAPI control strategy than with the standard droop control.\n\\end{corollary}\n\\begin{proof}\nNotice that $1+ \\frac{\\gamma \\tau \\lambda_n +k}{ \\gamma \\lambda_n (\\gamma \\tau \\lambda_n +k) + k^2m \\lambda_n}>1$, since all terms are positive. Hence, $||H_{\\mathrm{DAPI}}||_2^2< \\frac{\\alpha}{2m} \\sum_{n = 2}^N 1 = \\frac{\\alpha}{2m}(N-1) = ||H_{\\mathrm{droop}}||_2^2 $.\n\\end{proof}\n\nWe note that the norms \\eqref{eq:stdnorm} and \\eqref{eq:dapinorm} both scale linearly with network's resistance-to-reactance ratio $\\alpha$, and hence that the ratio of the norms is independent of $\\alpha$. This suggests that, to first order, the relative performance improvement of distributed PI-control over droop control does not deteriorate as grid resistances increase. \n\\begin{figure}\n\\centering\n\\includegraphics[width = 0.5\\textwidth]{Figures/linecomplete}\n\\caption{{$\\mathcal{H}_2$ } norms in \\eqref{eq:stdnorm}~-~\\eqref{eq:dapinorm} for sample networks of size $N$ with line graph and complete graph topologies. Note that $||H_{\\rm std}||_2^2$ in \\eqref{eq:stdnorm} is topology-independent. Here, $k = \\gamma = m = 1$, and line susceptances $b_{ij}$ are uniformly distributed on two intervals of length 1 with mean $\\bar{b} = \\{1,2\\}$. Smaller $b_{ij}$ implies smaller eigenvalues of $L_B$, and thus smaller norms.  }\n\\label{fig:linecomplete}\n\\end{figure}\n\n\\subsection{Topology dependence of losses}\nIt is interesting to note that while the losses under standard droop control \\eqref{eq:stdnorm} are entirely independent of network topology, the losses that are incurred under DAPI control \\eqref{eq:dapinorm} depend on network topology through the eigenvalues $\\lambda_n$ of $L_B$. In fact, the expression is monotonically increasing in $\\lambda_n$, implying that losses grow with increasing network connectivity. {This in particular implies that the relative performance improvement of DAPI control over droop control will be largest for sparse network topologies, such as those found in standard distribution networks and microgrids.} The best performance can be expected to be achieved for a line graph topology. In Fig.~\\ref{fig:linecomplete} we compare such a topology to a complete graph with respect to the results in Theorem~\\ref{lem:mainres}. Although losses for both topologies grow with the network size, as discussed in the previous section, the comparison confirms the lower losses obtained in the line graph case.  \n\nThe fact that a loosely interconnected network may outperform a highly interconnected network by incurring smaller power losses in maintaining synchrony is surprising in light of typical notions of power system stability. For example, the connectivity of a network is directly related to its ability to synchronize \\cite{Dorfler2010,Pecora1998,Schiffer2014} as well as its damping and rate of convergence \\cite{Tang2011}. Our results show that, although additional network lines may improve phase coherence and stability, they also lead to additional power flows that incur losses. Hence, there is a trade-off between performance objectives.\n\n\n\n\n\n\n\n\\begin{figure}\n\\centering\n\\includegraphics[width = 0.48\\textwidth]{Figures/gamma}\n\\caption{{$\\mathcal{H}_2$ } norms in \\eqref{eq:dapinorm} as a function of $\\gamma$ for a complete graph with $N = 50$ nodes. Here, $k = m = 1$, and the filter time constant $\\tau \\in \\{0,1,4\\}$. For $\\tau = 0$, the system \\eqref{eq:ssdapi} reduces to a first order model, and the optimal $\\gamma^* = 0$.   }\n\\label{fig:gamma}\n\\end{figure}\n\n\\section{Control design for loss reduction }\n\\label{sec:analysis}\nIn the previous section, we established that the DAPI control strategy improves performance in terms of transient power losses for droop-controlled microgrids. In this section, we discuss tuning of the secondary control. That is, how should the integral action $k$ in \\eqref{eq:dapidyn} and the communication gain parameter $\\gamma$ in \\eqref{eq:gammadef} be chosen to minimize transient losses, with respect to a given droop-controlled network.  \n\n\n\n\\subsection{Communication gain}\nAs discussed in Section~\\ref{sec:setup}, distributed PI control requires a communication network through which inverters can communicate their secondary control variables $\\Omega_i$. \nWhile any non-zero gains $c_{ij}$ for the distributed averaging will guarantee that the control objectives are reached \\cite{SimpsonPorco2015}, an important control design question is how to choose these gains to optimize {the transient performance considered herein}. In our case, this choice is reflected through the communication gain ratio $\\gamma$ in \\eqref{eq:gammadef}.\n\n\\begin{figure*}[h]\n\\centering\n\\includegraphics[width = 0.95\\textwidth]{Figures/simulation2}\n\\caption{Simulation of the system \\eqref{eq:ssdapi} on a 20-node line network, with associated power losses \\eqref{eq:pwrloss}. Here, $m = k = \\tau = 1$ and $\\gamma = 0.1$ (upper panel) and $\\gamma = 10$ (lower panel). }\n\\label{fig:simulation}\n\\end{figure*}\n\nFig.~\\ref{fig:gamma} displays the transient power losses associated with the DAPI control, as given by \\eqref{eq:dapinorm}, as a function of $\\gamma$ for a sample network with a complete graph structure. As the figure indicates, it turns out that there exists a distinct optimal value for $\\gamma \\ge 0$:\n\\begin{lemma}\n\\label{lem:optimum}\nFor a given network with DAPI control \\eqref{eq:ssdapi} and under Assumptions (i)~-~(iii) of Section~\\ref{sec:eval}, there is a unique communication gain ratio $\\gamma^* $ which minimizes the {$\\mathcal{H}_2$ } norm of the system. \n\\end{lemma}\n\\begin{proof}\nThe optimum is given by the positive root of the equation $\\frac{\\rm d}{\\mathrm{d}\\gamma}||H_{\\rm DAPI}||_2^2 \\big|_{\\gamma = \\gamma^*} = 0$.  If there is no such root, $\\gamma^*=0$. The details are omitted due to space limitations.  \n\\end{proof}\nThe value of $\\gamma^*$ is strongly dependent on the network parameters, but once these are given, it is easy to find the optimal tuning. We note in particular, that in the idealized limit where the time constant $\\tau = 0$, we obtain a first order model (see Remark~\\ref{rem:1storder}), for which $\\gamma^* = 0$ minimizes losses. This means that if the dynamics of \\eqref{eq:dapidyn} are fast, small communication gains are recommended. If $\\gamma$ is set too large, the distributed averaging term of \\eqref{eq:dapidyn} converges too fast compared to the phase angles, and deteriorates the damping effect of the secondary control. A simulation of this case is shown in Fig.~\\ref{fig:simulation}.\n\nFor complete graphs, the potential for performance improvement is smaller than for more sparsely connected networks. An optimized controller tuning is therefore particularly relevant. For this case, we provide a closed-form expression for $\\gamma^*$:\n\\begin{corollary}\n\\label{lem:completeoptimum}\nIf the graph underlying the network $\\mathcal{G}$ is complete and the line susceptances $b_{ij} = b$ for all $e_{ij} \\in \\mathcal{E}$, then $\\gamma^*$ is given by\n\n", "index": 41, "text": "\\begin{equation}\n\\label{eq:optimalcomplete}\n\\gamma^* = \\frac{k}{Nb\\tau}\\left( \\sqrt{Nb m \\tau } -1 \\right)\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E22.m1\" class=\"ltx_Math\" alttext=\"\\gamma^{*}=\\frac{k}{Nb\\tau}\\left(\\sqrt{Nbm\\tau}-1\\right)\" display=\"block\"><mrow><msup><mi>\u03b3</mi><mo>*</mo></msup><mo>=</mo><mrow><mfrac><mi>k</mi><mrow><mi>N</mi><mo>\u2062</mo><mi>b</mi><mo>\u2062</mo><mi>\u03c4</mi></mrow></mfrac><mo>\u2062</mo><mrow><mo>(</mo><mrow><msqrt><mrow><mi>N</mi><mo>\u2062</mo><mi>b</mi><mo>\u2062</mo><mi>m</mi><mo>\u2062</mo><mi>\u03c4</mi></mrow></msqrt><mo>-</mo><mn>1</mn></mrow><mo>)</mo></mrow></mrow></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\n\n\\noindent \\textit{DAPI control:}\n\n", "itemtype": "equation", "pos": 40848, "prevtext": "\nfor $Nb m \\tau>1$. Otherwise, $\\gamma^* = 0$\n\\end{corollary}\n\\begin{proof}\nWhen edge weights $b$ are uniform, the $N-1$ non-zero eigenvalues of the complete graph Laplacian $L_B \\in \\mathbb{R}^{N\\times N}$ are all given by $Nb$. It then suffices to evaluate $\\frac{\\mathrm{d}}{\\mathrm{d}\\gamma}\\frac{1}{1+ \\frac{\\gamma \\tau Nb +k}{ \\gamma Nb (\\gamma \\tau Nb +k) + k^2m Nb}} = 0 $ and the result follows. \n\\end{proof}\n\n\n\n\\subsection{Integral action}\nIn the limit where $k \\rightarrow \\infty$ the integral action in the DAPI control \\eqref{eq:dapidyn} vanishes and the standard droop control dynamics \\eqref{eq:droopdyn} are retrieved, with the associated performance given by \\eqref{eq:stdnorm}. It is then easy to show based on \\eqref{eq:dapinorm} that as $k$ decreases, losses are reduced monotonically and at an increasing rate. In the theoretical limit of an infinitely large integral gain, where $k = 0$, the system can become arbitrarily well damped and losses minimized. Fig.~\\ref{fig:kgamma} displays the relative performance improvement achieved through the DAPI strategy as a function of $k$, for a hypothetical network based on the IEEE 57-bus benchmark system topology \\cite{testarchive}.\n\nOur results also indicate that with a decreasing integral action ($1/k$), the importance of the distributed averaging term in \\eqref{eq:dapidyn} increases. That is, the optimal communication gain given by $\\gamma^*$ grows. For a complete graph with uniform edge weights, this relationship is linear, according to Corollary~\\ref{lem:completeoptimum}. For general network topologies, the relationship between $k$ and $\\gamma^*$ is well approximated by a linear function as in Fig.~4, but we defer a detailed discussion to future work. \n\n\\begin{figure}\n\\centering\n\\includegraphics[width = 0.5\\textwidth]{Figures/kgamma}\n\\caption{Relative loss reduction with DAPI control for a test network based on the IEEE 57 bus benchmark system topology, at the optimal communication gain ratio $\\gamma^*$, as function of integral action $k$. Here, $m = \\tau = 1$.  }\n\\label{fig:kgamma}\n\\end{figure}\n\n\n\\section{Discussion}\n\\label{sec:discussion}\nIn this paper, we have evaluated transient performance of an inverter-based microgrid in terms of the power losses incurred in regulating the frequency to a synchronous state after a disturbance, or in maintaining this state under persistent small disturbances. We compared two control strategies: the standard frequency droop controller and a distributed averaging PI (DAPI) controller and found that the latter has the potential to significantly reduce the transient power losses. This relative performance improvement compared to droop control is largest for sparse network topologies, such as those found in standard distribution networks and microgrids.  \n\nThis result is in sharp contrast to both previous results in \\cite{BamiehGayme2013,Sjodin2014,Tegling2014}, where transient power losses were shown to be independent of network connectivity, as well as to standard notions of power system stability, which typically predict highly interconnected networks to have better performance. The apparent reason for our results is the self-damping terms $-\\omega_i + \\omega^*$ added to the consensus dynamics in \\eqref{eq:Omegadapi}. These terms attenuate disturbances independently of the power flows. Increasing connectivity by introducing more lines generates more power flows, which do not affect the self damping, but increase losses.  \n\nIt is important to note, however, that the losses' scaling with the size of the network remains unchanged by the DAPI strategy, and seems to be a fundamental performance limit in systems where differences in active power flow are the mechanism by which the system regulates frequency, see \\cite{Tegling2014}. Therefore, even though transient power losses typically represent a small percentage of the  total power flow, our results indicate that they may become significant when power networks become increasingly distributed and the number of generators grows. Since DAPI control both reduces transient losses and eliminates control errors, our results provide additional arguments in favor of distributed algorithms for secondary frequency control in microgrids.\n\nWe also derived results on optimal tuning of the DAPI controller for loss reduction. In particular, the distributed averaging term of \\eqref{eq:dapidyn}: $\\sum_{j \\in \\mathcal{N}^C_i} c_{ij}(\\Omega_i - \\Omega_j)$ should be tuned such that $c_{ij} = \\gamma^*b_{ij}$, where $b_{ij}$ is the line susceptance and $\\gamma^*$ is a unique positive optimizer. Too large communication gains $c_{ij}$ cause a too strong reliance on the distributed averaging in relation to the integral control, which deteriorates damping and increases losses. In the present work, we made the restrictive assumption that the graph topology for the distributed averaging follows that of the physical network, and found controller tunings that minimize losses. With more degrees of freedom, we conjecture that losses can be even further reduced by judicious control design. An important direction for future work is therefore to find an optimal topology configuration of the communication network. \n\n\n\n\nWe would like to thank Bassam Bamieh (UCSB) and Dennice Gayme (the Johns Hopkins University) for their many insightful comments and several interesting discussions. Funding support from the Swedish Research Council through grant 2013-5523 and the Swedish Foundation for Strategic Research through the project ICT-Psi is also gratefully acknowledged.\n\\section*{Appendix}\n\\subsection{Proof of Proposition~\\ref{prop:stability} and Theorem~\\ref{lem:mainres} }\nWe follow the approach in \\cite{BamiehGayme2013} and transform the state vectors of $H_{\\mathrm{std}}$ and $H_{\\mathrm{DAPI}}$ so that: $\\theta = U\\hat{\\theta}$, $\\omega = U\\hat{\\omega}$ and $\\Omega = U \\hat{\\Omega}$. Let $U$ be the unitary matrix which diagonalizes $L_B$. That is, $L_B = U^*\\Lambda_B U$ with  $\\Lambda_B = \\mathrm{diag}\\{\\lambda_1, \\lambda_2, \\ldots, \\lambda_N\\}$. Note that by assumptions (ii)~-~(iii), $L_B,~L_C$ and $L_G^{1/2}$ are simultaneously diagonalizable, so $U^*L_CU = \\gamma \\Lambda_B$ and $U^*L_G^{1/2}U = \\sqrt{\\alpha} \\Lambda_B^{1/2}$. Given that the {$\\mathcal{H}_2$ } norm is unitarily invariant, we can also define $\\hat{y} = U^*y$ and $\\hat{w} = U^*w$. \n\nThrough these transformations, we obtain the systems $\\hat{H}_{\\mathrm{std}}$ and $\\hat{H}_{\\mathrm{DAPI}}$ in which all blocks have been diagonalized. They thus each represent $N$ decoupled subsystems:\n\n\\noindent \\textit{Standard droop control:}\n\n", "index": 43, "text": "\\begin{align} \\nonumber\n\\begin{bmatrix}\n\\dot{\\hat{\\theta}}_n \\\\ \\dot{\\hat{\\omega}}_n \n\\end{bmatrix} =& \\begin{bmatrix}\n0 & 1 \\\\ -\\frac{m}{\\tau} \\lambda_n & -\\frac{1}{\\tau}\n\\end{bmatrix} \\begin{bmatrix}\n\\hat{\\theta}_n \\\\ \\hat{\\omega}_n\n\\end{bmatrix} +\\begin{bmatrix}\n0 \\\\ \\frac{1}{\\tau}\n\\end{bmatrix}\\hat{w}_n \\\\ \\label{eq:subsysdroop}\n& =: \\hat{A}_{\\mathrm{std},n} \\hat{\\psi}_{\\mathrm{std},n} + \\hat{B}_{\\mathrm{std},n}\\hat{w}_n \\\\\n\\nonumber  \\hat{y}_n =& \\sqrt{\\alpha \\lambda_n} \\begin{bmatrix}\n1 & 0 \n\\end{bmatrix} \\begin{bmatrix}\n\\hat{\\theta}_n \\\\ \\hat{\\omega}_n\n\\end{bmatrix} = : \\hat{C}_{\\mathrm{std},n} \\hat{\\psi}_{\\mathrm{std},n}. \n\\end{align}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex5.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle\\begin{bmatrix}\\dot{\\hat{\\theta}}_{n}\\\\&#10;\\dot{\\hat{\\omega}}_{n}\\end{bmatrix}=\" display=\"inline\"><mrow><mrow><mo>[</mo><mtable rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><msub><mover accent=\"true\"><mover accent=\"true\"><mi>\u03b8</mi><mo stretchy=\"false\">^</mo></mover><mo>\u02d9</mo></mover><mi>n</mi></msub></mtd></mtr><mtr><mtd columnalign=\"center\"><msub><mover accent=\"true\"><mover accent=\"true\"><mi>\u03c9</mi><mo stretchy=\"false\">^</mo></mover><mo>\u02d9</mo></mover><mi>n</mi></msub></mtd></mtr></mtable><mo>]</mo></mrow><mo>=</mo><mi/></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex5.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle\\begin{bmatrix}0&amp;1\\\\&#10;-\\frac{m}{\\tau}\\lambda_{n}&amp;-\\frac{1}{\\tau}\\end{bmatrix}\\begin{bmatrix}\\hat{%&#10;\\theta}_{n}\\\\&#10;\\hat{\\omega}_{n}\\end{bmatrix}+\\begin{bmatrix}0\\\\&#10;\\frac{1}{\\tau}\\end{bmatrix}\\hat{w}_{n}\" display=\"inline\"><mrow><mrow><mrow><mo>[</mo><mtable columnspacing=\"5pt\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>1</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><mrow><mo>-</mo><mrow><mfrac><mi>m</mi><mi>\u03c4</mi></mfrac><mo>\u2062</mo><msub><mi>\u03bb</mi><mi>n</mi></msub></mrow></mrow></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><mfrac><mn>1</mn><mi>\u03c4</mi></mfrac></mrow></mtd></mtr></mtable><mo>]</mo></mrow><mo>\u2062</mo><mrow><mo>[</mo><mtable rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><msub><mover accent=\"true\"><mi>\u03b8</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi></msub></mtd></mtr><mtr><mtd columnalign=\"center\"><msub><mover accent=\"true\"><mi>\u03c9</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi></msub></mtd></mtr></mtable><mo>]</mo></mrow></mrow><mo>+</mo><mrow><mrow><mo>[</mo><mtable rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><mfrac><mn>1</mn><mi>\u03c4</mi></mfrac></mtd></mtr></mtable><mo>]</mo></mrow><mo>\u2062</mo><msub><mover accent=\"true\"><mi>w</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi></msub></mrow></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E23.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle=:\\hat{A}_{\\mathrm{std},n}\\hat{\\psi}_{\\mathrm{std},n}+\\hat{B}_{%&#10;\\mathrm{std},n}\\hat{w}_{n}\" display=\"inline\"><mrow><mo>=</mo><mo>:</mo><msub><mover accent=\"true\"><mi>A</mi><mo stretchy=\"false\">^</mo></mover><mrow><mi>std</mi><mo>,</mo><mi>n</mi></mrow></msub><msub><mover accent=\"true\"><mi>\u03c8</mi><mo stretchy=\"false\">^</mo></mover><mrow><mi>std</mi><mo>,</mo><mi>n</mi></mrow></msub><mo>+</mo><msub><mover accent=\"true\"><mi>B</mi><mo stretchy=\"false\">^</mo></mover><mrow><mi>std</mi><mo>,</mo><mi>n</mi></mrow></msub><msub><mover accent=\"true\"><mi>w</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi></msub></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex6.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle\\hat{y}_{n}=\" display=\"inline\"><mrow><msub><mover accent=\"true\"><mi>y</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi></msub><mo>=</mo><mi/></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex6.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle\\sqrt{\\alpha\\lambda_{n}}\\begin{bmatrix}1&amp;0\\end{bmatrix}\\begin{%&#10;bmatrix}\\hat{\\theta}_{n}\\\\&#10;\\hat{\\omega}_{n}\\end{bmatrix}=:\\hat{C}_{\\mathrm{std},n}\\hat{\\psi}_{\\mathrm{std%&#10;},n}.\" display=\"inline\"><mrow><msqrt><mrow><mi>\u03b1</mi><mo>\u2062</mo><msub><mi>\u03bb</mi><mi>n</mi></msub></mrow></msqrt><mrow><mo>[</mo><mtable columnspacing=\"5pt\"><mtr><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr></mtable><mo>]</mo></mrow><mrow><mo>[</mo><mtable rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><msub><mover accent=\"true\"><mi>\u03b8</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi></msub></mtd></mtr><mtr><mtd columnalign=\"center\"><msub><mover accent=\"true\"><mi>\u03c9</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi></msub></mtd></mtr></mtable><mo>]</mo></mrow><mo>=</mo><mo>:</mo><msub><mover accent=\"true\"><mi>C</mi><mo stretchy=\"false\">^</mo></mover><mrow><mi>std</mi><mo>,</mo><mi>n</mi></mrow></msub><msub><mover accent=\"true\"><mi>\u03c8</mi><mo stretchy=\"false\">^</mo></mover><mrow><mi>std</mi><mo>,</mo><mi>n</mi></mrow></msub><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\n\nTo verify that all system eigenvalues are in the left half of the complex plane with the exception of the zero eigenvalue associated with $\\lambda_1 = 0$,  it suffices to consider the characteristic equations of $\\hat{A}_{\\rm{std},n}$ and $\\hat{A}_{\\rm{DAPI},n}$ respectively. The $2N-1$ nonzero eigenvalues $z$ of $A_{\\rm std}$ are given by:\n", "itemtype": "equation", "pos": 41533, "prevtext": "\n\n\\noindent \\textit{DAPI control:}\n\n", "index": 45, "text": "\\begin{align} \\nonumber\n\\begin{bmatrix}\n\\dot{\\hat{\\theta}}_n \\\\ \\dot{\\hat{\\omega}}_n \\\\ \\dot{\\hat{\\Omega}}_n\n\\end{bmatrix} =& \\begin{bmatrix}\n0 & 1 & 0 \\\\ -\\frac{m}{\\tau} \\lambda_n & -\\frac{1}{\\tau} & -\\frac{1}{\\tau}\\\\ \n0 & -\\frac{1}{k} & - \\frac{1}{k}\\gamma \\lambda_n\n\\end{bmatrix} \\begin{bmatrix}\n\\hat{\\theta}_n \\\\ \\hat{\\omega}_n\\\\\\hat{\\Omega}_n\n\\end{bmatrix} +\\begin{bmatrix}\n0 \\\\ \\frac{1}{\\tau} \\\\ 0\n\\end{bmatrix}\\hat{w}_n \\\\ \\label{eq:subsysdapi}\n& =: \\hat{A}_{\\mathrm{DAPI},n} \\hat{\\psi}_{\\mathrm{DAPI},n} + \\hat{B}_{\\mathrm{DAPI},n}\\hat{w}_n \\\\\n\\nonumber  \\hat{y}_n =& \\sqrt{\\alpha \\lambda_n} \\begin{bmatrix}\n1 & 0 & 0 \n\\end{bmatrix} \\begin{bmatrix}\n\\hat{\\theta}_n \\\\ \\hat{\\omega}_n \\\\ \\hat{\\Omega}_n\n\\end{bmatrix} = : \\hat{C}_{\\mathrm{std},n} \\hat{\\psi}_{\\mathrm{std},n}. \n\\end{align}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex7.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle\\begin{bmatrix}\\dot{\\hat{\\theta}}_{n}\\\\&#10;\\dot{\\hat{\\omega}}_{n}\\\\&#10;\\dot{\\hat{\\Omega}}_{n}\\end{bmatrix}=\" display=\"inline\"><mrow><mrow><mo>[</mo><mtable rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><msub><mover accent=\"true\"><mover accent=\"true\"><mi>\u03b8</mi><mo stretchy=\"false\">^</mo></mover><mo>\u02d9</mo></mover><mi>n</mi></msub></mtd></mtr><mtr><mtd columnalign=\"center\"><msub><mover accent=\"true\"><mover accent=\"true\"><mi>\u03c9</mi><mo stretchy=\"false\">^</mo></mover><mo>\u02d9</mo></mover><mi>n</mi></msub></mtd></mtr><mtr><mtd columnalign=\"center\"><msub><mover accent=\"true\"><mover accent=\"true\"><mi mathvariant=\"normal\">\u03a9</mi><mo stretchy=\"false\">^</mo></mover><mo>\u02d9</mo></mover><mi>n</mi></msub></mtd></mtr></mtable><mo>]</mo></mrow><mo>=</mo><mi/></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex7.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle\\begin{bmatrix}0&amp;1&amp;0\\\\&#10;-\\frac{m}{\\tau}\\lambda_{n}&amp;-\\frac{1}{\\tau}&amp;-\\frac{1}{\\tau}\\\\&#10;0&amp;-\\frac{1}{k}&amp;-\\frac{1}{k}\\gamma\\lambda_{n}\\end{bmatrix}\\begin{bmatrix}\\hat{%&#10;\\theta}_{n}\\\\&#10;\\hat{\\omega}_{n}\\\\&#10;\\hat{\\Omega}_{n}\\end{bmatrix}+\\begin{bmatrix}0\\\\&#10;\\frac{1}{\\tau}\\\\&#10;0\\end{bmatrix}\\hat{w}_{n}\" display=\"inline\"><mrow><mrow><mrow><mo>[</mo><mtable columnspacing=\"5pt\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><mrow><mo>-</mo><mrow><mfrac><mi>m</mi><mi>\u03c4</mi></mfrac><mo>\u2062</mo><msub><mi>\u03bb</mi><mi>n</mi></msub></mrow></mrow></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><mfrac><mn>1</mn><mi>\u03c4</mi></mfrac></mrow></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><mfrac><mn>1</mn><mi>\u03c4</mi></mfrac></mrow></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><mfrac><mn>1</mn><mi>k</mi></mfrac></mrow></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><mrow><mfrac><mn>1</mn><mi>k</mi></mfrac><mo>\u2062</mo><mi>\u03b3</mi><mo>\u2062</mo><msub><mi>\u03bb</mi><mi>n</mi></msub></mrow></mrow></mtd></mtr></mtable><mo>]</mo></mrow><mo>\u2062</mo><mrow><mo>[</mo><mtable rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><msub><mover accent=\"true\"><mi>\u03b8</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi></msub></mtd></mtr><mtr><mtd columnalign=\"center\"><msub><mover accent=\"true\"><mi>\u03c9</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi></msub></mtd></mtr><mtr><mtd columnalign=\"center\"><msub><mover accent=\"true\"><mi mathvariant=\"normal\">\u03a9</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi></msub></mtd></mtr></mtable><mo>]</mo></mrow></mrow><mo>+</mo><mrow><mrow><mo>[</mo><mtable rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><mfrac><mn>1</mn><mi>\u03c4</mi></mfrac></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr></mtable><mo>]</mo></mrow><mo>\u2062</mo><msub><mover accent=\"true\"><mi>w</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi></msub></mrow></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E24.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle=:\\hat{A}_{\\mathrm{DAPI},n}\\hat{\\psi}_{\\mathrm{DAPI},n}+\\hat{B}_{%&#10;\\mathrm{DAPI},n}\\hat{w}_{n}\" display=\"inline\"><mrow><mo>=</mo><mo>:</mo><msub><mover accent=\"true\"><mi>A</mi><mo stretchy=\"false\">^</mo></mover><mrow><mi>DAPI</mi><mo>,</mo><mi>n</mi></mrow></msub><msub><mover accent=\"true\"><mi>\u03c8</mi><mo stretchy=\"false\">^</mo></mover><mrow><mi>DAPI</mi><mo>,</mo><mi>n</mi></mrow></msub><mo>+</mo><msub><mover accent=\"true\"><mi>B</mi><mo stretchy=\"false\">^</mo></mover><mrow><mi>DAPI</mi><mo>,</mo><mi>n</mi></mrow></msub><msub><mover accent=\"true\"><mi>w</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi></msub></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex8.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle\\hat{y}_{n}=\" display=\"inline\"><mrow><msub><mover accent=\"true\"><mi>y</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi></msub><mo>=</mo><mi/></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex8.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle\\sqrt{\\alpha\\lambda_{n}}\\begin{bmatrix}1&amp;0&amp;0\\end{bmatrix}\\begin{%&#10;bmatrix}\\hat{\\theta}_{n}\\\\&#10;\\hat{\\omega}_{n}\\\\&#10;\\hat{\\Omega}_{n}\\end{bmatrix}=:\\hat{C}_{\\mathrm{std},n}\\hat{\\psi}_{\\mathrm{std%&#10;},n}.\" display=\"inline\"><mrow><msqrt><mrow><mi>\u03b1</mi><mo>\u2062</mo><msub><mi>\u03bb</mi><mi>n</mi></msub></mrow></msqrt><mrow><mo>[</mo><mtable columnspacing=\"5pt\"><mtr><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr></mtable><mo>]</mo></mrow><mrow><mo>[</mo><mtable rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><msub><mover accent=\"true\"><mi>\u03b8</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi></msub></mtd></mtr><mtr><mtd columnalign=\"center\"><msub><mover accent=\"true\"><mi>\u03c9</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi></msub></mtd></mtr><mtr><mtd columnalign=\"center\"><msub><mover accent=\"true\"><mi mathvariant=\"normal\">\u03a9</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi></msub></mtd></mtr></mtable><mo>]</mo></mrow><mo>=</mo><mo>:</mo><msub><mover accent=\"true\"><mi>C</mi><mo stretchy=\"false\">^</mo></mover><mrow><mi>std</mi><mo>,</mo><mi>n</mi></mrow></msub><msub><mover accent=\"true\"><mi>\u03c8</mi><mo stretchy=\"false\">^</mo></mover><mrow><mi>std</mi><mo>,</mo><mi>n</mi></mrow></msub><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\nfor $n = 2,\\ldots, N$. The $3N-1$ nonzero eigenvalues of $A_{\\rm DAPI}$ are given by:\n", "itemtype": "equation", "pos": 42669, "prevtext": "\n\nTo verify that all system eigenvalues are in the left half of the complex plane with the exception of the zero eigenvalue associated with $\\lambda_1 = 0$,  it suffices to consider the characteristic equations of $\\hat{A}_{\\rm{std},n}$ and $\\hat{A}_{\\rm{DAPI},n}$ respectively. The $2N-1$ nonzero eigenvalues $z$ of $A_{\\rm std}$ are given by:\n", "index": 47, "text": "\n\\[z^2 + \\frac{1}{\\tau}z + \\frac{m}{\\tau}\\lambda_n = 0,\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex9.m1\" class=\"ltx_Math\" alttext=\"z^{2}+\\frac{1}{\\tau}z+\\frac{m}{\\tau}\\lambda_{n}=0,\" display=\"block\"><mrow><mrow><mrow><msup><mi>z</mi><mn>2</mn></msup><mo>+</mo><mrow><mfrac><mn>1</mn><mi>\u03c4</mi></mfrac><mo>\u2062</mo><mi>z</mi></mrow><mo>+</mo><mrow><mfrac><mi>m</mi><mi>\u03c4</mi></mfrac><mo>\u2062</mo><msub><mi>\u03bb</mi><mi>n</mi></msub></mrow></mrow><mo>=</mo><mn>0</mn></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\nfor $n = 2,\\ldots,N$. Since $L_B$ is positive semidefinite, $\\lambda_n>0$. It is then easy to verify by Routh's criterion that $\\mathrm{Re}\\{z\\}<0$ if $\\gamma,m,k,\\tau>0$.\n\nNow, denote the input-output mapping of each such subsystem by $\\hat{H}_{\\mathrm{std},n}$ and $\\hat{H}_{\\mathrm{DAPI},n}$ respectively. The squared {$\\mathcal{H}_2$ } norms of $H_{\\mathrm{std}}$ and $H_{\\mathrm{DAPI}}$ are then the sum of the squares of the decoupled subsystems' norms, i.e., $||H_{\\mathrm{std}}||_2^2 = ||\\hat{H}_{\\mathrm{std}}||_2^2 = \\sum_{n = 1}^N||\\hat{H}_{\\mathrm{std},n}||_2^2$, $||H_{\\mathrm{DAPI}}||_2^2 = ||\\hat{H}_{\\mathrm{DAPI}}||_2^2 = \\sum_{n = 1}^N||\\hat{H}_{\\mathrm{DAPI},n}||_2^2$\n\nNotice that the subsystems $\\hat{H}_{\\mathrm{std},1}$ and $\\hat{H}_{\\mathrm{DAPI},1}$ corresponding to $\\lambda_1 = 0$ have the output $\\hat{y}_1 = 0$. This verifies that the zero mode is unobservable and $||\\hat{H}_{\\mathrm{std},1}||_2^2 = ||\\hat{H}_{\\mathrm{DAPI},1}||_2^2 =0 $. For $n\\neq 0$, the subsystem norms are calculated by solving the Lyapunov equation for the observability Gramians $X_n$:\n\n", "itemtype": "equation", "pos": 42812, "prevtext": "\nfor $n = 2,\\ldots, N$. The $3N-1$ nonzero eigenvalues of $A_{\\rm DAPI}$ are given by:\n", "index": 49, "text": "\n\\[ z^3 +z^2\\left(\\frac{1}{\\tau} + \\frac{\\gamma}{k}\\right) + z\\left(\\frac{1}{k\\tau}(\\gamma +1)+ \\frac{m\\lambda_n}{\\tau} + \\frac{m\\gamma \\lambda_n}{\\tau k} \\right) = 0,\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex10.m1\" class=\"ltx_Math\" alttext=\"z^{3}+z^{2}\\left(\\frac{1}{\\tau}+\\frac{\\gamma}{k}\\right)+z\\left(\\frac{1}{k\\tau}%&#10;(\\gamma+1)+\\frac{m\\lambda_{n}}{\\tau}+\\frac{m\\gamma\\lambda_{n}}{\\tau k}\\right)=0,\" display=\"block\"><mrow><mrow><mrow><msup><mi>z</mi><mn>3</mn></msup><mo>+</mo><mrow><msup><mi>z</mi><mn>2</mn></msup><mo>\u2062</mo><mrow><mo>(</mo><mrow><mfrac><mn>1</mn><mi>\u03c4</mi></mfrac><mo>+</mo><mfrac><mi>\u03b3</mi><mi>k</mi></mfrac></mrow><mo>)</mo></mrow></mrow><mo>+</mo><mrow><mi>z</mi><mo>\u2062</mo><mrow><mo>(</mo><mrow><mrow><mfrac><mn>1</mn><mrow><mi>k</mi><mo>\u2062</mo><mi>\u03c4</mi></mrow></mfrac><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>\u03b3</mi><mo>+</mo><mn>1</mn></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>+</mo><mfrac><mrow><mi>m</mi><mo>\u2062</mo><msub><mi>\u03bb</mi><mi>n</mi></msub></mrow><mi>\u03c4</mi></mfrac><mo>+</mo><mfrac><mrow><mi>m</mi><mo>\u2062</mo><mi>\u03b3</mi><mo>\u2062</mo><msub><mi>\u03bb</mi><mi>n</mi></msub></mrow><mrow><mi>\u03c4</mi><mo>\u2062</mo><mi>k</mi></mrow></mfrac></mrow><mo>)</mo></mrow></mrow></mrow><mo>=</mo><mn>0</mn></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.08017.tex", "nexttext": "\nand taking $||\\hat{H}_n||^2_2 = \\mathrm{tr}\\{\\hat{B}_nX_n\\hat{B}_n\\}$. The subscripts for the standard droop control and the DAPI systems have here been left out to indicate that the equations hold for both. \n\nDue to space limitations, we omit the expansion of \\eqref{eq:lyap}, but refer to \\cite{BamiehGayme2013} or \\cite{Tegling2015} for a similar derivation.  \n\n\n\\bibliographystyle{IEEETran}\n\\bibliography{EmmasBib15}\n\n\n", "itemtype": "equation", "pos": 44073, "prevtext": "\nfor $n = 2,\\ldots,N$. Since $L_B$ is positive semidefinite, $\\lambda_n>0$. It is then easy to verify by Routh's criterion that $\\mathrm{Re}\\{z\\}<0$ if $\\gamma,m,k,\\tau>0$.\n\nNow, denote the input-output mapping of each such subsystem by $\\hat{H}_{\\mathrm{std},n}$ and $\\hat{H}_{\\mathrm{DAPI},n}$ respectively. The squared {$\\mathcal{H}_2$ } norms of $H_{\\mathrm{std}}$ and $H_{\\mathrm{DAPI}}$ are then the sum of the squares of the decoupled subsystems' norms, i.e., $||H_{\\mathrm{std}}||_2^2 = ||\\hat{H}_{\\mathrm{std}}||_2^2 = \\sum_{n = 1}^N||\\hat{H}_{\\mathrm{std},n}||_2^2$, $||H_{\\mathrm{DAPI}}||_2^2 = ||\\hat{H}_{\\mathrm{DAPI}}||_2^2 = \\sum_{n = 1}^N||\\hat{H}_{\\mathrm{DAPI},n}||_2^2$\n\nNotice that the subsystems $\\hat{H}_{\\mathrm{std},1}$ and $\\hat{H}_{\\mathrm{DAPI},1}$ corresponding to $\\lambda_1 = 0$ have the output $\\hat{y}_1 = 0$. This verifies that the zero mode is unobservable and $||\\hat{H}_{\\mathrm{std},1}||_2^2 = ||\\hat{H}_{\\mathrm{DAPI},1}||_2^2 =0 $. For $n\\neq 0$, the subsystem norms are calculated by solving the Lyapunov equation for the observability Gramians $X_n$:\n\n", "index": 51, "text": "\\begin{equation} \\label{eq:lyap}\n\\hat{A}_n^*X_n + X_n\\hat{A}_n = -\\hat{C}_n^*\\hat{C}_n,\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E25.m1\" class=\"ltx_Math\" alttext=\"\\hat{A}_{n}^{*}X_{n}+X_{n}\\hat{A}_{n}=-\\hat{C}_{n}^{*}\\hat{C}_{n},\" display=\"block\"><mrow><mrow><mrow><mrow><msubsup><mover accent=\"true\"><mi>A</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi><mo>*</mo></msubsup><mo>\u2062</mo><msub><mi>X</mi><mi>n</mi></msub></mrow><mo>+</mo><mrow><msub><mi>X</mi><mi>n</mi></msub><mo>\u2062</mo><msub><mover accent=\"true\"><mi>A</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi></msub></mrow></mrow><mo>=</mo><mrow><mo>-</mo><mrow><msubsup><mover accent=\"true\"><mi>C</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi><mo>*</mo></msubsup><mo>\u2062</mo><msub><mover accent=\"true\"><mi>C</mi><mo stretchy=\"false\">^</mo></mover><mi>n</mi></msub></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}]