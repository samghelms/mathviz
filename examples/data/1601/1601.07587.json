[{"file": "1601.07587.tex", "nexttext": "\nfor all $w\\in X^{*}\\cup {X^\\omega}$. The element $h$ is called the \\textit{restriction} of $g$ at $x$ and is\ndenoted by $h=g|_x$.\n\\end{defi}\n\n\nInductively one defines the restriction $g|_{x_1x_2\\ldots x_n}=g|_{x_1}|_{x_2}\\ldots\n|_{x_n}$ for every word $x_1x_2\\ldots x_n\\in X^{*}$. Restrictions have the following properties\n", "itemtype": "equation", "pos": 15657, "prevtext": "\n\\maketitle\n\n\n\n\\begin{abstract}\nEvery self-similar group acts on the space ${X^\\omega}$ of infinite words over some alphabet $X$. We study the\nSchreier graphs ${\\Gamma}_w$ for $w\\in{X^\\omega}$ of the action of self-similar groups generated by bounded automata\non the space ${X^\\omega}$. Using sofic subshifts we determine the number of ends for every Schreier graph\n${\\Gamma}_w$. Almost all Schreier graphs ${\\Gamma}_w$ with respect to the uniform measure on ${X^\\omega}$ have one or two\nends, and we characterize bounded automata whose Schreier graphs have two ends almost surely. The\nconnection with (local) cut-points of limit spaces of self-similar groups is established.\\vspace{0.2cm}\n\n\n\\noindent \\textbf{Keywords}: self-similar group, Schreier graph, end of graph, bounded automaton, limit space, tile,\ncut-point\\vspace{0.2cm}\n\n\\noindent \\textbf{Mathematics Subject Classification 2010}: 20F65, 05C63, 05C25\\\\\n\n\\end{abstract}\n\n\n\n\n\n\n\n\n\\tableofcontents\n\n\\section{Introduction}\n\n\nOne of the fundamental properties of fractal objects is self-similarity, which means that pieces of an\nobject are similar to the whole object. In the last twenty years the notion of self-similarity has\nsuccessfully penetrated into algebra. This lead to the development of many interesting constructions such\nas self-similar groups and semigroups, iterated monodromy groups, self-iterating Lie algebras,\npermutational bimodules, etc. The first examples of self-similar groups showed that these groups enjoy\nmany fascinating properties (torsion, intermediate growth, finite width, just-infiniteness and many\nothers) and provide counterexamples to several open problems in group theory. Later, Nekrashevych showed\nthat self-similar groups appear naturally in dynamical systems as iterated monodromy groups of\nself-coverings and provide combinatorial models for iterations of self-coverings.\n\nSelf-similar groups are defined by their action on the space $X^{*}$ of all finite words over a finite\nalphabet $X$ --- one the most basic self-similar object. A faithful action of a group $G$ on $X^{*}$ is\ncalled self-similar if for every $x\\in X$ and $g\\in G$ there exist $y\\in X$ and $h\\in G$ such that\n$g(xv)=yh(v)$ for all words $v\\in X^{*}$. The self-similarity of the action is reflected in the property\nthat the action of any group element on a piece $xX^{*}$ (all words with the first letter $x$) of the\nspace $X^{*}$ can be identified with the action of another group element on the whole space $X^{*}$. We\ncan also imagine the set $X^{*}$ as the vertex set of a regular rooted tree with edges $(v,vx)$ for $x\\in\nX$ and $v\\in X^{*}$. Then every self-similar group acts by automorphisms on this tree. Alternatively,\nself-similar groups can be defined as groups generated by the states of invertible Mealy automata which\nare also known as automaton groups or groups generated by automata.  All these interpretations come from\ndifferent applications of self-similar groups in diverse areas of mathematics: geometric group theory,\nholomorphic dynamics, fractal geometry, automata theory, etc. (see\n\\cite{self_sim_groups,fractal_gr_sets,GNS} and the references therein).\n\n\nIn this paper we consider Schreier graphs of self-similar actions of groups. Given a group $G$ generated by\na finite set $S$ and acting on a set $M$, one can associate to it the (simplicial) Schreier graph\n$\\Gamma(G,M, S)$: the vertex set of the graph is the set $M$, and two vertices $x$ and $y$ are adjacent if\nand only if there exists $s\\in S\\cup S^{-1}$ such that $s(x)=y$. Schreier graphs are generalizations of the\nCayley graph of a group, which corresponds to the action of a group on itself by the multiplication from\nthe left.\n\n\nEvery self-similar group $G$ preserves the length of words in its action on the space $X^{*}$. We then\nhave a family of natural actions of $G$ on the sets $X^n$ of words of length $n$ over $X$. From these\nactions one gets a family of corresponding finite Schreier graphs $\\{\\Gamma_n\\}_{n\\geq 1}$. It was noticed\nin \\cite{barth_gri:spectr_Hecke} that for a few self-similar groups the graphs $\\{{\\Gamma}_n\\}_{n\\geq 1}$ are\nsubstitution graphs (see \\cite{Previte}) --- they can be constructed by a finite collection of vertex\nreplacement rules\n--- and, normalized to have diameter one, they converge in the Gromov-Hausdorff metric to certain fractal\nspaces. However, in general, the Schreier graphs of self-similar groups are neither substitutional nor\nself-similar in any studied way (see discussion in \\cite[Section~I.4]{PhDBondarenko}). Nevertheless, the\nobservation from \\cite{barth_gri:spectr_Hecke} lead to the notion of the limit space of a self-similar\ngroup introduced by Nekrashevych \\cite{self_sim_groups}, which usually have fractal structure. Although\nfinite Schreier graphs $\\{{\\Gamma}_n\\}_{n\\geq 1}$ of a group do not necessary converge to the limit space, they\nform a sequence of combinatorial approximations to it.\n\nAny self-similar action can be extended to the set ${X^\\omega}$ of right-infinite words over $X$ (boundary of the\ntree $X^{*}$). Therefore we can also consider the uncountable family of Schreier graphs\n$\\{\\Gamma_w\\}_{w\\in{X^\\omega}}$ corresponding to the action of the group on the orbit of $w$. Each Schreier graph\n$\\Gamma_w$ can be obtained as a limit of the sequence $\\{\\Gamma_n\\}_{n\\geq 1}$ in the space\n$\\mathcal{G}^{*}$ of (isomorphism classes of) pointed graphs with pointed Gromov-Hausdorff topology. The\nmap $\\theta: X^{\\omega}\\rightarrow \\mathcal{G}^{*}$ sending a point $w$ to the isomorphism class of the\npointed graph $(\\Gamma_w,w)$ pushes forward the uniform probability measure on the space $X^{\\omega}$ to a\nprobability measure on the space of Schreier graphs. This measure is the so-called Benjamini-Schramm limit\nof the sequence of finite graphs $\\{\\Gamma_n\\}_{n\\geq 1}$. Therefore the family of Schreier graphs ${\\Gamma}_w$\nand the limit space represent two limiting constructions associated to the action and to the sequence of\nfinite Schreier graphs $\\{\\Gamma_n\\}_{n\\geq 1}$. Structure of these Schreier graphs as well as some of\ntheir properties such as spectra, expansion, growth, random weak limits, probabilistic models on them,\nhave been studied in various works over the last ten years, see\n\\cite{barth_gri:spectr_Hecke,gri_zuk:lampl_group,gri_sunik:hanoi,PhDBondarenko,\nddmn:GraphsBasilica,ddn:Ising,ddn:Dimer,GrowthSch,MN_AMS,ZigZag:bond}.\n\nMost of the studied self-similar groups are generated by the so-called bounded automata introduced by\nSidki in \\cite{sidki:circ}. The structure of bounded automata is clearly understood, which allows one to\ndeal fairly easily with groups generated by such automata. The main property of bounded automaton groups\nis that their action is concentrated along a finite number of ``directions'' in the tree $X^{*}$. Every\ngroup generated by a bounded automaton belongs to an important class of contracting self-similar groups,\nwhich appear naturally in the study of expanding (partial) self-coverings of topological spaces and\norbispaces, as their iterated monodromy groups \\cite{self_sim_groups,img}. Moreover, all iterated\nmonodromy groups of post-criticaly finite polynomials are generated by bounded automata. The limit space\nof an iterated monodromy group of an expanding (partial) self-covering $f$ is homeomorphic to the Julia\nset of the map $f$.  In the language of limit spaces, groups generated by bounded automata are precisely\nthose finitely generated self-similar groups whose limit spaces are post-critically finite self-similar\nsets (see \\cite{bondnek:pcf}). Such sets play an important role in the development of analysis on fractals\n(see \\cite{kigami:anal_fract}).\n\n\n\nThe main goal of this paper is to investigate the ends of the Schreier graphs $\\{{\\Gamma}_w\\}_{w\\in{X^\\omega}}$ of\nself-similar groups generated by bounded automata and the corresponding limit spaces. The number of ends\nis an important asymptotic invariant of an infinite graph.  Roughly speaking, each end represents a\ntopologically distinct way to move to infinity inside the graph.  The most convenient way to define an end\nin an infinite graph $\\Gamma$ is by the equivalence relation on infinite rays in $\\Gamma$, where two rays\nare declared equivalent if their tails lie in the same connected component of $\\Gamma \\setminus F$ for any\nfinite subgraph $F$ of $\\Gamma$. Any equivalence class is an \\emph{end} of the graph $\\Gamma$. The number\nof ends is a quasi-isometric invariant. The Cayley graph of an infinite finitely generated group can have\none, two or infinitely many ends. Two-ended groups are virtually infinite cyclic and the celebrated\ntheorem of Stallings characterizes finitely generated groups with infinite number of ends.\n\n\n\n\n\\subsection*{Plan of the paper and main results}\n\n\n\nOur main results can be summarized as follows.\n\n\n\\begin{itemize}\n \\item Given a group generated by a bounded automaton we exhibit a constructive method that determines, for a given right-infinite word $w$, the number of ends of the Schreier graph $\\Gamma_w$ (Section~\\ref{Section_Ends}).\n\n\\item We show that the Schreier graphs $\\Gamma_w$ of a group generated by a bounded automaton have either one or\ntwo ends almost surely, and there are only finitely many Schreier graphs with more than two ends (Section~\\ref{Section_number_ends}, Proposition~\\ref{prop_more_ends}, Theorem~\\ref{th_classification_two_ends}).\n\n\\item We classify bounded automata generating groups whose Schreier graphs $\\Gamma_w$ have almost surely two ends (Theorem~\\ref{th_classification_two_ends}). In the binary case, these groups agree with the class of groups defined by \\v{S}uni\\'{c} in\n\\cite{Zoran} (Theorem~\\ref{th_Sch_2ended_binary}).\n\n\n\\item We exhibit a constructive method that describes cut-points of limit spaces of groups generated by\nbounded automata (Section~\\ref{section_component}).\n\n\\item In particular, we get a constructive method that describes cut-points of Julia sets of\npost-critically finite polynomials (Section~\\ref{section_component}).\n\n\n\\item We show that a punctured limit space has one or two connected components almost surely (Theorem~\\ref{thm_punctured_tile_ends}).\n\n\\item We classify contracting self-similar groups whose limit space is homeomorphic to an interval or a circle (Corollary~\\ref{cor_limsp_interval_circle}).\n\n\\end{itemize}\n\nThe paper is organized as follows. First, we determine the number of connected components in the Schreier\ngraph ${\\Gamma}_n\\setminus v$ with removed vertex $v$. The answer comes from a finite deterministic acceptor\nautomaton over the alphabet $X$ (Section~\\ref{finite automaton section}) so that given a word\n$v=x_1x_2\\ldots x_n$ the automaton returns the number of components in ${\\Gamma}_n\\setminus v$\n(Theorem~\\ref{thm_number_of_con_comp}). Using this automaton we determine the number of finite and\ninfinite connected components in ${\\Gamma}_w\\setminus w$ for any $w\\in{X^\\omega}$. By establishing the connection\nbetween the number of ends of the Schreier graph ${\\Gamma}_w$ and the number of infinite components in\n${\\Gamma}_w\\setminus w$ (Proposition~\\ref{prop_ends_limit}), we determine the number of ends of ${\\Gamma}_w$\n(Theorem~\\ref{thm_number_of_ends}).\n\n\nIf a self-similar group acts transitively on $X^n$ for all $n\\in\\mathbb{N}$, the action on ${X^\\omega}$ is\nergodic with respect to the uniform measure on ${X^\\omega}$, and therefore the Schreier graphs ${\\Gamma}_w$ for\n$w\\in{X^\\omega}$ have the same number of ends almost surely. For a group\ngenerated by a bounded automaton \nthe ``typical'' number of ends is one or two, and we show that in most cases it is one, by characterizing\ncompletely the bounded automata generating groups whose Schreier graphs ${\\Gamma}_w$ have almost surely two\nends (Theorem~\\ref{th_classification_two_ends}). In the binary case we show that automata giving rise to\ngroups whose Schreier graphs have almost surely two ends correspond to the adding machine or to one of the\nautomata defined by \\v{S}uni\\'{c} in \\cite{Zoran} (Theorem~\\ref{th_Sch_2ended_binary}).\n\nIn Section~\\ref{Section_Cut-points} we recall the notion of the limit space of a contracting self-similar\ngroup, and study the number of connected components in a punctured limit space for groups generated by bounded automata. We show that the number of ends in a typical Schreier graph ${\\Gamma}_w$ coincides with the number of\nconnected components in a typical punctured neighborhood (punctured tile) of the limit space (Theorem~\\ref{thm_punctured_tile_ends}). In particular, this number is equal to one or two. This fact is well-known for connected Julia sets of polynomials. While Zdunik \\cite{zdunik} and Smirnov \\cite{smirnov} proved that almost every point of a connected polynomial Julia set is a bisection point only when the polynomial is conjugate to a Chebyshev polynomial, we describe bounded automata whose limit spaces have this property. Moreover, we provide a constructive method to compute the number of connected components in a punctured limit space (Section~\\ref{cut-points\nsection}). Finally, using the results about ends of Schreier graphs, we classify contracting self-similar\ngroups whose limit space is homeomorphic to an interval or a circle\n(Corollary~\\ref{cor_limsp_interval_circle}). This result agrees with the description of automaton groups\nwhose limit dynamical system is conjugate to the tent map given by Nekrashevych and \\v{S}uni\\'{c} in\n\\cite{img}.\n\nIn Section~\\ref{Section_Preliminaries} we recall all needed definitions concerning self-similar groups,\nautomata and their Schreier graphs. In Section 5 we illustrate our results by performing explicit\ncomputations for three concrete examples: the Basilica group, the Gupta-Fabrykowski group, and the\niterated monodromy group of $z^2+i$.\n\n\n\\vspace{0.2cm}\\noindent\\textbf{Acknowledgments.} The substantial part of this work was done while the first author was visiting the Geneva University, whose support and hospitality are gratefully acknowledged.\n\n\n\n\\section{Preliminaries}\\label{Section_Preliminaries}\n\nIn this section we review the basic definitions and facts concerning self-similar groups, bounded automata\nand their Schreier graphs. For more detailed information and for further references,\nsee~\\cite{self_sim_groups}.\n\n\n\\subsection{Self-similar groups and automata}\n\nLet $X$ be a finite set with at least two elements. Denote by $X^{*}=\\{x_1x_2\\ldots x_n | x_i\\in X, n\\geq\n0\\}$ the set of all finite words over $X$ (including the empty word denoted $\\emptyset$) and with $X^n$\nthe set of words of length $n$. The length of a word $v=x_1x_2\\ldots x_n\\in X^n$ is denoted by $|v| = n$.\n\nWe shall also consider the sets ${X^\\omega}$ and ${X^{-\\omega}}$ of all right-infinite sequences $x_1x_2\\ldots$, $x_i\\in\nX$, and left-infinite sequences $\\ldots x_2x_1$, $x_i\\in X$, respectively with the product topology of\ndiscrete sets $X$. For an infinite sequence $w=x_1x_2\\ldots$ (or $w=\\ldots x_2x_1$) we use notation\n$w_n=x_1x_2\\ldots x_n$ (respectively, $w_n=x_n\\ldots x_2x_1$). For a word $v$ we use notations $v^{\\omega}=vv\\ldots$ and $v^{-\\omega}=\\ldots vv$. The \\textit{uniform Bernoulli measure} on\neach space ${X^\\omega}$ and ${X^{-\\omega}}$ is the product measure of uniform distributions on $X$. The \\textit{shift\n$\\sigma$} on the space ${X^\\omega}$ (respectively, on ${X^{-\\omega}}$) is the map which deletes the first (respectively,\nthe last) letter of a right-infinite (respectively, left-infinite) sequence.\n\n\\subsubsection{Self-similar groups}\n\n\\begin{defi}\nA faithful action of a group $G$ on the set $X^{*}\\cup{X^\\omega}$ is called $\\emph{self-similar}$ if for every\n$g\\in G$ and $x\\in X$ there exist $h\\in G$ and $y\\in X$ such that\n\n", "index": 1, "text": "$$\ng(xw)=yh(w)\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex1.m1\" class=\"ltx_Math\" alttext=\"g(xw)=yh(w)\" display=\"block\"><mrow><mrow><mi>g</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>x</mi><mo>\u2062</mo><mi>w</mi></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><mi>y</mi><mo>\u2062</mo><mi>h</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>w</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></math>", "type": "latex"}, {"file": "1601.07587.tex", "nexttext": "\nfor all $g,h\\in G$ and $v,u\\in X^{*}$ (we are using left actions so that $(g h)(v)=g(h(v))$). If $X=\\{1,2,\\ldots,d\\}$ then every element $g\\in G$ can be uniquely represented by the tuple $(g|_1,g|_2,\\ldots,g|_d)\\pi_g$, where $\\pi_g$ is the permutation induced by $g$ on the set $X$.\n\nIt follows from the definition that every self-similar group $G$ preserves the length of words under\nits action on the space $X^{*}$, so that we have an action of the group $G$ on the set $X^n$ for every $n$.\n\nThe set $X^{*}$ can be naturally identified with a rooted regular tree where the root is labeled by the\nempty word $\\emptyset$, the first level is labeled by the elements in $X$ and the $n$-th level corresponds\nto $X^n$. The set ${X^\\omega}$ can be identified with the boundary of the tree. Every\nself-similar group acts by automorphisms on this rooted tree and by homeomorphisms on its boundary.\n\n\n\\subsubsection{Automata and automaton groups}\n\nAnother way to introduce self-similar groups is through input-output automata and automaton groups. A\ntransducer \\textit{automaton} is a quadruple $(S,X,{t},{o})$, where $S$ is the set of states of automaton;\n$X$ is an alphabet; ${t}: S\\times X \\rightarrow S$ is the transition map; and ${o}: S\\times X \\rightarrow\nX$ is the output map. We will use notation $S$ for both the set of states and the automaton itself. An\nautomaton is \\textit{finite} if it has finitely many states and it is \\textit{invertible} if, for all\n$s\\in S$, the transformation ${o}(s, \\cdot):X\\rightarrow X$ is a permutation of $X$. An automaton can be\nrepresented by a directed labeled graph whose vertices are identified with the states and for every state\n$s\\in S$ and every letter $x\\in X$ it has an arrow from $s$ to ${t}(s,x)$ labeled by $x|{o}(s,x)$. This\ngraph contains complete information about the automaton and we will identify them. When talking about\npaths and cycles in automata we always mean directed paths and cycles in corresponding graph\nrepresentations.\n\n\nEvery state $s\\in S$ of an automaton defines a transformation on the set $X^{\\ast}\\cup X^{\\omega}$, which is again denoted by $s$ by abuse of notation, as follows. Given a word $x_1x_2\\ldots$ over $X$, there exists a unique path in $S$ starting at the state $s$ and labeled by $x_1|y_1$, $x_2|y_2$, \\ldots for some $y_i\\in X$. Then $s(x_1x_2\\ldots)=y_1y_2\\ldots$. We always assume that our automata are minimal, i.e., different states define different transformations. The state of automata that defines the identity transformation is denoted by $1$.\n\n\nAn automaton $S$ is invertible when all transformations defined by its states are invertible. In this case one can consider the group\ngenerated by these transformations under composition of functions, which is called the \\textit{automaton\ngroup} generated by $S$ and is denoted by $G(S)$. The natural action of every automaton group on the\nspace ${X^\\omega}$ is self-similar, and vise versa, every self-similar action of a group $G$ can be given by the\nautomaton with the set of states $G$ and arrows $g\\rightarrow g|_x$ labeled by $x|g(x)$ for all $g\\in G$\nand $x\\in X$.\n\n\n\n\n\n\n\n\n\\subsubsection{Contracting self-similar groups}\nA self-similar group $G$ is called \\textit{contracting} if there exists a finite set ${\\mathcal{N}}\\subset G$ with\nthe property that for every $g\\in G$ there exists $n\\in\\mathbb{N}$ such that $g|_v\\in{\\mathcal{N}}$ for all words\n$v$ of length greater or equal to $n$. The smallest set ${\\mathcal{N}}$ with this property is called the\n\\textit{nucleus} of the group. It is clear from definition that $h|_x\\in{\\mathcal{N}}$ for every $h\\in{\\mathcal{N}}$ and\n$x\\in X$, and therefore the nucleus ${\\mathcal{N}}$ can be considered as an automaton. Moreover, every state of\n${\\mathcal{N}}$ has an incoming arrow, because otherwise minimality of the nucleus would be violated. Also, the\nnucleus is symmetric, i.e., $h^{-1}\\in{\\mathcal{N}}$ for every $h\\in{\\mathcal{N}}$.\n\nA self-similar group $G$ is called \\textit{self-replicating} (or recurrent) if it acts transitively on $X$,\nand the map $g\\mapsto g|_x$ from the stabilizer $Stab_G(x)$ to the group $G$ is surjective for some (every)\nletter $x\\in X$. It can be shown that a self-replicating group acts transitively on $X^n$ for every $n\\geq\n1$. It is also easy to see (\\cite[Proposition~2.11.3]{self_sim_groups}) that if a finitely generated\ncontracting group is self-replicating then its nucleus ${\\mathcal{N}}$ is a generating set.\n\n\\subsection{Schreier graphs vs tile graphs of self-similar groups}\\label{section schreier vs tile}\n\nLet $G$ be a group generated by a finite set $S$ and let $H$ be a subgroup of $G$. The\n\\textit{(simplicial) Schreier coset graph ${\\Gamma}(G,S,H)$} of the group $G$ is the graph whose vertices are the\nleft cosets $G/H=\\{gH : g\\in G\\}$, and two vertices $g_1H$ and $g_2H$ are adjacent if there exists $s\\in\nS$ such that $g_2H=sg_1H$ or $g_1H=sg_2H$.\n\n\\begin{defi}\nLet $G$ be a group acting on a set $M$, then the corresponding (simplicial) \\textit{Schreier graph\n${\\Gamma}(G,S,M)$} is the graph with the set of vertices $M$, and two vertices $v$ and $u$ are adjacent if\nthere exists $s\\in S$ such that $s(v)=u$ or $s(u)=v$.\n\\end{defi}\n\nIf the action $(G,M)$ is transitive, then\nthe Schreier coset graph ${\\Gamma}(G,S,M)$ is isomorphic to the Schreier graph ${\\Gamma}(G,S,Stab_G(m))$ of the group with\nrespect to the stabilizer $Stab_G(m)$ for any $m\\in M$.\n\nLet $G$ be a self-similar group generated by a finite set $S$. The sets $X^n$ are invariant under the\naction of $G$, and we denote the associated Schreier graphs by ${\\Gamma}_n={\\Gamma}_n(G,S)$. For a point $w\\in{X^\\omega}$ we\nconsider the action of the group $G$ on the $G$-orbit of $w$, and the associated Schreier graph is called\nthe \\textit{orbital Schreier graph} denoted ${\\Gamma}_w={\\Gamma}_w(G,S)$. For every $w\\in{X^\\omega}$ we have\n$Stab_G(w)=\\bigcap_{n\\geq 1} Stab_G(w_n)$, where $w_n$ denotes the prefix of length $n$ of the infinite\nword $w$. The connected component of the rooted graph $(\\Gamma_n,w_n)$ around the root $w_n$ is exactly the\nSchreier graph of $G$ with respect to the stabilizer of $w_n$. It follows immediately that the graphs\n$(\\Gamma_n,w_n)$ converge to the graph $(\\Gamma_{w},w)$ in the pointed Gromov-Hausdorff topology \\cite{gromov}.\n\nBesides the Schreier graphs, we will also work with their subgraphs called tile graphs.\n\n\\begin{defi}\nThe \\textit{tile graph} $T_n=T_n(G,S)$ is the graph with the set of vertices $X^n$, where two vertices $v$\nand $u$ are adjacent if there exists $s\\in S$ such that $s(v)=u$ and $s|_v=1$.\n\\end{defi}\nThe tile graph $T_n$ is thus a subgraph of the Schreier graph ${\\Gamma}_n$. To define a tile graph for the action on\nthe space ${X^\\omega}$, consider the same set of vertices as in ${\\Gamma}_w$ and connect vertices $v$ and $u$ by an\nedge if there exists $s\\in S$ such that $s(v)=u$ and $s|_{v'}=1$ for some finite beginning $v'\\in X^{*}$ of\nthe sequence $v$. The connected component of this graph containing the vertex $w$ is called the\n\\textit{orbital tile graph}~$T_w$. It is clear from the construction that we also have the convergence\n$(T_n,w_n)\\rightarrow (T_{w},w)$ in the pointed Gromov-Hausdorff topology.\n\nThe study of orbital tile graphs $T_w$ is based on the approximation by finite tile graphs $T_n$. Namely,\nwe will frequently use the following observation. Every tile graph $T_n$ can be considered as a subgraph of\n$T_w$ under the inclusion $v\\mapsto v\\sigma^n(w)$. Indeed, if $v$ and $u$ are adjacent in $T_n$ then\n$v\\sigma^n(w)$ and $u\\sigma^n(w)$ are adjacent in $T_w$. Moreover, every edge of $T_w$ appears in the graph\n$T_n$ for all large enough $n$. Hence the graphs $T_n$ viewed as subgraphs of $T_w$ form a cover of $T_w$.\n\n\n\n\\subsection{Schreier graphs of groups generated by bounded automata}\\label{subsection_BoundedAutomata}\n\n\n\n\n\\subsubsection{Bounded automata}\n\n\n\n\\begin{defi} (Sidki \\cite{sidki:circ})\nA finite invertible automaton $S$ is called \\textit{bounded} if one of the following equivalent conditions holds:\n\\begin{enumerate}\n  \\item[1)] the number of paths of length $n$ in $S\\setminus\\{1\\}$ is bounded independently on $n$;\n\n  \\item[2)] the number of left- (equivalently, right-) infinite\npaths in $S\\setminus\\{1\\}$ is finite;\n\n  \\item[3)] any two\nnontrivial cycles in the automaton are disjoint and not connected by a path, where a cycle is called trivial if it is a loop at the trivial state;\n\n  \\item[4)] the number of left- (equivalently, right-) infinite sequences, which are read along left- (respectively, right-) infinite paths in $S\\setminus\\{1\\}$, is finite.\n\\end{enumerate}\n\n\n\\end{defi}\n\n\n\nThe states of a bounded automaton $S$ can be classified as follows:\\\\\n\\indent -- \\ a state $s$ is \\textit{finitary} if there exists $n\\in\\mathbb{N}$ such that $s|_v=1$ for all $v\\in X^n$;\\\\\n\\indent -- \\ a state $s$ is \\textit{circuit} if there exists a nonempty word $v\\in X^n$ such that $s|_v=s$,\\\\\n\\indent \\hspace{0.35cm} i.e., $s$ belongs to a cycle in $S$; in this case $s|_u$ is finitary for every $u\\in X^n$, $u\\neq\nv$;\\\\\n\\indent -- \\ for every state $s$ there exists $n\\in\\mathbb{N}$ such that for every $v\\in X^n$ the state $s|_v$ is\\\\\n\\indent \\hspace{0.35cm} either finitary or circuit.\\\\ By passing to a power $X^m$ of the alphabet $X$ every\nbounded automaton can be brought to the \\textit{basic form} (see\n\\cite[Proposition~3.9.11]{self_sim_groups}) in which the above items hold with $n=1$; in\nparticular, all cycles are loops, and $s|_x=1$ for every finitary state $s$ and every $x\\in X$ (here for $m$\nwe can take an integer number which is greater than the diameter of the automaton and is a multiple of the\nlength of every simple cycle).\n\nEvery self-similar group $G$ generated by a bounded automaton is contracting (see\n\\cite[Theorem~3.9.12]{self_sim_groups}). Its nucleus is a bounded automaton, which contains only finitary\nand circuit states (because every state of a nucleus should have an incoming arrow).\n\n\n\n\\subsubsection{Cofinality $\\&$ post-critical, critical and regular sequences}\n\nIn this section we introduce the notion of critical and post-critical sequences that is fundamental for our analysis.\n\nLet $G$ be a contracting self-similar group generated by an automaton $S$ and we assume $S=S^{-1}$. Let us describe the vertex sets of the orbital tile graphs $T_w=T_w(G,S)$. Two right- (or left-) infinite\nsequences are called \\textit{cofinal} if they differ only in finitely many letters. Cofinality is an\nequivalence relation on ${X^\\omega}$ and ${X^{-\\omega}}$. The respective equivalence classes are called the cofinality\nclasses and they are denoted by $Cof(\\cdot)$. The following statement characterizes vertices of tile\ngraphs in terms of the cofinal sequences.\n\\begin{lemma}\\label{cofinality}\nSuppose that the tile graphs $T_n(G,S)$ are connected for all $n\\in\\mathbb{N}$. Then for every $w\\in{X^\\omega}$\nthe cofinality class $Cof(w)$ is the set of vertices of the orbital tile graph $T_w(G,S)$.\n\\end{lemma}\n\\begin{proof}\nIf $g(v)=u$ for $v,u\\in X^{\\omega}$ and $g|_{v'}=1$ for a\nfinite beginning $v'$ of $v$ then $v$ and $u$ are cofinal. Conversely, since every graph $T_n$ is connected, for every $v,u\\in X^{n}$ there exists $g\\in G$ such that $g(v)=u$ and $g|_v=1$. Hence $g(vw)=uw$ for\nall $w\\in X^{\\omega}$ and every two cofinal sequences belong to the same orbital tile graph.\n\\end{proof}\n\nWe classify infinite sequences over $X$ as follows. A left-infinite sequence $\\ldots x_2x_1\\in{X^{-\\omega}}$ is\ncalled \\textit{post-critical} if there exists a left-infinite path $\\ldots e_2e_1$ in the automaton\n$S\\setminus \\{1\\}$ labeled by $\\ldots x_2x_1|\\ldots y_2y_1$ for some $y_i\\in X$. The set ${\\mathscr{P}}$ of all\npost-critical sequences is called \\textit{post-critical}. A right-infinite sequence $w=x_1x_2\\ldots\\in{X^\\omega}$\nis called \\textit{critical} if there exists a right-infinite path $e_1e_2\\ldots$ in the automaton\n$S\\setminus \\{1\\}$ labeled by $x_1x_2\\ldots|y_1y_2\\ldots$ for some $y_i\\in X$. It follows that every shift\n$\\sigma^n(w)$ of a critical sequence $w$ is again critical, and for every $n\\in\\mathbb{N}$ there exists\n$v\\in X^n$ such that $vw$ is critical (here we use the assumption that every path in $S$ can be continued\nto the left). It is proved in \\cite[Proposition~IV.18]{PhDBondarenko} (see also\n\\cite[Proposition~3.2.7]{self_sim_groups}) that the set of post-critical sequences coincides with the set\nof sequences that can be read along left-infinite paths in the nucleus of the group with removed trivial\nstate. The same proof works for critical sequences. Therefore the sets of critical and post-critical\nsequences do not depend on the chosen generating set (as soon as it satisfies assumption that every state of the automaton $S$ has an incoming arrow, and $S^{-1}=S$). Finally,\na sequence $w\\in{X^\\omega}$ is called \\textit{regular} if the cofinality class of $w$ does not contain critical\nsequences, or, equivalently, if the shifted sequence $\\sigma^n(w)$ is not critical for every $n\\geq 0$.\nNotice that the cofinality class of a critical sequence contains sequences which are neither regular nor\ncritical.\n\n\n\\begin{prop}\\label{prop_properties_of_sequences}\nSuppose that the automaton $S$ is bounded. Then the sets of critical and post-critical sequences are finite. Every post-critical sequence is pre-periodic. Every cofinality class contains not more than one critical sequence. The cofinality class of a regular sequence contains only regular sequences. If $w$ is regular, then there exists a finite beginning $v$ of $w$ such that $s|_v=1$ for every $s\\in S$.\n\\end{prop}\n\\begin{proof}\nThe number of right- and left-infinite paths avoiding the trivial state is finite in every bounded\nautomaton. Thus the number of critical and post-critical sequences is finite.\n\nThe pre-periodicity of post-critical sequences and the periodicity of critical sequences follow from the\ncyclic structure of bounded automata. The statement about the cofinality class of a critical sequence\nfollows immediately, because different periodic sequences can not differ only in finitely many letters.\n\nFinally, if $w=x_1x_2\\ldots\\in{X^\\omega}$ is regular, then starting from any state $s\\in S$ and following the\nedges labeled by $x_1|*,x_2|*,\\ldots$ we will end at the trivial state. Hence there exists $n$ such that\n$s|_{x_1x_2\\ldots x_n}=1$ for all $s\\in S$.\n\\end{proof}\n\nNote that if the automaton $S$ is in the basic form, then every post-critical sequence is of the form\n$y^{-\\omega}$ or $y^{-\\omega}x$ for some letters $x,y\\in X$, and every critical sequence is of the form\n$x^{\\omega}$ for some $x\\in X$.\n\n\n\n\n\\subsubsection{Inflation of graphs}\\label{section_inflation}\n\nLet $G$ be a group generated by a bounded automaton $S$. We assume $S=S^{-1}$ and every state of $S$ has an incoming arrow. In what follows we describe an inductive method (called \\textit{inflation of graphs}) to construct the tile graphs $T_n=T_n(G,S)$ developed in \\cite[Chapter~V]{PhDBondarenko}.\n\nLet $p=\\ldots x_2x_1\\in{\\mathscr{P}}$ be a post-critical sequence. The vertex $p_n=x_n\\ldots x_2x_1$ of the graphs ${\\Gamma}_n$ and $T_n$ will be called \\textit{post-critical}. Since the post-critical set ${\\mathscr{P}}$ is finite, for all large enough $n$, the post-critical vertices of ${\\Gamma}_n$ and $T_n$ are in  one-to-one correspondence with the elements of ${\\mathscr{P}}$ (just take $n$ large enough so that $p_n\\neq q_n$ whenever $p\\neq q$). Hence, with a slight abuse of\nnotations, we will consider the elements of the set ${\\mathscr{P}}$ as the vertices of the graphs ${\\Gamma}_n$ and\n$T_n$.\n\nLet $E$ be the set of all pairs $\\{(p,x),(q,y)\\}$ for $p,q\\in{\\mathscr{P}}$ and $x,y\\in X$ such that there exists\na left-infinite path in the automaton $S$, which ends in the trivial state and is labeled by the pair\n$px|qy$.\n\n\n\\begin{theor}\\cite[Theorem~V.8]{PhDBondarenko}\\label{th_tile_graph_construction}\nTo construct the tile graph $T_{n+1}$  take $|X|$ copies of the tile graph $T_n$, identify their sets of\nvertices with $X^nx$ for $x\\in X$, and connect two vertices $vx$ and $uy$ by an edge if and only if\n$v,u\\in{\\mathscr{P}}$ and $\\{(v,x),(u,y)\\}\\in E$.\n\\end{theor}\n\nThe procedure of inflation of graphs given in Theorem~\\ref{th_tile_graph_construction} can be described\nusing the graph $M$ with the vertex set ${\\mathscr{P}}\\times X$ and the edge set $E$, which we call the \\textit{model graph} associated to the automaton $S$. The vertex $(p,x)$ of $M$ is called \\textit{post-critical}, if the sequence $px$ is post-critical. Note that the post-critical vertices of $M$ are in one-to-one correspondence with elements of the post-critical set ${\\mathscr{P}}$. Now if we ``place'' the\ngraph $T_n$ in the model graph instead of the vertices ${\\mathscr{P}}\\times x$ for each $x\\in X$ such that the\npost-critical vertices of $T_n$ fit with the set ${\\mathscr{P}}\\times x$, we get the graph $T_{n+1}$. Moreover,\nthe post-critical vertices of $M$ will correspond to the post-critical vertices of $T_{n+1}$.\n\nIn order to construct the Schreier graph ${\\Gamma}_n$ we can take the tile graph $T_n$ and add an edge between\npost-critical vertices $p$ and $q$ if $s(p)=q$ for some $s\\in S$. Indeed, if $s(v)=u$ and $s|_v\\neq 1$ (the\nedge that does not appear in $T_n$) then $v$ and $u$ are post-critical vertices, and they should be\nadjacent in ${\\Gamma}_n$. Notice that there are only finitely many added edges (independently on $n$) and they\ncan be described directly through the generating set $S$. Namely, define the set $E({\\Gamma}\\setminus T)$ as the\nset of all pairs $\\{p,q\\}$ for $p,q\\in{\\mathscr{P}}$ such that there exists a left-infinite path in $S$ labeled by\nthe pair $p|q$ or $q|p$. Then if we take the tile graph $T_n$ and add an edge between $p_n$ and $q_n$ for\nevery $\\{p,q\\}\\in E({\\Gamma}\\setminus T)$, we get the Schreier graph ${\\Gamma}_n$.\n\n\n\n\\section{Ends of tile graphs and Schreier graphs}\\label{Section_Ends}\n\nIn this section we present the main results about the number of ends of Schreier graphs $\\Gamma_w$ of groups\ngenerated by bounded automata. Our method passes through the study of the same problem for the tile graphs $T_w$. First, we show that the number of ends of graphs $T_w$ can be deduced from the number of connected components in tile graphs with a vertex removed (see Proposition~\\ref{prop_ends_limit}). We use the inflation procedure to construct a finite deterministic automaton ${\\mathsf{A}}_{ic}$, which given a sequence $w\\in{X^\\omega}$ determines the number of infinite connected components in the graph $T_w$ with the vertex $w$ removed (see Proposition~\\ref{prop_infcomp_A_ic}). Then we describe all sequences $w\\in{X^\\omega}$ such that $T_w$ has a given number of ends in terms of sofic subshifts associated to strongly connected components of the automaton ${\\mathsf{A}}_{ic}$. Further we deduce the number of ends of Schreier graph $\\Gamma_w$ (see Corollary \\ref{remarktile}). After this, we pass to the study of the number of ends for a random Schreier graph $\\Gamma_w$. We show that picking randomly an element $w$\nin $X^{\\omega}$, the graph $\\Gamma_w$ has one or two ends (see Corollary~\\ref{cor_one_or_two_ends_a_s}). The latter case is completely described (see Theorem~\\ref{th_classification_two_ends}).\n\n\n\n\n\n\n\n\n\n\n\\subsection{Technical assumptions}\n\nIn what follows, except for a few special cases directly indicated, we make the following assumptions about\nthe studied self-similar groups $G$ and their generating sets $S$:\\\\\n\\\\\n\\indent \\hspace{0.3cm}  1. {\\it The group $G$ is generated by a bounded automaton $S$.}\\\\\n\\\\\n\\indent \\hspace{0.3cm}  2. {\\it The tile graphs $T_n=T_n(G,S)$ are connected.}\\\\\n\\\\\n\\indent \\hspace{0.3cm}  3. {\\it Every state of the automaton $S$ has an incoming arrow, and $S^{-1}=S$.}\\\\\n\\\\\n\nInstead of the assumption 2 it is enough to require that the group acts transitively on $X^n$ for every\n$n\\geq 1$, i.e., the Schreier graphs ${\\Gamma}_n(G,S)$ are connected. Then, even if the tile graphs $T_n(G,S)$\nare not connected, there is a uniform bound on the number of connected components in $T_n(G,S)$ (see how\nthe Schreier graphs are constructed from the tile graphs after Theorem~\\ref{th_tile_graph_construction}), and one can apply the developed methods to each component. The assumption 3 is technical, it\nguaranties that every directed path in the automaton $S$ can be continued to the left. If the generating\nset $S$ contains a state $s'$, which does not contain incoming edges, then $s|_x\\in S\\setminus\\{s'\\}$ for\nevery $s\\in S$ and $x\\in X$, and hence the state $s'$ does not interplay on the asymptotic properties of\nthe tile or Schreier graphs. Moreover, if the group is self-replicating, then the property 3 is always\nsatisfied, when we take its nucleus ${\\mathcal{N}}$ as the generating set $S$.\n\n\n\n\n\n\n\\subsection{The number of ends and infinite components in tile graphs with a vertex removed}\n\nFor a graph ${\\Gamma}$ and its vertex $v$ we denote by ${\\Gamma}\\setminus v$ the graph obtained from ${\\Gamma}$ by\nremoving the vertex $v$ together with all edges adjacent to $v$.\n\nLet $\\Gamma$ be an infinite, locally finite graph. A \\textit{ray} in $\\Gamma$ is\nan infinite sequence of adjacent vertices $v_1, v_2, \\ldots $ in $\\Gamma$ such that\n$v_i\\neq v_j$ for $i\\neq j$. Two rays $r$ and $r'$ are equivalent if for every finite\nsubset $F\\subset\\Gamma$ infinitely many vertices of $r$ and $r'$ belong to the same\nconnected component of $\\Gamma\\setminus F$. An \\textit{end} of $\\Gamma$ is an\nequivalence class of rays.\n\nIn what follows we use the notation:\n\\begin{itemize}\n\\item $\\#Ends({\\Gamma})$ is the number of ends of ${\\Gamma}$;\n\\item ${c}({\\Gamma})$ is the number of connected components in the graph ${\\Gamma}$;\n\\item ${ic}({\\Gamma})$ is the number of infinite connected components in ${\\Gamma}$.\n\\end{itemize}\n\nWe will show later that the number ${ic}({\\Gamma})$ can be computed for $\\Gamma=T_w\\setminus w$. The following proposition relates this value to the number of ends of $T_w$.\n\n\\begin{prop}\\label{prop_ends_limit}\nEvery tile graph $T_w$ for $w\\in{X^\\omega}$ has finitely many ends, which is equal to\n", "itemtype": "equation", "pos": 15998, "prevtext": "\nfor all $w\\in X^{*}\\cup {X^\\omega}$. The element $h$ is called the \\textit{restriction} of $g$ at $x$ and is\ndenoted by $h=g|_x$.\n\\end{defi}\n\n\nInductively one defines the restriction $g|_{x_1x_2\\ldots x_n}=g|_{x_1}|_{x_2}\\ldots\n|_{x_n}$ for every word $x_1x_2\\ldots x_n\\in X^{*}$. Restrictions have the following properties\n", "index": 3, "text": "\n\\[\ng(vu)=g(v)g|_v(u),\\qquad g|_{vu}=g|_{v}|_{u}, \\qquad (g\\cdot h)|_v=g|_{h(v)}\\cdot h|_v\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex2.m1\" class=\"ltx_Math\" alttext=\"g(vu)=g(v)g|_{v}(u),\\qquad g|_{vu}=g|_{v}|_{u},\\qquad(g\\cdot h)|_{v}=g|_{h(v)}%&#10;\\cdot h|_{v}\" display=\"block\"><mrow><mrow><mrow><mi>g</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>v</mi><mo>\u2062</mo><mi>u</mi></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><msub><mrow><mrow><mi>g</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mi>g</mi></mrow><mo fence=\"true\" stretchy=\"false\">|</mo></mrow><mi>v</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo rspace=\"22.5pt\">,</mo><mrow><mrow><msub><mrow><mi>g</mi><mo fence=\"true\" stretchy=\"false\">|</mo></mrow><mrow><mi>v</mi><mo>\u2062</mo><mi>u</mi></mrow></msub><mo>=</mo><msub><mrow><msub><mrow><mi>g</mi><mo fence=\"true\" stretchy=\"false\">|</mo></mrow><mi>v</mi></msub><mo fence=\"true\" stretchy=\"false\">|</mo></mrow><mi>u</mi></msub></mrow><mo rspace=\"22.5pt\">,</mo><mrow><msub><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mi>g</mi><mo>\u22c5</mo><mi>h</mi></mrow><mo stretchy=\"false\">)</mo></mrow><mo fence=\"true\" stretchy=\"false\">|</mo></mrow><mi>v</mi></msub><mo>=</mo><msub><mrow><mrow><msub><mrow><mi>g</mi><mo fence=\"true\" stretchy=\"false\">|</mo></mrow><mrow><mi>h</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow></mrow></msub><mo>\u22c5</mo><mi>h</mi></mrow><mo fence=\"true\" stretchy=\"false\">|</mo></mrow><mi>v</mi></msub></mrow></mrow></mrow></math>", "type": "latex"}, {"file": "1601.07587.tex", "nexttext": "\nwhere $\\sigma$ is the shift map on the space ${X^\\omega}$.\n\\end{prop}\n\\begin{proof}\nLet us show that the number of infinite connected components of the graphs $T_{\\sigma^n(w)}\\setminus\n\\sigma^n(w)$ and $T_w\\setminus X^n\\sigma^n(w)$ is the same for every $n$. Consider the natural partition of\nthe set of vertices of $T_w$ given by\n", "itemtype": "equation", "pos": 38157, "prevtext": "\nfor all $g,h\\in G$ and $v,u\\in X^{*}$ (we are using left actions so that $(g h)(v)=g(h(v))$). If $X=\\{1,2,\\ldots,d\\}$ then every element $g\\in G$ can be uniquely represented by the tuple $(g|_1,g|_2,\\ldots,g|_d)\\pi_g$, where $\\pi_g$ is the permutation induced by $g$ on the set $X$.\n\nIt follows from the definition that every self-similar group $G$ preserves the length of words under\nits action on the space $X^{*}$, so that we have an action of the group $G$ on the set $X^n$ for every $n$.\n\nThe set $X^{*}$ can be naturally identified with a rooted regular tree where the root is labeled by the\nempty word $\\emptyset$, the first level is labeled by the elements in $X$ and the $n$-th level corresponds\nto $X^n$. The set ${X^\\omega}$ can be identified with the boundary of the tree. Every\nself-similar group acts by automorphisms on this rooted tree and by homeomorphisms on its boundary.\n\n\n\\subsubsection{Automata and automaton groups}\n\nAnother way to introduce self-similar groups is through input-output automata and automaton groups. A\ntransducer \\textit{automaton} is a quadruple $(S,X,{t},{o})$, where $S$ is the set of states of automaton;\n$X$ is an alphabet; ${t}: S\\times X \\rightarrow S$ is the transition map; and ${o}: S\\times X \\rightarrow\nX$ is the output map. We will use notation $S$ for both the set of states and the automaton itself. An\nautomaton is \\textit{finite} if it has finitely many states and it is \\textit{invertible} if, for all\n$s\\in S$, the transformation ${o}(s, \\cdot):X\\rightarrow X$ is a permutation of $X$. An automaton can be\nrepresented by a directed labeled graph whose vertices are identified with the states and for every state\n$s\\in S$ and every letter $x\\in X$ it has an arrow from $s$ to ${t}(s,x)$ labeled by $x|{o}(s,x)$. This\ngraph contains complete information about the automaton and we will identify them. When talking about\npaths and cycles in automata we always mean directed paths and cycles in corresponding graph\nrepresentations.\n\n\nEvery state $s\\in S$ of an automaton defines a transformation on the set $X^{\\ast}\\cup X^{\\omega}$, which is again denoted by $s$ by abuse of notation, as follows. Given a word $x_1x_2\\ldots$ over $X$, there exists a unique path in $S$ starting at the state $s$ and labeled by $x_1|y_1$, $x_2|y_2$, \\ldots for some $y_i\\in X$. Then $s(x_1x_2\\ldots)=y_1y_2\\ldots$. We always assume that our automata are minimal, i.e., different states define different transformations. The state of automata that defines the identity transformation is denoted by $1$.\n\n\nAn automaton $S$ is invertible when all transformations defined by its states are invertible. In this case one can consider the group\ngenerated by these transformations under composition of functions, which is called the \\textit{automaton\ngroup} generated by $S$ and is denoted by $G(S)$. The natural action of every automaton group on the\nspace ${X^\\omega}$ is self-similar, and vise versa, every self-similar action of a group $G$ can be given by the\nautomaton with the set of states $G$ and arrows $g\\rightarrow g|_x$ labeled by $x|g(x)$ for all $g\\in G$\nand $x\\in X$.\n\n\n\n\n\n\n\n\n\\subsubsection{Contracting self-similar groups}\nA self-similar group $G$ is called \\textit{contracting} if there exists a finite set ${\\mathcal{N}}\\subset G$ with\nthe property that for every $g\\in G$ there exists $n\\in\\mathbb{N}$ such that $g|_v\\in{\\mathcal{N}}$ for all words\n$v$ of length greater or equal to $n$. The smallest set ${\\mathcal{N}}$ with this property is called the\n\\textit{nucleus} of the group. It is clear from definition that $h|_x\\in{\\mathcal{N}}$ for every $h\\in{\\mathcal{N}}$ and\n$x\\in X$, and therefore the nucleus ${\\mathcal{N}}$ can be considered as an automaton. Moreover, every state of\n${\\mathcal{N}}$ has an incoming arrow, because otherwise minimality of the nucleus would be violated. Also, the\nnucleus is symmetric, i.e., $h^{-1}\\in{\\mathcal{N}}$ for every $h\\in{\\mathcal{N}}$.\n\nA self-similar group $G$ is called \\textit{self-replicating} (or recurrent) if it acts transitively on $X$,\nand the map $g\\mapsto g|_x$ from the stabilizer $Stab_G(x)$ to the group $G$ is surjective for some (every)\nletter $x\\in X$. It can be shown that a self-replicating group acts transitively on $X^n$ for every $n\\geq\n1$. It is also easy to see (\\cite[Proposition~2.11.3]{self_sim_groups}) that if a finitely generated\ncontracting group is self-replicating then its nucleus ${\\mathcal{N}}$ is a generating set.\n\n\\subsection{Schreier graphs vs tile graphs of self-similar groups}\\label{section schreier vs tile}\n\nLet $G$ be a group generated by a finite set $S$ and let $H$ be a subgroup of $G$. The\n\\textit{(simplicial) Schreier coset graph ${\\Gamma}(G,S,H)$} of the group $G$ is the graph whose vertices are the\nleft cosets $G/H=\\{gH : g\\in G\\}$, and two vertices $g_1H$ and $g_2H$ are adjacent if there exists $s\\in\nS$ such that $g_2H=sg_1H$ or $g_1H=sg_2H$.\n\n\\begin{defi}\nLet $G$ be a group acting on a set $M$, then the corresponding (simplicial) \\textit{Schreier graph\n${\\Gamma}(G,S,M)$} is the graph with the set of vertices $M$, and two vertices $v$ and $u$ are adjacent if\nthere exists $s\\in S$ such that $s(v)=u$ or $s(u)=v$.\n\\end{defi}\n\nIf the action $(G,M)$ is transitive, then\nthe Schreier coset graph ${\\Gamma}(G,S,M)$ is isomorphic to the Schreier graph ${\\Gamma}(G,S,Stab_G(m))$ of the group with\nrespect to the stabilizer $Stab_G(m)$ for any $m\\in M$.\n\nLet $G$ be a self-similar group generated by a finite set $S$. The sets $X^n$ are invariant under the\naction of $G$, and we denote the associated Schreier graphs by ${\\Gamma}_n={\\Gamma}_n(G,S)$. For a point $w\\in{X^\\omega}$ we\nconsider the action of the group $G$ on the $G$-orbit of $w$, and the associated Schreier graph is called\nthe \\textit{orbital Schreier graph} denoted ${\\Gamma}_w={\\Gamma}_w(G,S)$. For every $w\\in{X^\\omega}$ we have\n$Stab_G(w)=\\bigcap_{n\\geq 1} Stab_G(w_n)$, where $w_n$ denotes the prefix of length $n$ of the infinite\nword $w$. The connected component of the rooted graph $(\\Gamma_n,w_n)$ around the root $w_n$ is exactly the\nSchreier graph of $G$ with respect to the stabilizer of $w_n$. It follows immediately that the graphs\n$(\\Gamma_n,w_n)$ converge to the graph $(\\Gamma_{w},w)$ in the pointed Gromov-Hausdorff topology \\cite{gromov}.\n\nBesides the Schreier graphs, we will also work with their subgraphs called tile graphs.\n\n\\begin{defi}\nThe \\textit{tile graph} $T_n=T_n(G,S)$ is the graph with the set of vertices $X^n$, where two vertices $v$\nand $u$ are adjacent if there exists $s\\in S$ such that $s(v)=u$ and $s|_v=1$.\n\\end{defi}\nThe tile graph $T_n$ is thus a subgraph of the Schreier graph ${\\Gamma}_n$. To define a tile graph for the action on\nthe space ${X^\\omega}$, consider the same set of vertices as in ${\\Gamma}_w$ and connect vertices $v$ and $u$ by an\nedge if there exists $s\\in S$ such that $s(v)=u$ and $s|_{v'}=1$ for some finite beginning $v'\\in X^{*}$ of\nthe sequence $v$. The connected component of this graph containing the vertex $w$ is called the\n\\textit{orbital tile graph}~$T_w$. It is clear from the construction that we also have the convergence\n$(T_n,w_n)\\rightarrow (T_{w},w)$ in the pointed Gromov-Hausdorff topology.\n\nThe study of orbital tile graphs $T_w$ is based on the approximation by finite tile graphs $T_n$. Namely,\nwe will frequently use the following observation. Every tile graph $T_n$ can be considered as a subgraph of\n$T_w$ under the inclusion $v\\mapsto v\\sigma^n(w)$. Indeed, if $v$ and $u$ are adjacent in $T_n$ then\n$v\\sigma^n(w)$ and $u\\sigma^n(w)$ are adjacent in $T_w$. Moreover, every edge of $T_w$ appears in the graph\n$T_n$ for all large enough $n$. Hence the graphs $T_n$ viewed as subgraphs of $T_w$ form a cover of $T_w$.\n\n\n\n\\subsection{Schreier graphs of groups generated by bounded automata}\\label{subsection_BoundedAutomata}\n\n\n\n\n\\subsubsection{Bounded automata}\n\n\n\n\\begin{defi} (Sidki \\cite{sidki:circ})\nA finite invertible automaton $S$ is called \\textit{bounded} if one of the following equivalent conditions holds:\n\\begin{enumerate}\n  \\item[1)] the number of paths of length $n$ in $S\\setminus\\{1\\}$ is bounded independently on $n$;\n\n  \\item[2)] the number of left- (equivalently, right-) infinite\npaths in $S\\setminus\\{1\\}$ is finite;\n\n  \\item[3)] any two\nnontrivial cycles in the automaton are disjoint and not connected by a path, where a cycle is called trivial if it is a loop at the trivial state;\n\n  \\item[4)] the number of left- (equivalently, right-) infinite sequences, which are read along left- (respectively, right-) infinite paths in $S\\setminus\\{1\\}$, is finite.\n\\end{enumerate}\n\n\n\\end{defi}\n\n\n\nThe states of a bounded automaton $S$ can be classified as follows:\\\\\n\\indent -- \\ a state $s$ is \\textit{finitary} if there exists $n\\in\\mathbb{N}$ such that $s|_v=1$ for all $v\\in X^n$;\\\\\n\\indent -- \\ a state $s$ is \\textit{circuit} if there exists a nonempty word $v\\in X^n$ such that $s|_v=s$,\\\\\n\\indent \\hspace{0.35cm} i.e., $s$ belongs to a cycle in $S$; in this case $s|_u$ is finitary for every $u\\in X^n$, $u\\neq\nv$;\\\\\n\\indent -- \\ for every state $s$ there exists $n\\in\\mathbb{N}$ such that for every $v\\in X^n$ the state $s|_v$ is\\\\\n\\indent \\hspace{0.35cm} either finitary or circuit.\\\\ By passing to a power $X^m$ of the alphabet $X$ every\nbounded automaton can be brought to the \\textit{basic form} (see\n\\cite[Proposition~3.9.11]{self_sim_groups}) in which the above items hold with $n=1$; in\nparticular, all cycles are loops, and $s|_x=1$ for every finitary state $s$ and every $x\\in X$ (here for $m$\nwe can take an integer number which is greater than the diameter of the automaton and is a multiple of the\nlength of every simple cycle).\n\nEvery self-similar group $G$ generated by a bounded automaton is contracting (see\n\\cite[Theorem~3.9.12]{self_sim_groups}). Its nucleus is a bounded automaton, which contains only finitary\nand circuit states (because every state of a nucleus should have an incoming arrow).\n\n\n\n\\subsubsection{Cofinality $\\&$ post-critical, critical and regular sequences}\n\nIn this section we introduce the notion of critical and post-critical sequences that is fundamental for our analysis.\n\nLet $G$ be a contracting self-similar group generated by an automaton $S$ and we assume $S=S^{-1}$. Let us describe the vertex sets of the orbital tile graphs $T_w=T_w(G,S)$. Two right- (or left-) infinite\nsequences are called \\textit{cofinal} if they differ only in finitely many letters. Cofinality is an\nequivalence relation on ${X^\\omega}$ and ${X^{-\\omega}}$. The respective equivalence classes are called the cofinality\nclasses and they are denoted by $Cof(\\cdot)$. The following statement characterizes vertices of tile\ngraphs in terms of the cofinal sequences.\n\\begin{lemma}\\label{cofinality}\nSuppose that the tile graphs $T_n(G,S)$ are connected for all $n\\in\\mathbb{N}$. Then for every $w\\in{X^\\omega}$\nthe cofinality class $Cof(w)$ is the set of vertices of the orbital tile graph $T_w(G,S)$.\n\\end{lemma}\n\\begin{proof}\nIf $g(v)=u$ for $v,u\\in X^{\\omega}$ and $g|_{v'}=1$ for a\nfinite beginning $v'$ of $v$ then $v$ and $u$ are cofinal. Conversely, since every graph $T_n$ is connected, for every $v,u\\in X^{n}$ there exists $g\\in G$ such that $g(v)=u$ and $g|_v=1$. Hence $g(vw)=uw$ for\nall $w\\in X^{\\omega}$ and every two cofinal sequences belong to the same orbital tile graph.\n\\end{proof}\n\nWe classify infinite sequences over $X$ as follows. A left-infinite sequence $\\ldots x_2x_1\\in{X^{-\\omega}}$ is\ncalled \\textit{post-critical} if there exists a left-infinite path $\\ldots e_2e_1$ in the automaton\n$S\\setminus \\{1\\}$ labeled by $\\ldots x_2x_1|\\ldots y_2y_1$ for some $y_i\\in X$. The set ${\\mathscr{P}}$ of all\npost-critical sequences is called \\textit{post-critical}. A right-infinite sequence $w=x_1x_2\\ldots\\in{X^\\omega}$\nis called \\textit{critical} if there exists a right-infinite path $e_1e_2\\ldots$ in the automaton\n$S\\setminus \\{1\\}$ labeled by $x_1x_2\\ldots|y_1y_2\\ldots$ for some $y_i\\in X$. It follows that every shift\n$\\sigma^n(w)$ of a critical sequence $w$ is again critical, and for every $n\\in\\mathbb{N}$ there exists\n$v\\in X^n$ such that $vw$ is critical (here we use the assumption that every path in $S$ can be continued\nto the left). It is proved in \\cite[Proposition~IV.18]{PhDBondarenko} (see also\n\\cite[Proposition~3.2.7]{self_sim_groups}) that the set of post-critical sequences coincides with the set\nof sequences that can be read along left-infinite paths in the nucleus of the group with removed trivial\nstate. The same proof works for critical sequences. Therefore the sets of critical and post-critical\nsequences do not depend on the chosen generating set (as soon as it satisfies assumption that every state of the automaton $S$ has an incoming arrow, and $S^{-1}=S$). Finally,\na sequence $w\\in{X^\\omega}$ is called \\textit{regular} if the cofinality class of $w$ does not contain critical\nsequences, or, equivalently, if the shifted sequence $\\sigma^n(w)$ is not critical for every $n\\geq 0$.\nNotice that the cofinality class of a critical sequence contains sequences which are neither regular nor\ncritical.\n\n\n\\begin{prop}\\label{prop_properties_of_sequences}\nSuppose that the automaton $S$ is bounded. Then the sets of critical and post-critical sequences are finite. Every post-critical sequence is pre-periodic. Every cofinality class contains not more than one critical sequence. The cofinality class of a regular sequence contains only regular sequences. If $w$ is regular, then there exists a finite beginning $v$ of $w$ such that $s|_v=1$ for every $s\\in S$.\n\\end{prop}\n\\begin{proof}\nThe number of right- and left-infinite paths avoiding the trivial state is finite in every bounded\nautomaton. Thus the number of critical and post-critical sequences is finite.\n\nThe pre-periodicity of post-critical sequences and the periodicity of critical sequences follow from the\ncyclic structure of bounded automata. The statement about the cofinality class of a critical sequence\nfollows immediately, because different periodic sequences can not differ only in finitely many letters.\n\nFinally, if $w=x_1x_2\\ldots\\in{X^\\omega}$ is regular, then starting from any state $s\\in S$ and following the\nedges labeled by $x_1|*,x_2|*,\\ldots$ we will end at the trivial state. Hence there exists $n$ such that\n$s|_{x_1x_2\\ldots x_n}=1$ for all $s\\in S$.\n\\end{proof}\n\nNote that if the automaton $S$ is in the basic form, then every post-critical sequence is of the form\n$y^{-\\omega}$ or $y^{-\\omega}x$ for some letters $x,y\\in X$, and every critical sequence is of the form\n$x^{\\omega}$ for some $x\\in X$.\n\n\n\n\n\\subsubsection{Inflation of graphs}\\label{section_inflation}\n\nLet $G$ be a group generated by a bounded automaton $S$. We assume $S=S^{-1}$ and every state of $S$ has an incoming arrow. In what follows we describe an inductive method (called \\textit{inflation of graphs}) to construct the tile graphs $T_n=T_n(G,S)$ developed in \\cite[Chapter~V]{PhDBondarenko}.\n\nLet $p=\\ldots x_2x_1\\in{\\mathscr{P}}$ be a post-critical sequence. The vertex $p_n=x_n\\ldots x_2x_1$ of the graphs ${\\Gamma}_n$ and $T_n$ will be called \\textit{post-critical}. Since the post-critical set ${\\mathscr{P}}$ is finite, for all large enough $n$, the post-critical vertices of ${\\Gamma}_n$ and $T_n$ are in  one-to-one correspondence with the elements of ${\\mathscr{P}}$ (just take $n$ large enough so that $p_n\\neq q_n$ whenever $p\\neq q$). Hence, with a slight abuse of\nnotations, we will consider the elements of the set ${\\mathscr{P}}$ as the vertices of the graphs ${\\Gamma}_n$ and\n$T_n$.\n\nLet $E$ be the set of all pairs $\\{(p,x),(q,y)\\}$ for $p,q\\in{\\mathscr{P}}$ and $x,y\\in X$ such that there exists\na left-infinite path in the automaton $S$, which ends in the trivial state and is labeled by the pair\n$px|qy$.\n\n\n\\begin{theor}\\cite[Theorem~V.8]{PhDBondarenko}\\label{th_tile_graph_construction}\nTo construct the tile graph $T_{n+1}$  take $|X|$ copies of the tile graph $T_n$, identify their sets of\nvertices with $X^nx$ for $x\\in X$, and connect two vertices $vx$ and $uy$ by an edge if and only if\n$v,u\\in{\\mathscr{P}}$ and $\\{(v,x),(u,y)\\}\\in E$.\n\\end{theor}\n\nThe procedure of inflation of graphs given in Theorem~\\ref{th_tile_graph_construction} can be described\nusing the graph $M$ with the vertex set ${\\mathscr{P}}\\times X$ and the edge set $E$, which we call the \\textit{model graph} associated to the automaton $S$. The vertex $(p,x)$ of $M$ is called \\textit{post-critical}, if the sequence $px$ is post-critical. Note that the post-critical vertices of $M$ are in one-to-one correspondence with elements of the post-critical set ${\\mathscr{P}}$. Now if we ``place'' the\ngraph $T_n$ in the model graph instead of the vertices ${\\mathscr{P}}\\times x$ for each $x\\in X$ such that the\npost-critical vertices of $T_n$ fit with the set ${\\mathscr{P}}\\times x$, we get the graph $T_{n+1}$. Moreover,\nthe post-critical vertices of $M$ will correspond to the post-critical vertices of $T_{n+1}$.\n\nIn order to construct the Schreier graph ${\\Gamma}_n$ we can take the tile graph $T_n$ and add an edge between\npost-critical vertices $p$ and $q$ if $s(p)=q$ for some $s\\in S$. Indeed, if $s(v)=u$ and $s|_v\\neq 1$ (the\nedge that does not appear in $T_n$) then $v$ and $u$ are post-critical vertices, and they should be\nadjacent in ${\\Gamma}_n$. Notice that there are only finitely many added edges (independently on $n$) and they\ncan be described directly through the generating set $S$. Namely, define the set $E({\\Gamma}\\setminus T)$ as the\nset of all pairs $\\{p,q\\}$ for $p,q\\in{\\mathscr{P}}$ such that there exists a left-infinite path in $S$ labeled by\nthe pair $p|q$ or $q|p$. Then if we take the tile graph $T_n$ and add an edge between $p_n$ and $q_n$ for\nevery $\\{p,q\\}\\in E({\\Gamma}\\setminus T)$, we get the Schreier graph ${\\Gamma}_n$.\n\n\n\n\\section{Ends of tile graphs and Schreier graphs}\\label{Section_Ends}\n\nIn this section we present the main results about the number of ends of Schreier graphs $\\Gamma_w$ of groups\ngenerated by bounded automata. Our method passes through the study of the same problem for the tile graphs $T_w$. First, we show that the number of ends of graphs $T_w$ can be deduced from the number of connected components in tile graphs with a vertex removed (see Proposition~\\ref{prop_ends_limit}). We use the inflation procedure to construct a finite deterministic automaton ${\\mathsf{A}}_{ic}$, which given a sequence $w\\in{X^\\omega}$ determines the number of infinite connected components in the graph $T_w$ with the vertex $w$ removed (see Proposition~\\ref{prop_infcomp_A_ic}). Then we describe all sequences $w\\in{X^\\omega}$ such that $T_w$ has a given number of ends in terms of sofic subshifts associated to strongly connected components of the automaton ${\\mathsf{A}}_{ic}$. Further we deduce the number of ends of Schreier graph $\\Gamma_w$ (see Corollary \\ref{remarktile}). After this, we pass to the study of the number of ends for a random Schreier graph $\\Gamma_w$. We show that picking randomly an element $w$\nin $X^{\\omega}$, the graph $\\Gamma_w$ has one or two ends (see Corollary~\\ref{cor_one_or_two_ends_a_s}). The latter case is completely described (see Theorem~\\ref{th_classification_two_ends}).\n\n\n\n\n\n\n\n\n\n\n\\subsection{Technical assumptions}\n\nIn what follows, except for a few special cases directly indicated, we make the following assumptions about\nthe studied self-similar groups $G$ and their generating sets $S$:\\\\\n\\\\\n\\indent \\hspace{0.3cm}  1. {\\it The group $G$ is generated by a bounded automaton $S$.}\\\\\n\\\\\n\\indent \\hspace{0.3cm}  2. {\\it The tile graphs $T_n=T_n(G,S)$ are connected.}\\\\\n\\\\\n\\indent \\hspace{0.3cm}  3. {\\it Every state of the automaton $S$ has an incoming arrow, and $S^{-1}=S$.}\\\\\n\\\\\n\nInstead of the assumption 2 it is enough to require that the group acts transitively on $X^n$ for every\n$n\\geq 1$, i.e., the Schreier graphs ${\\Gamma}_n(G,S)$ are connected. Then, even if the tile graphs $T_n(G,S)$\nare not connected, there is a uniform bound on the number of connected components in $T_n(G,S)$ (see how\nthe Schreier graphs are constructed from the tile graphs after Theorem~\\ref{th_tile_graph_construction}), and one can apply the developed methods to each component. The assumption 3 is technical, it\nguaranties that every directed path in the automaton $S$ can be continued to the left. If the generating\nset $S$ contains a state $s'$, which does not contain incoming edges, then $s|_x\\in S\\setminus\\{s'\\}$ for\nevery $s\\in S$ and $x\\in X$, and hence the state $s'$ does not interplay on the asymptotic properties of\nthe tile or Schreier graphs. Moreover, if the group is self-replicating, then the property 3 is always\nsatisfied, when we take its nucleus ${\\mathcal{N}}$ as the generating set $S$.\n\n\n\n\n\n\n\\subsection{The number of ends and infinite components in tile graphs with a vertex removed}\n\nFor a graph ${\\Gamma}$ and its vertex $v$ we denote by ${\\Gamma}\\setminus v$ the graph obtained from ${\\Gamma}$ by\nremoving the vertex $v$ together with all edges adjacent to $v$.\n\nLet $\\Gamma$ be an infinite, locally finite graph. A \\textit{ray} in $\\Gamma$ is\nan infinite sequence of adjacent vertices $v_1, v_2, \\ldots $ in $\\Gamma$ such that\n$v_i\\neq v_j$ for $i\\neq j$. Two rays $r$ and $r'$ are equivalent if for every finite\nsubset $F\\subset\\Gamma$ infinitely many vertices of $r$ and $r'$ belong to the same\nconnected component of $\\Gamma\\setminus F$. An \\textit{end} of $\\Gamma$ is an\nequivalence class of rays.\n\nIn what follows we use the notation:\n\\begin{itemize}\n\\item $\\#Ends({\\Gamma})$ is the number of ends of ${\\Gamma}$;\n\\item ${c}({\\Gamma})$ is the number of connected components in the graph ${\\Gamma}$;\n\\item ${ic}({\\Gamma})$ is the number of infinite connected components in ${\\Gamma}$.\n\\end{itemize}\n\nWe will show later that the number ${ic}({\\Gamma})$ can be computed for $\\Gamma=T_w\\setminus w$. The following proposition relates this value to the number of ends of $T_w$.\n\n\\begin{prop}\\label{prop_ends_limit}\nEvery tile graph $T_w$ for $w\\in{X^\\omega}$ has finitely many ends, which is equal to\n", "index": 5, "text": "\n\\[\n\\#Ends(T_w)=\\lim_{n\\rightarrow\\infty} {ic}(T_{\\sigma^n(w)}\\setminus \\sigma^n(w)),\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex3.m1\" class=\"ltx_Math\" alttext=\"\\#Ends(T_{w})=\\lim_{n\\rightarrow\\infty}{ic}(T_{\\sigma^{n}(w)}\\setminus\\sigma^{%&#10;n}(w)),\" display=\"block\"><mrow><mrow><mrow><mi mathvariant=\"normal\">#</mi><mo>\u2062</mo><mi>E</mi><mo>\u2062</mo><mi>n</mi><mo>\u2062</mo><mi>d</mi><mo>\u2062</mo><mi>s</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mi>T</mi><mi>w</mi></msub><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><munder><mo movablelimits=\"false\">lim</mo><mrow><mi>n</mi><mo>\u2192</mo><mi mathvariant=\"normal\">\u221e</mi></mrow></munder><mo>\u2061</mo><mrow><mi>i</mi><mo>\u2062</mo><mi>c</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msub><mi>T</mi><mrow><msup><mi>\u03c3</mi><mi>n</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>w</mi><mo stretchy=\"false\">)</mo></mrow></mrow></msub><mo>\u2216</mo><mrow><msup><mi>\u03c3</mi><mi>n</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>w</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.07587.tex", "nexttext": "\nUsing the graph $T_w$ we construct a new graph $\\mathscr{G}$ with the set of vertices $Cof(\\sigma^n(w))$,\nwhere two vertices $v$ and $u$ are adjacent if there exist $v',u'\\in X^n$ such that $v'v$ and $u'u$ are\nadjacent in $T_w$. The graph $\\mathscr{G}$ is isomorphic to the tile graph $T_{\\sigma^n(w)}$ under the\nidentity map on $Cof(\\sigma^n(w))$. Indeed, let $v$ and $u$ be adjacent in $\\mathscr{G}$. Then there exist\n$v',u'\\in X^n$ and $s\\in S$ such that $s(v'v)=u'u$ and $s|_{v'v''}=1$ for a finite beginning $v''$ of $v$.\nIt follows that $s|_{v'}(v)=u$, $s|_{v'}|_{v''}=1$, and $s|_{v'}\\in S$, because of self-similarity.\nTherefore $v$ and $u$ are adjacent in $T_{\\sigma^n(w)}$. Conversely, suppose $s(v)=u$ and $s|_{v''}=1$ for\nsome $s\\in S$ and a finite beginning $v''$ of $v$. Since each element of $S$ has an incoming edge, there\nexist $s'\\in S$ and $v',u'\\in X^n$ such that $s'(v'v)=u'u$ and $s'|_{v'v''}=1$. Hence $v$ and $u$ are\nadjacent in the graph~$\\mathscr{G}$.\n\nThe subgraph of $T_{w}$ spanned by every set of vertices $X^nw'$ for $w'\\in Cof(\\sigma^n(w))$ is connected,\nbecause, by assumption, the tile graphs $T_n$ are connected. Hence, the number of infinite connected components in\n$T_w\\setminus X^n\\sigma^n(w)$ is equal to the number of infinite connected components in\n$T_{\\sigma^n(w)}\\setminus \\sigma^n(w)$. In particular, this number is bounded by the size of the generating\nset $S$.\n\nEvery infinite component of $T_w\\setminus X^n \\sigma^n(w)$ contains at least one end. Hence the estimate\n", "itemtype": "equation", "pos": 38576, "prevtext": "\nwhere $\\sigma$ is the shift map on the space ${X^\\omega}$.\n\\end{prop}\n\\begin{proof}\nLet us show that the number of infinite connected components of the graphs $T_{\\sigma^n(w)}\\setminus\n\\sigma^n(w)$ and $T_w\\setminus X^n\\sigma^n(w)$ is the same for every $n$. Consider the natural partition of\nthe set of vertices of $T_w$ given by\n", "index": 7, "text": "\n\\[\nCof(w)=\\bigsqcup_{w'\\in Cof(\\sigma^n(w))} X^nw'.\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex4.m1\" class=\"ltx_Math\" alttext=\"Cof(w)=\\bigsqcup_{w^{\\prime}\\in Cof(\\sigma^{n}(w))}X^{n}w^{\\prime}.\" display=\"block\"><mrow><mrow><mrow><mi>C</mi><mo>\u2062</mo><mi>o</mi><mo>\u2062</mo><mi>f</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>w</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><munder><mo largeop=\"true\" mathsize=\"160%\" movablelimits=\"false\" stretchy=\"false\" symmetric=\"true\">\u2294</mo><mrow><msup><mi>w</mi><mo>\u2032</mo></msup><mo>\u2208</mo><mrow><mi>C</mi><mo>\u2062</mo><mi>o</mi><mo>\u2062</mo><mi>f</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msup><mi>\u03c3</mi><mi>n</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>w</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></munder><mrow><msup><mi>X</mi><mi>n</mi></msup><mo>\u2062</mo><msup><mi>w</mi><mo>\u2032</mo></msup></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07587.tex", "nexttext": "\nholds for all $n$. In particular\n", "itemtype": "equation", "pos": 40145, "prevtext": "\nUsing the graph $T_w$ we construct a new graph $\\mathscr{G}$ with the set of vertices $Cof(\\sigma^n(w))$,\nwhere two vertices $v$ and $u$ are adjacent if there exist $v',u'\\in X^n$ such that $v'v$ and $u'u$ are\nadjacent in $T_w$. The graph $\\mathscr{G}$ is isomorphic to the tile graph $T_{\\sigma^n(w)}$ under the\nidentity map on $Cof(\\sigma^n(w))$. Indeed, let $v$ and $u$ be adjacent in $\\mathscr{G}$. Then there exist\n$v',u'\\in X^n$ and $s\\in S$ such that $s(v'v)=u'u$ and $s|_{v'v''}=1$ for a finite beginning $v''$ of $v$.\nIt follows that $s|_{v'}(v)=u$, $s|_{v'}|_{v''}=1$, and $s|_{v'}\\in S$, because of self-similarity.\nTherefore $v$ and $u$ are adjacent in $T_{\\sigma^n(w)}$. Conversely, suppose $s(v)=u$ and $s|_{v''}=1$ for\nsome $s\\in S$ and a finite beginning $v''$ of $v$. Since each element of $S$ has an incoming edge, there\nexist $s'\\in S$ and $v',u'\\in X^n$ such that $s'(v'v)=u'u$ and $s'|_{v'v''}=1$. Hence $v$ and $u$ are\nadjacent in the graph~$\\mathscr{G}$.\n\nThe subgraph of $T_{w}$ spanned by every set of vertices $X^nw'$ for $w'\\in Cof(\\sigma^n(w))$ is connected,\nbecause, by assumption, the tile graphs $T_n$ are connected. Hence, the number of infinite connected components in\n$T_w\\setminus X^n\\sigma^n(w)$ is equal to the number of infinite connected components in\n$T_{\\sigma^n(w)}\\setminus \\sigma^n(w)$. In particular, this number is bounded by the size of the generating\nset $S$.\n\nEvery infinite component of $T_w\\setminus X^n \\sigma^n(w)$ contains at least one end. Hence the estimate\n", "index": 9, "text": "\n\\[\n\\#Ends(T_w)\\geq {ic}(T_w\\setminus X^n \\sigma^n(w))={ic}(T_{\\sigma^n(w)}\\setminus \\sigma^n(w))\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex5.m1\" class=\"ltx_Math\" alttext=\"\\#Ends(T_{w})\\geq{ic}(T_{w}\\setminus X^{n}\\sigma^{n}(w))={ic}(T_{\\sigma^{n}(w)%&#10;}\\setminus\\sigma^{n}(w))\" display=\"block\"><mrow><mrow><mi mathvariant=\"normal\">#</mi><mo>\u2062</mo><mi>E</mi><mo>\u2062</mo><mi>n</mi><mo>\u2062</mo><mi>d</mi><mo>\u2062</mo><mi>s</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mi>T</mi><mi>w</mi></msub><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2265</mo><mrow><mi>i</mi><mo>\u2062</mo><mi>c</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msub><mi>T</mi><mi>w</mi></msub><mo>\u2216</mo><mrow><msup><mi>X</mi><mi>n</mi></msup><mo>\u2062</mo><msup><mi>\u03c3</mi><mi>n</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>w</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><mi>i</mi><mo>\u2062</mo><mi>c</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msub><mi>T</mi><mrow><msup><mi>\u03c3</mi><mi>n</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>w</mi><mo stretchy=\"false\">)</mo></mrow></mrow></msub><mo>\u2216</mo><mrow><msup><mi>\u03c3</mi><mi>n</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>w</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></math>", "type": "latex"}, {"file": "1601.07587.tex", "nexttext": "\n\nFor the converse consider the ends $\\gamma_1,\\ldots,\\gamma_k$ of the graph $T_{w}$. They\ncan be made disconnected by removing finitely many vertices. Take $n$ large enough so that the set\n$X^n\\sigma^n(w)$ disconnects the ends $\\gamma_i$. Since every end belongs to an infinite component, we get\nat least $k$ infinite components of $T_{\\sigma^n(w)}\\setminus \\sigma^n(w)$. In particular, the number of\nends is finite and the statement follows.\n\\end{proof}\n\n\nIn particular, the number of ends of every tile graph $T_w$ is not greater than the maximal degree of\nvertices, i.e., $\\# Ends(T_w)\\leq |S|$. Now let us show how to compute the number ${ic}(T_w\\setminus w)$ in terms of the components that contain post-critical vertices. In other terms, only components of $T_n\\setminus w_n$ with post-critical vertices give a positive contribution, in the limit, to the number of infinite components. In order to do that, we denote by ${pc}(T_n\\setminus w_n)$ the number of connected components of $T_n\\setminus w_n$ that contain a\npost-critical vertex. \n\n\n\\begin{prop}\\label{prop_infcomp_limit}\nLet $w=x_1x_2\\ldots\\in{X^\\omega}$ be a regular or a critical sequence, then ${pc}(T_n\\setminus w_n)$ is an eventually non-increasing sequence and\n\\begin{eqnarray*}\n{ic}(T_w\\setminus w)=\\lim_{n\\rightarrow\\infty} {pc}(T_n\\setminus w_n).\n\\end{eqnarray*}\n\\end{prop}\n\\begin{proof}\nChoose $n$ large enough so that the subgraph $T_n$ of $T_w$ contains all edges of $T_w$ adjacent to the\nvertex $w$. Notice that if a vertex $v$ of $T_n$ is adjacent to some vertex $s(v)$ in $T_w\\setminus T_n$,\nthen $s|_v\\neq 1$ and thus $v$ is post-critical. It follows that if $C$ is a connected component of\n$T_n\\setminus w_n$ without post-critical vertices, then all the edges of the graph $T_w\\setminus w$\nadjacent to the component $C$ are contained in the graph $T_n\\setminus w_n$. Hence $C$ is a finite\ncomponent of $T_w\\setminus w$. Therefore the number of infinite components of $T_w\\setminus w$ is not\ngreater than the number of components of $T_n\\setminus w_n$ that contain a post-critical vertex. It\nfollows ${ic}(T_w\\setminus w)\\leq {pc}(T_{n+k}\\setminus w_{n+k})\\leq  {pc}(T_n\\setminus w_n)$ for all $k\\geq\n1$. In fact, if $v, v'$ are post-critical and belong to the same connected component of $T_n\\setminus\nw_n$, then there exists a path $\\{s_1,\\ldots, s_m\\}$ connecting them such that $s_i|_{s_1\\cdots\ns_{i-1}(v_n)}=1$, in particular the same holds for $s_i|_{s_1\\cdots s_{i-1}(v_{n+k})}=1$, $k\\geq 1$. This\nimplies the monotonicity of ${pc}(T_{n+k}\\setminus w_{n+k})$ for $k\\geq 1$.\n\nSuppose now that $w$ is regular. Let $C$ be a finite component of $T_w\\setminus w$. Since $C$ is finite,\nevery edge inside $C$ appears in the graph $T_n$ for all large enough $n$, and thus $C$ is a connected\ncomponent of $T_n\\setminus w_n$. Since $C$ contains only regular sequences, the last statement in\nProposition~\\ref{prop_properties_of_sequences} implies that for all $s\\in S$ and every vertex $v$ in $C$\nwe have $s|_{v_n}=1$ for all large enough $n$. In other words, the vertex $v_n$ of $T_n$ is not\npost-critical for every vertex $v$ in $C$. Therefore the component $C$ is not counted in the number\n${pc}(T_n\\setminus w_n)$. Hence ${ic}(T_w\\setminus w)={pc}(T_n\\setminus w_n)$ for all large enough~$n$.\n\nThe same arguments work if $w$ is critical, because every cofinality class contains not more than one\ncritical sequence, and hence the graph $T_w\\setminus w$ has no critical sequences.\n\\end{proof}\n\n\\begin{rem}\nWith a slight modification the last proposition also works for a sequence $w$, which is not critical but is\ncofinal to some critical sequence $u$. In this case, we can count the number of connected components of\n$T_n\\setminus w_n$ that contain post-critical vertices other than $u_n$, and then pass to the limit to get\nthe number of infinite components in $T_w\\setminus w$. Indeed, it is enough to notice that if the graph\n$T_n\\setminus w_n$ contains a connected component $C$ with precisely one post-critical vertex $u_n$ for\nlarge enough $n$, then $C$ is a finite component in the graph $T_w\\setminus w$. Under this modification the\nproposition may be applied to any sequence.\n\nAlso to find the number of ends it is enough to know that the limit in Proposition~\\ref{prop_infcomp_limit}\nis valid for regular and critical sequences. For any sequence $w$ cofinal to a critical sequence $u$ we\njust consider the graph $T_w=T_u$ centered at the vertex $u$ and apply the proposition.\n\\end{rem}\n\n\\begin{rem}\nIt is not difficult to observe that one can use the same method to obtain the number ${c}(T_w\\setminus w)$\nof all connected components of $T_w\\setminus w$. In particular, one has\n\n", "itemtype": "equation", "pos": 40278, "prevtext": "\nholds for all $n$. In particular\n", "index": 11, "text": "\n\\[\n\\#Ends(T_w)\\geq \\lim_{n\\rightarrow\\infty} {ic}(T_{\\sigma^n(w)}\\setminus \\sigma^n(w))\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex6.m1\" class=\"ltx_Math\" alttext=\"\\#Ends(T_{w})\\geq\\lim_{n\\rightarrow\\infty}{ic}(T_{\\sigma^{n}(w)}\\setminus%&#10;\\sigma^{n}(w))\" display=\"block\"><mrow><mrow><mi mathvariant=\"normal\">#</mi><mo>\u2062</mo><mi>E</mi><mo>\u2062</mo><mi>n</mi><mo>\u2062</mo><mi>d</mi><mo>\u2062</mo><mi>s</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mi>T</mi><mi>w</mi></msub><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2265</mo><mrow><munder><mo movablelimits=\"false\">lim</mo><mrow><mi>n</mi><mo>\u2192</mo><mi mathvariant=\"normal\">\u221e</mi></mrow></munder><mo>\u2061</mo><mrow><mi>i</mi><mo>\u2062</mo><mi>c</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msub><mi>T</mi><mrow><msup><mi>\u03c3</mi><mi>n</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>w</mi><mo stretchy=\"false\">)</mo></mrow></mrow></msub><mo>\u2216</mo><mrow><msup><mi>\u03c3</mi><mi>n</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>w</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow></math>", "type": "latex"}, {"file": "1601.07587.tex", "nexttext": "\n\\end{rem}\n\n\n\\subsection{Finite automaton to determine the number of components in tile graphs with a\nvertex removed}\\label{finite automaton section}\n\nUsing the iterative construction of tile graphs given in Theorem~\\ref{th_tile_graph_construction} we can\nprovide a recursive procedure to compute the numbers ${pc}(T_n\\setminus w_n)$. We will construct a finite\ndeterministic (acceptor) automaton ${\\mathsf{A}}_{ic}$ with the following structure: it has a unique initial state,\neach arrow in ${\\mathsf{A}}_{ic}$ is labeled by a letter $x\\in X$, each state of ${\\mathsf{A}}_{ic}$ is labeled by a partition\nof a subset of the post-critical set ${\\mathscr{P}}$. The automaton ${\\mathsf{A}}_{ic}$ will have the property that, given\na word $v\\in X^n$, the final state of ${\\mathsf{A}}_{ic}$ after reading $v$ corresponds to the partition of the\npost-critical vertices of the graph $T_n$ induced by the connected components of $T_n\\setminus v$. Then\n${pc}(T_n\\setminus v)$ is just the number of parts in this partition.\n\n\n\nWe start with the following crucial consideration for the construction of the automaton ${\\mathsf{A}}_{ic}$. Let $v$\nbe a vertex of the tile graph $T_n$. The components of $T_n\\setminus v$ partition the set of post-critical\nvertices of $T_n$. Let us consider only those components that contain at least one post-critical vertex.\nLet ${\\mathscr{P}}_i\\subset {\\mathscr{P}}$ be the set of all post-critical sequences, which represent post-critical\nvertices in $i$-th component. If the vertex $v$ is not post-critical, then $\\sqcup_{i} {\\mathscr{P}}_i={\\mathscr{P}}$.\nOtherwise, $\\sqcup_{i} {\\mathscr{P}}_i$ is a proper subset of ${\\mathscr{P}}$; every sequence $p$ in ${\\mathscr{P}}\\setminus\n\\sqcup_{i} {\\mathscr{P}}_i$ represents $v$, i.e., $v=p_n$ (for all large enough $n$ the set ${\\mathscr{P}}\\setminus\n\\sqcup_{i} {\\mathscr{P}}_i$ consists of just one post-critical sequence, while for small values of $n$ the same\nvertex may be represented by several post-critical sequences). In any case, we say that $\\{ {\\mathscr{P}}_i \\}_i$\nis the \\textit{partition} (of a subset of ${\\mathscr{P}}$) \\textit{induced by the vertex} $v$. If $T_n\\setminus\nv$ does not contain post-critical vertices (this happens when $v=p_n$ for every $p\\in{\\mathscr{P}}$), then we say\nthat $v$ induce the empty partition $\\{\\emptyset\\}$.\n\nThe set of all partitions induced by the vertices of tile graphs is denoted by $\\Pi$. The set $\\Pi$ can be\ncomputed algorithmically. To see this, let us show how, given the partition $P=\\{ {\\mathscr{P}}_i \\}_i$ induced\nby a vertex $v$ and a letter $x\\in X$, one can find the partition $F=\\{\\mathscr{F}_j\\}_j$ induced by the\nvertex $vx$. We will use the model graph $M$ associated to the automaton $S$ in Section~\\ref{section_inflation}, which has the vertex set ${\\mathscr{P}}\\times X$ and edges $E$. Recall that the set ${\\mathscr{P}}$ is identified with the set of post-critical vertices of $M$. Let us construct the auxiliary graph $M_{P,x}$ as follows: take the model graph $M$, add\nan edge between $(p,x)$ and $(q,x)$ for $p,q\\in{\\mathscr{P}}_i$ and every $i$, and add an edge between $(p,y)$\nand $(q,y)$ for every $p,q\\in{\\mathscr{P}}$ and $y\\in X, y\\neq x$. Put $K=\\{ (p,x) :\np\\in{\\mathscr{P}}\\setminus\\sqcup_{i} {\\mathscr{P}}_i \\}$. If the graph $M_{P,x}\\setminus K$ contains no post-critical\nvertices, then we define $\\{\\mathscr{F}_j\\}_j$ as the empty partition $\\{\\emptyset\\}$. Otherwise, we\nconsider the components of $M_{P,x}\\setminus K$ with at least one post-critical vertex, and let\n$\\mathscr{F}_j\\subset{\\mathscr{P}}$ be the set of all post-critical vertices/sequences in $j$-th component.\n\n\n\\begin{lemma}\\label{lemma construction Aic}\n$\\{\\mathscr{F}_j\\}_j$ is exactly the partition induced by the vertex $vx$.\n\\end{lemma}\n\\begin{proof}\nLet us consider the map $\\varphi:M_{P,x}\\rightarrow T_{n+1}$ given by $\\varphi((p,y))=p_ny$, $p\\in{\\mathscr{P}}$ and $y\\in X$. This map is neither surjective, nor injective in general, nor a graph homomorphism. However, it preserves the inflation construction of the graph $T_{n+1}$ from the graph $T_n$. Namely, $\\varphi$ maps each subset ${\\mathscr{P}}\\times\\{y\\}$ into the subset $X^ny$, and the edges in $E$ onto the edges of $T_{n+1}$ obtained under construction (see Theorem~\\ref{th_tile_graph_construction}). Also, by definition of post-critical vertices, the map $\\varphi$ sends the post-critical vertices of $M_{P,x}$ onto the post-critical vertices of $T_{n+1}$.\n\nNote that the set $K$ is exactly the preimage of the vertex $vx$ under $\\varphi$. Therefore we can consider the restriction $\\varphi:M_{P,x}\\setminus K\\rightarrow T_{n+1}\\setminus vx$.\n\n\nFor every $y\\in X$, $y\\neq x$ all vertices in ${\\mathscr{P}}\\times\\{y\\}$ belong to the same component of $M_{P,x}\\setminus K$, and $\\varphi$ maps these vertices to the same component of $T_{n+1}\\setminus vx$, because the subgraph of $T_{n+1}$ induced by the set of vertices $X^ny$ contains the graph $T_n$, which is connected. For each $i$ the vertices in ${\\mathscr{P}}_i\\times\\{x\\}$ are mapped to the same component of the graph $T_{n+1}\\setminus vx$, because its subgraph induced by the vertices $X^nx\\setminus vx$ contains the graph $T_{n}\\setminus v$ and ${\\mathscr{P}}_i$ is its connected component.\nIt follows that, if two post-critical vertices $p$ and $q$ can be connected by a path $p=v_0,v_1,\\ldots,v_m=q$ in $M_{P,x}\\setminus K$, then for every $i$ the vertices $\\varphi(v_i)$ and $\\varphi(v_{i+1})$ belong to the same component of $T_{n+1}\\setminus vx$, and therefore the post-critical vertices $\\varphi(p)$ and $\\varphi(q)$ lie in the same component.  Conversely, suppose $\\varphi(p)$ and $\\varphi(q)$ can be connected by a path $\\gamma$ in $T_{n+1}\\setminus vx$. We can subdivide $\\gamma$ as $\\gamma_1e_1\\gamma_2e_2\\ldots e_m\\gamma_{m+1}$, where $e_i\\in \\varphi(E)$ and each subpath $\\gamma_i$ is a path in a copy of $T_n$ inside $T_{n+1}$. The preimages of the end points of each $e_i$ belong to the same component in $M_{P,x}\\setminus K$. Therefore $p$ and $q$ lie in the same component in $M_{P,x}\\setminus K$.\nThe statement follows.\n\\end{proof}\n\n\n\n\n\nIt follows that we can find the set $\\Pi$ algorithmically as follows. Note that the empty partition\n$\\{\\emptyset\\}$ is always an element of $\\Pi$ (it is induced by the unique vertex of the tile $T_0$ of\nzero level). We start with $\\{\\emptyset\\}$ and for each letter $x\\in X$ construct new partition\n$\\{\\mathscr{F}_j\\}_j$ as above. We repeat this process for each new partition until no new partition is\nobtained. Since the set ${\\mathscr{P}}$ is finite, the process stops in finite time. Then $\\Pi$ is exactly the\nset of all obtained partitions.\n\n\nWe construct the (acceptor) automaton ${\\mathsf{A}}_{ic}$ over the alphabet $X$ on the set of states $\\Pi$ with the\nthe unique initial state $\\{\\emptyset\\}\\in\\Pi$. The transition function is given by the rule: for\n$\\{{\\mathscr{P}}_i\\}_i\\in\\Pi$ and $x\\in X$ we put $\\{{\\mathscr{P}}_i\\}_i \\xrightarrow{\\ x\\ } \\{\\mathscr{F}_j\\}_j$, where\n$\\{\\mathscr{F}_j\\}_j$ is defined as above. The automaton ${\\mathsf{A}}_{ic}$ has all the properties we described at\nthe beginning of this subsection: given a word $v\\in X^{*}$, the final state of ${\\mathsf{A}}_{ic}$ after accepting\n$v$ is exactly the partition induced by the vertex $v$. Since we are interested in the number\n${pc}(T_n\\setminus v)$ of components in $T_n\\setminus v$ containing post-critical vertices, we can label\nevery state of ${\\mathsf{A}}_{ic}$ by the number of components in the corresponding partition. We get the following\nstatement.\n\n\n\n\n\n\n\n\n\n\n\n\\begin{theor}\\label{thm_number_of_con_comp}\nThe graph $T_{|v|}\\setminus v$ has $k$ components containing a post-critical vertex if and only if the\nfinal state of the automaton ${\\mathsf{A}}_{ic}$ after accepting the word $v$ is labeled by the number $k$. In\nparticular, for every $k$ the set $C(k)$ of all words $v\\in X^{*}$ such that the graph $T_{|v|}\\setminus\nv$ has $k$ connected components containing a post-critical vertex is a regular language recognized by the\nautomaton ${\\mathsf{A}}_{ic}$.\n\\end{theor}\n\n\nSimilarly, we construct a finite deterministic acceptor automaton ${\\mathsf{A}}_c$ for computing the number of all\ncomponents in tile graphs with a vertex removed. The states of the automaton ${\\mathsf{A}}_c$ will be pairs of the form\n$(\\{{\\mathscr{P}}_i\\}_i,m)$, where $\\{{\\mathscr{P}}_i\\}_i\\in\\Pi$ and $m$ is a non-negative integer number, which will\ncount the number of connected components without post-critical vertices. We start with the state\n$(\\{\\emptyset\\},0)$, which is the unique initial state of ${\\mathsf{A}}_c$, and consequently construct new states\nand arrows as follows. Let $(P=\\{{\\mathscr{P}}_i\\}_i,m)$ be a state already constructed. For each $x\\in X$ we\ntake the graph $M_{P,x}\\setminus K$ constructed above, define $\\{\\mathscr{F}_j\\}_j$ as above, and put\n$m_x$ to be equal to the number of connected components in $M_{P,x}\\setminus K$ without post-critical\nvertices. If $(\\{\\mathscr{F}_j\\}_j,m+m_x)$ is already a state of ${\\mathsf{A}}_{c}$, then we put an arrow labeled by $x$ from the state $(\\{{\\mathscr{P}}_i\\}_i,m)$ to the state $(\\{\\mathscr{F}_j\\}_j,m+m_x)$.\nOtherwise, we introduce $(\\{\\mathscr{F}_j\\}_j,m+m_x)$ as a new state and put this arrow. We repeat this process for each new state\nuntil no new state is obtained. Since the number of all components in $T_n\\setminus v$ is not greater than\n$|S|$, the number $m$ cannot exceed $|S|$, and the construction stops in finite time.\n\nThe automaton ${\\mathsf{A}}_c$ has the following property: given a word $v\\in X^{*}$, the final state of ${\\mathsf{A}}_c$\nafter accepting the word $v$ is exactly the pair $(\\{{\\mathscr{P}}_i\\}_i,m)$, where $\\{{\\mathscr{P}}_i\\}_i$ is the\npartition induced by $v$ and $m$ is the number of components in $T_{|v|}\\setminus v$ without post-critical\nvertices. Since we are interested only in the number $c(T_n\\setminus v)$ of all components of\n$T_n\\setminus v$, we label every state $(\\{{\\mathscr{P}}_i\\}_i,m)$ of the automaton ${\\mathsf{A}}_{c}$ by the number $k+m$,\nwhere $k$ is the number of sets in the partition $\\{{\\mathscr{P}}_i\\}_i$. We get the following\nstatement.\n\n\n\\begin{prop}\\label{prop_number_of_con_comp A_c}\nThe graph $T_{|v|}\\setminus v$ has $k$ components if and only if the final state of the automaton ${\\mathsf{A}}_{c}$\nafter accepting the word $v$ is labeled by the number $k$. In particular, for every $k$ the set $C(k)$ of\nall words $v\\in X^{*}$ such that the graph $T_{|v|}\\setminus v$ has $k$ connected components is a regular\nlanguage recognized by the automaton ${\\mathsf{A}}_{c}$.\n\\end{prop}\n\n\n\nWe need the following properties of vertex labels in the automata ${\\mathsf{A}}_{ic}$ and ${\\mathsf{A}}_{c}$.\n\n\\begin{lemma}\\label{lemma_properties_A_ic}\n\\begin{enumerate}\n  \\item In every strongly connected component of the automata ${\\mathsf{A}}_{ic}$ and ${\\mathsf{A}}_c$ all states are labeled\n  by the same number.\n\n \\item All strongly connected components of the automaton ${\\mathsf{A}}_{ic}$ without outgoing arrows are labeled by\n the same number.\n\\end{enumerate}\n\\end{lemma}\n\\begin{proof}\n\\textit{1.} Suppose that there is a strongly connected component with two states labeled by different\nnumbers. It would imply that there exists an infinite word such that the corresponding path in the\nautomaton passes through each of these states infinite number of times. We get a contradiction with Proposition~\\ref{prop_infcomp_limit}, because the sequences ${pc}(T_n\\setminus w_n)$ and\n${c}(T_n\\setminus w_n)$ are eventually monotonic (for the last one the proof is the same).\n\n\\textit{2.} Suppose there are two strongly connected components in the automaton ${\\mathsf{A}}_{ic}$ without\noutgoing arrows which are labeled by different numbers. Let $v$ and $u$ be finite words such that starting at the initial state of ${\\mathsf{A}}_{ic}$ we end at the first and the second components respectively. Then for the infinite sequence $vuvu\\ldots$ the\nlimit in Proposition~\\ref{prop_ends_limit} does not exist, and we get a contradiction.\n\\end{proof}\n\nProposition~\\ref{prop_infcomp_limit} together with Theorem~\\ref{thm_number_of_con_comp} imply the\nfollowing method to find the number of infinite components in $T_w\\setminus w$ for $w\\in{X^\\omega}$.\n\n\\begin{prop}\\label{prop_infcomp_A_ic}\nLet $w=x_1x_2\\ldots\\in{X^\\omega}$ be a regular or critical sequence. The number of infinite connected components in $T_w\\setminus w$ is equal to the label of a strongly connected component of ${\\mathsf{A}}_{ic}$ that is visited infinitely often, when the automaton reads the sequence $w$.\n\\end{prop}\n\n\n\n\\subsection{The number of ends of tile graphs}\n\nThe characterization of the number of infinite components in the graph $T_w\\setminus w$ together with\nProposition~\\ref{prop_ends_limit} allows us to describe the number of ends of $T_w$.\n\nSince every critical sequence $w$ is periodic, we can algorithmically find the number of ends of the graph\n$T_w$ using Proposition~\\ref{prop_ends_limit} and the automaton ${\\mathsf{A}}_{ic}$. Now we introduce some\nnotations. Fix $k\\geq 1$ and let $EC_{=k}$ be the union of cofinality classes of critical sequences $w$\nwhose tile graph $T_w$ has $k$ ends. Similarly we define the sets $EC_{>k}$ and $EC_{<k}$. Let\n\\begin{itemize}\n\\item ${\\mathsf{A}}_{ic}(k)$ be the subgraph of ${\\mathsf{A}}_{ic}$ spanned by the strongly connected components labeled by numbers $\\geq k$;\n\\item $\\mathscr{R}_{\\geq k}$ be the one-sided sofic subshift given by the graph ${\\mathsf{A}}_{ic}(k)$, i.e., $\\mathscr{R}_{\\geq k}$ is the set of all sequences that can be read along right-infinite paths in ${\\mathsf{A}}_{ic}(k)$ starting at\nany state;\n\\item $E_{\\geq k}$ be the set of all sequences which are cofinal to some sequence from $\\mathscr{R}_{\\geq k}$. Since the set $\\mathscr{R}_{\\geq k}$ is shift-invariant, the set $E_{\\geq k}$\ncoincides with $X^{*}\\mathscr{R}_{\\geq k}=\\{vw | v\\in X^{*}, w\\in \\mathscr{R}_{\\geq k}\\}$.\n\\end{itemize}\n\n\n\n\n\n\n\n\n\n\\begin{theor}\\label{thm_number_of_ends}\nThe tile graph $T_w$ has $\\geq k$ ends if and only if $w\\in E_{\\geq k}\\setminus EC_{<k}$. Hence, the tile\ngraph $T_w$ has $k$ ends if and only if $w\\in E_{\\geq k} \\setminus \\left(E_{\\geq k+1} \\cup EC_{>k}\\cup\nEC_{<k}\\right)$.\n\\end{theor}\n\\begin{proof}\nWe need to prove that for a regular sequence $w$ the graph $T_w$ has at least $k$ ends if and only if\n$w\\in E_{\\geq k}$. First, suppose $w\\in E_{\\geq k}$. Then $w$ is cofinal to a sequence $w'\\in\n\\mathscr{R}_{\\geq k}$, which is also regular. The sequences $w$ and $w'$ belong to the same tile graph\n$T_w=T_{w'}$. There exists a finite word $v$ such that for the sequence $vw'$ the corresponding path in\n${\\mathsf{A}}_{ic}$ starting at the initial state eventually lies in the subgraph ${\\mathsf{A}}_{ic}(k)$. Then the graph\n$T_{vw'}\\setminus vw'$ has $\\geq k$ infinite components by Proposition~\\ref{prop_infcomp_limit}. Using the\ncorrespondence between infinite components of $T_{w'}\\setminus w'$ and of $T_{vw'}\\setminus X^{|v|}w'$\nshown in the proof of Proposition~\\ref{prop_ends_limit} we get that the graph $T_{w'}\\setminus w'$ has\n$\\geq k$ infinite components, and hence $T_{w'}=T_w$ has $\\geq k$ ends.\n\nFor the converse, suppose the graph $T_{w}$ has $\\geq k$ ends and the sequence $w$ is regular. Then\n$ic(T_{\\sigma^n(w)}\\setminus \\sigma^n(w))\\geq k$ for some $n$ by Propositions~\\ref{prop_ends_limit} and\n\\ref{prop_infcomp_limit}. Hence some shift $\\sigma^n(w)$ of the sequence $w$ is in $\\mathscr{R}_{\\geq k}$\nand thus $w\\in E_{\\geq k}$.\n\\end{proof}\n\nExample with $IMG(z^2+i)$ in Section~\\ref{Section_Examples} shows that we cannot expect to get a\ndescription using subshifts of finite type, and indeed the description using sofic subshifts is the best\npossible in these settings.\n\n\\subsection{From ends of tile graphs to ends of Schreier graphs}\n\nNow we can describe how to derive the number of ends of Schreier graphs from the number of ends of tile\ngraphs.\n\n\\begin{prop}\\label{prop_Schreier_construction}\n\\begin{enumerate}\n\\item The Schreier graph ${\\Gamma}_w$ coincides with the tile graph $T_w$ for every regular sequence $w\\in{X^\\omega}$.\n\\item Let $w\\in{X^\\omega}$ be a critical sequence, and let $O(w)$ be the set of all critical sequences $v\\in{X^\\omega}$ such\nthat $g(w)=v$ for some $g\\in G$. The Schreier graph ${\\Gamma}_w$ is constructed by\ntaking the disjoint union of the orbital tile graphs $T_v$ for $v\\in O(w)$ and\nconnecting two critical sequences $v_1,v_2\\in O(w)$ by an edge whenever $s(v_1)=v_2$ for some\n$s\\in S$.\n\\end{enumerate}\n\\end{prop}\n\\begin{proof}\n\\textit{1.} If the point $w$ is regular, then the set of vertices of ${\\Gamma}_w$ is the\ncofinality class $Cof(w)$, which is the set of vertices of $T_w$ by\nProposition~\\ref{cofinality}. Suppose there is an edge between $v$ and $u$ in the graph\n${\\Gamma}_w$. Then $s(v)=u$ for some $s\\in S$. Since the sequence $w$ is regular, all the\nsequences in $Cof(w)$ are regular, and hence there exists a finite beginning $v'$ of\n$v$ such that $s|_{v'}=1$. Hence there is an edge between $v$ and $u$ in the tile\ngraph~$T_w$.\n\n\\textit{2.} If the point $w$ is critical, then the set of vertices of ${\\Gamma}_w$ is the\nunion of cofinality classes $Cof(v)$ for $v\\in O(w)$. Consider an edge $s(v_1)=v_2$ in\n${\\Gamma}_w$. If this is not an edge of $T_v$ for $v\\in O(w)$, then the restriction of $s$\non every beginning of $v_1$ is not trivial. Hence $v_1,v_2$ are critical, and this edge\nwas added under construction.\n\\end{proof}\n\n\nThe following corollary summarizes the relation between the number of ends of the Schreier graphs ${\\Gamma}_w$\nwith the number of ends of the tile graphs $T_w$. It justifies the fact that, for our aims,\nit was enough to study the number of ends and connected components in the tile graphs.\n\n\\begin{cor}\\label{remarktile}\n\\begin{enumerate}\n  \\item If $w$ is a regular sequence, then $\\# Ends({\\Gamma}_w)=\\#Ends(T_{w})$.\n   \\item If $w$ is critical, then\n   \n", "itemtype": "equation", "pos": 45038, "prevtext": "\n\nFor the converse consider the ends $\\gamma_1,\\ldots,\\gamma_k$ of the graph $T_{w}$. They\ncan be made disconnected by removing finitely many vertices. Take $n$ large enough so that the set\n$X^n\\sigma^n(w)$ disconnects the ends $\\gamma_i$. Since every end belongs to an infinite component, we get\nat least $k$ infinite components of $T_{\\sigma^n(w)}\\setminus \\sigma^n(w)$. In particular, the number of\nends is finite and the statement follows.\n\\end{proof}\n\n\nIn particular, the number of ends of every tile graph $T_w$ is not greater than the maximal degree of\nvertices, i.e., $\\# Ends(T_w)\\leq |S|$. Now let us show how to compute the number ${ic}(T_w\\setminus w)$ in terms of the components that contain post-critical vertices. In other terms, only components of $T_n\\setminus w_n$ with post-critical vertices give a positive contribution, in the limit, to the number of infinite components. In order to do that, we denote by ${pc}(T_n\\setminus w_n)$ the number of connected components of $T_n\\setminus w_n$ that contain a\npost-critical vertex. \n\n\n\\begin{prop}\\label{prop_infcomp_limit}\nLet $w=x_1x_2\\ldots\\in{X^\\omega}$ be a regular or a critical sequence, then ${pc}(T_n\\setminus w_n)$ is an eventually non-increasing sequence and\n\\begin{eqnarray*}\n{ic}(T_w\\setminus w)=\\lim_{n\\rightarrow\\infty} {pc}(T_n\\setminus w_n).\n\\end{eqnarray*}\n\\end{prop}\n\\begin{proof}\nChoose $n$ large enough so that the subgraph $T_n$ of $T_w$ contains all edges of $T_w$ adjacent to the\nvertex $w$. Notice that if a vertex $v$ of $T_n$ is adjacent to some vertex $s(v)$ in $T_w\\setminus T_n$,\nthen $s|_v\\neq 1$ and thus $v$ is post-critical. It follows that if $C$ is a connected component of\n$T_n\\setminus w_n$ without post-critical vertices, then all the edges of the graph $T_w\\setminus w$\nadjacent to the component $C$ are contained in the graph $T_n\\setminus w_n$. Hence $C$ is a finite\ncomponent of $T_w\\setminus w$. Therefore the number of infinite components of $T_w\\setminus w$ is not\ngreater than the number of components of $T_n\\setminus w_n$ that contain a post-critical vertex. It\nfollows ${ic}(T_w\\setminus w)\\leq {pc}(T_{n+k}\\setminus w_{n+k})\\leq  {pc}(T_n\\setminus w_n)$ for all $k\\geq\n1$. In fact, if $v, v'$ are post-critical and belong to the same connected component of $T_n\\setminus\nw_n$, then there exists a path $\\{s_1,\\ldots, s_m\\}$ connecting them such that $s_i|_{s_1\\cdots\ns_{i-1}(v_n)}=1$, in particular the same holds for $s_i|_{s_1\\cdots s_{i-1}(v_{n+k})}=1$, $k\\geq 1$. This\nimplies the monotonicity of ${pc}(T_{n+k}\\setminus w_{n+k})$ for $k\\geq 1$.\n\nSuppose now that $w$ is regular. Let $C$ be a finite component of $T_w\\setminus w$. Since $C$ is finite,\nevery edge inside $C$ appears in the graph $T_n$ for all large enough $n$, and thus $C$ is a connected\ncomponent of $T_n\\setminus w_n$. Since $C$ contains only regular sequences, the last statement in\nProposition~\\ref{prop_properties_of_sequences} implies that for all $s\\in S$ and every vertex $v$ in $C$\nwe have $s|_{v_n}=1$ for all large enough $n$. In other words, the vertex $v_n$ of $T_n$ is not\npost-critical for every vertex $v$ in $C$. Therefore the component $C$ is not counted in the number\n${pc}(T_n\\setminus w_n)$. Hence ${ic}(T_w\\setminus w)={pc}(T_n\\setminus w_n)$ for all large enough~$n$.\n\nThe same arguments work if $w$ is critical, because every cofinality class contains not more than one\ncritical sequence, and hence the graph $T_w\\setminus w$ has no critical sequences.\n\\end{proof}\n\n\\begin{rem}\nWith a slight modification the last proposition also works for a sequence $w$, which is not critical but is\ncofinal to some critical sequence $u$. In this case, we can count the number of connected components of\n$T_n\\setminus w_n$ that contain post-critical vertices other than $u_n$, and then pass to the limit to get\nthe number of infinite components in $T_w\\setminus w$. Indeed, it is enough to notice that if the graph\n$T_n\\setminus w_n$ contains a connected component $C$ with precisely one post-critical vertex $u_n$ for\nlarge enough $n$, then $C$ is a finite component in the graph $T_w\\setminus w$. Under this modification the\nproposition may be applied to any sequence.\n\nAlso to find the number of ends it is enough to know that the limit in Proposition~\\ref{prop_infcomp_limit}\nis valid for regular and critical sequences. For any sequence $w$ cofinal to a critical sequence $u$ we\njust consider the graph $T_w=T_u$ centered at the vertex $u$ and apply the proposition.\n\\end{rem}\n\n\\begin{rem}\nIt is not difficult to observe that one can use the same method to obtain the number ${c}(T_w\\setminus w)$\nof all connected components of $T_w\\setminus w$. In particular, one has\n\n", "index": 13, "text": "$$\n{c}(T_w\\setminus w)=\\lim_{n\\rightarrow\\infty} {c}(T_n\\setminus w_n).\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex7.m1\" class=\"ltx_Math\" alttext=\"{c}(T_{w}\\setminus w)=\\lim_{n\\rightarrow\\infty}{c}(T_{n}\\setminus w_{n}).\" display=\"block\"><mrow><mrow><mrow><mi>c</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msub><mi>T</mi><mi>w</mi></msub><mo>\u2216</mo><mi>w</mi></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><munder><mo movablelimits=\"false\">lim</mo><mrow><mi>n</mi><mo>\u2192</mo><mi mathvariant=\"normal\">\u221e</mi></mrow></munder><mo>\u2061</mo><mrow><mi>c</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msub><mi>T</mi><mi>n</mi></msub><mo>\u2216</mo><msub><mi>w</mi><mi>n</mi></msub></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07587.tex", "nexttext": "\nwhere the set $O(w)$ is from Proposition~\\ref{prop_Schreier_construction}.\n\\end{enumerate}\n\\end{cor}\n\n\nUsing the automata ${\\mathsf{A}}_c$ and ${\\mathsf{A}}_{ic}$ one can construct similar automata for the number of components in the\nSchreier graphs ${\\Gamma}_n$ with a vertex removed. For every state of ${\\mathsf{A}}_c$ or ${\\mathsf{A}}_{ic}$ take the corresponding\npartition of the post-critical set and combine components according to the edges $E({\\Gamma}\\setminus T)$\ndescribed in the last paragraph in Section~\\ref{subsection_BoundedAutomata}. For example, if\n$\\{{\\mathscr{P}}_i\\}_i$ is a state of ${\\mathsf{A}}_{ic}$, then we glue every two components ${\\mathscr{P}}_s$ and\n${\\mathscr{P}}_t$ if $\\{p,q\\}\\in E({\\Gamma}\\setminus T)$ for some $p\\in {\\mathscr{P}}_s$ and $q\\in{\\mathscr{P}}_t$. We get a new\npartition, and we label the state by the number of components in this partition. Basically, we get the\nsame automata, but vertices may be labeled in a different way.\n\nA case of special interest is when all Schreier graphs have one end.\nIn our settings of groups generated by bounded automata, our construction enables us to\nfind a necessary and sufficient condition when all Schreier graphs $\\Gamma_w$ have one end.\n\n\\begin{theor}\\label{all-one-ended}\nAll orbital Schreier graphs $\\Gamma_w$ for $w\\in{X^\\omega}$ have one end if and only if the following two\nconditions hold:\n\\begin{enumerate}\n\\item all arrows along directed cycles in the automaton $S$ are labeled by $x|x$ for some $x\\in X$ (depending on an arrow);\n\\item all strongly connected components of the automaton ${\\mathsf{A}}_{ic}$ are labeled by $1$ (partitions consisting of one part).\n\\end{enumerate}\n\\end{theor}\n\\begin{proof}\nLet us show that the first condition is equivalent to the property that for every $w\\in{X^\\omega}$ the Schreier\ngraph $\\Gamma_w$ and tile graph $T_w$ coincide. If there exists a directed cycle that does not satisfy\ncondition 1, then there exist two different critical sequences $w,w'$ that are connected in the Schreier\ngraph, i.e., $s(w)=w'$ for some $s\\in S$. In this case $\\Gamma_{w}\\neq T_{w}$, because by\nProposition~\\ref{prop_properties_of_sequences} different critical sequences are non-cofinal, and therefore\nbelong to different tile graphs. And vice versa, the existence of such critical sequences contradicts\ncondition 1. Therefore condition 1 implies $O(w)=\\{w\\}$ for every critical sequence $w$, and thus\n$\\Gamma_w=T_w$ by Proposition~\\ref{prop_Schreier_construction}.\n\nTheorem~\\ref{thm_number_of_ends} implies that condition 2 is equivalent to the statement that every\ntile graph $T_w$ has one end. Therefore, if the conditions $1$ and $2$ hold, then any Schreier graph\ncoincides with the corresponding tile graph which has one end.\n\nConversely, Proposition~\\ref{prop_Schreier_construction} implies that if the Schreier graph $\\Gamma_{w}$\nfor a critical sequence $w$ does not coincide with the corresponding tile graph $T_{w}$, then the number\nof ends of $\\Gamma_w$ is greater than one. (The graph $\\Gamma_w$ is a disjoint union of more than one\ninfinite tile graphs $T_v$, $v\\in O(w)$ connected by a finite number of edges.) Therefore, if all Schreier\ngraphs $\\Gamma_w$ have one end, then they should coincide with tile graphs (condition 1 holds) and tile\ngraphs have one end (condition 2 holds).\n\\end{proof}\n\n\\begin{rem}\\label{remarkanoi}\nThe Hanoi Towers group $H^{(3)}$ \\cite{gri_sunik:hanoi} is an example of a group generated by a bounded\nautomaton for which all orbital Schreier graphs $\\Gamma_w$ have one end. On the other hand, this group is\nnot indicable (since its abelianization is finite) but can be projected onto the infinite dihedral group\n\\cite{delzant_grigorchuk}. This implies that it contains a normal subgroup $N$ such that the Schreier\ncoset graph associated with $N$ has two ends. Clearly, for what said above, $N$ does not coincide with the\nstabilizer of $w$ for any $w\\in X^{\\omega}$.\n\\end{rem}\n\n\n\\subsection{The number of infinite components of tile graphs almost surely}\n\nThe structure of the automaton ${\\mathsf{A}}_{ic}$ allows to get results about the measure of\ninfinite sequences $w\\in{X^\\omega}$ for which the tile graphs $T_w\\setminus w$ have a given number of infinite components. We recall that the space $X^{\\omega}$ is endowed with the uniform measure.\n\n\n\n\\begin{rem}\\label{rem_subword_and_inf_comp}\nIt is useful to notice that we can construct a finite word $u\\in X^{*}$ such that starting at any state of\nthe automaton ${\\mathsf{A}}_{ic}$ and following the word $u$ we end in some strongly connected component without\noutgoing edges. If these strongly connected components correspond to the partition of the post-critical set\non $k$ parts, then it follows that ${pc}(T_n\\setminus v_1uv_2)=k$ for all words $v_1,v_2\\in X^{*}$ with\n$|v_1uv_2|=n$. In other words, ${pc}(T_n\\setminus v)=k$ for every $v$ that contains $u$ as a subword.\n\\end{rem}\n\nBy Proposition~\\ref{prop_infcomp_limit} we get the\ndescription of sequences which correspond to infinite components using the automaton ${\\mathsf{A}}_{ic}$ (but only\nfor regular and critical sequences).\n\n\n\n\n\n\\begin{cor}\\label{cor_inf_comp_almost_all_seq}\nThe number of infinite connected components of the graph $T_w\\setminus w$ is almost surely the same for all\nsequences $w\\in{X^\\omega}$. This number coincides with the label of the strongly connected components of the\nautomaton ${\\mathsf{A}}_{ic}$ without outgoing arrows.\n\\end{cor}\n\\begin{proof}\nThe measure of non-regular sequences is zero. For regular sequences $w\\in{X^\\omega}$ we can use the automaton\n${\\mathsf{A}}_{ic}$ to find the number ${ic}(T_w\\setminus w)$. Then the corollary follows from\nLemma~\\ref{lemma_properties_A_ic} item 2 and the standard fact that the measure of all sequences that are\nread along paths in a strongly connected component with an outgoing arrow is zero (for example, this fact\nfollows from the observation that the adjacency matrix of such a component has spectral radius less than\n$|X|$). Another explanation comes from Remark~\\ref{rem_subword_and_inf_comp} and the fact that the set of\nall sequences $w\\in{X^\\omega}$ that contain a fixed word as a subword is of full measure.\n\\end{proof}\n\nThe corollary does not hold for the number of all connected components of $T_w\\setminus w$, see examples in\nSection~\\ref{Section_Examples}. However, given any number $k$ we can use the automaton ${\\mathsf{A}}_c$ to compute\nthe measure of the set $C(k)$ \n of all sequences $w\\in{X^\\omega}$ such that the graph $T_w\\setminus w$ has $k$\ncomponents. As shown in the previous proof only strongly connected components without outgoing arrows\ncontribute the set of sequences with a non-zero measure. Let $\\Lambda_k$ be the collection of all strongly\nconnected components of ${\\mathsf{A}}_c$ without outgoing arrows and labeled by the number $k$. Let $V_k$ be the set\nof finite words $v\\in X^{*}$ with the property that starting at the initial state and following arrows\nlabeled by $v$ we end at a component from $\\Lambda_k$, and any prefix of $v$ does not satisfy this\nproperty. Then the measure of $C(k)$  \nis equal to the sum $\\sum_{v\\in V_k} |X|^{-|v|}$. Since the automaton ${\\mathsf{A}}_c$ is finite,\nthis measure is always a rational number and can be computed algorithmically.\n\n\n\n\n\n\n\\subsection{The number of ends almost surely}\\label{Section_number_ends}\\label{section_ends_a_s}\n\nCorollary~\\ref{cor_inf_comp_almost_all_seq} together with Proposition~\\ref{prop_ends_limit} imply that the\ntile graphs $T_w$ (and thus the Schreier graphs ${\\Gamma}_w$) have almost surely the same number of ends, and\nthat this number is equal to the label of the strongly connected components of ${\\mathsf{A}}_{ic}$ without outgoing\narrows. As was mentioned in introduction, this fact actually holds for any finitely generated self-similar\ngroup, which acts transitively on the levels $X^n$ for all $n\\in\\mathbb{N}$ (see Proposition~6.10 in\n\\cite{AL}). In our setting of bounded automata we get a stronger description of the sequences $w$ for\nwhich the tile graph $T_w$ has non-typical number of ends.\n\n\\begin{prop}\\label{prop_more_ends}\nThere are only finitely many Schreier graphs ${\\Gamma}_w$ and tile graphs $T_w$ with more than two ends.\n\\end{prop}\n\\begin{proof}\nLet us prove that the graph $T_w\\setminus w$ can have more than two infinite components only for finitely\nmany sequences $w\\in{X^\\omega}$. Suppose not and choose sequences $w^{(1)},\\ldots,w^{(m)}$ such that\n${ic}(T_{w^{(i)}}\\setminus w^{(i)})\\geq 3$, where we take $m$ larger than the number of partitions of the\npost-critical set ${\\mathscr{P}}$. Choose level $n$ large enough so that all words $w^{(1)}_n,\\ldots,w^{(m)}_n$\nare different and ${pc}(T_n\\setminus w_n^{(i)})\\geq 3$ for all $i$ (it is possible by\nProposition~\\ref{prop_infcomp_limit}). Notice that since the graph $T_n$ is connected, the deletion of\ndifferent vertices $w^{(i)}$ produces different partitions of ${\\mathscr{P}}$. Indeed, if ${\\mathscr{P}}=\\sqcup_{i=1}^k\n{\\mathscr{P}}_i$ with $k\\geq 3$ is the partition we got after removing some vertex $v$, then some $k-1$ sets\n${\\mathscr{P}}_i$ will be in the same component of the graph $T_n\\setminus u$ for any other vertex $u$ (these\n$k-1$ sets will be connected through the vertex $v$). We get a contradiction with the choice of number~$m$.\n\nIt follows that there are only finitely many tile graphs with more than two ends. This also holds for\nSchreier graphs by Proposition~\\ref{prop_Schreier_construction}.\n\\end{proof}\n\n\\begin{cor}\\label{cor_>2ends_pre_periodic}\nThe Schreier graphs ${\\Gamma}_w$ and tile graphs $T_w$ can have more than two ends only for pre-periodic\nsequences $w$.\n\\end{cor}\n\\begin{proof}\nSince the graph $T_w\\setminus w$ can have more than two infinite components only for finitely many\nsequences $w$, we get that, in the limit in Proposition~\\ref{prop_ends_limit}, the sequence $\\sigma^n(w)$\nattains a finite number of values. Hence $w$ is pre-periodic.\n\\end{proof}\n\nExample with $IMG(z^2+i)$ in Section~\\ref{Section_Examples} shows that the Schreier graph ${\\Gamma}_w$ and the\ntile graph $T_w$ may have more than two ends even for regular sequences $w$.\n\n\\begin{cor}\\label{cor_one_or_two_ends_a_s}\nThe tile graphs $T_w$ and Schreier graphs ${\\Gamma}_w$ have the same number of ends for almost all sequences $w\\in{X^\\omega}$, and this number is equal to one or two.\n\\end{cor}\n\n\n\\subsection{Two ends almost surely}\\label{section_two_ends_a_s}\n\nIn this section we describe bounded automata for which Schreier graphs $\\Gamma_w$ and tile graphs $T_w$\nhave almost surely two ends. Notice that in this case the post-critical set ${\\mathscr{P}}$ cannot consist of one\nelement (actually, every finitely generated self-similar group with $|{\\mathscr{P}}|=1$ is finite and cannot act\ntransitively on $X^n$ for all $n$).\n\n\\begin{lemma}\\label{lemma_as_two_ends_|P|=2}\nIf the Schreier graphs $\\Gamma_w$ (equivalently, the tile graphs $T_w$) have two ends for almost all\n$w\\in{X^\\omega}$, then $|{\\mathscr{P}}|=2$.\n\\end{lemma}\n\\begin{proof}\nWe pass to a power of the alphabet so that every post-critical sequence is of the form $y^{-\\omega}$ or\n$y^{-\\omega}x$ for some letters $x,y\\in X$ and different post-critical sequences end with different letters.\nIn particular, every subset ${\\mathscr{P}}\\times\\{x\\}$ for $x\\in X$ of the model graph $M$ contains at most one\npost-critical vertex of $M$.\n\nWe again pass to a power of the alphabet so that for every nontrivial element $s\\in S$ there exists a\nletter $x\\in X$ such that $s(x)\\neq x$ and $s|_x=1$. Then every post-critical sequence $p\\in{\\mathscr{P}}$ appears\nin some edge $\\{(p,*), (*,*)\\}$ of the model graph. Indeed, if the pair $p|q$ is read along a left-infinite\npath in the automaton $S\\setminus\\{1\\}$ that ends in a nontrivial state $s$, then the pair\n$\\{(p,x),(q,s(x))\\}$ belongs to the edge set $E$ of the graph $M$.\n\nNow suppose that tile graphs have almost surely two ends. Then the strongly connected components without outgoing\narrows in the automaton ${\\mathsf{A}}_{ic}$ correspond to the partitions of the post-critical set ${\\mathscr{P}}$ on two\nparts (see Corollary \\ref{cor_inf_comp_almost_all_seq}). In particular, there is no state corresponding to the partition of ${\\mathscr{P}}$ with one part, because\nsuch a partition would form a strongly connected component without outgoing arrows (see the construction of\n${\\mathsf{A}}_{ic}$). We will use the fact that all paths in the automaton ${\\mathsf{A}}_{ic}$ starting at any partition\n${\\mathscr{P}}={\\mathscr{P}}_1\\sqcup {\\mathscr{P}}_2$ end in partitions of ${\\mathscr{P}}$ on two parts (we cannot get more parts).\n\nLet us construct an auxiliary graph $\\overline{M}$ as follows: take the model graph $M$ and for each $x\\in\nX$ add edges between all vertices in the subset ${\\mathscr{P}}\\times \\{x\\}$. We will prove that the graph\n$\\overline{M}$ is an ``interval'', i.e., there are two vertices of degree one and the other vertices have\ndegree two, and that two end vertices of $\\overline{M}$ are the only post-critical vertices. First, let us\nshow that there are only two subsets ${\\mathscr{P}} \\times \\{x\\}$ for $x\\in X$ such that the graph\n$\\overline{M}\\setminus {\\mathscr{P}}\\times \\{x\\}$ is connected. Suppose that there are three such subsets\n${\\mathscr{P}}\\times \\{x\\}$, ${\\mathscr{P}}\\times \\{y\\}$, ${\\mathscr{P}}\\times \\{z\\}$.\n\nFix any partition ${\\mathscr{P}}={\\mathscr{P}}_1\\sqcup {\\mathscr{P}}_2$\nthat corresponds to some state of the automaton ${\\mathsf{A}}_{ic}$. Consider the arrow in the automaton ${\\mathsf{A}}_{ic}$\nstarting at ${\\mathscr{P}}_1\\sqcup {\\mathscr{P}}_2$ and labeled by $x$. This arrow ends in the partition\n${\\mathscr{P}}={\\mathscr{P}}_1^{(x)}\\sqcup {\\mathscr{P}}_2^{(x)}$ with two parts. Recall how we construct the partition\n${\\mathscr{P}}_1^{(x)}\\sqcup {\\mathscr{P}}_2^{(x)}$ using the graph $M_{{\\mathscr{P}}_1\\sqcup {\\mathscr{P}}_2,x}$, and notice that\n$M_{{\\mathscr{P}}_1\\sqcup {\\mathscr{P}}_2,x}\\setminus{\\mathscr{P}}\\times \\{x\\}$ coincides with $\\overline{M}\\setminus {\\mathscr{P}}\\times \\{x\\}$. Using the\nassumption that the graph $\\overline{M}\\setminus {\\mathscr{P}}\\times \\{x\\}$ is connected, we get that one of the sets\n${\\mathscr{P}}_i^{(x)}$ is a subset of ${\\mathscr{P}}\\times \\{x\\}$. Since ${\\mathscr{P}}\\times \\{x\\}$ contains at most one post-critical\nvertex, the part ${\\mathscr{P}}_i^{(x)}$ consists of precisely one element (post-critical vertex), which we denote\nby $a\\in{\\mathscr{P}}$, i.e., here ${\\mathscr{P}}_i^{(x)}=\\{a\\}$. By the same reason the subsets ${\\mathscr{P}}\\times \\{y\\}$ and\n${\\mathscr{P}}\\times \\{z\\}$ also contain some post-critical vertices $b$ and $c$. Notice that the last letters of the\nsequences $a, b, c$ are $x,y,z$ respectively. We can suppose that the sequences $az$ and $bz$ are different\nfrom the sequence $c$ (over three post-critical sequences there are always two with this property).\nConsider the arrow in the automaton ${\\mathsf{A}}_{ic}$ starting at the partition ${\\mathscr{P}}_1^{(x)}\\sqcup\n{\\mathscr{P}}_2^{(x)}=\\{a\\}\\sqcup {\\mathscr{P}}\\setminus \\{a\\}$ and labeled by $z$. This arrow should end in the\npartition of ${\\mathscr{P}}$ on two parts. Since $az$ and $c$ are different, the post-critical vertex $c$ of\n$M_{{\\mathscr{P}}_1\\sqcup {\\mathscr{P}}_2,x}$ belongs to the subset $({\\mathscr{P}}\\setminus \\{a\\})\\times \\{z\\}$. Further, since $c$ is the unique\npost-critical vertex in ${\\mathscr{P}}\\times \\{z\\}$, there should be no edges connecting the subset $({\\mathscr{P}}\\setminus\n\\{a\\})\\times \\{z\\}$ with its outside in the graph $M_{{\\mathscr{P}}_1\\sqcup {\\mathscr{P}}_2,x}$ (otherwise all post-critical vertices will be\nin the same component). Hence the only edges of the graph $\\overline{M}$ going outside the subset\n${\\mathscr{P}}\\times \\{z\\}$ should be at the vertex $(a,z)$. Applying the same arguments to the partition $\\{b\\}\\sqcup\n{\\mathscr{P}}\\setminus\\{b\\}$, we get that this unique vertex should be $(b,z)$. Hence $a=b$ and we get a\ncontradiction.\n\nSo let ${\\mathscr{P}}\\times \\{x\\}$ and ${\\mathscr{P}}\\times \\{y\\}$ be the two subsets such that their complements in the graph\n$\\overline{M}$ are connected. Let $a$ and $b$ be the post-critical vertices in ${\\mathscr{P}}\\times \\{x\\}$ and\n${\\mathscr{P}}\\times \\{y\\}$ respectively. By the same arguments as above, the subset ${\\mathscr{P}}\\times \\{x\\}$ has a unique\nvertex which is adjacent to a vertex from $\\overline{M}\\setminus {\\mathscr{P}}\\times \\{x\\}$, and this vertex is of the\nform $(a,x)$ or $(b,x)$. The same holds for the subset ${\\mathscr{P}}\\times \\{y\\}$. Every other component\n${\\mathscr{P}}\\times \\{z\\}$ contains precisely two vertices $(a,z)$ and $(b,z)$, which have edges going outside the\ncomponent ${\\mathscr{P}}\\times \\{z\\}$. However every post-critical sequence appears in one of such edges (see our\nassumption in the second paragraph of the proof). Hence the post-critical set contains precisely two\nelements and the structure of the graph $\\overline{M}$ follows.\n\\end{proof}\n\n\\begin{cor}\\label{cor_one_end_pcset_3_points}\nIf the post-critical set ${\\mathscr{P}}$ contains at least three sequences, then the Schreier graphs $\\Gamma_w$\nand tile graphs $T_w$ have almost surely one end.\n\\end{cor}\n\nThe following example shows that almost all Schreier graphs may have two ends for a contracting group\ngenerated by a non-bounded automaton, i.e., by an automaton with infinite post-critical set.\n\n\\begin{example}\nConsider the self-similar group $G$ over $X=\\{0,1,2\\}$ generated by the transformation $a$, which is given by the recursion  $a=(a^2,1,a^{-1})(0,1,2)$\n(see Example~7.6 in \\cite{bhn:aut_til}). The group $G$ is self-replicating and contracting with nucleus\n${\\mathcal{N}}=\\{1,a^{\\pm 1}, a^{\\pm 2}\\}$, but the generating automaton is not bounded and the post-critical set\nis infinite. Every Schreier graph ${\\Gamma}_w$ with respect to the generating set $\\{a,a^{-1}\\}$ is a line and\nhas two ends.\n\\end{example}\n\n\n\\begin{theor}\\label{th_classification_two_ends}\nAlmost all Schreier graphs ${\\Gamma}_w$ (equivalently, tile graphs $T_w$) have two ends if and only if the\nautomaton $S$ brought to the basic form (see Section~\\ref{subsection_BoundedAutomata}) is one of the\nfollowing.\n\\begin{enumerate}\n  \\item The automaton $S$ consists of the adding machine, its inverse, and the trivial element, where the adding machine is an\n  element of type  I  with a transitive action\non $X$ (see Figure~\\ref{fig_Bounded_PCS2}, where all edges not shown\nin the figure go to the identity state, and the letters $x$ and $y$ are different).\n\n  \\item There exists an order on the alphabet $X=\\{x=x_1, x_2, \\ldots, x_m=y\\}$ such that one of\n  the following cases holds.\n  \\begin{enumerate}\n    \\item The automaton $S$ consists of elements of types II and II$'$ (see Figure~\\ref{fig_Bounded_PCS2});\n    every pair $\\{x_{2i},x_{2i+1}\\}$ is an orbit of the action of some element of type II and\n    all nontrivial orbits of such elements on $X$ are of this form; also every\npair $\\{x_{2i-1},x_{2i}\\}$ is an orbit of the action of some element of type II$'$ and all nontrivial\norbits of such elements on $X$ are of this form (in particular, $|X|$ is an odd number).\n\n\n\\begin{figure}\n\\begin{center}\n\\psfrag{xy}{$x|y$} \\psfrag{yy}{$y|y$} \\psfrag{xx}{$x|x$}  \\psfrag{yx}{$y|x$} \\psfrag{TI}{Type I}\n\\psfrag{TI2}{Type I$'$} \\psfrag{TII}{Type II} \\psfrag{TII2}{Type II$'$} \\psfrag{TIII}{Type III}\n\\psfrag{TIII2}{Type III$'$} \\epsfig{file=Bounded_PCS2.eps,height=80pt}\n\\caption{Bounded automata with\n$|{\\mathscr{P}}|=2$}\n\\label{fig_Bounded_PCS2}\n\\end{center}\n\\end{figure}\n\n\n    \\item The automaton $S$ consists of elements of types II, III, and III$'$; every pair $\\{x_{2i},x_{2i+1}\\}$ is an\n    orbit of the action of some element of type II or $III$ and all nontrivial orbits of such elements on $X$\n    are of this form; also every pair $\\{x_{2i-1},x_{2i}\\}$ is an orbit of the action of some element of type III$'$ and\nall nontrivial orbits of such elements on $X$ are of this form (in particular, $|X|$ is an even number).\n  \\end{enumerate}\n\\end{enumerate}\nMoreover, in this case, all Schreier graphs ${\\Gamma}_w$ are lines except for two Schreier graphs ${\\Gamma}_{x^{\\omega}}$ and ${\\Gamma}_{y^{\\omega}}$ in Case 2 (a), and one Schreier graph ${\\Gamma}_{x^{\\omega}}$ in Case 2 (b), which are rays.\n\\end{theor}\n\\begin{proof}\nRecall the definition of the basic form of a bounded automaton from\nSection~\\ref{subsection_BoundedAutomata}. If a bounded automaton is in the basic form, its post-critical\nset has size two, and every state has an incoming arrow, then it is not hard to see that the automaton can\ncontain only the states of six types shown in Figure~\\ref{fig_Bounded_PCS2}.\n\nWe will be using the fact proved in Lemma~\\ref{lemma_as_two_ends_|P|=2} that the modified model graph\n$\\overline{M}$ is an interval. There are two cases that we need to treat a little bit differently depending\non whether both post-critical sequences are periodic or not.\n\nConsider the case when both post-critical sequences are periodic, here ${\\mathscr{P}}=\\{x^{-\\omega},\ny^{-\\omega}\\}$. In this case the automaton $S$ can contain only the states of types I, I$'$, II, and II$'$.\nSuppose there is a state $a$ of type I. It contributes the edges $\\{ (x^{-\\omega},z),(y^{-\\omega},a(z)) \\}$\nto the graph $\\overline{M}$ for every $z\\in X$. If there exists a nontrivial orbit of the action of $a$ on\n$X$, which does not contain $x$, then it contributes a cycle to the graph $\\overline{M}$. If there exists a\nfixed point $a(z)=z$, then under construction of the automaton ${\\mathsf{A}}_{ic}$ starting at the partition\n${\\mathscr{P}}=\\{x^{-\\omega}\\}\\sqcup\\{y^{-\\omega}\\}$ and following the arrow labeled by $z$ we get a partition\nwith one part. Hence the element $a$ should act transitively on $X$ (it is the adding machine). Every other\nelement of type I should have the same action on $X$, and hence coincide with $a$, otherwise we would got a\nvertex in the graph $\\overline{M}$ of degree $\\geq 3$. Every element $b$ of type I$'$ contributes the edges\n$\\{(x^{-\\omega},b(z)),(y^{-\\omega},z) \\}$ to the graph $\\overline{M}$. It follows that the action of $b$ on\n$X$ is the inverse of the action of $a$ (otherwise we would got a vertex of $\\overline{M}$ of degree $\\geq\n3$), and hence $b$ is the inverse of $a$. If the automaton $S$ additionally contains a state of type II or\nII$'$, then there is an edge $\\{(x^{-\\omega},z_1),(x^{-\\omega},z_2)\\}$ or\n$\\{(y^{-\\omega},z_1),(y^{-\\omega},z_2)\\}$ in the graph $\\overline{M}$ for some different letters\n$z_1,z_2\\in X$. We get a vertex of degree $\\geq 3$, contradiction. Hence, in this case, the automaton $S$\nconsists of the adding machine, its inverse, and the identity state.\n\nSuppose $S$ does not contain states of types I and I$'$. Since the post-critical set is equal to\n${\\mathscr{P}}=\\{x^{-\\omega}, y^{-\\omega}\\}$ the automaton $S$ contains states $a$ and $b$ of types II and II$'$\nrespectively. These elements contribute edges $\\{(x^{-\\omega},z),(x^{-\\omega},a(z))\\}$ and\n$\\{(y^{-\\omega},z),(y^{-\\omega},b(z))\\}$ to the graph $\\overline{M}$. Since the graph $\\overline{M}$ should\nbe an interval, these edges should consequently connect all components ${\\mathscr{P}}\\times z$ for $z\\in X$ (see\nFigure~\\ref{fig_ModelLine_Case 2a}). It follows that there exists an order on the alphabet such that item\n$(a)$ holds.\n\n\\begin{figure}\n\\begin{center}\n\\psfrag{1}{$x^{-\\omega}$} \\psfrag{2}{$y^{-\\omega}x$} \\psfrag{3}{$y^{-\\omega}x_2$}\n\\psfrag{4}{$x^{-\\omega}x_2$} \\psfrag{5}{$x^{-\\omega}x_3$} \\psfrag{6}{$y^{-\\omega}x_3$}\n\\psfrag{7}{$x^{-\\omega}y$} \\psfrag{8}{$y^{-\\omega}$}\n \\epsfig{file=ModelLine1.eps,height=26pt}\n\\caption{Case 2 (a)}\n\\label{fig_ModelLine_Case 2a}\n\\end{center}\n\\end{figure}\n\n\n\n\\begin{figure}\n\\begin{center}\n\\psfrag{1}{$x^{-\\omega}$} \\psfrag{2}{$x^{-\\omega}yx$} \\psfrag{3}{$x^{-\\omega}yx_2$}\n\\psfrag{4}{$x^{-\\omega}x_2$} \\psfrag{5}{$x^{-\\omega}x_3$} \\psfrag{6}{$x^{-\\omega}yx_3$}\n\\psfrag{7}{$x^{-\\omega}yy$} \\psfrag{8}{$x^{-\\omega}y$}\n\\epsfig{file=ModelLine1.eps,height=26pt}\n\\caption{Case 2 (b)}\n\\label{fig_ModelLine_Case 2b}\n\\end{center}\n\\end{figure}\n\nConsider the case ${\\mathscr{P}}=\\{x^{-\\omega}, x^{-\\omega}y\\}$. In this case the automaton $S$ can consist only\nof states of types II, III and III$'$. Each state of type II or III contributes edges\n$\\{(x^{-\\omega},z),(x^{-\\omega},a(z))\\}$ to the graph $\\overline{M}$. Each state of type III$'$ contributes\nedges $\\{(x^{-\\omega}y,z),(x^{-\\omega}y,b(z))\\}$. These edges should consequently connect all components\n${\\mathscr{P}}\\times z$ for $z\\in X$ (see Figure~\\ref{fig_ModelLine_Case 2b}). It follows that there exists an\norder on the alphabet such that item $(b)$ holds.\n\nFor the converse, one can directly check the following facts. In item 1, every Schreier graph ${\\Gamma}_w(G,S)$\nis a line. In Case 2 (a), the Schreier graphs ${\\Gamma}_{x^{\\omega}}$ and ${\\Gamma}_{y^{\\omega}}$ are rays, while all\nthe other Schreier graphs are lines. In Case 2 (b), the Schreier graph ${\\Gamma}_{x^{\\omega}}$ is a ray, while\nall the other Schreier graphs are lines.\n\\end{proof}\n\n\\begin{example}\nDihedral group\n\\end{example}\n\n\\begin{example}\nThe Grigorchuk group is a nontrivial example satisfying the conditions of the theorem. It is generated by\nthe automaton $S$ shown in Figure~\\ref{fig_Grigorchuk_Aut}. After passing to the alphabet\n$\\{0,1\\}^3\\leftrightarrow X=\\{0,1,2,3,4,5,6,7\\}$, the automaton $S$ consists of the trivial state and the elements $a,b,c,d$, which are given by the following recursions:\n\\begin{eqnarray*}\na&=&(1,1,1,1,1,1,1,1)(0,4)(1,5)(2,6)(3,7)\\\\\nb&=&(1,1,1,1,1,1,1,b)(0,2)(1,3)(4,5)\\\\\nc&=&(1,1,1,1,1,1,a,c)(0,2)(1,3)\\\\\nd&=&(1,1,1,1,1,1,a,d)(4,5)\n\\end{eqnarray*}\nWe see that this automaton satisfies Case 2 (b) of the theorem when we choose the order $6,2,0,4,5,1,3,7$\non $X$. The Schreier graph ${\\Gamma}_{7^{\\omega}}$ is a ray, while the other orbital Schreier graphs are lines.\n\\end{example}\n\n\\begin{figure}\n\\begin{center}\n\\psfrag{id}{$id$} \\psfrag{2}{$a$} \\psfrag{3}{$b$} \\psfrag{4}{$d$} \\psfrag{5}{$c$} \\psfrag{6}{$0|1$}\n\\psfrag{7}{$1|0$} \\psfrag{8}{$0|0$} \\psfrag{9}{$0|0$} \\psfrag{10}{$1|1$} \\psfrag{11}{$1|1$}\n\\psfrag{12}{$1|1$} \\psfrag{13}{$0|0$} \\psfrag{14}{$0|0$} \\psfrag{15}{$1|1$}\n\\epsfig{file=GrigAut.eps,height=160pt}\n\\caption{The generating automaton of the Grigorchuk group}\n\\label{fig_Grigorchuk_Aut}\n\\end{center}\n\\end{figure}\n\n\nIn what follows below, we give an algebraic characterization of the automaton groups acting on the binary tree, whose orbital Schreier graphs have two ends. It turns out that such groups are those whose nuclei are given by the automata defined by  \\v{S}uni\\'{c} in \\cite{Zoran}. In order to show this correspondence we sketch the construction of the groups $G_{\\omega, \\rho}$ as in \\cite{Zoran}.\n\n\n\n\n\nLet $A$ and $B$ be the abelian groups $\\mathbb{Z}/2\\mathbb{Z}$ and $(\\mathbb{Z}/2\\mathbb{Z})^k$ respectively. We think of $A$ as the field of $2$ elements and of $B$ as the $k$-dimensional vector space over this field. Let $\\rho:B\\to B$ be an automorphism of $B$ and $\\omega:B\\to A$ a surjective homomorphism. We define the action of elements of $A$ and $B$ on the binary tree $\\{0,1\\}^{*}$ as follows: the nontrivial element $a\\in A$ only changes the first letter of input words, i.e., $a=(1,1)(0,1)$; the action of $b\\in B$ is given by the recursive rule $b=(\\omega(b),\\rho(b))$. The automorphism group generated by the action of $A$ and $B$ is denoted by $G_{\\omega, \\rho}$. Notice that the group $G_{\\omega, \\rho}$ is generated by a bounded automaton over the binary alphabet $X=\\{0,1\\}$, which we denote by $A_{\\omega, \\rho}$. If the action of $B$ is faithful, the group $G_{\\omega, \\rho}$ can be given by an invertible polynomial over the field with two elements, which corresponds to the action of $\\rho$ on $B$. Examples include the infinite dihedral group $D_{\\infty}$ given by polynomial $x+1$ and the Gigorchuk group given by polynomial $x^2+x+1$.\n\nThe following result puts in relation the groups $G_{\\omega, \\rho}$ and the groups whose Schreier graphs have almost surely two ends.\n\n\n\n\n\n\n\\begin{theor}\\label{th_Sch_2ended_binary}\nLet $G$ be a group generated by a bounded automaton over the binary alphabet $X=\\{0,1\\}$. Almost all Schreier graphs $\\Gamma_w(G)$ have two ends if and only if the nucleus of $G$ either consists of the adding machine, its inverse and the identity element, or is equal to one of the automata ${\\mathsf{A}}_{\\omega, \\rho}$ up to switching the letters $0\\leftrightarrow 1$ of the alphabet.\n\\end{theor}\n\\begin{proof}\nSuppose that the Schreier graphs $\\Gamma_w(G)$ have two ends for almost all sequences $w\\in{X^\\omega}$ and let\n${\\mathcal{N}}$ be the nucleus of the group $G$. By Lemma~\\ref{lemma_as_two_ends_|P|=2} the post-critical set\n${\\mathscr{P}}$ of the group contains exactly two elements. If both post-critical elements are periodic, then the\nnucleus ${\\mathcal{N}}$ consists of the adding machine, its inverse and the identity element (see the proof of\nTheorem~\\ref{th_classification_two_ends}).\n\nLet us consider the case ${\\mathscr{P}}=\\{x^{-\\omega}, x^{-\\omega}y\\}$.\nWe can assume that $x=1$ and $y=0$ so that ${\\mathscr{P}}=\\{1^{-\\omega},1^{-\\omega}0\\}$.\nIt follows that every arrow along a cycle in ${\\mathcal{N}}$ is labeled by $1|1$ except for a loop at the trivial state labeled by $0|0$. The nucleus ${\\mathcal{N}}$ contains only one nontrivial finitary element, namely $a=(1,1)(0,1)$, since otherwise there would be a post-critical sequence with preperiod of length two.\n\nPut $A=\\{1,a\\}$ and $B={\\mathcal{N}}\\setminus\\{a\\}$. The set $B$ consists exactly of those elements from $G$ that belong to cycles. For every $b\\in B$ we have $b(1)=1$ and $b|_1\\in B$, $b|_0\\in A$. It follows that all nontrivial elements of $B$ have order two. Let us show that $B$ is a subgroup of $G$. For any  $b_1,b_2\\in B$ there exists $k$ such that $b_i|_{1^k}=b_i$ for $i=1,2$. Hence $b_1b_2|_{1^{k}}=b_1b_2$. Therefore $b_1b_2$ belongs to the nucleus ${\\mathcal{N}}$ and thus $b_1b_2\\in B$. It follows that $B$ is a group, which is isomorphic to $(\\mathbb{Z}/2\\mathbb{Z})^m$ for certain $m$. The map $\\rho: b\\mapsto b|_1$ is a homomorphism from $B$ to $B$ and is bijective, because elements of $B$ form cycles in the nucleus. The map $\\omega: b\\rightarrow b|_0$ is a surjective homomorphism from $B$ to $A$. We have proved that the nucleus ${\\mathcal{N}}$ is exactly the automaton $A_{\\omega, \\rho}$.\n\n\n\n\n\n\n\n\nOn the other hand, let us consider one of the groups $G_{\\omega, \\rho}$. Each element $b\\in B$ has a\ncyclic $\\rho$-orbit. In the language of automata this means that $b$ belongs to a cycle in the automaton\n$A_{\\omega, \\rho}$. We have $b|_1\\in B$ and $b|_0\\in A$ for every $b\\in B$. It follows that if $b(u)=v$\nand $u\\neq v$ then $u$ and $v$ are of the form $u=1^l00w$, $v=1^l01w$ or $u=1^l01w$, $v=1^l00w$,\n$l\\in\\mathbb{N}\\cup\\{0\\}$. Therefore the Schreier graphs $\\Gamma_n(G)$ are intervals and the orbital\nSchreier graphs $\\Gamma_w(G)$ have two ends for almost all sequences $w\\in{X^\\omega}$.\n\\end{proof}\n\n\n\n\n\n\n\\section{Cut-points of tiles and limit spaces}\\label{Section_Cut-points}\n\nIn this section we first recall the construction of the limit space and tiles of a self-similar group (see\n\\cite{self_sim_groups, ssgroups_geom} for more details). Then we show how to describe the cut-points of limit spaces and tiles of self-similar groups generated by bounded automata.\n\n\n\n\n\\subsection{Limit spaces and tiles of self-similar groups}\n\nLet $G$ be a contracting self-similar group with nucleus ${\\mathcal{N}}$.\n\n\\begin{defi}\\label{limitspacedefi}\nThe \\textit{limit space} ${\\mathscr{J}_{$}} of the group $G$ is the quotient of the space ${X^{-\\omega}}$ by the equivalence\nrelation, where two sequences $\\ldots x_2x_1$ and $\\ldots y_2y_1$ are equivalent if there exists a\nleft-infinite path in the nucleus ${\\mathcal{N}}$ labeled by the pair $\\ldots x_2x_1|\\ldots y_2y_1$.\n\\end{defi}\n\nThe limit space ${\\mathscr{J}_{$}} is compact, metrizable, finite-dimensional space. If the group $G$ is finitely\ngenerated and self-replicating, then the space ${\\mathscr{J}_{$}} is path-connected and locally path-connected (see\n\\cite[Corollary~3.5.3]{self_sim_groups}). The shift map on the space $X^{-\\omega}$ induces a continuous\nsurjective map ${\\mathsf{s}}:{\\mathscr{J}_{\\rightarrow}}{\\mathscr{J}_{$}}. The limit space ${\\mathscr{J}_{$}} comes together with a natural Borel\nmeasure $\\mu$ defined as the push-forward of the uniform Bernoulli measure on ${X^{-\\omega}}$. The dynamical system\n$({\\mathscr{J}_{,}}{\\mathsf{s}},\\mu)$ is conjugate to the one-sided Bernoulli $|X|$-shift (see \\cite{bk:meas_limsp}).\n\n\n\\begin{defi}\nThe \\textit{limit  $G$-space} ${\\mathcal{X}_{$}} of the group $G$ is the quotient of the space ${X^{-\\omega}}\\times G$\nequipped with the product topology of discrete sets by the equivalence relation, where two sequences\n$\\ldots x_2x_1\\cdot g$ and $\\ldots y_2y_1\\cdot h$ of ${X^{-\\omega}}\\times G$ are equivalent if there exists a\nleft-infinite path in the nucleus ${\\mathcal{N}}$ that ends in the state $hg^{-1}$ and is labeled by the pair\n$\\ldots x_2x_1|\\ldots y_2y_1$.\n\\end{defi}\n\nThe space ${\\mathcal{X}_{$}} is metrizable and locally compact. The group $G$ acts properly and cocompactly  on the\nspace ${\\mathcal{X}_{$}} by multiplication from the right. The quotient of ${\\mathcal{X}_{$}} by the action of $G$ is the\nspace ${\\mathscr{J}_{$}}.\n\n\n\\begin{defi}\nThe image of ${X^{-\\omega}}\\times \\{1\\}$ in the space ${\\mathcal{X}_{$}} is called the \\textit{tile} ${\\mathscr{T}}$ of the group\n$G$. The image of ${X^{-\\omega}} v\\times \\{1\\}$ for $v\\in X^n$ is called the \\textit{tile} ${\\mathscr{T}}_v$ of $n$-th\nlevel.\n\\end{defi}\n\nAlternatively, the tile ${\\mathscr{T}}$ can be described as the quotient of ${X^{-\\omega}}$ by the equivalence relation,\nwhere two sequences $\\ldots x_2x_1$ and $\\ldots y_2y_1$ are equivalent if and only if there exists a path\nin the nucleus ${\\mathcal{N}}$ that ends in the trivial state and is labeled by the pair $\\ldots x_2x_1|\\ldots\ny_2y_1$. The push-forward of the uniform measure on ${X^{-\\omega}}$ defines a measure on ${\\mathscr{T}}$. The tile ${\\mathscr{T}}$ covers the limit $G$-space ${\\mathcal{X}_{$}} under the action of $G$.\n\nThe tile ${\\mathscr{T}}$ decomposes in the union $\\cup_{v\\in X^n} {\\mathscr{T}}_v$ of the tiles of $n$-th level for every\n$n$. All tiles ${\\mathscr{T}}_v$ are compact and homeomorphic to ${\\mathscr{T}}$. Two tiles ${\\mathscr{T}}_v$ and ${\\mathscr{T}}_u$ of the\nsame level $v,u\\in X^{n}$ have nonempty intersection if and only if there exists $h\\in{\\mathcal{N}}$ such that\n$h(v)=u$ and $h|_v=1$ (see \\cite[Proposition~3.3.5]{self_sim_groups}). This is precisely how we connect\nvertices in the tile graph $T_n(G, {\\mathcal{N}})$ with respect to the nucleus. Hence the graphs $T_n(G,{\\mathcal{N}})$\ncan be used to approximate the tile ${\\mathscr{T}}$, which justifies the term ``tile'' graph. The tile ${\\mathscr{T}}$ is\nconnected if and only if all the tile graphs $T_n=T_n(G,{\\mathcal{N}})$ are connected (see\n\\cite[Proposition~3.3.10]{self_sim_groups}); in this case also ${\\mathscr{T}}$ is path-connected and locally\npath-connected.\n\n\n\n\n\n\n\n\n\n\n\n\\begin{defi}\nA contracting self-similar group $G$ satisfies the \\emph{open set condition} if for any element $g$ of the\nnucleus ${\\mathcal{N}}$ there exists a word $v\\in X^*$ such that $g|_v=1$, i.e., in the nucleus ${\\mathcal{N}}$ there is a\npath from any state to the trivial state.\n\\end{defi}\n\nIf a group satisfies the open set condition, then the tile ${\\mathscr{T}}$ is the closure of its interior, and any\ntwo different tiles of the same level have disjoint interiors; otherwise for large enough $n$ there exists\na tile ${\\mathscr{T}}_v$ for $v\\in X^n$ which is covered by other tiles of $n$-th level (see\n\\cite[Proposition~3.3.7]{self_sim_groups}).\n\nRecall that the post-critical set ${\\mathscr{P}}$ of the group is defined as the set of all sequences that can be\nread along left-infinite paths in ${\\mathcal{N}}\\setminus\\{1\\}$. Therefore, under the open set condition, the\nboundary $\\partial{\\mathscr{T}}$ of the tile ${\\mathscr{T}}$ consists precisely of points represented by the post-critical\nsequences. Under the open set\ncondition, the limit space ${\\mathscr{J}_{$}} can be obtained from the tile ${\\mathscr{T}}$ by gluing some of its boundary\npoints. Namely, we need to glue two points represented by (post-critical) sequences $\\ldots x_2x_1$ and\n$\\ldots y_2y_1$ for every path in ${\\mathcal{N}}\\setminus\\{1\\}$ labeled by $\\ldots x_2x_1|\\ldots y_2y_1$.\n\n\n\n\n\n\nEvery self-similar group generated by a bounded automaton is contracting as shown in \\cite{bondnek:pcf},\nand we can consider the associated limit spaces and tiles. Note that every bounded automaton satisfies the open set condition. The limit spaces of groups generated by bounded\nautomata are related to important classes of fractals: post-critically finite and finitely-ramified\nself-similar sets (see \\cite[Chapter~IV]{PhDBondarenko}). Namely, for a contracting self-similar group $G$\nwith nucleus ${\\mathcal{N}}$ the following statements are equivalent: every two tiles of the same level have\nfinite intersection (the limit space ${\\mathscr{J}_{$}} is finitely-ramified); the post-critical set ${\\mathscr{P}}$ is\nfinite (the limit space ${\\mathscr{J}_{$}} is post-critically finite); the nucleus ${\\mathcal{N}}$ is a bounded automaton (or\nthe generating automaton of the group is bounded). Under the open set condition, the above statements are\nalso equivalent to the finiteness of the tile boundary $\\partial{\\mathscr{T}}$.\\vspace{0.2cm}\n\n\n\\textbf{Iterated monodromy groups.} Let $f\\in \\mathbb{C}(z)$ be a complex rational function of degree\n$d\\geq 2$ with finite post-critical set $P_f$. Then $f$ defines a $d$-fold partial self-covering $f:\nf^{-1}({\\mathcal{M}})\\rightarrow{\\mathcal{M}}$ of the space ${\\mathcal{M}}={\\hat{\\mathbb{C}}}\\setminus P_f$. Take a base point $t\\in{\\mathcal{M}}$ and let $T_t$ be\nthe tree of preimages $f^{-n}(t)$, $n\\geq 0$, where every vertex $z\\in f^{-n}(t)$ is connected by an edge\nto $f(z)\\in f^{-n+1}(t)$. The fundamental group $\\pi_1({\\mathcal{M}},t)$ acts by automorphisms on $T_t$ through the\nmonodromy action on every level $f^{-n}(t)$. The quotient of $\\pi_1({\\mathcal{M}},t)$ by the kernel of its action on\n$T_t$ is called the \\textit{iterated monodromy group} $IMG(f)$ of the map $f$. The group $IMG(f)$ is\ncontracting self-similar group and the limit space ${\\mathscr{J}_{$}} of the group $IMG(f)$ is homeomorphic to the\nJulia set $J(f)$ of the function $f$ (see \\cite[Section~6.4]{self_sim_groups} for more details). Moreover,\nthe limit dynamical system $({\\mathscr{J}_{[}}IMG(f)],{\\mathsf{s}},{\\mathsf{m}})$ is conjugated to the dynamical system\n$(J(f),f,\\mu_f)$, where $\\mu_f$ is the unique $f$-invariant probability measure of maximal entropy on the\nJulia set $J(f)$ (see \\cite{bk:meas_limsp}).\n\n\n\n\\subsection{Cut-points of tiles and limit spaces}\\label{cut-points section}\nIn this section we show how the number of connected components in the orbital Schreier and tile graphs\nwith a vertex removed is related to the number of connected components in the limit space and tile with a point removed. This allows us to get a description of cut-points using a finite acceptor automata as in Proposition~\\ref{prop_infcomp_A_ic}.\n\nLet $G$ be a self-similar group generated by a bounded automaton. We assume that the tile ${\\mathscr{T}}$ is\nconnected. Then the nucleus ${\\mathcal{N}}$ of the group is a bounded automaton, every state of ${\\mathcal{N}}$ has an\nincoming arrow, and all the tile graphs $T_n=T_n(G,{\\mathcal{N}})$ are connected. Hence we are in the settings of\nSection~\\ref{Section_Ends}, and we can apply its results to the tile graphs $T_n$. Since the limit space ${\\mathscr{J}_{$}} is obtained from the tile ${\\mathscr{T}}$ by gluing finitely many specific\nboundary points (the post-critical set ${\\mathscr{P}}$ is finite), it is sufficient to consider the problem for\nthe tile ${\\mathscr{T}}$, in analogy to what we made before for the Schreier and tile graphs.\n\n\n\n\\subsubsection{Boundary, critical and regular points}\n\nThe tile ${\\mathscr{T}}$ decomposes into the union $\\cup_{x\\in X}{\\mathscr{T}}_x$, where each tile ${\\mathscr{T}}_x$ is\nhomeomorphic to ${\\mathscr{T}}$ under the shift map. It follows that, if we take a copy $({\\mathscr{T}},x)$ of the tile\n${\\mathscr{T}}$ for each $x\\in X$ and glue every two points $(t_1,x)$ and $(t_2,y)$ with the property that there\nexists a path in the nucleus ${\\mathcal{N}}$ that ends in the trivial state and is labeled by $\\ldots x_2x_1x|\\ldots\ny_2y_1y$, and the sequences $\\ldots x_2x_1$ and $\\ldots y_2y_1$ represent the points $t_1$ and $t_2$\nrespectively, then we get a space homeomorphic to the tile ${\\mathscr{T}}$. This is an analog of the construction\nof tile graphs $T_n$ given in Theorem~\\ref{th_tile_graph_construction}. The edges of the model graph $M$\nnow indicate which points of the copies $({\\mathscr{T}},x)$ should be glued.\n\n\n\nWe consider the tile ${\\mathscr{T}}$ as its own topological space (with the induced topology from the space\n${\\mathcal{X}_{$}}), and every tile ${\\mathscr{T}}_v$ for $v\\in X^{*}$ as a subset of ${\\mathscr{T}}$ with induced topology. Hence\nthe boundary of ${\\mathscr{T}}$ is empty, but the points represented by post-critical sequences we still call the\n\\textit{boundary points} of the tile. Every point in the intersection of different tiles\n${\\mathscr{T}}_v\\cap{\\mathscr{T}}_u$ of the same level $|v|=|u|$ we call \\textit{critical}. These points are precisely the\nboundary points of the tiles ${\\mathscr{T}}_v$ for $v\\in X^{*}$, and they are represented by sequences of the form\n$pv$ for $p\\in{\\mathscr{P}}$ and $v\\in X^{*}$. In particular, the number of critical points is countable, and\nhence they are of measure zero. All other points of ${\\mathscr{T}}$ we call \\textit{regular}. Note that if a\nregular point $t$ is represented by a sequence $\\ldots x_2x_1$, then $t$ is an interior point of\n${\\mathscr{T}}_{x_n\\ldots x_2x_1}$ for all $n$. Since each tile ${\\mathscr{T}}_{x_n\\ldots x_2x_1}$ is homeomorphic to\n${\\mathscr{T}}$, the cut-points of ${\\mathscr{T}}$ also provide information about its local cut-points.\n\n\n\\subsubsection{Components in the tile with a point removed}\\label{section_component}\n\nIn what follows, let $c({\\mathscr{T}}\\setminus t)$ denote the number of connected components in~${\\mathscr{T}}\\setminus t$\nfor a point $t\\in{\\mathscr{T}}$ and $bc({\\mathscr{T}}\\setminus t)$ be the number of components in ${\\mathscr{T}}\\setminus t$ that\ncontain a boundary point of~${\\mathscr{T}}$. We will show that the numbers $c({\\mathscr{T}}\\setminus t)$ and\n$bc({\\mathscr{T}}\\setminus t)$ can be computed using a method similar to the one developed in\nSection~\\ref{Section_Ends} to find the number of components in the tile graphs with a vertex removed.\n\n\n\n\n\n\nWe start with the following result which is an analog of Propositions~\\ref{prop_infcomp_limit}.\n\n\\begin{prop}\\label{prop_tile_regular_point}\nLet $t\\in{\\mathscr{T}}$ be a regular point represented by a sequence $\\ldots x_2x_1\\in{X^{-\\omega}}$. Then\n", "itemtype": "equation", "pos": 63022, "prevtext": "\n\\end{rem}\n\n\n\\subsection{Finite automaton to determine the number of components in tile graphs with a\nvertex removed}\\label{finite automaton section}\n\nUsing the iterative construction of tile graphs given in Theorem~\\ref{th_tile_graph_construction} we can\nprovide a recursive procedure to compute the numbers ${pc}(T_n\\setminus w_n)$. We will construct a finite\ndeterministic (acceptor) automaton ${\\mathsf{A}}_{ic}$ with the following structure: it has a unique initial state,\neach arrow in ${\\mathsf{A}}_{ic}$ is labeled by a letter $x\\in X$, each state of ${\\mathsf{A}}_{ic}$ is labeled by a partition\nof a subset of the post-critical set ${\\mathscr{P}}$. The automaton ${\\mathsf{A}}_{ic}$ will have the property that, given\na word $v\\in X^n$, the final state of ${\\mathsf{A}}_{ic}$ after reading $v$ corresponds to the partition of the\npost-critical vertices of the graph $T_n$ induced by the connected components of $T_n\\setminus v$. Then\n${pc}(T_n\\setminus v)$ is just the number of parts in this partition.\n\n\n\nWe start with the following crucial consideration for the construction of the automaton ${\\mathsf{A}}_{ic}$. Let $v$\nbe a vertex of the tile graph $T_n$. The components of $T_n\\setminus v$ partition the set of post-critical\nvertices of $T_n$. Let us consider only those components that contain at least one post-critical vertex.\nLet ${\\mathscr{P}}_i\\subset {\\mathscr{P}}$ be the set of all post-critical sequences, which represent post-critical\nvertices in $i$-th component. If the vertex $v$ is not post-critical, then $\\sqcup_{i} {\\mathscr{P}}_i={\\mathscr{P}}$.\nOtherwise, $\\sqcup_{i} {\\mathscr{P}}_i$ is a proper subset of ${\\mathscr{P}}$; every sequence $p$ in ${\\mathscr{P}}\\setminus\n\\sqcup_{i} {\\mathscr{P}}_i$ represents $v$, i.e., $v=p_n$ (for all large enough $n$ the set ${\\mathscr{P}}\\setminus\n\\sqcup_{i} {\\mathscr{P}}_i$ consists of just one post-critical sequence, while for small values of $n$ the same\nvertex may be represented by several post-critical sequences). In any case, we say that $\\{ {\\mathscr{P}}_i \\}_i$\nis the \\textit{partition} (of a subset of ${\\mathscr{P}}$) \\textit{induced by the vertex} $v$. If $T_n\\setminus\nv$ does not contain post-critical vertices (this happens when $v=p_n$ for every $p\\in{\\mathscr{P}}$), then we say\nthat $v$ induce the empty partition $\\{\\emptyset\\}$.\n\nThe set of all partitions induced by the vertices of tile graphs is denoted by $\\Pi$. The set $\\Pi$ can be\ncomputed algorithmically. To see this, let us show how, given the partition $P=\\{ {\\mathscr{P}}_i \\}_i$ induced\nby a vertex $v$ and a letter $x\\in X$, one can find the partition $F=\\{\\mathscr{F}_j\\}_j$ induced by the\nvertex $vx$. We will use the model graph $M$ associated to the automaton $S$ in Section~\\ref{section_inflation}, which has the vertex set ${\\mathscr{P}}\\times X$ and edges $E$. Recall that the set ${\\mathscr{P}}$ is identified with the set of post-critical vertices of $M$. Let us construct the auxiliary graph $M_{P,x}$ as follows: take the model graph $M$, add\nan edge between $(p,x)$ and $(q,x)$ for $p,q\\in{\\mathscr{P}}_i$ and every $i$, and add an edge between $(p,y)$\nand $(q,y)$ for every $p,q\\in{\\mathscr{P}}$ and $y\\in X, y\\neq x$. Put $K=\\{ (p,x) :\np\\in{\\mathscr{P}}\\setminus\\sqcup_{i} {\\mathscr{P}}_i \\}$. If the graph $M_{P,x}\\setminus K$ contains no post-critical\nvertices, then we define $\\{\\mathscr{F}_j\\}_j$ as the empty partition $\\{\\emptyset\\}$. Otherwise, we\nconsider the components of $M_{P,x}\\setminus K$ with at least one post-critical vertex, and let\n$\\mathscr{F}_j\\subset{\\mathscr{P}}$ be the set of all post-critical vertices/sequences in $j$-th component.\n\n\n\\begin{lemma}\\label{lemma construction Aic}\n$\\{\\mathscr{F}_j\\}_j$ is exactly the partition induced by the vertex $vx$.\n\\end{lemma}\n\\begin{proof}\nLet us consider the map $\\varphi:M_{P,x}\\rightarrow T_{n+1}$ given by $\\varphi((p,y))=p_ny$, $p\\in{\\mathscr{P}}$ and $y\\in X$. This map is neither surjective, nor injective in general, nor a graph homomorphism. However, it preserves the inflation construction of the graph $T_{n+1}$ from the graph $T_n$. Namely, $\\varphi$ maps each subset ${\\mathscr{P}}\\times\\{y\\}$ into the subset $X^ny$, and the edges in $E$ onto the edges of $T_{n+1}$ obtained under construction (see Theorem~\\ref{th_tile_graph_construction}). Also, by definition of post-critical vertices, the map $\\varphi$ sends the post-critical vertices of $M_{P,x}$ onto the post-critical vertices of $T_{n+1}$.\n\nNote that the set $K$ is exactly the preimage of the vertex $vx$ under $\\varphi$. Therefore we can consider the restriction $\\varphi:M_{P,x}\\setminus K\\rightarrow T_{n+1}\\setminus vx$.\n\n\nFor every $y\\in X$, $y\\neq x$ all vertices in ${\\mathscr{P}}\\times\\{y\\}$ belong to the same component of $M_{P,x}\\setminus K$, and $\\varphi$ maps these vertices to the same component of $T_{n+1}\\setminus vx$, because the subgraph of $T_{n+1}$ induced by the set of vertices $X^ny$ contains the graph $T_n$, which is connected. For each $i$ the vertices in ${\\mathscr{P}}_i\\times\\{x\\}$ are mapped to the same component of the graph $T_{n+1}\\setminus vx$, because its subgraph induced by the vertices $X^nx\\setminus vx$ contains the graph $T_{n}\\setminus v$ and ${\\mathscr{P}}_i$ is its connected component.\nIt follows that, if two post-critical vertices $p$ and $q$ can be connected by a path $p=v_0,v_1,\\ldots,v_m=q$ in $M_{P,x}\\setminus K$, then for every $i$ the vertices $\\varphi(v_i)$ and $\\varphi(v_{i+1})$ belong to the same component of $T_{n+1}\\setminus vx$, and therefore the post-critical vertices $\\varphi(p)$ and $\\varphi(q)$ lie in the same component.  Conversely, suppose $\\varphi(p)$ and $\\varphi(q)$ can be connected by a path $\\gamma$ in $T_{n+1}\\setminus vx$. We can subdivide $\\gamma$ as $\\gamma_1e_1\\gamma_2e_2\\ldots e_m\\gamma_{m+1}$, where $e_i\\in \\varphi(E)$ and each subpath $\\gamma_i$ is a path in a copy of $T_n$ inside $T_{n+1}$. The preimages of the end points of each $e_i$ belong to the same component in $M_{P,x}\\setminus K$. Therefore $p$ and $q$ lie in the same component in $M_{P,x}\\setminus K$.\nThe statement follows.\n\\end{proof}\n\n\n\n\n\nIt follows that we can find the set $\\Pi$ algorithmically as follows. Note that the empty partition\n$\\{\\emptyset\\}$ is always an element of $\\Pi$ (it is induced by the unique vertex of the tile $T_0$ of\nzero level). We start with $\\{\\emptyset\\}$ and for each letter $x\\in X$ construct new partition\n$\\{\\mathscr{F}_j\\}_j$ as above. We repeat this process for each new partition until no new partition is\nobtained. Since the set ${\\mathscr{P}}$ is finite, the process stops in finite time. Then $\\Pi$ is exactly the\nset of all obtained partitions.\n\n\nWe construct the (acceptor) automaton ${\\mathsf{A}}_{ic}$ over the alphabet $X$ on the set of states $\\Pi$ with the\nthe unique initial state $\\{\\emptyset\\}\\in\\Pi$. The transition function is given by the rule: for\n$\\{{\\mathscr{P}}_i\\}_i\\in\\Pi$ and $x\\in X$ we put $\\{{\\mathscr{P}}_i\\}_i \\xrightarrow{\\ x\\ } \\{\\mathscr{F}_j\\}_j$, where\n$\\{\\mathscr{F}_j\\}_j$ is defined as above. The automaton ${\\mathsf{A}}_{ic}$ has all the properties we described at\nthe beginning of this subsection: given a word $v\\in X^{*}$, the final state of ${\\mathsf{A}}_{ic}$ after accepting\n$v$ is exactly the partition induced by the vertex $v$. Since we are interested in the number\n${pc}(T_n\\setminus v)$ of components in $T_n\\setminus v$ containing post-critical vertices, we can label\nevery state of ${\\mathsf{A}}_{ic}$ by the number of components in the corresponding partition. We get the following\nstatement.\n\n\n\n\n\n\n\n\n\n\n\n\\begin{theor}\\label{thm_number_of_con_comp}\nThe graph $T_{|v|}\\setminus v$ has $k$ components containing a post-critical vertex if and only if the\nfinal state of the automaton ${\\mathsf{A}}_{ic}$ after accepting the word $v$ is labeled by the number $k$. In\nparticular, for every $k$ the set $C(k)$ of all words $v\\in X^{*}$ such that the graph $T_{|v|}\\setminus\nv$ has $k$ connected components containing a post-critical vertex is a regular language recognized by the\nautomaton ${\\mathsf{A}}_{ic}$.\n\\end{theor}\n\n\nSimilarly, we construct a finite deterministic acceptor automaton ${\\mathsf{A}}_c$ for computing the number of all\ncomponents in tile graphs with a vertex removed. The states of the automaton ${\\mathsf{A}}_c$ will be pairs of the form\n$(\\{{\\mathscr{P}}_i\\}_i,m)$, where $\\{{\\mathscr{P}}_i\\}_i\\in\\Pi$ and $m$ is a non-negative integer number, which will\ncount the number of connected components without post-critical vertices. We start with the state\n$(\\{\\emptyset\\},0)$, which is the unique initial state of ${\\mathsf{A}}_c$, and consequently construct new states\nand arrows as follows. Let $(P=\\{{\\mathscr{P}}_i\\}_i,m)$ be a state already constructed. For each $x\\in X$ we\ntake the graph $M_{P,x}\\setminus K$ constructed above, define $\\{\\mathscr{F}_j\\}_j$ as above, and put\n$m_x$ to be equal to the number of connected components in $M_{P,x}\\setminus K$ without post-critical\nvertices. If $(\\{\\mathscr{F}_j\\}_j,m+m_x)$ is already a state of ${\\mathsf{A}}_{c}$, then we put an arrow labeled by $x$ from the state $(\\{{\\mathscr{P}}_i\\}_i,m)$ to the state $(\\{\\mathscr{F}_j\\}_j,m+m_x)$.\nOtherwise, we introduce $(\\{\\mathscr{F}_j\\}_j,m+m_x)$ as a new state and put this arrow. We repeat this process for each new state\nuntil no new state is obtained. Since the number of all components in $T_n\\setminus v$ is not greater than\n$|S|$, the number $m$ cannot exceed $|S|$, and the construction stops in finite time.\n\nThe automaton ${\\mathsf{A}}_c$ has the following property: given a word $v\\in X^{*}$, the final state of ${\\mathsf{A}}_c$\nafter accepting the word $v$ is exactly the pair $(\\{{\\mathscr{P}}_i\\}_i,m)$, where $\\{{\\mathscr{P}}_i\\}_i$ is the\npartition induced by $v$ and $m$ is the number of components in $T_{|v|}\\setminus v$ without post-critical\nvertices. Since we are interested only in the number $c(T_n\\setminus v)$ of all components of\n$T_n\\setminus v$, we label every state $(\\{{\\mathscr{P}}_i\\}_i,m)$ of the automaton ${\\mathsf{A}}_{c}$ by the number $k+m$,\nwhere $k$ is the number of sets in the partition $\\{{\\mathscr{P}}_i\\}_i$. We get the following\nstatement.\n\n\n\\begin{prop}\\label{prop_number_of_con_comp A_c}\nThe graph $T_{|v|}\\setminus v$ has $k$ components if and only if the final state of the automaton ${\\mathsf{A}}_{c}$\nafter accepting the word $v$ is labeled by the number $k$. In particular, for every $k$ the set $C(k)$ of\nall words $v\\in X^{*}$ such that the graph $T_{|v|}\\setminus v$ has $k$ connected components is a regular\nlanguage recognized by the automaton ${\\mathsf{A}}_{c}$.\n\\end{prop}\n\n\n\nWe need the following properties of vertex labels in the automata ${\\mathsf{A}}_{ic}$ and ${\\mathsf{A}}_{c}$.\n\n\\begin{lemma}\\label{lemma_properties_A_ic}\n\\begin{enumerate}\n  \\item In every strongly connected component of the automata ${\\mathsf{A}}_{ic}$ and ${\\mathsf{A}}_c$ all states are labeled\n  by the same number.\n\n \\item All strongly connected components of the automaton ${\\mathsf{A}}_{ic}$ without outgoing arrows are labeled by\n the same number.\n\\end{enumerate}\n\\end{lemma}\n\\begin{proof}\n\\textit{1.} Suppose that there is a strongly connected component with two states labeled by different\nnumbers. It would imply that there exists an infinite word such that the corresponding path in the\nautomaton passes through each of these states infinite number of times. We get a contradiction with Proposition~\\ref{prop_infcomp_limit}, because the sequences ${pc}(T_n\\setminus w_n)$ and\n${c}(T_n\\setminus w_n)$ are eventually monotonic (for the last one the proof is the same).\n\n\\textit{2.} Suppose there are two strongly connected components in the automaton ${\\mathsf{A}}_{ic}$ without\noutgoing arrows which are labeled by different numbers. Let $v$ and $u$ be finite words such that starting at the initial state of ${\\mathsf{A}}_{ic}$ we end at the first and the second components respectively. Then for the infinite sequence $vuvu\\ldots$ the\nlimit in Proposition~\\ref{prop_ends_limit} does not exist, and we get a contradiction.\n\\end{proof}\n\nProposition~\\ref{prop_infcomp_limit} together with Theorem~\\ref{thm_number_of_con_comp} imply the\nfollowing method to find the number of infinite components in $T_w\\setminus w$ for $w\\in{X^\\omega}$.\n\n\\begin{prop}\\label{prop_infcomp_A_ic}\nLet $w=x_1x_2\\ldots\\in{X^\\omega}$ be a regular or critical sequence. The number of infinite connected components in $T_w\\setminus w$ is equal to the label of a strongly connected component of ${\\mathsf{A}}_{ic}$ that is visited infinitely often, when the automaton reads the sequence $w$.\n\\end{prop}\n\n\n\n\\subsection{The number of ends of tile graphs}\n\nThe characterization of the number of infinite components in the graph $T_w\\setminus w$ together with\nProposition~\\ref{prop_ends_limit} allows us to describe the number of ends of $T_w$.\n\nSince every critical sequence $w$ is periodic, we can algorithmically find the number of ends of the graph\n$T_w$ using Proposition~\\ref{prop_ends_limit} and the automaton ${\\mathsf{A}}_{ic}$. Now we introduce some\nnotations. Fix $k\\geq 1$ and let $EC_{=k}$ be the union of cofinality classes of critical sequences $w$\nwhose tile graph $T_w$ has $k$ ends. Similarly we define the sets $EC_{>k}$ and $EC_{<k}$. Let\n\\begin{itemize}\n\\item ${\\mathsf{A}}_{ic}(k)$ be the subgraph of ${\\mathsf{A}}_{ic}$ spanned by the strongly connected components labeled by numbers $\\geq k$;\n\\item $\\mathscr{R}_{\\geq k}$ be the one-sided sofic subshift given by the graph ${\\mathsf{A}}_{ic}(k)$, i.e., $\\mathscr{R}_{\\geq k}$ is the set of all sequences that can be read along right-infinite paths in ${\\mathsf{A}}_{ic}(k)$ starting at\nany state;\n\\item $E_{\\geq k}$ be the set of all sequences which are cofinal to some sequence from $\\mathscr{R}_{\\geq k}$. Since the set $\\mathscr{R}_{\\geq k}$ is shift-invariant, the set $E_{\\geq k}$\ncoincides with $X^{*}\\mathscr{R}_{\\geq k}=\\{vw | v\\in X^{*}, w\\in \\mathscr{R}_{\\geq k}\\}$.\n\\end{itemize}\n\n\n\n\n\n\n\n\n\n\\begin{theor}\\label{thm_number_of_ends}\nThe tile graph $T_w$ has $\\geq k$ ends if and only if $w\\in E_{\\geq k}\\setminus EC_{<k}$. Hence, the tile\ngraph $T_w$ has $k$ ends if and only if $w\\in E_{\\geq k} \\setminus \\left(E_{\\geq k+1} \\cup EC_{>k}\\cup\nEC_{<k}\\right)$.\n\\end{theor}\n\\begin{proof}\nWe need to prove that for a regular sequence $w$ the graph $T_w$ has at least $k$ ends if and only if\n$w\\in E_{\\geq k}$. First, suppose $w\\in E_{\\geq k}$. Then $w$ is cofinal to a sequence $w'\\in\n\\mathscr{R}_{\\geq k}$, which is also regular. The sequences $w$ and $w'$ belong to the same tile graph\n$T_w=T_{w'}$. There exists a finite word $v$ such that for the sequence $vw'$ the corresponding path in\n${\\mathsf{A}}_{ic}$ starting at the initial state eventually lies in the subgraph ${\\mathsf{A}}_{ic}(k)$. Then the graph\n$T_{vw'}\\setminus vw'$ has $\\geq k$ infinite components by Proposition~\\ref{prop_infcomp_limit}. Using the\ncorrespondence between infinite components of $T_{w'}\\setminus w'$ and of $T_{vw'}\\setminus X^{|v|}w'$\nshown in the proof of Proposition~\\ref{prop_ends_limit} we get that the graph $T_{w'}\\setminus w'$ has\n$\\geq k$ infinite components, and hence $T_{w'}=T_w$ has $\\geq k$ ends.\n\nFor the converse, suppose the graph $T_{w}$ has $\\geq k$ ends and the sequence $w$ is regular. Then\n$ic(T_{\\sigma^n(w)}\\setminus \\sigma^n(w))\\geq k$ for some $n$ by Propositions~\\ref{prop_ends_limit} and\n\\ref{prop_infcomp_limit}. Hence some shift $\\sigma^n(w)$ of the sequence $w$ is in $\\mathscr{R}_{\\geq k}$\nand thus $w\\in E_{\\geq k}$.\n\\end{proof}\n\nExample with $IMG(z^2+i)$ in Section~\\ref{Section_Examples} shows that we cannot expect to get a\ndescription using subshifts of finite type, and indeed the description using sofic subshifts is the best\npossible in these settings.\n\n\\subsection{From ends of tile graphs to ends of Schreier graphs}\n\nNow we can describe how to derive the number of ends of Schreier graphs from the number of ends of tile\ngraphs.\n\n\\begin{prop}\\label{prop_Schreier_construction}\n\\begin{enumerate}\n\\item The Schreier graph ${\\Gamma}_w$ coincides with the tile graph $T_w$ for every regular sequence $w\\in{X^\\omega}$.\n\\item Let $w\\in{X^\\omega}$ be a critical sequence, and let $O(w)$ be the set of all critical sequences $v\\in{X^\\omega}$ such\nthat $g(w)=v$ for some $g\\in G$. The Schreier graph ${\\Gamma}_w$ is constructed by\ntaking the disjoint union of the orbital tile graphs $T_v$ for $v\\in O(w)$ and\nconnecting two critical sequences $v_1,v_2\\in O(w)$ by an edge whenever $s(v_1)=v_2$ for some\n$s\\in S$.\n\\end{enumerate}\n\\end{prop}\n\\begin{proof}\n\\textit{1.} If the point $w$ is regular, then the set of vertices of ${\\Gamma}_w$ is the\ncofinality class $Cof(w)$, which is the set of vertices of $T_w$ by\nProposition~\\ref{cofinality}. Suppose there is an edge between $v$ and $u$ in the graph\n${\\Gamma}_w$. Then $s(v)=u$ for some $s\\in S$. Since the sequence $w$ is regular, all the\nsequences in $Cof(w)$ are regular, and hence there exists a finite beginning $v'$ of\n$v$ such that $s|_{v'}=1$. Hence there is an edge between $v$ and $u$ in the tile\ngraph~$T_w$.\n\n\\textit{2.} If the point $w$ is critical, then the set of vertices of ${\\Gamma}_w$ is the\nunion of cofinality classes $Cof(v)$ for $v\\in O(w)$. Consider an edge $s(v_1)=v_2$ in\n${\\Gamma}_w$. If this is not an edge of $T_v$ for $v\\in O(w)$, then the restriction of $s$\non every beginning of $v_1$ is not trivial. Hence $v_1,v_2$ are critical, and this edge\nwas added under construction.\n\\end{proof}\n\n\nThe following corollary summarizes the relation between the number of ends of the Schreier graphs ${\\Gamma}_w$\nwith the number of ends of the tile graphs $T_w$. It justifies the fact that, for our aims,\nit was enough to study the number of ends and connected components in the tile graphs.\n\n\\begin{cor}\\label{remarktile}\n\\begin{enumerate}\n  \\item If $w$ is a regular sequence, then $\\# Ends({\\Gamma}_w)=\\#Ends(T_{w})$.\n   \\item If $w$ is critical, then\n   \n", "index": 15, "text": "$$\n   \\# Ends({\\Gamma}_w)=\\sum_{w'\\in O(w)} \\#Ends(T_{w'}),\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex8.m1\" class=\"ltx_Math\" alttext=\"\\#Ends({\\Gamma}_{w})=\\sum_{w^{\\prime}\\in O(w)}\\#Ends(T_{w^{\\prime}}),\" display=\"block\"><mrow><mrow><mrow><mi mathvariant=\"normal\">#</mi><mo>\u2062</mo><mi>E</mi><mo>\u2062</mo><mi>n</mi><mo>\u2062</mo><mi>d</mi><mo>\u2062</mo><mi>s</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"normal\">\u0393</mi><mi>w</mi></msub><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><msup><mi>w</mi><mo>\u2032</mo></msup><mo>\u2208</mo><mrow><mi>O</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>w</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></munder><mrow><mi mathvariant=\"normal\">#</mi><mo>\u2062</mo><mi>E</mi><mo>\u2062</mo><mi>n</mi><mo>\u2062</mo><mi>d</mi><mo>\u2062</mo><mi>s</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mi>T</mi><msup><mi>w</mi><mo>\u2032</mo></msup></msub><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.07587.tex", "nexttext": "\n\\end{prop}\n\\begin{proof}\nThe interior $int({\\mathscr{T}}_v)$ of the tile ${\\mathscr{T}}_v$ is the complement to the subset of finitely many points\nthat also belong to other tiles of the same level. Therefore ${\\mathscr{T}}\\setminus \\textrm{int}({\\mathscr{T}}_{v})$ is\nthe union of all tiles ${\\mathscr{T}}_u$ for $u\\in X^{|v|}, u\\neq v$.\n\nSince the point $t$ is regular, we can choose $n$ large enough so that the tile ${\\mathscr{T}}_{x_n\\ldots x_2x_1}$\ndoes not contain the boundary points of ${\\mathscr{T}}$ contained in ${\\mathscr{T}}\\setminus t$, and every tile ${\\mathscr{T}}_v$\nfor $v\\in X^n$ contains at most one boundary point of ${\\mathscr{T}}$. Since $t$ belongs to the interior\n$int({\\mathscr{T}}_{x_n\\ldots x_2x_1})$ of the tile ${\\mathscr{T}}_{x_n\\ldots x_2x_1}$, if two boundary points of ${\\mathscr{T}}$\nlie in the same connected component of ${\\mathscr{T}}\\setminus int({\\mathscr{T}}_{x_n\\ldots x_2x_1})$, they lie in the\nsame connected component of ${\\mathscr{T}}\\setminus t$. Therefore the value of the first limit is not less than\n$bc({\\mathscr{T}}\\setminus t)$. Conversely, if two boundary points of ${\\mathscr{T}}$ lie in the same component of\n${\\mathscr{T}}\\setminus t$, then for sufficiently large $n$ these two points lie in the same components of\n${\\mathscr{T}}\\setminus int({\\mathscr{T}}_{x_n\\ldots x_2x_1})$. Since the number of boundary points is finite, the first\nequality follows.\n\nFor the second equality recall that two tiles ${\\mathscr{T}}_v$ and ${\\mathscr{T}}_u$ for $v,u\\in X^n$ have nonempty\nintersection if and only if the vertices $v$ and $u$ are connected by an edge in the graph $T_n$.  It\nfollows that if two vertices $v$ and $u$ belong to the same component in $T_n\\setminus x_n\\ldots x_2x_1$,\nthen the tiles ${\\mathscr{T}}_v$ and ${\\mathscr{T}}_u$ belong to the same component in ${\\mathscr{T}}\\setminus t$. Therefore the\nvalue of the second limit is not less than $bc({\\mathscr{T}}\\setminus t)$. Conversely, since the point $t$ is\nregular, one can choose $n$ large enough so that for any pair of boundary points of ${\\mathscr{T}}$ that belong to\nthe same connected component in ${\\mathscr{T}}\\setminus t$, these points also belong to the same component in\n${\\mathscr{T}}\\setminus {\\mathscr{T}}_{x_n\\ldots x_2x_1}$. The second equality follows.\n\\end{proof}\n\n\n\nPropositions~\\ref{prop_infcomp_limit} and \\ref{prop_tile_regular_point} establish the connection between\nthe number of components in a punctured tile and the number of infinite components in a punctured tile\ngraph. To describe the limit in Proposition~\\ref{prop_infcomp_limit} we constructed the automaton\n${\\mathsf{A}}_{ic}$, which returns the number ${pc}(T_n\\setminus x_n\\ldots x_2x_1)$ by reading the word $x_n\\ldots\nx_2x_1$ from left to right, so that we can apply it to right-infinite sequences. Similarly one can\nconstruct a finite automaton ${\\mathsf{B}}_{bc}$, which returns ${pc}(T_n\\setminus x_n\\ldots x_2x_1)$ by reading the\nword $x_n\\ldots x_2x_1$ from right to left (the reversion of a regular language is a regular language) so\nthat we can apply it to left-infinite sequences. Then we can describe the limit in\nProposition~\\ref{prop_tile_regular_point} in the same way as Proposition~\\ref{prop_infcomp_A_ic} describes\nthe limit in Proposition~\\ref{prop_infcomp_limit}.\n\nAlso we can construct a finite deterministic (acceptor) automaton ${\\mathsf{B}}_{ic}$ with the following property.\nThe states of ${\\mathsf{B}}_{ic}$ are labeled by tuples of the form\n\n", "itemtype": "equation", "pos": 106092, "prevtext": "\nwhere the set $O(w)$ is from Proposition~\\ref{prop_Schreier_construction}.\n\\end{enumerate}\n\\end{cor}\n\n\nUsing the automata ${\\mathsf{A}}_c$ and ${\\mathsf{A}}_{ic}$ one can construct similar automata for the number of components in the\nSchreier graphs ${\\Gamma}_n$ with a vertex removed. For every state of ${\\mathsf{A}}_c$ or ${\\mathsf{A}}_{ic}$ take the corresponding\npartition of the post-critical set and combine components according to the edges $E({\\Gamma}\\setminus T)$\ndescribed in the last paragraph in Section~\\ref{subsection_BoundedAutomata}. For example, if\n$\\{{\\mathscr{P}}_i\\}_i$ is a state of ${\\mathsf{A}}_{ic}$, then we glue every two components ${\\mathscr{P}}_s$ and\n${\\mathscr{P}}_t$ if $\\{p,q\\}\\in E({\\Gamma}\\setminus T)$ for some $p\\in {\\mathscr{P}}_s$ and $q\\in{\\mathscr{P}}_t$. We get a new\npartition, and we label the state by the number of components in this partition. Basically, we get the\nsame automata, but vertices may be labeled in a different way.\n\nA case of special interest is when all Schreier graphs have one end.\nIn our settings of groups generated by bounded automata, our construction enables us to\nfind a necessary and sufficient condition when all Schreier graphs $\\Gamma_w$ have one end.\n\n\\begin{theor}\\label{all-one-ended}\nAll orbital Schreier graphs $\\Gamma_w$ for $w\\in{X^\\omega}$ have one end if and only if the following two\nconditions hold:\n\\begin{enumerate}\n\\item all arrows along directed cycles in the automaton $S$ are labeled by $x|x$ for some $x\\in X$ (depending on an arrow);\n\\item all strongly connected components of the automaton ${\\mathsf{A}}_{ic}$ are labeled by $1$ (partitions consisting of one part).\n\\end{enumerate}\n\\end{theor}\n\\begin{proof}\nLet us show that the first condition is equivalent to the property that for every $w\\in{X^\\omega}$ the Schreier\ngraph $\\Gamma_w$ and tile graph $T_w$ coincide. If there exists a directed cycle that does not satisfy\ncondition 1, then there exist two different critical sequences $w,w'$ that are connected in the Schreier\ngraph, i.e., $s(w)=w'$ for some $s\\in S$. In this case $\\Gamma_{w}\\neq T_{w}$, because by\nProposition~\\ref{prop_properties_of_sequences} different critical sequences are non-cofinal, and therefore\nbelong to different tile graphs. And vice versa, the existence of such critical sequences contradicts\ncondition 1. Therefore condition 1 implies $O(w)=\\{w\\}$ for every critical sequence $w$, and thus\n$\\Gamma_w=T_w$ by Proposition~\\ref{prop_Schreier_construction}.\n\nTheorem~\\ref{thm_number_of_ends} implies that condition 2 is equivalent to the statement that every\ntile graph $T_w$ has one end. Therefore, if the conditions $1$ and $2$ hold, then any Schreier graph\ncoincides with the corresponding tile graph which has one end.\n\nConversely, Proposition~\\ref{prop_Schreier_construction} implies that if the Schreier graph $\\Gamma_{w}$\nfor a critical sequence $w$ does not coincide with the corresponding tile graph $T_{w}$, then the number\nof ends of $\\Gamma_w$ is greater than one. (The graph $\\Gamma_w$ is a disjoint union of more than one\ninfinite tile graphs $T_v$, $v\\in O(w)$ connected by a finite number of edges.) Therefore, if all Schreier\ngraphs $\\Gamma_w$ have one end, then they should coincide with tile graphs (condition 1 holds) and tile\ngraphs have one end (condition 2 holds).\n\\end{proof}\n\n\\begin{rem}\\label{remarkanoi}\nThe Hanoi Towers group $H^{(3)}$ \\cite{gri_sunik:hanoi} is an example of a group generated by a bounded\nautomaton for which all orbital Schreier graphs $\\Gamma_w$ have one end. On the other hand, this group is\nnot indicable (since its abelianization is finite) but can be projected onto the infinite dihedral group\n\\cite{delzant_grigorchuk}. This implies that it contains a normal subgroup $N$ such that the Schreier\ncoset graph associated with $N$ has two ends. Clearly, for what said above, $N$ does not coincide with the\nstabilizer of $w$ for any $w\\in X^{\\omega}$.\n\\end{rem}\n\n\n\\subsection{The number of infinite components of tile graphs almost surely}\n\nThe structure of the automaton ${\\mathsf{A}}_{ic}$ allows to get results about the measure of\ninfinite sequences $w\\in{X^\\omega}$ for which the tile graphs $T_w\\setminus w$ have a given number of infinite components. We recall that the space $X^{\\omega}$ is endowed with the uniform measure.\n\n\n\n\\begin{rem}\\label{rem_subword_and_inf_comp}\nIt is useful to notice that we can construct a finite word $u\\in X^{*}$ such that starting at any state of\nthe automaton ${\\mathsf{A}}_{ic}$ and following the word $u$ we end in some strongly connected component without\noutgoing edges. If these strongly connected components correspond to the partition of the post-critical set\non $k$ parts, then it follows that ${pc}(T_n\\setminus v_1uv_2)=k$ for all words $v_1,v_2\\in X^{*}$ with\n$|v_1uv_2|=n$. In other words, ${pc}(T_n\\setminus v)=k$ for every $v$ that contains $u$ as a subword.\n\\end{rem}\n\nBy Proposition~\\ref{prop_infcomp_limit} we get the\ndescription of sequences which correspond to infinite components using the automaton ${\\mathsf{A}}_{ic}$ (but only\nfor regular and critical sequences).\n\n\n\n\n\n\\begin{cor}\\label{cor_inf_comp_almost_all_seq}\nThe number of infinite connected components of the graph $T_w\\setminus w$ is almost surely the same for all\nsequences $w\\in{X^\\omega}$. This number coincides with the label of the strongly connected components of the\nautomaton ${\\mathsf{A}}_{ic}$ without outgoing arrows.\n\\end{cor}\n\\begin{proof}\nThe measure of non-regular sequences is zero. For regular sequences $w\\in{X^\\omega}$ we can use the automaton\n${\\mathsf{A}}_{ic}$ to find the number ${ic}(T_w\\setminus w)$. Then the corollary follows from\nLemma~\\ref{lemma_properties_A_ic} item 2 and the standard fact that the measure of all sequences that are\nread along paths in a strongly connected component with an outgoing arrow is zero (for example, this fact\nfollows from the observation that the adjacency matrix of such a component has spectral radius less than\n$|X|$). Another explanation comes from Remark~\\ref{rem_subword_and_inf_comp} and the fact that the set of\nall sequences $w\\in{X^\\omega}$ that contain a fixed word as a subword is of full measure.\n\\end{proof}\n\nThe corollary does not hold for the number of all connected components of $T_w\\setminus w$, see examples in\nSection~\\ref{Section_Examples}. However, given any number $k$ we can use the automaton ${\\mathsf{A}}_c$ to compute\nthe measure of the set $C(k)$ \n of all sequences $w\\in{X^\\omega}$ such that the graph $T_w\\setminus w$ has $k$\ncomponents. As shown in the previous proof only strongly connected components without outgoing arrows\ncontribute the set of sequences with a non-zero measure. Let $\\Lambda_k$ be the collection of all strongly\nconnected components of ${\\mathsf{A}}_c$ without outgoing arrows and labeled by the number $k$. Let $V_k$ be the set\nof finite words $v\\in X^{*}$ with the property that starting at the initial state and following arrows\nlabeled by $v$ we end at a component from $\\Lambda_k$, and any prefix of $v$ does not satisfy this\nproperty. Then the measure of $C(k)$  \nis equal to the sum $\\sum_{v\\in V_k} |X|^{-|v|}$. Since the automaton ${\\mathsf{A}}_c$ is finite,\nthis measure is always a rational number and can be computed algorithmically.\n\n\n\n\n\n\n\\subsection{The number of ends almost surely}\\label{Section_number_ends}\\label{section_ends_a_s}\n\nCorollary~\\ref{cor_inf_comp_almost_all_seq} together with Proposition~\\ref{prop_ends_limit} imply that the\ntile graphs $T_w$ (and thus the Schreier graphs ${\\Gamma}_w$) have almost surely the same number of ends, and\nthat this number is equal to the label of the strongly connected components of ${\\mathsf{A}}_{ic}$ without outgoing\narrows. As was mentioned in introduction, this fact actually holds for any finitely generated self-similar\ngroup, which acts transitively on the levels $X^n$ for all $n\\in\\mathbb{N}$ (see Proposition~6.10 in\n\\cite{AL}). In our setting of bounded automata we get a stronger description of the sequences $w$ for\nwhich the tile graph $T_w$ has non-typical number of ends.\n\n\\begin{prop}\\label{prop_more_ends}\nThere are only finitely many Schreier graphs ${\\Gamma}_w$ and tile graphs $T_w$ with more than two ends.\n\\end{prop}\n\\begin{proof}\nLet us prove that the graph $T_w\\setminus w$ can have more than two infinite components only for finitely\nmany sequences $w\\in{X^\\omega}$. Suppose not and choose sequences $w^{(1)},\\ldots,w^{(m)}$ such that\n${ic}(T_{w^{(i)}}\\setminus w^{(i)})\\geq 3$, where we take $m$ larger than the number of partitions of the\npost-critical set ${\\mathscr{P}}$. Choose level $n$ large enough so that all words $w^{(1)}_n,\\ldots,w^{(m)}_n$\nare different and ${pc}(T_n\\setminus w_n^{(i)})\\geq 3$ for all $i$ (it is possible by\nProposition~\\ref{prop_infcomp_limit}). Notice that since the graph $T_n$ is connected, the deletion of\ndifferent vertices $w^{(i)}$ produces different partitions of ${\\mathscr{P}}$. Indeed, if ${\\mathscr{P}}=\\sqcup_{i=1}^k\n{\\mathscr{P}}_i$ with $k\\geq 3$ is the partition we got after removing some vertex $v$, then some $k-1$ sets\n${\\mathscr{P}}_i$ will be in the same component of the graph $T_n\\setminus u$ for any other vertex $u$ (these\n$k-1$ sets will be connected through the vertex $v$). We get a contradiction with the choice of number~$m$.\n\nIt follows that there are only finitely many tile graphs with more than two ends. This also holds for\nSchreier graphs by Proposition~\\ref{prop_Schreier_construction}.\n\\end{proof}\n\n\\begin{cor}\\label{cor_>2ends_pre_periodic}\nThe Schreier graphs ${\\Gamma}_w$ and tile graphs $T_w$ can have more than two ends only for pre-periodic\nsequences $w$.\n\\end{cor}\n\\begin{proof}\nSince the graph $T_w\\setminus w$ can have more than two infinite components only for finitely many\nsequences $w$, we get that, in the limit in Proposition~\\ref{prop_ends_limit}, the sequence $\\sigma^n(w)$\nattains a finite number of values. Hence $w$ is pre-periodic.\n\\end{proof}\n\nExample with $IMG(z^2+i)$ in Section~\\ref{Section_Examples} shows that the Schreier graph ${\\Gamma}_w$ and the\ntile graph $T_w$ may have more than two ends even for regular sequences $w$.\n\n\\begin{cor}\\label{cor_one_or_two_ends_a_s}\nThe tile graphs $T_w$ and Schreier graphs ${\\Gamma}_w$ have the same number of ends for almost all sequences $w\\in{X^\\omega}$, and this number is equal to one or two.\n\\end{cor}\n\n\n\\subsection{Two ends almost surely}\\label{section_two_ends_a_s}\n\nIn this section we describe bounded automata for which Schreier graphs $\\Gamma_w$ and tile graphs $T_w$\nhave almost surely two ends. Notice that in this case the post-critical set ${\\mathscr{P}}$ cannot consist of one\nelement (actually, every finitely generated self-similar group with $|{\\mathscr{P}}|=1$ is finite and cannot act\ntransitively on $X^n$ for all $n$).\n\n\\begin{lemma}\\label{lemma_as_two_ends_|P|=2}\nIf the Schreier graphs $\\Gamma_w$ (equivalently, the tile graphs $T_w$) have two ends for almost all\n$w\\in{X^\\omega}$, then $|{\\mathscr{P}}|=2$.\n\\end{lemma}\n\\begin{proof}\nWe pass to a power of the alphabet so that every post-critical sequence is of the form $y^{-\\omega}$ or\n$y^{-\\omega}x$ for some letters $x,y\\in X$ and different post-critical sequences end with different letters.\nIn particular, every subset ${\\mathscr{P}}\\times\\{x\\}$ for $x\\in X$ of the model graph $M$ contains at most one\npost-critical vertex of $M$.\n\nWe again pass to a power of the alphabet so that for every nontrivial element $s\\in S$ there exists a\nletter $x\\in X$ such that $s(x)\\neq x$ and $s|_x=1$. Then every post-critical sequence $p\\in{\\mathscr{P}}$ appears\nin some edge $\\{(p,*), (*,*)\\}$ of the model graph. Indeed, if the pair $p|q$ is read along a left-infinite\npath in the automaton $S\\setminus\\{1\\}$ that ends in a nontrivial state $s$, then the pair\n$\\{(p,x),(q,s(x))\\}$ belongs to the edge set $E$ of the graph $M$.\n\nNow suppose that tile graphs have almost surely two ends. Then the strongly connected components without outgoing\narrows in the automaton ${\\mathsf{A}}_{ic}$ correspond to the partitions of the post-critical set ${\\mathscr{P}}$ on two\nparts (see Corollary \\ref{cor_inf_comp_almost_all_seq}). In particular, there is no state corresponding to the partition of ${\\mathscr{P}}$ with one part, because\nsuch a partition would form a strongly connected component without outgoing arrows (see the construction of\n${\\mathsf{A}}_{ic}$). We will use the fact that all paths in the automaton ${\\mathsf{A}}_{ic}$ starting at any partition\n${\\mathscr{P}}={\\mathscr{P}}_1\\sqcup {\\mathscr{P}}_2$ end in partitions of ${\\mathscr{P}}$ on two parts (we cannot get more parts).\n\nLet us construct an auxiliary graph $\\overline{M}$ as follows: take the model graph $M$ and for each $x\\in\nX$ add edges between all vertices in the subset ${\\mathscr{P}}\\times \\{x\\}$. We will prove that the graph\n$\\overline{M}$ is an ``interval'', i.e., there are two vertices of degree one and the other vertices have\ndegree two, and that two end vertices of $\\overline{M}$ are the only post-critical vertices. First, let us\nshow that there are only two subsets ${\\mathscr{P}} \\times \\{x\\}$ for $x\\in X$ such that the graph\n$\\overline{M}\\setminus {\\mathscr{P}}\\times \\{x\\}$ is connected. Suppose that there are three such subsets\n${\\mathscr{P}}\\times \\{x\\}$, ${\\mathscr{P}}\\times \\{y\\}$, ${\\mathscr{P}}\\times \\{z\\}$.\n\nFix any partition ${\\mathscr{P}}={\\mathscr{P}}_1\\sqcup {\\mathscr{P}}_2$\nthat corresponds to some state of the automaton ${\\mathsf{A}}_{ic}$. Consider the arrow in the automaton ${\\mathsf{A}}_{ic}$\nstarting at ${\\mathscr{P}}_1\\sqcup {\\mathscr{P}}_2$ and labeled by $x$. This arrow ends in the partition\n${\\mathscr{P}}={\\mathscr{P}}_1^{(x)}\\sqcup {\\mathscr{P}}_2^{(x)}$ with two parts. Recall how we construct the partition\n${\\mathscr{P}}_1^{(x)}\\sqcup {\\mathscr{P}}_2^{(x)}$ using the graph $M_{{\\mathscr{P}}_1\\sqcup {\\mathscr{P}}_2,x}$, and notice that\n$M_{{\\mathscr{P}}_1\\sqcup {\\mathscr{P}}_2,x}\\setminus{\\mathscr{P}}\\times \\{x\\}$ coincides with $\\overline{M}\\setminus {\\mathscr{P}}\\times \\{x\\}$. Using the\nassumption that the graph $\\overline{M}\\setminus {\\mathscr{P}}\\times \\{x\\}$ is connected, we get that one of the sets\n${\\mathscr{P}}_i^{(x)}$ is a subset of ${\\mathscr{P}}\\times \\{x\\}$. Since ${\\mathscr{P}}\\times \\{x\\}$ contains at most one post-critical\nvertex, the part ${\\mathscr{P}}_i^{(x)}$ consists of precisely one element (post-critical vertex), which we denote\nby $a\\in{\\mathscr{P}}$, i.e., here ${\\mathscr{P}}_i^{(x)}=\\{a\\}$. By the same reason the subsets ${\\mathscr{P}}\\times \\{y\\}$ and\n${\\mathscr{P}}\\times \\{z\\}$ also contain some post-critical vertices $b$ and $c$. Notice that the last letters of the\nsequences $a, b, c$ are $x,y,z$ respectively. We can suppose that the sequences $az$ and $bz$ are different\nfrom the sequence $c$ (over three post-critical sequences there are always two with this property).\nConsider the arrow in the automaton ${\\mathsf{A}}_{ic}$ starting at the partition ${\\mathscr{P}}_1^{(x)}\\sqcup\n{\\mathscr{P}}_2^{(x)}=\\{a\\}\\sqcup {\\mathscr{P}}\\setminus \\{a\\}$ and labeled by $z$. This arrow should end in the\npartition of ${\\mathscr{P}}$ on two parts. Since $az$ and $c$ are different, the post-critical vertex $c$ of\n$M_{{\\mathscr{P}}_1\\sqcup {\\mathscr{P}}_2,x}$ belongs to the subset $({\\mathscr{P}}\\setminus \\{a\\})\\times \\{z\\}$. Further, since $c$ is the unique\npost-critical vertex in ${\\mathscr{P}}\\times \\{z\\}$, there should be no edges connecting the subset $({\\mathscr{P}}\\setminus\n\\{a\\})\\times \\{z\\}$ with its outside in the graph $M_{{\\mathscr{P}}_1\\sqcup {\\mathscr{P}}_2,x}$ (otherwise all post-critical vertices will be\nin the same component). Hence the only edges of the graph $\\overline{M}$ going outside the subset\n${\\mathscr{P}}\\times \\{z\\}$ should be at the vertex $(a,z)$. Applying the same arguments to the partition $\\{b\\}\\sqcup\n{\\mathscr{P}}\\setminus\\{b\\}$, we get that this unique vertex should be $(b,z)$. Hence $a=b$ and we get a\ncontradiction.\n\nSo let ${\\mathscr{P}}\\times \\{x\\}$ and ${\\mathscr{P}}\\times \\{y\\}$ be the two subsets such that their complements in the graph\n$\\overline{M}$ are connected. Let $a$ and $b$ be the post-critical vertices in ${\\mathscr{P}}\\times \\{x\\}$ and\n${\\mathscr{P}}\\times \\{y\\}$ respectively. By the same arguments as above, the subset ${\\mathscr{P}}\\times \\{x\\}$ has a unique\nvertex which is adjacent to a vertex from $\\overline{M}\\setminus {\\mathscr{P}}\\times \\{x\\}$, and this vertex is of the\nform $(a,x)$ or $(b,x)$. The same holds for the subset ${\\mathscr{P}}\\times \\{y\\}$. Every other component\n${\\mathscr{P}}\\times \\{z\\}$ contains precisely two vertices $(a,z)$ and $(b,z)$, which have edges going outside the\ncomponent ${\\mathscr{P}}\\times \\{z\\}$. However every post-critical sequence appears in one of such edges (see our\nassumption in the second paragraph of the proof). Hence the post-critical set contains precisely two\nelements and the structure of the graph $\\overline{M}$ follows.\n\\end{proof}\n\n\\begin{cor}\\label{cor_one_end_pcset_3_points}\nIf the post-critical set ${\\mathscr{P}}$ contains at least three sequences, then the Schreier graphs $\\Gamma_w$\nand tile graphs $T_w$ have almost surely one end.\n\\end{cor}\n\nThe following example shows that almost all Schreier graphs may have two ends for a contracting group\ngenerated by a non-bounded automaton, i.e., by an automaton with infinite post-critical set.\n\n\\begin{example}\nConsider the self-similar group $G$ over $X=\\{0,1,2\\}$ generated by the transformation $a$, which is given by the recursion  $a=(a^2,1,a^{-1})(0,1,2)$\n(see Example~7.6 in \\cite{bhn:aut_til}). The group $G$ is self-replicating and contracting with nucleus\n${\\mathcal{N}}=\\{1,a^{\\pm 1}, a^{\\pm 2}\\}$, but the generating automaton is not bounded and the post-critical set\nis infinite. Every Schreier graph ${\\Gamma}_w$ with respect to the generating set $\\{a,a^{-1}\\}$ is a line and\nhas two ends.\n\\end{example}\n\n\n\\begin{theor}\\label{th_classification_two_ends}\nAlmost all Schreier graphs ${\\Gamma}_w$ (equivalently, tile graphs $T_w$) have two ends if and only if the\nautomaton $S$ brought to the basic form (see Section~\\ref{subsection_BoundedAutomata}) is one of the\nfollowing.\n\\begin{enumerate}\n  \\item The automaton $S$ consists of the adding machine, its inverse, and the trivial element, where the adding machine is an\n  element of type  I  with a transitive action\non $X$ (see Figure~\\ref{fig_Bounded_PCS2}, where all edges not shown\nin the figure go to the identity state, and the letters $x$ and $y$ are different).\n\n  \\item There exists an order on the alphabet $X=\\{x=x_1, x_2, \\ldots, x_m=y\\}$ such that one of\n  the following cases holds.\n  \\begin{enumerate}\n    \\item The automaton $S$ consists of elements of types II and II$'$ (see Figure~\\ref{fig_Bounded_PCS2});\n    every pair $\\{x_{2i},x_{2i+1}\\}$ is an orbit of the action of some element of type II and\n    all nontrivial orbits of such elements on $X$ are of this form; also every\npair $\\{x_{2i-1},x_{2i}\\}$ is an orbit of the action of some element of type II$'$ and all nontrivial\norbits of such elements on $X$ are of this form (in particular, $|X|$ is an odd number).\n\n\n\\begin{figure}\n\\begin{center}\n\\psfrag{xy}{$x|y$} \\psfrag{yy}{$y|y$} \\psfrag{xx}{$x|x$}  \\psfrag{yx}{$y|x$} \\psfrag{TI}{Type I}\n\\psfrag{TI2}{Type I$'$} \\psfrag{TII}{Type II} \\psfrag{TII2}{Type II$'$} \\psfrag{TIII}{Type III}\n\\psfrag{TIII2}{Type III$'$} \\epsfig{file=Bounded_PCS2.eps,height=80pt}\n\\caption{Bounded automata with\n$|{\\mathscr{P}}|=2$}\n\\label{fig_Bounded_PCS2}\n\\end{center}\n\\end{figure}\n\n\n    \\item The automaton $S$ consists of elements of types II, III, and III$'$; every pair $\\{x_{2i},x_{2i+1}\\}$ is an\n    orbit of the action of some element of type II or $III$ and all nontrivial orbits of such elements on $X$\n    are of this form; also every pair $\\{x_{2i-1},x_{2i}\\}$ is an orbit of the action of some element of type III$'$ and\nall nontrivial orbits of such elements on $X$ are of this form (in particular, $|X|$ is an even number).\n  \\end{enumerate}\n\\end{enumerate}\nMoreover, in this case, all Schreier graphs ${\\Gamma}_w$ are lines except for two Schreier graphs ${\\Gamma}_{x^{\\omega}}$ and ${\\Gamma}_{y^{\\omega}}$ in Case 2 (a), and one Schreier graph ${\\Gamma}_{x^{\\omega}}$ in Case 2 (b), which are rays.\n\\end{theor}\n\\begin{proof}\nRecall the definition of the basic form of a bounded automaton from\nSection~\\ref{subsection_BoundedAutomata}. If a bounded automaton is in the basic form, its post-critical\nset has size two, and every state has an incoming arrow, then it is not hard to see that the automaton can\ncontain only the states of six types shown in Figure~\\ref{fig_Bounded_PCS2}.\n\nWe will be using the fact proved in Lemma~\\ref{lemma_as_two_ends_|P|=2} that the modified model graph\n$\\overline{M}$ is an interval. There are two cases that we need to treat a little bit differently depending\non whether both post-critical sequences are periodic or not.\n\nConsider the case when both post-critical sequences are periodic, here ${\\mathscr{P}}=\\{x^{-\\omega},\ny^{-\\omega}\\}$. In this case the automaton $S$ can contain only the states of types I, I$'$, II, and II$'$.\nSuppose there is a state $a$ of type I. It contributes the edges $\\{ (x^{-\\omega},z),(y^{-\\omega},a(z)) \\}$\nto the graph $\\overline{M}$ for every $z\\in X$. If there exists a nontrivial orbit of the action of $a$ on\n$X$, which does not contain $x$, then it contributes a cycle to the graph $\\overline{M}$. If there exists a\nfixed point $a(z)=z$, then under construction of the automaton ${\\mathsf{A}}_{ic}$ starting at the partition\n${\\mathscr{P}}=\\{x^{-\\omega}\\}\\sqcup\\{y^{-\\omega}\\}$ and following the arrow labeled by $z$ we get a partition\nwith one part. Hence the element $a$ should act transitively on $X$ (it is the adding machine). Every other\nelement of type I should have the same action on $X$, and hence coincide with $a$, otherwise we would got a\nvertex in the graph $\\overline{M}$ of degree $\\geq 3$. Every element $b$ of type I$'$ contributes the edges\n$\\{(x^{-\\omega},b(z)),(y^{-\\omega},z) \\}$ to the graph $\\overline{M}$. It follows that the action of $b$ on\n$X$ is the inverse of the action of $a$ (otherwise we would got a vertex of $\\overline{M}$ of degree $\\geq\n3$), and hence $b$ is the inverse of $a$. If the automaton $S$ additionally contains a state of type II or\nII$'$, then there is an edge $\\{(x^{-\\omega},z_1),(x^{-\\omega},z_2)\\}$ or\n$\\{(y^{-\\omega},z_1),(y^{-\\omega},z_2)\\}$ in the graph $\\overline{M}$ for some different letters\n$z_1,z_2\\in X$. We get a vertex of degree $\\geq 3$, contradiction. Hence, in this case, the automaton $S$\nconsists of the adding machine, its inverse, and the identity state.\n\nSuppose $S$ does not contain states of types I and I$'$. Since the post-critical set is equal to\n${\\mathscr{P}}=\\{x^{-\\omega}, y^{-\\omega}\\}$ the automaton $S$ contains states $a$ and $b$ of types II and II$'$\nrespectively. These elements contribute edges $\\{(x^{-\\omega},z),(x^{-\\omega},a(z))\\}$ and\n$\\{(y^{-\\omega},z),(y^{-\\omega},b(z))\\}$ to the graph $\\overline{M}$. Since the graph $\\overline{M}$ should\nbe an interval, these edges should consequently connect all components ${\\mathscr{P}}\\times z$ for $z\\in X$ (see\nFigure~\\ref{fig_ModelLine_Case 2a}). It follows that there exists an order on the alphabet such that item\n$(a)$ holds.\n\n\\begin{figure}\n\\begin{center}\n\\psfrag{1}{$x^{-\\omega}$} \\psfrag{2}{$y^{-\\omega}x$} \\psfrag{3}{$y^{-\\omega}x_2$}\n\\psfrag{4}{$x^{-\\omega}x_2$} \\psfrag{5}{$x^{-\\omega}x_3$} \\psfrag{6}{$y^{-\\omega}x_3$}\n\\psfrag{7}{$x^{-\\omega}y$} \\psfrag{8}{$y^{-\\omega}$}\n \\epsfig{file=ModelLine1.eps,height=26pt}\n\\caption{Case 2 (a)}\n\\label{fig_ModelLine_Case 2a}\n\\end{center}\n\\end{figure}\n\n\n\n\\begin{figure}\n\\begin{center}\n\\psfrag{1}{$x^{-\\omega}$} \\psfrag{2}{$x^{-\\omega}yx$} \\psfrag{3}{$x^{-\\omega}yx_2$}\n\\psfrag{4}{$x^{-\\omega}x_2$} \\psfrag{5}{$x^{-\\omega}x_3$} \\psfrag{6}{$x^{-\\omega}yx_3$}\n\\psfrag{7}{$x^{-\\omega}yy$} \\psfrag{8}{$x^{-\\omega}y$}\n\\epsfig{file=ModelLine1.eps,height=26pt}\n\\caption{Case 2 (b)}\n\\label{fig_ModelLine_Case 2b}\n\\end{center}\n\\end{figure}\n\nConsider the case ${\\mathscr{P}}=\\{x^{-\\omega}, x^{-\\omega}y\\}$. In this case the automaton $S$ can consist only\nof states of types II, III and III$'$. Each state of type II or III contributes edges\n$\\{(x^{-\\omega},z),(x^{-\\omega},a(z))\\}$ to the graph $\\overline{M}$. Each state of type III$'$ contributes\nedges $\\{(x^{-\\omega}y,z),(x^{-\\omega}y,b(z))\\}$. These edges should consequently connect all components\n${\\mathscr{P}}\\times z$ for $z\\in X$ (see Figure~\\ref{fig_ModelLine_Case 2b}). It follows that there exists an\norder on the alphabet such that item $(b)$ holds.\n\nFor the converse, one can directly check the following facts. In item 1, every Schreier graph ${\\Gamma}_w(G,S)$\nis a line. In Case 2 (a), the Schreier graphs ${\\Gamma}_{x^{\\omega}}$ and ${\\Gamma}_{y^{\\omega}}$ are rays, while all\nthe other Schreier graphs are lines. In Case 2 (b), the Schreier graph ${\\Gamma}_{x^{\\omega}}$ is a ray, while\nall the other Schreier graphs are lines.\n\\end{proof}\n\n\\begin{example}\nDihedral group\n\\end{example}\n\n\\begin{example}\nThe Grigorchuk group is a nontrivial example satisfying the conditions of the theorem. It is generated by\nthe automaton $S$ shown in Figure~\\ref{fig_Grigorchuk_Aut}. After passing to the alphabet\n$\\{0,1\\}^3\\leftrightarrow X=\\{0,1,2,3,4,5,6,7\\}$, the automaton $S$ consists of the trivial state and the elements $a,b,c,d$, which are given by the following recursions:\n\\begin{eqnarray*}\na&=&(1,1,1,1,1,1,1,1)(0,4)(1,5)(2,6)(3,7)\\\\\nb&=&(1,1,1,1,1,1,1,b)(0,2)(1,3)(4,5)\\\\\nc&=&(1,1,1,1,1,1,a,c)(0,2)(1,3)\\\\\nd&=&(1,1,1,1,1,1,a,d)(4,5)\n\\end{eqnarray*}\nWe see that this automaton satisfies Case 2 (b) of the theorem when we choose the order $6,2,0,4,5,1,3,7$\non $X$. The Schreier graph ${\\Gamma}_{7^{\\omega}}$ is a ray, while the other orbital Schreier graphs are lines.\n\\end{example}\n\n\\begin{figure}\n\\begin{center}\n\\psfrag{id}{$id$} \\psfrag{2}{$a$} \\psfrag{3}{$b$} \\psfrag{4}{$d$} \\psfrag{5}{$c$} \\psfrag{6}{$0|1$}\n\\psfrag{7}{$1|0$} \\psfrag{8}{$0|0$} \\psfrag{9}{$0|0$} \\psfrag{10}{$1|1$} \\psfrag{11}{$1|1$}\n\\psfrag{12}{$1|1$} \\psfrag{13}{$0|0$} \\psfrag{14}{$0|0$} \\psfrag{15}{$1|1$}\n\\epsfig{file=GrigAut.eps,height=160pt}\n\\caption{The generating automaton of the Grigorchuk group}\n\\label{fig_Grigorchuk_Aut}\n\\end{center}\n\\end{figure}\n\n\nIn what follows below, we give an algebraic characterization of the automaton groups acting on the binary tree, whose orbital Schreier graphs have two ends. It turns out that such groups are those whose nuclei are given by the automata defined by  \\v{S}uni\\'{c} in \\cite{Zoran}. In order to show this correspondence we sketch the construction of the groups $G_{\\omega, \\rho}$ as in \\cite{Zoran}.\n\n\n\n\n\nLet $A$ and $B$ be the abelian groups $\\mathbb{Z}/2\\mathbb{Z}$ and $(\\mathbb{Z}/2\\mathbb{Z})^k$ respectively. We think of $A$ as the field of $2$ elements and of $B$ as the $k$-dimensional vector space over this field. Let $\\rho:B\\to B$ be an automorphism of $B$ and $\\omega:B\\to A$ a surjective homomorphism. We define the action of elements of $A$ and $B$ on the binary tree $\\{0,1\\}^{*}$ as follows: the nontrivial element $a\\in A$ only changes the first letter of input words, i.e., $a=(1,1)(0,1)$; the action of $b\\in B$ is given by the recursive rule $b=(\\omega(b),\\rho(b))$. The automorphism group generated by the action of $A$ and $B$ is denoted by $G_{\\omega, \\rho}$. Notice that the group $G_{\\omega, \\rho}$ is generated by a bounded automaton over the binary alphabet $X=\\{0,1\\}$, which we denote by $A_{\\omega, \\rho}$. If the action of $B$ is faithful, the group $G_{\\omega, \\rho}$ can be given by an invertible polynomial over the field with two elements, which corresponds to the action of $\\rho$ on $B$. Examples include the infinite dihedral group $D_{\\infty}$ given by polynomial $x+1$ and the Gigorchuk group given by polynomial $x^2+x+1$.\n\nThe following result puts in relation the groups $G_{\\omega, \\rho}$ and the groups whose Schreier graphs have almost surely two ends.\n\n\n\n\n\n\n\\begin{theor}\\label{th_Sch_2ended_binary}\nLet $G$ be a group generated by a bounded automaton over the binary alphabet $X=\\{0,1\\}$. Almost all Schreier graphs $\\Gamma_w(G)$ have two ends if and only if the nucleus of $G$ either consists of the adding machine, its inverse and the identity element, or is equal to one of the automata ${\\mathsf{A}}_{\\omega, \\rho}$ up to switching the letters $0\\leftrightarrow 1$ of the alphabet.\n\\end{theor}\n\\begin{proof}\nSuppose that the Schreier graphs $\\Gamma_w(G)$ have two ends for almost all sequences $w\\in{X^\\omega}$ and let\n${\\mathcal{N}}$ be the nucleus of the group $G$. By Lemma~\\ref{lemma_as_two_ends_|P|=2} the post-critical set\n${\\mathscr{P}}$ of the group contains exactly two elements. If both post-critical elements are periodic, then the\nnucleus ${\\mathcal{N}}$ consists of the adding machine, its inverse and the identity element (see the proof of\nTheorem~\\ref{th_classification_two_ends}).\n\nLet us consider the case ${\\mathscr{P}}=\\{x^{-\\omega}, x^{-\\omega}y\\}$.\nWe can assume that $x=1$ and $y=0$ so that ${\\mathscr{P}}=\\{1^{-\\omega},1^{-\\omega}0\\}$.\nIt follows that every arrow along a cycle in ${\\mathcal{N}}$ is labeled by $1|1$ except for a loop at the trivial state labeled by $0|0$. The nucleus ${\\mathcal{N}}$ contains only one nontrivial finitary element, namely $a=(1,1)(0,1)$, since otherwise there would be a post-critical sequence with preperiod of length two.\n\nPut $A=\\{1,a\\}$ and $B={\\mathcal{N}}\\setminus\\{a\\}$. The set $B$ consists exactly of those elements from $G$ that belong to cycles. For every $b\\in B$ we have $b(1)=1$ and $b|_1\\in B$, $b|_0\\in A$. It follows that all nontrivial elements of $B$ have order two. Let us show that $B$ is a subgroup of $G$. For any  $b_1,b_2\\in B$ there exists $k$ such that $b_i|_{1^k}=b_i$ for $i=1,2$. Hence $b_1b_2|_{1^{k}}=b_1b_2$. Therefore $b_1b_2$ belongs to the nucleus ${\\mathcal{N}}$ and thus $b_1b_2\\in B$. It follows that $B$ is a group, which is isomorphic to $(\\mathbb{Z}/2\\mathbb{Z})^m$ for certain $m$. The map $\\rho: b\\mapsto b|_1$ is a homomorphism from $B$ to $B$ and is bijective, because elements of $B$ form cycles in the nucleus. The map $\\omega: b\\rightarrow b|_0$ is a surjective homomorphism from $B$ to $A$. We have proved that the nucleus ${\\mathcal{N}}$ is exactly the automaton $A_{\\omega, \\rho}$.\n\n\n\n\n\n\n\n\nOn the other hand, let us consider one of the groups $G_{\\omega, \\rho}$. Each element $b\\in B$ has a\ncyclic $\\rho$-orbit. In the language of automata this means that $b$ belongs to a cycle in the automaton\n$A_{\\omega, \\rho}$. We have $b|_1\\in B$ and $b|_0\\in A$ for every $b\\in B$. It follows that if $b(u)=v$\nand $u\\neq v$ then $u$ and $v$ are of the form $u=1^l00w$, $v=1^l01w$ or $u=1^l01w$, $v=1^l00w$,\n$l\\in\\mathbb{N}\\cup\\{0\\}$. Therefore the Schreier graphs $\\Gamma_n(G)$ are intervals and the orbital\nSchreier graphs $\\Gamma_w(G)$ have two ends for almost all sequences $w\\in{X^\\omega}$.\n\\end{proof}\n\n\n\n\n\n\n\\section{Cut-points of tiles and limit spaces}\\label{Section_Cut-points}\n\nIn this section we first recall the construction of the limit space and tiles of a self-similar group (see\n\\cite{self_sim_groups, ssgroups_geom} for more details). Then we show how to describe the cut-points of limit spaces and tiles of self-similar groups generated by bounded automata.\n\n\n\n\n\\subsection{Limit spaces and tiles of self-similar groups}\n\nLet $G$ be a contracting self-similar group with nucleus ${\\mathcal{N}}$.\n\n\\begin{defi}\\label{limitspacedefi}\nThe \\textit{limit space} ${\\mathscr{J}_{$}} of the group $G$ is the quotient of the space ${X^{-\\omega}}$ by the equivalence\nrelation, where two sequences $\\ldots x_2x_1$ and $\\ldots y_2y_1$ are equivalent if there exists a\nleft-infinite path in the nucleus ${\\mathcal{N}}$ labeled by the pair $\\ldots x_2x_1|\\ldots y_2y_1$.\n\\end{defi}\n\nThe limit space ${\\mathscr{J}_{$}} is compact, metrizable, finite-dimensional space. If the group $G$ is finitely\ngenerated and self-replicating, then the space ${\\mathscr{J}_{$}} is path-connected and locally path-connected (see\n\\cite[Corollary~3.5.3]{self_sim_groups}). The shift map on the space $X^{-\\omega}$ induces a continuous\nsurjective map ${\\mathsf{s}}:{\\mathscr{J}_{\\rightarrow}}{\\mathscr{J}_{$}}. The limit space ${\\mathscr{J}_{$}} comes together with a natural Borel\nmeasure $\\mu$ defined as the push-forward of the uniform Bernoulli measure on ${X^{-\\omega}}$. The dynamical system\n$({\\mathscr{J}_{,}}{\\mathsf{s}},\\mu)$ is conjugate to the one-sided Bernoulli $|X|$-shift (see \\cite{bk:meas_limsp}).\n\n\n\\begin{defi}\nThe \\textit{limit  $G$-space} ${\\mathcal{X}_{$}} of the group $G$ is the quotient of the space ${X^{-\\omega}}\\times G$\nequipped with the product topology of discrete sets by the equivalence relation, where two sequences\n$\\ldots x_2x_1\\cdot g$ and $\\ldots y_2y_1\\cdot h$ of ${X^{-\\omega}}\\times G$ are equivalent if there exists a\nleft-infinite path in the nucleus ${\\mathcal{N}}$ that ends in the state $hg^{-1}$ and is labeled by the pair\n$\\ldots x_2x_1|\\ldots y_2y_1$.\n\\end{defi}\n\nThe space ${\\mathcal{X}_{$}} is metrizable and locally compact. The group $G$ acts properly and cocompactly  on the\nspace ${\\mathcal{X}_{$}} by multiplication from the right. The quotient of ${\\mathcal{X}_{$}} by the action of $G$ is the\nspace ${\\mathscr{J}_{$}}.\n\n\n\\begin{defi}\nThe image of ${X^{-\\omega}}\\times \\{1\\}$ in the space ${\\mathcal{X}_{$}} is called the \\textit{tile} ${\\mathscr{T}}$ of the group\n$G$. The image of ${X^{-\\omega}} v\\times \\{1\\}$ for $v\\in X^n$ is called the \\textit{tile} ${\\mathscr{T}}_v$ of $n$-th\nlevel.\n\\end{defi}\n\nAlternatively, the tile ${\\mathscr{T}}$ can be described as the quotient of ${X^{-\\omega}}$ by the equivalence relation,\nwhere two sequences $\\ldots x_2x_1$ and $\\ldots y_2y_1$ are equivalent if and only if there exists a path\nin the nucleus ${\\mathcal{N}}$ that ends in the trivial state and is labeled by the pair $\\ldots x_2x_1|\\ldots\ny_2y_1$. The push-forward of the uniform measure on ${X^{-\\omega}}$ defines a measure on ${\\mathscr{T}}$. The tile ${\\mathscr{T}}$ covers the limit $G$-space ${\\mathcal{X}_{$}} under the action of $G$.\n\nThe tile ${\\mathscr{T}}$ decomposes in the union $\\cup_{v\\in X^n} {\\mathscr{T}}_v$ of the tiles of $n$-th level for every\n$n$. All tiles ${\\mathscr{T}}_v$ are compact and homeomorphic to ${\\mathscr{T}}$. Two tiles ${\\mathscr{T}}_v$ and ${\\mathscr{T}}_u$ of the\nsame level $v,u\\in X^{n}$ have nonempty intersection if and only if there exists $h\\in{\\mathcal{N}}$ such that\n$h(v)=u$ and $h|_v=1$ (see \\cite[Proposition~3.3.5]{self_sim_groups}). This is precisely how we connect\nvertices in the tile graph $T_n(G, {\\mathcal{N}})$ with respect to the nucleus. Hence the graphs $T_n(G,{\\mathcal{N}})$\ncan be used to approximate the tile ${\\mathscr{T}}$, which justifies the term ``tile'' graph. The tile ${\\mathscr{T}}$ is\nconnected if and only if all the tile graphs $T_n=T_n(G,{\\mathcal{N}})$ are connected (see\n\\cite[Proposition~3.3.10]{self_sim_groups}); in this case also ${\\mathscr{T}}$ is path-connected and locally\npath-connected.\n\n\n\n\n\n\n\n\n\n\n\n\\begin{defi}\nA contracting self-similar group $G$ satisfies the \\emph{open set condition} if for any element $g$ of the\nnucleus ${\\mathcal{N}}$ there exists a word $v\\in X^*$ such that $g|_v=1$, i.e., in the nucleus ${\\mathcal{N}}$ there is a\npath from any state to the trivial state.\n\\end{defi}\n\nIf a group satisfies the open set condition, then the tile ${\\mathscr{T}}$ is the closure of its interior, and any\ntwo different tiles of the same level have disjoint interiors; otherwise for large enough $n$ there exists\na tile ${\\mathscr{T}}_v$ for $v\\in X^n$ which is covered by other tiles of $n$-th level (see\n\\cite[Proposition~3.3.7]{self_sim_groups}).\n\nRecall that the post-critical set ${\\mathscr{P}}$ of the group is defined as the set of all sequences that can be\nread along left-infinite paths in ${\\mathcal{N}}\\setminus\\{1\\}$. Therefore, under the open set condition, the\nboundary $\\partial{\\mathscr{T}}$ of the tile ${\\mathscr{T}}$ consists precisely of points represented by the post-critical\nsequences. Under the open set\ncondition, the limit space ${\\mathscr{J}_{$}} can be obtained from the tile ${\\mathscr{T}}$ by gluing some of its boundary\npoints. Namely, we need to glue two points represented by (post-critical) sequences $\\ldots x_2x_1$ and\n$\\ldots y_2y_1$ for every path in ${\\mathcal{N}}\\setminus\\{1\\}$ labeled by $\\ldots x_2x_1|\\ldots y_2y_1$.\n\n\n\n\n\n\nEvery self-similar group generated by a bounded automaton is contracting as shown in \\cite{bondnek:pcf},\nand we can consider the associated limit spaces and tiles. Note that every bounded automaton satisfies the open set condition. The limit spaces of groups generated by bounded\nautomata are related to important classes of fractals: post-critically finite and finitely-ramified\nself-similar sets (see \\cite[Chapter~IV]{PhDBondarenko}). Namely, for a contracting self-similar group $G$\nwith nucleus ${\\mathcal{N}}$ the following statements are equivalent: every two tiles of the same level have\nfinite intersection (the limit space ${\\mathscr{J}_{$}} is finitely-ramified); the post-critical set ${\\mathscr{P}}$ is\nfinite (the limit space ${\\mathscr{J}_{$}} is post-critically finite); the nucleus ${\\mathcal{N}}$ is a bounded automaton (or\nthe generating automaton of the group is bounded). Under the open set condition, the above statements are\nalso equivalent to the finiteness of the tile boundary $\\partial{\\mathscr{T}}$.\\vspace{0.2cm}\n\n\n\\textbf{Iterated monodromy groups.} Let $f\\in \\mathbb{C}(z)$ be a complex rational function of degree\n$d\\geq 2$ with finite post-critical set $P_f$. Then $f$ defines a $d$-fold partial self-covering $f:\nf^{-1}({\\mathcal{M}})\\rightarrow{\\mathcal{M}}$ of the space ${\\mathcal{M}}={\\hat{\\mathbb{C}}}\\setminus P_f$. Take a base point $t\\in{\\mathcal{M}}$ and let $T_t$ be\nthe tree of preimages $f^{-n}(t)$, $n\\geq 0$, where every vertex $z\\in f^{-n}(t)$ is connected by an edge\nto $f(z)\\in f^{-n+1}(t)$. The fundamental group $\\pi_1({\\mathcal{M}},t)$ acts by automorphisms on $T_t$ through the\nmonodromy action on every level $f^{-n}(t)$. The quotient of $\\pi_1({\\mathcal{M}},t)$ by the kernel of its action on\n$T_t$ is called the \\textit{iterated monodromy group} $IMG(f)$ of the map $f$. The group $IMG(f)$ is\ncontracting self-similar group and the limit space ${\\mathscr{J}_{$}} of the group $IMG(f)$ is homeomorphic to the\nJulia set $J(f)$ of the function $f$ (see \\cite[Section~6.4]{self_sim_groups} for more details). Moreover,\nthe limit dynamical system $({\\mathscr{J}_{[}}IMG(f)],{\\mathsf{s}},{\\mathsf{m}})$ is conjugated to the dynamical system\n$(J(f),f,\\mu_f)$, where $\\mu_f$ is the unique $f$-invariant probability measure of maximal entropy on the\nJulia set $J(f)$ (see \\cite{bk:meas_limsp}).\n\n\n\n\\subsection{Cut-points of tiles and limit spaces}\\label{cut-points section}\nIn this section we show how the number of connected components in the orbital Schreier and tile graphs\nwith a vertex removed is related to the number of connected components in the limit space and tile with a point removed. This allows us to get a description of cut-points using a finite acceptor automata as in Proposition~\\ref{prop_infcomp_A_ic}.\n\nLet $G$ be a self-similar group generated by a bounded automaton. We assume that the tile ${\\mathscr{T}}$ is\nconnected. Then the nucleus ${\\mathcal{N}}$ of the group is a bounded automaton, every state of ${\\mathcal{N}}$ has an\nincoming arrow, and all the tile graphs $T_n=T_n(G,{\\mathcal{N}})$ are connected. Hence we are in the settings of\nSection~\\ref{Section_Ends}, and we can apply its results to the tile graphs $T_n$. Since the limit space ${\\mathscr{J}_{$}} is obtained from the tile ${\\mathscr{T}}$ by gluing finitely many specific\nboundary points (the post-critical set ${\\mathscr{P}}$ is finite), it is sufficient to consider the problem for\nthe tile ${\\mathscr{T}}$, in analogy to what we made before for the Schreier and tile graphs.\n\n\n\n\\subsubsection{Boundary, critical and regular points}\n\nThe tile ${\\mathscr{T}}$ decomposes into the union $\\cup_{x\\in X}{\\mathscr{T}}_x$, where each tile ${\\mathscr{T}}_x$ is\nhomeomorphic to ${\\mathscr{T}}$ under the shift map. It follows that, if we take a copy $({\\mathscr{T}},x)$ of the tile\n${\\mathscr{T}}$ for each $x\\in X$ and glue every two points $(t_1,x)$ and $(t_2,y)$ with the property that there\nexists a path in the nucleus ${\\mathcal{N}}$ that ends in the trivial state and is labeled by $\\ldots x_2x_1x|\\ldots\ny_2y_1y$, and the sequences $\\ldots x_2x_1$ and $\\ldots y_2y_1$ represent the points $t_1$ and $t_2$\nrespectively, then we get a space homeomorphic to the tile ${\\mathscr{T}}$. This is an analog of the construction\nof tile graphs $T_n$ given in Theorem~\\ref{th_tile_graph_construction}. The edges of the model graph $M$\nnow indicate which points of the copies $({\\mathscr{T}},x)$ should be glued.\n\n\n\nWe consider the tile ${\\mathscr{T}}$ as its own topological space (with the induced topology from the space\n${\\mathcal{X}_{$}}), and every tile ${\\mathscr{T}}_v$ for $v\\in X^{*}$ as a subset of ${\\mathscr{T}}$ with induced topology. Hence\nthe boundary of ${\\mathscr{T}}$ is empty, but the points represented by post-critical sequences we still call the\n\\textit{boundary points} of the tile. Every point in the intersection of different tiles\n${\\mathscr{T}}_v\\cap{\\mathscr{T}}_u$ of the same level $|v|=|u|$ we call \\textit{critical}. These points are precisely the\nboundary points of the tiles ${\\mathscr{T}}_v$ for $v\\in X^{*}$, and they are represented by sequences of the form\n$pv$ for $p\\in{\\mathscr{P}}$ and $v\\in X^{*}$. In particular, the number of critical points is countable, and\nhence they are of measure zero. All other points of ${\\mathscr{T}}$ we call \\textit{regular}. Note that if a\nregular point $t$ is represented by a sequence $\\ldots x_2x_1$, then $t$ is an interior point of\n${\\mathscr{T}}_{x_n\\ldots x_2x_1}$ for all $n$. Since each tile ${\\mathscr{T}}_{x_n\\ldots x_2x_1}$ is homeomorphic to\n${\\mathscr{T}}$, the cut-points of ${\\mathscr{T}}$ also provide information about its local cut-points.\n\n\n\\subsubsection{Components in the tile with a point removed}\\label{section_component}\n\nIn what follows, let $c({\\mathscr{T}}\\setminus t)$ denote the number of connected components in~${\\mathscr{T}}\\setminus t$\nfor a point $t\\in{\\mathscr{T}}$ and $bc({\\mathscr{T}}\\setminus t)$ be the number of components in ${\\mathscr{T}}\\setminus t$ that\ncontain a boundary point of~${\\mathscr{T}}$. We will show that the numbers $c({\\mathscr{T}}\\setminus t)$ and\n$bc({\\mathscr{T}}\\setminus t)$ can be computed using a method similar to the one developed in\nSection~\\ref{Section_Ends} to find the number of components in the tile graphs with a vertex removed.\n\n\n\n\n\n\nWe start with the following result which is an analog of Propositions~\\ref{prop_infcomp_limit}.\n\n\\begin{prop}\\label{prop_tile_regular_point}\nLet $t\\in{\\mathscr{T}}$ be a regular point represented by a sequence $\\ldots x_2x_1\\in{X^{-\\omega}}$. Then\n", "index": 17, "text": "\n\\[\nbc({\\mathscr{T}}\\setminus t)=\\lim_{n\\rightarrow\\infty} bc({\\mathscr{T}}\\setminus \\textrm{int}({\\mathscr{T}}_{x_n\\ldots x_2x_1}))=\n\\lim_{n\\rightarrow\\infty} {pc}(T_n\\setminus x_n\\ldots x_2x_1).\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex9.m1\" class=\"ltx_Math\" alttext=\"bc({\\mathscr{T}}\\setminus t)=\\lim_{n\\rightarrow\\infty}bc({\\mathscr{T}}%&#10;\\setminus\\textrm{int}({\\mathscr{T}}_{x_{n}\\ldots x_{2}x_{1}}))=\\lim_{n%&#10;\\rightarrow\\infty}{pc}(T_{n}\\setminus x_{n}\\ldots x_{2}x_{1}).\" display=\"block\"><mrow><mrow><mrow><mi>b</mi><mo>\u2062</mo><mi>c</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi class=\"ltx_font_mathscript\">\ud835\udcaf</mi><mo>\u2216</mo><mi>t</mi></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><munder><mo movablelimits=\"false\">lim</mo><mrow><mi>n</mi><mo>\u2192</mo><mi mathvariant=\"normal\">\u221e</mi></mrow></munder><mo>\u2061</mo><mrow><mi>b</mi><mo>\u2062</mo><mi>c</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi class=\"ltx_font_mathscript\">\ud835\udcaf</mi><mo>\u2216</mo><mrow><mtext>int</mtext><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mi class=\"ltx_font_mathscript\">\ud835\udcaf</mi><mrow><msub><mi>x</mi><mi>n</mi></msub><mo>\u2062</mo><mi mathvariant=\"normal\">\u2026</mi><mo>\u2062</mo><msub><mi>x</mi><mn>2</mn></msub><mo>\u2062</mo><msub><mi>x</mi><mn>1</mn></msub></mrow></msub><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>=</mo><mrow><munder><mo movablelimits=\"false\">lim</mo><mrow><mi>n</mi><mo>\u2192</mo><mi mathvariant=\"normal\">\u221e</mi></mrow></munder><mo>\u2061</mo><mrow><mi>p</mi><mo>\u2062</mo><mi>c</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msub><mi>T</mi><mi>n</mi></msub><mo>\u2216</mo><mrow><msub><mi>x</mi><mi>n</mi></msub><mo>\u2062</mo><mi mathvariant=\"normal\">\u2026</mi><mo>\u2062</mo><msub><mi>x</mi><mn>2</mn></msub><mo>\u2062</mo><msub><mi>x</mi><mn>1</mn></msub></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07587.tex", "nexttext": " This\ntuple indicates the following. For any word $v\\in X^{*}$ let us consider the partition of the set of\nboundary points of ${\\mathscr{T}}$ induced by the components of ${\\mathscr{T}}\\setminus int({\\mathscr{T}}_v)$ and let ${\\mathscr{P}}_i$\nbe the set of all post-critical sequences representing the points from the same component. Let $n$ be the\nnumber of component in ${\\mathscr{T}}\\setminus int({\\mathscr{T}}_v)$ without a boundary point of ${\\mathscr{T}}$. Similarly, we\nconsider the boundary points of ${\\mathscr{T}}_v$ and let $\\mathscr{F}_j$ be the set of all post-critical\nsequences $p_i$ such that the points represents by $p_iv$ belong to the same component in ${\\mathscr{T}}\\setminus\nint({\\mathscr{T}}_v)$. Further, we define $\\varphi({\\mathscr{P}}_i)=\\mathscr{F}_i$ if the points represented by sequences\nfrom ${\\mathscr{P}}_i$ and $\\mathscr{F}_i$ belong to the same connected component. Then the final state of\n${\\mathsf{B}}_{ic}$ after accepting $v$ is labeled exactly by the constructed tuple. If we are interested just in\nthe number of all components in ${\\mathscr{T}}\\setminus int({\\mathscr{T}}_v)$, we replace the label of each state by the\nnumber of components ${\\mathscr{P}}_i$ plus $n$. The following statement follows.\n\n\\begin{prop}\nFor every integer $k$ the set of all words $v\\in X^{*}$ with the property that ${\\mathscr{T}}\\setminus\n\\textrm{int} ({\\mathscr{T}}_v)$ has $k$ connected components is a regular language recognized by the automaton\n${\\mathsf{B}}_{ic}$.\n\\end{prop}\n\nThis result enables us to provide, in analogy to Theorem~\\ref{thm_number_of_ends}, a constructive method\nwhich, given a representation $\\ldots x_2x_1$ of a point $t\\in{\\mathscr{T}}$, determines the number of components\nin ${\\mathscr{T}}\\setminus t$. In particular, we get a description of cut-points of ${\\mathscr{T}}$. We distinguish two\ncases.\n\n\\textit{Regular points.}  If a sequence $\\ldots x_2x_1\\in{X^{-\\omega}}$ represents a regular point $t\\in{\\mathscr{T}}$,\nthen $t$ is an interior point of the tile ${\\mathscr{T}}_{x_n\\ldots x_2x_1}$ for all $n\\geq 1$. Hence, for a\nregular point $t$, every connected component of ${\\mathscr{T}}\\setminus t$ intersects the tile ${\\mathscr{T}}_{x_n\\ldots\nx_2x_1}$. Since the number of boundary points of each tile ${\\mathscr{T}}_v$ is not greater than $|{\\mathscr{P}}|$, it\nfollows that $c({\\mathscr{T}}\\setminus t)$ coincides with the number of components in the partition of the\nboundary of the tile ${\\mathscr{T}}_{x_n\\ldots x_2x_1}$ in ${\\mathscr{T}}\\setminus t$ for large enough $n$ (in particular,\n$c({\\mathscr{T}}\\setminus t)\\leq |{\\mathscr{P}}|$). The last problem can be subdivided on two subproblems. First,\n``outside'' subproblem: find how the boundary of the tile ${\\mathscr{T}}_{x_n\\ldots x_2x_1}$ decomposes in\n${\\mathscr{T}}\\setminus int({\\mathscr{T}}_{x_n\\ldots x_2x_1})$. The automaton ${\\mathsf{B}}_{ic}$ provides an answer to this problem\nwhen we trace the second label $\\{\\mathscr{F}_j\\}_j$ of states. Second, ``inside'' subproblem: find how\nthe boundary $\\partial{\\mathscr{T}}_{x_n\\ldots x_2x_1}$ decomposes in ${\\mathscr{T}}_{x_n\\ldots x_2x_1}\\setminus t$. Since\neach tile ${\\mathscr{T}}_v$ is homeomorphic to the tile ${\\mathscr{T}}$ under the shift map, the automaton ${\\mathsf{B}}_{ic}$\nprovides an answer to this problem when we trace the first label $\\{{\\mathscr{P}}_i\\}_i$ of states (as well as\nthe automaton ${\\mathsf{B}}_{bc}$). By combining the two partitions of $\\partial{\\mathscr{T}}_{x_n\\ldots x_2x_1}$ given by\nthe two subproblems, we get the number of connected components in~${\\mathscr{T}}\\setminus t$.\n\n\n\\textit{Critical points.} Let $t$ be a critical point. Suppose $t$ is represented by a post-critical\nsequence $p_1x_1\\in{\\mathscr{P}}$ with periodic $p_1\\in{\\mathscr{P}}$ and $x_1\\in X$. Note that the structure of bounded\nautomata implies that periodic post-critical sequences represent regular points of the tile. Therefore we\ncan apply the previous case to find the number $c({\\mathscr{T}}\\setminus \\overline{p_1})$ and the partition of the\nboundary of ${\\mathscr{T}}$ in ${\\mathscr{T}}\\setminus \\overline{p_1}$, where $\\overline{p_1}$ stands for the point\nrepresented by $p_1$.\n\nNow consider the components of ${\\mathscr{T}}\\setminus t$. The only difference with the regular case is that $t$ may be not\nan interior point of ${\\mathscr{T}}_v$ for all sufficiently long words $v$. However, it is an interior point of a\nunion of finitely many tiles, and we will be able to apply the same arguments as above. Consider vertices\n$(p_i,x_i), i=2,\\ldots,k$ of the model graph $M$ adjacent to the vertex $(p_1,x_1)$. Notice that since\n$p_1$ is periodic, all $p_i$ are periodic. The sequences $p_ix_i$ are precisely all sequences that\nrepresent the point $t$. Hence the point $t$ is an interior point of the set $U=\\cup_{i=1}^k {\\mathscr{T}}_{x_i}$.\nWe can find how the boundary of the set $U$ decomposes in ${\\mathscr{T}}\\setminus \\textrm{int}\\, U$. Since every\ntile ${\\mathscr{T}}_{x_i}$ is homeomorphic to the tile ${\\mathscr{T}}$ via the shift map, we can find\n$c({\\mathscr{T}}_{x_i}\\setminus t)=c({\\mathscr{T}}\\setminus \\overline{p_i})$, and deduce the decomposition of the boundary of ${\\mathscr{T}}_{x_i}$ in ${\\mathscr{T}}_{x_i}\\setminus t$. Combining these partitions, we can find $c({\\mathscr{T}}\\setminus t)$ and the\ncorresponding decomposition of $\\partial{\\mathscr{T}}$ (in particular, $c({\\mathscr{T}}\\setminus t)\\leq k|{\\mathscr{P}}|$). In\nthis way we can find $c({\\mathscr{T}}\\setminus t)$ for every point $t$ represented by a post-critical sequence.\n\n\nNow let $t$ be a critical point represented by a sequence $pyu$ with $p\\in{\\mathscr{P}}$, $y\\in X$, $u\\in X^{*}$,\nand $py\\not\\in{\\mathscr{P}}$. Recall that there is a finite automaton, which reads the word $u$ and returns the\ndecomposition of the boundary of ${\\mathscr{T}}_u$ in ${\\mathscr{T}}\\setminus \\textrm{int}\\,{\\mathscr{T}}_u$. Using the fact that\n${\\mathscr{T}}_u\\setminus t$ and ${\\mathscr{T}}\\setminus \\overline{py}$ are homeomorphic, we can find the number\n$c({\\mathscr{T}}_u\\setminus t)$ in the same way as we did above for the sequence $p_1x_1$. Since the\npost-critical set is finite, one can construct a finite automaton, which given a finite word $v$ and a\npost-critical sequence $p\\in{\\mathscr{P}}$ returns the number~$c({\\mathscr{T}}\\setminus \\overline{pv})$.\n\n\n\n\\subsubsection{The number of components in punctured limit space and tile almost surely}\n\n\nWe can use the results from Sections~\\ref{section_ends_a_s} and \\ref{section_two_ends_a_s} to get information about cut-points of the limit space and tile up to measure zero.\n\n\\begin{theor}\\label{thm_punctured_tile_ends}\n\\begin{enumerate}\n  \\item The number of connected components in ${\\mathscr{T}}\\setminus t$  is the same for almost\nall points $t$, and is equal to one or two. Moreover, $c({\\mathscr{T}}\\setminus t)=2$ almost surely if and only if the Schreier graphs $\\Gamma_w$ (equivalently, the tile graphs $T_w$) have two ends for almost all\n$w\\in{X^\\omega}$, and in this case the tile ${\\mathscr{T}}$ is homeomorphic to an interval.\n\n  \\item The number of connected components in ${\\mathscr{J}_{\\setminus}} t$ is the same for almost\nall points $t$, and is equal to one or two. Moreover, $c({\\mathscr{J}_{\\setminus}} t)=2$ almost surely if and only if the nucleus ${\\mathcal{N}}$ of the group satisfies Case 2 of Theorem~\\ref{th_classification_two_ends}.\n\n\\end{enumerate}\n\\end{theor}\n\\begin{proof}\nBy Corollary~\\ref{cor_one_or_two_ends_a_s} we have to consider only two cases.\n\nIf the tile graphs $T_w$ have one end for almost all $w\\in{X^\\omega}$, then by\nRemark~\\ref{rem_subword_and_inf_comp} there exists a word $v\\in X^{*}$ such that ${pc}(T_n\\setminus\nu_1vu_2)=1$ for all $u_1,u_2\\in X^{*}$ with $n=|u_1vu_2|$. The set of all sequences of the form $u_1vu_2$\nfor $u_1\\in{X^{-\\omega}}$ and $u_2\\in X^{*}$ is of full measure. Then by Proposition~\\ref{prop_tile_regular_point} we\nget that all boundary points of the tile ${\\mathscr{T}}$ belong to the same component in ${\\mathscr{T}}\\setminus t$ for\nalmost all points $t$. Since every tile ${\\mathscr{T}}_v$ is homeomorphic to ${\\mathscr{T}}$, we get that the boundary of\nevery tile ${\\mathscr{T}}_v$ belongs to the same component in ${\\mathscr{T}}_v\\setminus t$ for almost all points $t$. It\nfollows that $c({\\mathscr{T}}\\setminus t)=1$ almost surely. Since the limit space ${\\mathscr{J}_{$}} can be constructed from ${\\mathscr{T}}$ by gluing finitely many of its points, in this case we get $c({\\mathscr{J}_{\\setminus}} t)=1$ almost surely.\n\nIf the tile graphs $T_w$ have two ends almost surely, then we are in\nthe settings of Theorem~\\ref{th_classification_two_ends}. It is direct to check that in both cases of this theorem the tile ${\\mathscr{T}}$ is homeomorphic to an interval (because the tile graphs $T_n$ are intervals), and hence $c({\\mathscr{T}}\\setminus t)=2$ for almost all points $t$.\nIn Case 1 the limit space is homeomorphic to a circle and therefore $c({\\mathscr{J}_{\\setminus}} t)=1$ almost surely.\nIn Case 2 the limit space is homeomorphic to an interval and therefore $c({\\mathscr{J}_{\\setminus}} t)=2$ almost surely.\n\\end{proof}\n\n\n\n\n\n\n\\begin{cor}\\label{cor_limsp_interval_circle}\n\\begin{enumerate}\n\\item The tile ${\\mathscr{T}}$ of a contracting self-similar group with open set condition is homeomorphic to an interval if and\nonly if the nucleus of the group satisfies Theorem~\\ref{th_classification_two_ends}.\n\\item The limit space ${\\mathscr{J}_{$}} of a contracting self-similar group with connected tiles and open set condition is\nhomeomorphic to a circle if and only if the nucleus of the group satisfies Case 1 of\nTheorem~\\ref{th_classification_two_ends}, i.e., it consists of the adding machine, its\ninverse, and the identity state.\n\n\\item The limit space ${\\mathscr{J}_{$}} of a contracting self-similar group with connected tiles and open set condition is\nhomeomorphic to an interval if and only if the nucleus of the group satisfies Case 2 of\nTheorem~\\ref{th_classification_two_ends}.\n\\end{enumerate}\n\\end{cor}\n\\begin{proof}\nLet $G$ be a contracting self-similar groups with open set condition, and let the tile ${\\mathscr{T}}$ of the\ngroup $G$ be homeomorphic to an interval. Then the group $G$ has connected tiles and all tiles ${\\mathscr{T}}_v$\nare homeomorphic to an interval. The boundary of tiles is finite, hence the group $G$ is generated by a\nbounded automaton (here we use the open set condition), and we are under the settings of this section.\nSince $c({\\mathscr{T}}\\setminus t)=2$ almost surely, the Schreier graphs $\\Gamma_w$ with respect to the nucleus ${\\mathcal{N}}$ have almost surely two ends, and hence ${\\mathcal{N}}$ satisfies Theorem~\\ref{th_classification_two_ends}.\n\nIt is left to prove the statements about limit spaces. A small connected neighborhood of any point of a\ncircle or of an interval is homeomorphic to an interval. Hence, if the limit space ${\\mathscr{J}_{$}} is a circle or an interval, the tile ${\\mathscr{T}}$ is homeomorphic to an\ninterval. Therefore we are in the settings of\nTheorem~\\ref{th_classification_two_ends}. As was mentioned above, in Case~1 of\nTheorem~\\ref{th_classification_two_ends} the limit space ${\\mathscr{J}_{$}} is homeomorphic to a circle, and in\nCase~2 it is homeomorphic to an interval.\n\\end{proof}\n\n\nThe last corollary together with Theorem~\\ref{th_Sch_2ended_binary} agree with the following result of\nNekrashevych and \\v{S}uni\\'{c}:\n\n\\begin{theor}[{\\cite[Theorem~5.5]{img}}]\nThe limit dynamical system $({\\mathscr{J}_{,}}{\\mathsf{s}})$ of a contracting self-similar group $G$ is topologically conjugate to the tent map if and only if $G$ is equivalent as a self-similar group to one of the automata ${\\mathsf{A}}_{\\omega, \\rho}$.\n\\end{theor}\n\n\n\n\\section{Examples}\\label{Section_Examples}\n\n\\subsection{Basilica group}\nThe Basilica group $G$ is generated by the automaton shown in Figure~\\ref{fig_BasilicaAutomaton}. This\ngroup is the iterated monodromy group of $z^2-1$. It is torsion-free, has exponential growth, and is the\nfirst example of amenable but not subexponentially amenable group (see \\cite{gri_zuk:spect_pro}). The\norbital Schreier graphs ${\\Gamma}_w$ of this group have polynomial growth of degree $2$ (see\n\\cite[Chapter~VI]{PhDBondarenko}). The structure of Schreier graphs ${\\Gamma}_w$ was investigated in\n\\cite{ddmn:GraphsBasilica}. In particular, it was shown that there are uncountably many pairwise\nnon-isomorphic graphs ${\\Gamma}_w$ and the number of ends was described. Let us show how to get the result\nabout ends using the developed method.\n\n\\begin{figure}\n\\begin{center}\n\\psfrag{00}{$0|0$} \\psfrag{11}{$1|1$} \\psfrag{10}{$1|0$} \\psfrag{01}{$0|1$} \\psfrag{id}{$id$}\n\\psfrag{a}{\\large$a$} \\psfrag{b}{\\large$b$} \\psfrag{c}{\\large$c$} \\psfrag{a0}{\\small$a0$}\n\\psfrag{b0}{\\small$b0$} \\psfrag{c0}{\\small$c0$} \\psfrag{a1}{\\small$a1$} \\psfrag{b1}{\\small$b1$}\n\\psfrag{c1}{\\small$c1$}\n\\epsfig{file=BasilicaAutomaton.eps,height=110pt}\n\\caption{Basilica automaton and its\nmodel graph}\\label{fig_BasilicaAutomaton}\n\\end{center}\n\\end{figure}\n\n\n\\begin{figure}\n\\begin{center}\n\\psfrag{00}{$00$} \\psfrag{11}{$11$} \\psfrag{10}{$10$} \\psfrag{01}{$01$} \\psfrag{0}{$0$} \\psfrag{1}{$1$}\n\\psfrag{b|c}{$b|c$} \\psfrag{ac|b}{$ac|b$} \\psfrag{ab|c}{$ab|c$} \\psfrag{ab}{$ab$} \\psfrag{ac}{$ac$}\n\\psfrag{abc}{$abc$} \\psfrag{ac|b|1}{\\small$ac|b|1$} \\psfrag{ab|c|1}{\\small$ab|c|1$} \\psfrag{ab|1}{$ab|1$}\n\\psfrag{ac|1}{$ac|1$} \\psfrag{abc|1}{$abc|1$} \\psfrag{AC}{\\LARGE ${\\mathsf{A}}_{c}$} \\psfrag{AIC}{\\LARGE ${\\mathsf{A}}_{ic}$}\n\\epsfig{file=Basilica_Ac_Aic.eps,height=550pt}\n\\caption{The automata ${\\mathsf{A}}_{ic}$ and ${\\mathsf{A}}_{c}$ for Basilica\ngroup}\n\\label{fig_Basilica_Ac_Aic}\n\\end{center}\n\\end{figure}\n\nThe alphabet is $X=\\{0,1\\}$ and the post-critical set ${\\mathscr{P}}$ consists of three elements $a=0^{-\\omega}$,\n$b=(01)^{-\\omega}$, $c=(10)^{-\\omega}$. The model graph is shown in Figure~\\ref{fig_BasilicaAutomaton}.\nThe automata ${\\mathsf{A}}_{c}$ and ${\\mathsf{A}}_{ic}$ are shown in Figure~\\ref{fig_Basilica_Ac_Aic}. We get that each tile\ngraph $T_w$ has one or two ends, and we denote by $E_1$ and $E_2$ the corresponding sets of sequences $w$.\nFor the critical sequences $w=0^{\\omega}$ the tile graph $T_w$ has two ends, while for the other critical\nsequences $(01)^{\\omega}$ and $(10)^{\\omega}$ the tile graph $T_w$ has one end. Using the automaton ${\\mathsf{A}}_{ic}$\nthe sets $E_1$ and $E_2$ can be described by Theorem~\\ref{thm_number_of_ends} as follows:\n\\begin{eqnarray*}\nE_2&=& X^{*}(0X)^{\\omega}\\setminus\\left( Cof((01)^{\\omega}\\cup (10)^{\\omega}) \\right),\\\\\nE_1&=&{X^\\omega}\\setminus E_2.\n\\end{eqnarray*}\nAlmost every tile graph $T_w$ has one end, the set $E_2$ is uncountable but of measure zero.\n\n\n\n\n\n\n\n\nEvery graph $T_w\\setminus w$ has one, two, or three connected components, and we denote by $C_1$, $C_2$,\nand $C_3$ the corresponding sets of sequences. Using the automaton ${\\mathsf{A}}_c$ these sets can be described precisely\nas follows:\n\\begin{eqnarray*}\nC_3&=&\\bigcup_{k\\geq 0} \\left( 010(10)^k0 (0X)^{\\omega} \\cup 000^k1 (0X)^{\\omega} \\right),\\\\\nC_2&=&\\bigcup_{k\\geq 1} (10)^k0(0X)^{\\omega} \\bigcup \\left(00{X^\\omega} \\cup 01{X^\\omega}\\right) \\setminus C_3, \\\\\nC_1&=&{X^\\omega}\\setminus \\left( C_2\\cup C_3\\right).\n\\end{eqnarray*}\nThe set $C_3$ is uncountable but of measure zero, while the sets $C_1$ and $C_2$ are of measure~$1/2$.\n\n\n\n\n\nEach graph $T_w\\setminus w$ has one or two infinite components. The corresponding sets $IC_1$ and $IC_2$\ncan be described using the automaton ${\\mathsf{A}}_{ic}$ as follows:\n\\begin{eqnarray*}\nIC_2&=&\\bigcup_{k\\geq 1} \\left( (10)^k 0 (0X)^{\\omega} \\cup 0(10)^k0 (0X)^{\\omega} \\cup 00^k1 (0X)^{\\omega}\n\\right)\n\\setminus \\left(Cof((01)^{\\omega}\\cup (10)^{\\omega}) \\right),\\\\\nIC_1&=& {X^\\omega}\\setminus IC_2.\n\\end{eqnarray*}\nThe set $IC_2$ is uncountable but of measure zero.\n\n\n\n\n\n\n\n\\begin{figure}\n\\begin{center}\n\\psfrag{00000}{\\tiny$00000$} \\psfrag{10000}{\\tiny$10000$} \\psfrag{01000}{\\tiny$01000$}\n\\psfrag{11000}{\\tiny$11000$} \\psfrag{00100}{\\tiny$00100$} \\psfrag{10100}{\\tiny$10100$}\n\\psfrag{01100}{\\tiny$01100$} \\psfrag{11100}{\\tiny$11100$} \\psfrag{00010}{\\tiny$00010$}\n\\psfrag{10010}{\\tiny$10010$} \\psfrag{01010}{\\tiny$01010$} \\psfrag{11010}{\\tiny$11010$}\n\\psfrag{00110}{\\tiny$00110$} \\psfrag{10110}{\\tiny$10110$} \\psfrag{01110}{\\tiny$01110$}\n\\psfrag{11110}{\\tiny$11110$} \\psfrag{00001}{\\tiny$00001$} \\psfrag{10001}{\\tiny$10001$}\n\\psfrag{01001}{\\tiny$01001$} \\psfrag{11001}{\\tiny$11001$} \\psfrag{00101}{\\tiny$00101$}\n\\psfrag{10101}{\\tiny$10101$} \\psfrag{01101}{\\tiny$01101$} \\psfrag{11101}{\\tiny$11101$}\n\\psfrag{00011}{\\tiny$00011$} \\psfrag{10011}{\\tiny$10011$} \\psfrag{01011}{\\tiny$01011$}\n\\psfrag{11011}{\\tiny$11011$} \\psfrag{00111}{\\tiny$00111$} \\psfrag{10111}{\\tiny$10111$}\n\\psfrag{01111}{\\tiny$01111$} \\psfrag{11111}{\\tiny$11111$} \\epsfig{file=Graph_Basilica.eps,height=230pt}\n\\epsfig{file=BasilicaLimitSpace.eps,height=160pt}\n\\caption{The Schreier graph ${\\Gamma}_{5}$ of the Basilica\ngroup and its limit space}\\label{fig_Basilica_Graph LimitSpace}\n\\end{center}\n\\end{figure}\n\n\nThe finite Schreier graph ${\\Gamma}_n$ differs from the finite tile graph $T_n$ by two edges $\\{a_n,b_n\\}$ and\n$\\{a_n,c_n\\}$. Assuming these edges one can relabel the states of the automaton ${\\mathsf{A}}_c$ so that it returns\nthe number of components in ${\\Gamma}_n\\setminus v$. In this way we get that $c({\\Gamma}_n\\setminus v)=1$ if the\nword $v$ starts with $10$ or $11$; in the other cases $c({\\Gamma}_n\\setminus v)=2$. In particular, the Schreier\ngraph ${\\Gamma}_n$ has $2^{n-1}$ cut-vertices.\n\nThe orbital Schreier graph ${\\Gamma}_w$ coincides with the the tile graph $T_w$ except when $w$ is critical. The\ncritical sequences $0^{\\omega}$, $(01)^{\\omega}$, and $(10)^{\\omega}$ lie in the same orbit and the\ncorresponding Schreier graph consists of three tile graphs $T_{0^{\\omega}}$, $T_{(01)^{\\omega}}$,\n$T_{(10)^{\\omega}}$ with two new edges $(0^{\\omega},(01)^{\\omega})$ and $(0^{\\omega},(10)^{\\omega})$. It\nfollows that this graph has four ends.\n\n\nThe limit space ${\\mathscr{J}_{$}} of the group $G$ is homeomorphic to the Julia set of $z^2-1$ shown in\nFigure~\\ref{fig_Basilica_Graph LimitSpace}. The tile ${\\mathscr{T}}$ can be obtained from the limit space by\ncutting the limit space in the way shown in the figure, or, vise versa, the limit space can be obtained\nfrom the tile by gluing points represented by post-critical sequences $0^{-\\omega}$, $(01)^{-\\omega}$,\n$(10)^{-\\omega}$. Every point $t\\in{\\mathscr{T}}$ divides the tile ${\\mathscr{T}}$ into one, two, or three connected\ncomponents. Put $\\mathscr{C}=\\{0^{-\\omega}1, (01)^{-\\omega}1, (10)^{-\\omega}0\\}$. Then the sets\n$\\mathscr{C}_1$, $\\mathscr{C}_2$, and $\\mathscr{C}_3$ of sequences from ${X^{-\\omega}}$, which represent the\ncorresponding cut-points, can be described as follows:\n\\begin{eqnarray*}\n\\mathscr{C}_3&=& \\bigcup_{n\\geq 0} \\mathscr{C}(0X)^n \\cup \\mathscr{C}(0X)^n0,\\\\\n\\mathscr{C}_2&=& \\bigcup_{n\\geq 0} \\left(\\mathscr{C}(X0)^n \\cup \\mathscr{C}(X0)^nX\\right)\\bigcup \\left(\n(0X)^{-\\omega}\\cup (X0)^{-\\omega}\\right)\\setminus \\left(\\mathscr{C}_3\\cup \\left\\{(10)^{-\\omega}, (01)^{-\\omega}\\right\\}\\right),\\\\\n\\mathscr{C}_1&=&{X^{-\\omega}}\\setminus \\left(\\mathscr{C}_2\\cup\\mathscr{C}_3\\right).\n\\end{eqnarray*}\nThe set $\\mathscr{C}_3$ of three-section points is countable, the set $\\mathscr{C}_2$ of bisection points\nis uncountable and of measure zero, and the tile ${\\mathscr{T}}\\setminus t$ is connected for almost all points $t$.\n\nEvery point $t\\in{\\mathscr{J}_{$}} divides the limit space ${\\mathscr{J}_{$}} into one or two connected components. The\ncorresponding sets $\\mathscr{C}'_1$ and $\\mathscr{C}'_2$ can be described as follows:\n\\begin{eqnarray*}\n\\mathscr{C}'_2&=& \\bigcup_{n\\geq 0} \\left(\\mathscr{C}(X0)^n \\cup \\mathscr{C}(0X)^n \\cup \\mathscr{C}(0X)^n0\n\\cup \\mathscr{C}(X0)^nX\\right)\\bigcup\\\\ && \\bigcup \\left(\n(0X)^{-\\omega}\\cup (X0)^{-\\omega}\\right)\\setminus \\left\\{(10)^{-\\omega}, (01)^{-\\omega}\\right\\},\\\\\n\\mathscr{C}'_1&=&{X^{-\\omega}}\\setminus \\mathscr{C}'_2.\n\\end{eqnarray*}\nThe set $\\mathscr{C}'_2$ of bisection points is uncountable and of measure zero, and the limit space\n${\\mathscr{J}_{\\setminus}} t$ is connected for almost all points $t$.\n\n\\begin{figure}\n\\begin{center}\n\\psfrag{00}{$0|0$} \\psfrag{11}{$1|1$} \\psfrag{10}{$1|0$} \\psfrag{01}{$0|1$} \\psfrag{id}{$id$}\n\\psfrag{22}{$2|2$} \\psfrag{20}{$2|0$} \\psfrag{12}{$1|2$} \\psfrag{a}{\\large$a$} \\psfrag{b}{\\large$b$}\n\\psfrag{a0}{\\small$a0$} \\psfrag{b0}{\\small$b0$} \\psfrag{a1}{\\small$a1$} \\psfrag{b1}{\\small$b1$}\n\\psfrag{a2}{\\small$a2$}\n\\psfrag{b2}{\\small$b2$}\n\\epsfig{file=GuptaFabrAutomaton.eps,height=160pt}\n\\caption{Gupta-Fabrykowski\nautomaton and its model graph}\\label{fig_GuptaFabrAutomaton}\n\\end{center}\n\\end{figure}\n\n\\subsection{Gupta-Fabrykowski group}\nThe Gupta-Fabrykowski group $G$ is generated by the automaton shown in Figure~\\ref{fig_GuptaFabrAutomaton}.\nIt was constructed in \\cite{gupta_fabr2} as an example of a group of intermediate growth. Also this group\nis the iterated monodromy group of $z^3(-\\frac{3}{2}+i\\frac{\\sqrt{3}}{2})+1$ (see\n\\cite[Example~6.12.4]{self_sim_groups}). The Schreier graphs ${\\Gamma}_w$ of this group were studied in\n\\cite{barth_gri:spectr_Hecke}, where their spectrum and growth were computed (they have polynomial growth\nof degree $\\frac{\\log 3}{\\log 2}$).\n\n\n\n\nThe alphabet is $X=\\{0,1,2\\}$ and the post-critical set ${\\mathscr{P}}$ consists of two elements $a=2^{-\\omega}$\nand $b=2^{-\\omega}0$. The model graph is shown in Figure~\\ref{fig_GuptaFabrAutomaton}. The automata\n${\\mathsf{A}}_{c}$ and ${\\mathsf{A}}_{ic}$ are shown in Figure~\\ref{fig_GuptaFabr_Ac_Aic}. Every Schreier graph ${\\Gamma}_w$\ncoincides with the tile graph $T_w$. We get that every tile graph $T_w$ has one or two ends, and we denote\nby $E_1$ and $E_2$ the corresponding sets of sequences. For the only critical sequence $2^{\\omega}$ the\ntile graph $T_w$ has one end. Using the automaton ${\\mathsf{A}}_{ic}$ the sets $E_1$ and $E_2$ can be described by\nTheorem~\\ref{thm_number_of_ends} as follows:\n\\begin{eqnarray*}\nE_2=X^{*} \\{0,2\\}^{\\omega}\\setminus Cof(2^{\\omega}),\\qquad E_1={X^\\omega}\\setminus E_2.\n\\end{eqnarray*}\nAlmost every tile graph has one end, the set $E_2$ is uncountable but of measure zero.\n\n\n\\begin{figure}\n\\begin{center}\n\\psfrag{0}{$0$} \\psfrag{1}{$1$} \\psfrag{a}{$a$} \\psfrag{b}{$b$} \\psfrag{a|b}{$a|b$} \\psfrag{ab}{$ab$}\n\\psfrag{ab|1}{$ab|1$} \\psfrag{AC}{\\LARGE ${\\mathsf{A}}_{c}$} \\psfrag{AIC}{\\LARGE ${\\mathsf{A}}_{ic}$}\n\n\\epsfig{file=GuptaFabr_Aic.eps,height=450pt}\n\\caption{The automata ${\\mathsf{A}}_{ic}$ and ${\\mathsf{A}}_{c}$ for\nGupta-Fabrykowski group}\\label{fig_GuptaFabr_Ac_Aic}\n\\end{center}\n\\end{figure}\n\nEvery graph $T_w\\setminus w$ has one or two connected components, and we denote by $C_1$ and $C_2$ the\ncorresponding sets of sequences. Using the automaton ${\\mathsf{A}}_c$ these sets can be described precisely as follows:\n\\begin{eqnarray*}\nC_2= \\bigcup_{k\\geq 0} \\left(2^k01{X^\\omega}\\cup 2^k0\\{0,2\\}^{\\omega}\\right), \\qquad C_1={X^\\omega}\\setminus C_2.\n\\end{eqnarray*}\nThe sets $C_1$ and $C_2$ have measure $\\frac{5}{6}$ and $\\frac{1}{6}$ respectively.\n\nEvery graph $T_w\\setminus w$ has one or two infinite components. The corresponding sets $IC_1$ and $IC_2$\ncan be described using the automaton ${\\mathsf{A}}_{ic}$ as follows:\n\\begin{eqnarray*}\nIC_2=\\bigcup_{k\\geq 0} 2^k0\\{0,2\\}^{\\omega} \\setminus Cof(2^{\\omega}),\\qquad  IC_1={X^\\omega}\\setminus IC_2.\n\\end{eqnarray*}\nThe set $IC_2$ is uncountable but of measure zero.\n\nThe limit space ${\\mathscr{J}_{$}} and the tile ${\\mathscr{T}}$ of the group $G$ are homeomorphic to the Julia set of the map\n$z^3(-\\frac{3}{2}+i\\frac{\\sqrt{3}}{2})+1$ shown in Figure~\\ref{fig_GuptaFabr_Graph LimitSpace}. Every\npoint $t\\in{\\mathscr{J}_{$}} divides the limit space into one, two, or three connected components. The sets\n$\\mathscr{C}_1$, $\\mathscr{C}_2$, and $\\mathscr{C}_3$ of sequences from ${X^{-\\omega}}$, which represent the\ncorresponding points, can be described as follows:\n\\begin{eqnarray*}\n\\mathscr{C}_3&=&2^{-\\omega}0X^{*}\\setminus \\{2^{-\\omega}0\\},\\\\\n\\mathscr{C}_2&=&\\{0,2\\}^{-\\omega}\\setminus \\left(\\mathscr{C}_3\\cup \\{2^{-\\omega}, 2^{-\\omega}0\\}\\right),\\\\\n\\mathscr{C}_1&=&{X^{-\\omega}}\\setminus \\left(\\mathscr{C}_2\\cup\\mathscr{C}_3\\right).\n\\end{eqnarray*}\nThe set $\\mathscr{C}_3$ of three-section points is countable, the set $\\mathscr{C}_2$ of bisection points\nis uncountable and of measure zero, and the limit space ${\\mathscr{J}_{\\setminus}} t$ is connected for almost all\npoints $t$.\n\n\n\\begin{figure}\n\\begin{center}\n\\psfrag{000}{\\tiny$000$} \\psfrag{100}{\\tiny$100$} \\psfrag{200}{\\tiny$200$} \\psfrag{010}{\\tiny$010$}\n\\psfrag{110}{\\tiny$110$} \\psfrag{210}{\\tiny$210$} \\psfrag{020}{\\tiny$020$} \\psfrag{120}{\\tiny$120$}\n\\psfrag{220}{\\tiny$220$} \\psfrag{001}{\\tiny$001$} \\psfrag{101}{\\tiny$101$} \\psfrag{201}{\\tiny$201$}\n\\psfrag{011}{\\tiny$011$} \\psfrag{111}{\\tiny$111$} \\psfrag{211}{\\tiny$211$} \\psfrag{021}{\\tiny$021$}\n\\psfrag{121}{\\tiny$121$} \\psfrag{221}{\\tiny$221$} \\psfrag{002}{\\tiny$002$} \\psfrag{102}{\\tiny$102$}\n\\psfrag{202}{\\tiny$202$} \\psfrag{012}{\\tiny$012$} \\psfrag{112}{\\tiny$112$} \\psfrag{212}{\\tiny$212$}\n\\psfrag{022}{\\tiny$022$} \\psfrag{122}{\\tiny$122$} \\psfrag{222}{\\tiny$222$}\n\\epsfig{file=Graph_GF.eps,height=200pt} \\epsfig{file=GuptaFabrLimitSpace.eps,height=200pt}\n\\caption{The\nSchreier graph ${\\Gamma}_{3}$ of the Gupta-Fabrykowski group and its limit space}\\label{fig_GuptaFabr_Graph\nLimitSpace}\n\\end{center}\n\\end{figure}\n\n\n\n\n\n\n\n\\subsection{Iterated monodromy group of $z^2+i$}\n\nThe iterated monodromy group of $z^2+i$ is generated by the automaton shown in\nFigure~\\ref{fig_IMGz2iAutomaton}. This group is one more example of a group of intermediate growth (see\n\\cite{bux_perez:img}). The algebraic properties of $IMG(z^2+i)$ were studied in \\cite{img_z2_i}. The\nSchreier graphs ${\\Gamma}_w$ of this group have polynomial growth of degree $\\frac{\\log 2}{\\log \\lambda}$, where\n$\\lambda$ is the real root of $x^3-x-2$ (see \\cite[Chapter~VI]{PhDBondarenko}).\n\n\n\\begin{figure}\n\\begin{center}\n\\psfrag{00}{$0|0$} \\psfrag{11}{$1|1$} \\psfrag{10}{$1|0$} \\psfrag{01}{$0|1$} \\psfrag{id}{$id$}\n\\psfrag{a}{\\large$a$} \\psfrag{b}{\\large$b$} \\psfrag{c}{\\large$c$} \\psfrag{a0}{\\small$a0$}\n\\psfrag{b0}{\\small$b0$} \\psfrag{c0}{\\small$c0$} \\psfrag{a1}{\\small$a1$} \\psfrag{b1}{\\small$b1$}\n\\psfrag{c1}{\\small$c1$}\\epsfig{file=IMGz2i_Automaton.eps,height=150pt}\n\\caption{$IMG(z^2+i)$ automaton and\nits model graph}\\label{fig_IMGz2iAutomaton}\n\\end{center}\n\\end{figure}\n\n\n\n\nThe alphabet is $X=\\{0,1\\}$ and the post-critical set ${\\mathscr{P}}$ consists of three elements\n$a=(10)^{-\\omega}0$, $b=(10)^{-\\omega}$, and $c=(01)^{-\\omega}$. The model graph is shown in\nFigure~\\ref{fig_IMGz2iAutomaton}. The automata ${\\mathsf{A}}_{c}$ and ${\\mathsf{A}}_{ic}$ are shown in\nFigure~\\ref{fig_IMGz2i_Aic}. Every Schreier graph ${\\Gamma}_w$ coincides with the tile graph $T_w$ and it is a\ntree. We get that every tile graph $T_w$ has one, two, or three ends, and we denote by $E_1$, $E_2$, and\n$E_3$ the corresponding sets of sequences. Using the automaton ${\\mathsf{A}}_{ic}$ the sets $E_1$, $E_2$, $E_3$ can be\ndescribed by Theorem~\\ref{thm_number_of_ends} as follows. For the both critical sequences\n$(10)^{\\omega}$ and $(01)^{\\omega}$ the tile graph $T_w$ has one end. Denote by $\\mathscr{R}$ the right one-sided\nsofic subshift given by the subgraph emphasized in Figure~\\ref{fig_IMGz2i_Aic}. Then\n\\begin{eqnarray*}\nE_3= Cof(0^{\\omega}), \\ \\ E_2=X^{*}\\mathscr{R} \\setminus Cof(0^{\\omega}\\cup (10)^{\\omega}\\cup\n(01)^{\\omega}), \\ \\ E_1={X^\\omega}\\setminus E_2.\n\\end{eqnarray*}\n(We cannot describe these sets in\nthe way we did with the previous examples, because the subshift $\\mathscr{R}$ is not of finite type).\nAlmost every tile graph has one end, the set $E_2$ is uncountable but of measure zero, and there is one\ngraph, namely $T_{0^{\\omega}}$, with three ends. This example shows that\nCorollary~\\ref{cor_>2ends_pre_periodic} may hold for regular sequences (here $0^{\\omega}$ is regular).\n\n\n\n\\begin{figure}\n\\begin{center}\n\\psfrag{00}{$00$} \\psfrag{11}{$11$} \\psfrag{10}{$10$} \\psfrag{01}{$01$} \\psfrag{0}{$0$} \\psfrag{1}{$1$}\n\\psfrag{b|c}{$b|c$} \\psfrag{bc}{$bc$} \\psfrag{a|bc}{$a|bc$} \\psfrag{ac|b}{$ac|b$} \\psfrag{ab|c}{$ab|c$}\n\\psfrag{ab}{$ab$} \\psfrag{ac}{$ac$} \\psfrag{abc}{$abc$} \\psfrag{a|b|c}{$a|b|c$} \\psfrag{AC}{\\LARGE\n${\\mathsf{A}}_{c}$} \\psfrag{AIC}{\\LARGE ${\\mathsf{A}}_{ic}$} \\epsfig{file=IMGz2i_Aic.eps,height=300pt}\n\\caption{The automaton\n${\\mathsf{A}}_{ic}$ for $IMG(z^2+i)$}\\label{fig_IMGz2i_Aic}\n\\end{center}\n\\end{figure}\n\n\n\\begin{figure}\n\\begin{center}\n\\psfrag{00}{$00$} \\psfrag{11}{$11$} \\psfrag{10}{$10$} \\psfrag{01}{$01$} \\psfrag{0}{$0$} \\psfrag{1}{$1$}\n\\psfrag{b|c}{$b|c$} \\psfrag{bc}{$bc$} \\psfrag{bc|1}{$bc|1$}\\psfrag{a|bc}{$a|bc$} \\psfrag{ac|b}{$ac|b$}\n\\psfrag{ab|c}{$ab|c$} \\psfrag{ab}{$ab$} \\psfrag{ac}{$ac$} \\psfrag{abc}{$abc$} \\psfrag{a|b|c}{$a|b|c$}\n\\psfrag{ab|1}{$ab|1$} \\psfrag{ac|1}{$ac|1$} \\psfrag{abc|1}{$abc|1$} \\psfrag{a|bc|1}{\\small$a|bc|1$}\n\\psfrag{ac|b|1}{\\small$ac|b|1$} \\psfrag{ab|c|1}{\\small$ab|c|1$} \\psfrag{AC}{\\LARGE ${\\mathsf{A}}_{c}$}\n\\psfrag{AIC}{\\LARGE ${\\mathsf{A}}_{ic}$} \\epsfig{file=IMGz2i_Ac.eps,height=450pt}\n\\caption{The automaton ${\\mathsf{A}}_{c}$ for\n$IMG(z^2+i)$}\\label{fig_IMGz2i_Ac}\n\\end{center}\n\\end{figure}\n\n\nEvery graph $T_w\\setminus w$ has one, two, or three connected components, and we denote by $C_1$, $C_2$,\nand $C_3$ the corresponding sets of sequences. Using the automaton ${\\mathsf{A}}_c$ these sets can be described precisely\nas follows:\n\\begin{eqnarray*}\nC_3=\\bigcup_{k\\geq 0} 0(10)^k0X\\mathscr{R}\\bigcup_{k\\geq 2} 0^k1\\mathscr{R}\\bigcup \\{0^{\\omega}\\},\\quad\nC_2={X^\\omega}\\setminus \\left(C_3\\cup C_1\\right),\\quad C_1=\\bigcup_{k\\geq 0} 1(01)^k1{X^\\omega}.\n\\end{eqnarray*}\nThe set $C_3$ is of measure zero, and the sets $C_1$ and $C_2$ have measure $\\frac{1}{3}$ and $\\frac{2}{3}$\nrespectively.\n\nEvery graph $T_w\\setminus w$ has one, two, or three infinite components. The corresponding sets $IC_1$ and\n$IC_2$ can be described using the automaton ${\\mathsf{A}}_{ic}$ as follows:\n\\begin{eqnarray*}\nIC_2&=&\\bigcup_{k\\geq 1} \\left(0^k01\\mathscr{R}\\cup (10)^k0X\\mathscr{R}\\cup 0(10)^k0X\\mathscr{R}\\right),\\\\\nIC_3&=&\\{0^{\\omega}\\},\\quad IC_1={X^\\omega}\\setminus \\left(IC_2\\cup IC_3\\right).\n\\end{eqnarray*}\nThe set $IC_2$ is uncountable but of measure zero.\n\n\\begin{figure}\n\\begin{center}\n\\psfrag{00000}{\\tiny$00000$} \\psfrag{10000}{\\tiny$10000$} \\psfrag{01000}{\\tiny$01000$}\n\\psfrag{11000}{\\tiny$11000$} \\psfrag{00100}{\\tiny$00100$} \\psfrag{10100}{\\tiny$10100$}\n\\psfrag{01100}{\\tiny$01100$} \\psfrag{11100}{\\tiny$11100$} \\psfrag{00010}{\\tiny$00010$}\n\\psfrag{10010}{\\tiny$10010$} \\psfrag{01010}{\\tiny$01010$} \\psfrag{11010}{\\tiny$11010$}\n\\psfrag{00110}{\\tiny$00110$} \\psfrag{10110}{\\tiny$10110$} \\psfrag{01110}{\\tiny$01110$}\n\\psfrag{11110}{\\tiny$11110$} \\psfrag{00001}{\\tiny$00001$} \\psfrag{10001}{\\tiny$10001$}\n\\psfrag{01001}{\\tiny$01001$} \\psfrag{11001}{\\tiny$11001$} \\psfrag{00101}{\\tiny$00101$}\n\\psfrag{10101}{\\tiny$10101$} \\psfrag{01101}{\\tiny$01101$} \\psfrag{11101}{\\tiny$11101$}\n\\psfrag{00011}{\\tiny$00011$} \\psfrag{10011}{\\tiny$10011$} \\psfrag{01011}{\\tiny$01011$}\n\\psfrag{11011}{\\tiny$11011$} \\psfrag{00111}{\\tiny$00111$} \\psfrag{10111}{\\tiny$10111$}\n\\psfrag{01111}{\\tiny$01111$} \\psfrag{11111}{\\tiny$11111$} \\epsfig{file=GraphIMGz2_i.eps,height=200pt}\n\\caption{The Schreier graph ${\\Gamma}_{5}$ of the IMG($z^2+i$) and its limit space}\\label{fig_IMG_Graph\nLimitSpace}\n\\end{center}\n\\end{figure}\n\n\nThe limit space ${\\mathscr{J}_{[}}]$ and the tile ${\\mathscr{T}}$ of the group $IMG(z^2+i)$ are homeomorphic to the Julia set\nof the map $z^2+i$ shown in Figure~\\ref{fig_IMG_Graph LimitSpace}. Every point $t\\in{\\mathscr{J}_{[}}]$ divides the\nlimit space into one, two, or three connected components. The sets $\\mathscr{C}_1$, $\\mathscr{C}_2$, and\n$\\mathscr{C}_3$ of sequences from ${X^{-\\omega}}$, which represent the corresponding points, can be described as\nfollows:\n\\begin{eqnarray*}\n\\mathscr{C}_3= Cof(0^{-\\omega}),\\quad \\mathscr{C}_2= \\mathscr{L} X^{*}\\setminus \\mathscr{C}_3,\\quad\n\\mathscr{C}_1= {X^{-\\omega}}\\setminus \\left(\\mathscr{C}_2\\cup \\mathscr{C}_3\\right),\n\\end{eqnarray*}\nwhere $\\mathscr{L}$ is the left one-sided sofic subshift given by the subgraph emphasized in\nFigure~\\ref{fig_IMGz2i_Aic}. The set $\\mathscr{C}_3$ of three-section points is countable, the set\n$\\mathscr{C}_2$ of bisection points is uncountable and of measure zero, and the limit space\n${\\mathscr{J}_{[}}]\\setminus t$ is connected for almost all points $t$.\n\n\n\n\n\n\\begin{thebibliography}{10}\n\n\\bibitem{AL}\nD.~Aldous and R.~Lyons,\n\\newblock Processes on unimodular random networks,\n\\newblock {\\em Electr. J. Probab.} \\textbf{12} (2007), 1454--1508.\n\n\\bibitem{barth_gri:spectr_Hecke}\nL.~Bartholdi and R.~Grigorchuk,\n\\newblock On the spectrum of {H}ecke type operators related to some fractal groups,\n\\newblock {\\em Tr. Mat. Inst. Steklova} \\textbf{231} (2000), 5--45.\n\n\n\n\\bibitem{fractal_gr_sets}\nL.~Bartholdi, R.~Grigorchuk, and V.~Nekrashevych,\n\\newblock From fractal groups to fractal sets,\n\\newblock in {\\em Fractals in Graz 2001}, Trends Math., Birkh\\\"auser, Basel, 2003, 25--118.\n\n\\bibitem{bhn:aut_til}\nL.~Bartholdi, A.~G.~Henriques, and V.~Nekrashevych,\n\\newblock {Automata, groups, limit spaces, and tilings},\n\\newblock {\\em J. Algebra}  \\textbf{305} (2006), 629--663.\n\n\n\n\n\n\n\n\\bibitem{bondnek:pcf}\nI.~Bondarenko and V.~Nekrashevych,\n\\newblock Post-critically finite self-similar groups,\n\\newblock {\\em Algebra Discrete Math.} \\textbf{4} (2003), 21--32.\n\n\n\\bibitem{PhDBondarenko}\nI.~Bondarenko,\n\\newblock Groups generated by bounded automata and their {S}chreier graphs.\n\\newblock Ph.D. Dissertation, Texas A\\&M University, 2007.\n\n\\bibitem{GrowthSch}\nI.~Bondarenko,\n\\newblock {Growth of {S}chreier graphs of automaton groups,}\n\\newblock {\\em Math. Ann.} \\textbf{354} (2012), 765--785.\n\n\\bibitem{ZigZag:bond}\nI.~Bondarenko,\n\\newblock {Self-similar groups and the zig-zag and replacement products of graphs,}\n\\newblock {\\em Journal of Algebra} \\textbf{434} (2015), 1--11.\n\n\\bibitem{bk:meas_limsp}\nI.~Bondarenko and R.~Kravchenko,\n\\newblock {Graph-directed systems and self-similar measures on limit spaces of\n  self-similar groups,}\n\\newblock {\\em Adv. Math.} \\textbf{226} (2011), 2169--2191.\n\n\n\\bibitem{bux_perez:img}\nK.-U.~Bux and R.~P{\\'e}rez,\n\\newblock On the growth of iterated monodromy groups,\n\\newblock in: {\\em Topological and asymptotic aspects of group theory}, vol.~394,\nContemp. Math., Amer. Math. Soc., Providence, RI, 2006, 61--76.\n\n\\bibitem{ddmn:GraphsBasilica}\nD.~D'Angeli, A.~Donno, M.~Matter, and T.~Nagnibeda,\n\\newblock {Schreier graphs of the {B}asilica group,}\n\\newblock {\\em J. Mod. Dyn.}  \\textbf{4} (2010), 167--205.\n\n\\bibitem{ddn:Ising}\nD.~D'Angeli, A.~Donno, and T.~Nagnibeda,\n\\newblock {Partition functions of the {I}sing model on some self-similar {S}chreier graphs,}\n\\newblock in: {\\em Random Walks, Boundaries and Spectra} (D. Lenz, F. Sobieczky and W. Woess Eds.),\nProgress in Prob. Vol. 64, Birkh\\\"auser, Springer, Basel, 2011, 277--304.\n\n\\bibitem{ddn:Dimer}\nD.~D'Angeli, A.~Donno, and T.~Nagnibeda,\n\\newblock {Counting dimer coverings on self-similar Schreier graphs,}\n\\newblock {\\em  European Journal of Combinatorics} \\textbf{33} (2012), 1484--1513.\n\n\\bibitem{delzant_grigorchuk}\nT.~Delzant and R.~Grigorchuk,\n\\newblock Homomorphic images of branch groups, and Serre's property (FA),\n\\newblock in: {\\em Geometry and dynamics of groups and spaces}, Progr. Math., 265, Birkh\\\"{a}user, Basel, 2008,\n353--375.\n\n\\bibitem{gupta_fabr2}\nJ.~Fabrykowski and N.~Gupta,\n\\newblock On groups with sub-exponential growth functions {II},\n\\newblock {\\em J. Indian Math. Soc. (N.S.)} \\textbf{56} (1991), 217--228.\n\n\\bibitem{GNS}\nR.~Grigorchuk, V.~Nekrashevych, and V.~Sushchanskii,\n\\newblock Automata, dynamical systems and groups,\n\\newblock {\\em Tr. Mat. Inst. Steklova} \\textbf{231} (2000), 134--214.\n\n\\bibitem{img_z2_i}\nR.~Grigorchuk, D.~Savchuk, and Z.~{\\v{S}}uni\\'c,\n\\newblock {The spectral problem, substitutions and iterated monodromy,}\n\\newblock {\\em CRM Proceedings and Lecture Notes} \\textbf{42} (2007), 225--248.\n\n\n\\bibitem{gri_sunik:hanoi}\nR.~Grigorchuk and Z.~{\\v{S}}uni{\\'c},\n\\newblock{Asymptotic aspects of {S}chreier graphs and {H}anoi {T}owers groups},\n\\newblock {\\em C. R. Math. Acad. Sci. Paris} \\textbf{342} (2006), 545--550.\n\n\n\\bibitem{gri_zuk:lampl_group}\nR.~Grigorchuk and A.~{\\.Z}uk,\n\\newblock {The lamplighter group as a group generated by a 2-state automaton, and its spectrum},\n\\newblock {\\em Geom. Dedicata}  \\textbf{87} (2001), 209--244.\n\n\n\\bibitem{gri_zuk:spect_pro}\nR.~Grigorchuk and A.~{\\.Z}uk,\n\\newblock {Spectral properties of a torsion-free weakly branch group defined by a three state automaton,}\n\\newblock in: {\\em Computational and statistical group theory (Las Vegas, NV/Hoboken, NJ, 2001)},\nvol.~298, Contemp. Math., Amer. Math. Soc., Providence, RI, 2002, 57--82.\n\n\\bibitem{gromov}\nM.~Gromov,\n\\newblock{Structures m\\'{e}triques pour les vari\\'{e}t\\'{e}s riemanniennes},\n\\newblock{Textes Math\\'{e}matiques, J. La-fontaine and P. Pansu (Eds.)},\n1. CEDIC, Paris, 1981. iv+152 pp. ISBN: 2-7124-0714-8.\n\n\\bibitem{kigami:anal_fract}\nJ.~Kigami,\n\\newblock {\\em Analysis on fractals},\n\\newblock Volume 143 of Cambridge Tracts in Mathematics, University Press, Cambridge, 2001.\n\n\n\\bibitem{MN_AMS}\nM.~Matter and T.~Nagnibeda,\n\\newblock {Abelian sandpile model on randomly rooted graphs and self-similar groups,}\n\\newblock {\\em Israel J. Math.} \\textbf{199} (2014), 363--420.\n\n\\bibitem{Previte}\nJ.~P.~Previte,\n\\newblock {Graph substitutions,}\n\\newblock {\\em Ergodic Theory Dynam. Systems} \\textbf{18} (1998), 661--685.\n\n\\bibitem{self_sim_groups}\nV.~Nekrashevych,\n\\newblock {\\em Self-similar groups},\n\\newblock Volume 117 of {\\em Mathematical Surveys\n  and Monographs}, Amer. Math. Soc., Providence, RI, 2005.\n\n\\bibitem{ssgroups_geom}\nV.~Nekrashevych,\n\\newblock {Self-similar groups and their geometry,}\n\\newblock {\\em Sa\\~{o} Paulo Journal of Mathematical Sciences}  \\textbf{1} (2007), 41--96.\n\n\n\\bibitem{img}\nV.~Nekrashevych,\n\\newblock {Iterated monodromy groups,}\n\\newblock in: {\\em Groups St Andrews 2009 in Bath}, vol.~1, London Math. Soc.\nLecture Note Ser. 387, Cambridge University Press, Cambridge, 2011, 41--93.\n\n\n\\bibitem{Zoran}\nZ.~\\v{S}uni\\'{c},\n\\newblock {Hausdorff dimension in a family of self-similar groups,}\n\\newblock {\\em Geometriae Dedicata} \\textbf{124} (2007), 213--236.\n\n\\bibitem{sidki:circ}\nS.~Sidki,\n\\newblock {Automorphisms of one-rooted trees: growth, circuit structure, and acyclicity,}\n\\newblock {\\em J. Math. Sci. (New York)} \\textbf{100} (2000), 1925--1943.\n\n\\bibitem{smirnov}\nS. K. Smirnov,\n\\newblock {On supports of dynamical laminations and biaccessible points in polynomial Julia sets,}\n\\newblock \\textit{Colloq. Math.} \\textbf{87} (2001), 287--295.\n\n\\bibitem{zdunik}\nA. Zdunik,\n\\newblock {On biaccessible points in Julia sets of polynomials,}\n\\newblock \\textit{Fund. Math.} \\textbf{163} (2000), 277--286.\n\n\\end{thebibliography}\n\n\n\n", "itemtype": "equation", "pos": -1, "prevtext": "\n\\end{prop}\n\\begin{proof}\nThe interior $int({\\mathscr{T}}_v)$ of the tile ${\\mathscr{T}}_v$ is the complement to the subset of finitely many points\nthat also belong to other tiles of the same level. Therefore ${\\mathscr{T}}\\setminus \\textrm{int}({\\mathscr{T}}_{v})$ is\nthe union of all tiles ${\\mathscr{T}}_u$ for $u\\in X^{|v|}, u\\neq v$.\n\nSince the point $t$ is regular, we can choose $n$ large enough so that the tile ${\\mathscr{T}}_{x_n\\ldots x_2x_1}$\ndoes not contain the boundary points of ${\\mathscr{T}}$ contained in ${\\mathscr{T}}\\setminus t$, and every tile ${\\mathscr{T}}_v$\nfor $v\\in X^n$ contains at most one boundary point of ${\\mathscr{T}}$. Since $t$ belongs to the interior\n$int({\\mathscr{T}}_{x_n\\ldots x_2x_1})$ of the tile ${\\mathscr{T}}_{x_n\\ldots x_2x_1}$, if two boundary points of ${\\mathscr{T}}$\nlie in the same connected component of ${\\mathscr{T}}\\setminus int({\\mathscr{T}}_{x_n\\ldots x_2x_1})$, they lie in the\nsame connected component of ${\\mathscr{T}}\\setminus t$. Therefore the value of the first limit is not less than\n$bc({\\mathscr{T}}\\setminus t)$. Conversely, if two boundary points of ${\\mathscr{T}}$ lie in the same component of\n${\\mathscr{T}}\\setminus t$, then for sufficiently large $n$ these two points lie in the same components of\n${\\mathscr{T}}\\setminus int({\\mathscr{T}}_{x_n\\ldots x_2x_1})$. Since the number of boundary points is finite, the first\nequality follows.\n\nFor the second equality recall that two tiles ${\\mathscr{T}}_v$ and ${\\mathscr{T}}_u$ for $v,u\\in X^n$ have nonempty\nintersection if and only if the vertices $v$ and $u$ are connected by an edge in the graph $T_n$.  It\nfollows that if two vertices $v$ and $u$ belong to the same component in $T_n\\setminus x_n\\ldots x_2x_1$,\nthen the tiles ${\\mathscr{T}}_v$ and ${\\mathscr{T}}_u$ belong to the same component in ${\\mathscr{T}}\\setminus t$. Therefore the\nvalue of the second limit is not less than $bc({\\mathscr{T}}\\setminus t)$. Conversely, since the point $t$ is\nregular, one can choose $n$ large enough so that for any pair of boundary points of ${\\mathscr{T}}$ that belong to\nthe same connected component in ${\\mathscr{T}}\\setminus t$, these points also belong to the same component in\n${\\mathscr{T}}\\setminus {\\mathscr{T}}_{x_n\\ldots x_2x_1}$. The second equality follows.\n\\end{proof}\n\n\n\nPropositions~\\ref{prop_infcomp_limit} and \\ref{prop_tile_regular_point} establish the connection between\nthe number of components in a punctured tile and the number of infinite components in a punctured tile\ngraph. To describe the limit in Proposition~\\ref{prop_infcomp_limit} we constructed the automaton\n${\\mathsf{A}}_{ic}$, which returns the number ${pc}(T_n\\setminus x_n\\ldots x_2x_1)$ by reading the word $x_n\\ldots\nx_2x_1$ from left to right, so that we can apply it to right-infinite sequences. Similarly one can\nconstruct a finite automaton ${\\mathsf{B}}_{bc}$, which returns ${pc}(T_n\\setminus x_n\\ldots x_2x_1)$ by reading the\nword $x_n\\ldots x_2x_1$ from right to left (the reversion of a regular language is a regular language) so\nthat we can apply it to left-infinite sequences. Then we can describe the limit in\nProposition~\\ref{prop_tile_regular_point} in the same way as Proposition~\\ref{prop_infcomp_A_ic} describes\nthe limit in Proposition~\\ref{prop_infcomp_limit}.\n\nAlso we can construct a finite deterministic (acceptor) automaton ${\\mathsf{B}}_{ic}$ with the following property.\nThe states of ${\\mathsf{B}}_{ic}$ are labeled by tuples of the form\n\n", "index": 19, "text": "$$(\\{{\\mathscr{P}}_i\\}_i,\\{\\mathscr{F}_j\\}_j,\\varphi:\\{{\\mathscr{P}}_i\\}_i\\rightarrow\\{\\mathscr{F}_j\\}_j, n).$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex10.m1\" class=\"ltx_Math\" alttext=\"(\\{{\\mathscr{P}}_{i}\\}_{i},\\{\\mathscr{F}_{j}\\}_{j},\\varphi:\\{{\\mathscr{P}}_{i}%&#10;\\}_{i}\\rightarrow\\{\\mathscr{F}_{j}\\}_{j},n).\" display=\"block\"><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mrow><msub><mrow><mo stretchy=\"false\">{</mo><msub><mi class=\"ltx_font_mathscript\">\ud835\udcab</mi><mi>i</mi></msub><mo stretchy=\"false\">}</mo></mrow><mi>i</mi></msub><mo>,</mo><msub><mrow><mo stretchy=\"false\">{</mo><msub><mi class=\"ltx_font_mathscript\">\u2131</mi><mi>j</mi></msub><mo stretchy=\"false\">}</mo></mrow><mi>j</mi></msub><mo>,</mo><mi>\u03c6</mi></mrow><mo>:</mo><mrow><msub><mrow><mo stretchy=\"false\">{</mo><msub><mi class=\"ltx_font_mathscript\">\ud835\udcab</mi><mi>i</mi></msub><mo stretchy=\"false\">}</mo></mrow><mi>i</mi></msub><mo>\u2192</mo><mrow><msub><mrow><mo stretchy=\"false\">{</mo><msub><mi class=\"ltx_font_mathscript\">\u2131</mi><mi>j</mi></msub><mo stretchy=\"false\">}</mo></mrow><mi>j</mi></msub><mo>,</mo><mi>n</mi></mrow></mrow></mrow><mo stretchy=\"false\">)</mo></mrow><mo>.</mo></mrow></math>", "type": "latex"}]