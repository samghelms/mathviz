[{"file": "1601.05872.tex", "nexttext": "\nwhere $W$ is a standard Brownian motion, and  the riskless rate $r$ and volatility $\\sigma$ are constants. Since we are concerned with pricing questions, we have put ourselves in the pricing measure: the discounted stock price $\\tilde S_t \\equiv e^{-rt}S_t$ is a martingale. With no loss of generality, we immediately make the simplifying assumptions\n\n", "itemtype": "equation", "pos": 2528, "prevtext": "\n\\maketitle\n\n\n\\begin{abstract}\nSuppose you have one unit of stock, currently worth 1,  which you must sell before time $T$. The Optional Sampling Theorem tells us that whatever stopping time we choose to sell, the expected discounted value we get when we sell will be 1. Suppose however that we are able to see $a$ units of time into the future, and base our stopping rule on that; we should be able to do better than expected value 1. But how much better can we do? And how would we exploit the additional information? The optimal solution to this problem will never be found, but in this paper we establish remarkably close bounds on the value of the problem, and we derive a fairly simple exercise rule that manages to extract most of the value of foresight.\n\\end{abstract}\n\n\\section{Introduction}\\label{intro}\nWhat is the value of foresight in a financial market? This is a question that intrigued Larry Shepp (see page 2 of \\cite{SheppSem}) and seems an interesting question in the context of insider trading; if we could know one minute in advance what the price of a stock was going to do, what would we be prepared to pay for that information? Of course, it is rather fanciful to imagine that we could possibly be told the price of the stock at some time in the future, but we might imagine a situation where some market participants received information only after a delay, which would confer the same kind of advantage on those who got the information earlier. In a modern financial market, any such differences would be measured in microseconds, a timescale on which conventional models of stock prices could not be trusted, but one of the first observations of this paper is that the value of foresight can be equivalently interpreted in terms of the value of a fixed-window lookback option; at a time of your choosing, you may sell the stock for the best price which the stock achieved in the previous $a$ units of time. This transforms the question into an American option pricing problem, but not one that is possible to solve in closed form, since the state variable at time $t$ is the entire history of the stock from time $t-a$ to time $t$ - a path-valued state. Moreover, even if we were to discretize time, the state vector will be high dimensional, so existing numerical methods will struggle to cope. Nevertheless, recent developments allow good progress to be made on the question, as we shall see. \\\\\n\n\nTo begin with, we set some notation. Throughout the paper, the time-$t$ price of a stock is given as\n\n", "index": 1, "text": "\\begin{equation}\nS_t\t= \\exp( \\; \\sigma \\, W_t + (r - {  {\\scriptstyle \\frac{1}{2} }\\,  } \\sigma^2) \\, t \\; ), \\qquad\nt \\geq 0,\n\\label{eq1}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E1.m1\" class=\"ltx_Math\" alttext=\"S_{t}=\\exp(\\;\\sigma\\,W_{t}+(r-{{\\scriptstyle\\frac{1}{2}}\\,}\\sigma^{2})\\,t\\;),%&#10;\\qquad t\\geq 0,\" display=\"block\"><mrow><mrow><mrow><msub><mi>S</mi><mi>t</mi></msub><mo>=</mo><mrow><mi>exp</mi><mo>\u2061</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">(</mo><mrow><mrow><mpadded width=\"+1.7pt\"><mi>\u03c3</mi></mpadded><mo>\u2062</mo><msub><mi>W</mi><mi>t</mi></msub></mrow><mo>+</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mi>r</mi><mo>-</mo><mrow><mpadded width=\"+1.7pt\"><mstyle displaystyle=\"false\" scriptlevel=\"+1\"><mfrac><mn>1</mn><mn>2</mn></mfrac></mstyle></mpadded><mo>\u2062</mo><msup><mi>\u03c3</mi><mn>2</mn></msup></mrow></mrow><mo rspace=\"4.2pt\" stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mpadded width=\"+2.8pt\"><mi>t</mi></mpadded></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo rspace=\"22.5pt\">,</mo><mrow><mi>t</mi><mo>\u2265</mo><mn>0</mn></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nThe first assumption involves no loss of generality, because for any choice of stopping time $\\tau$ the time-0 value of using that stopping time will be $E[ e^{-r\\tau} S_\\tau] = E[ \\tilde S_\\tau]$, so we are in effect stopping the discounted stock price\n", "itemtype": "equation", "pos": 3033, "prevtext": "\nwhere $W$ is a standard Brownian motion, and  the riskless rate $r$ and volatility $\\sigma$ are constants. Since we are concerned with pricing questions, we have put ourselves in the pricing measure: the discounted stock price $\\tilde S_t \\equiv e^{-rt}S_t$ is a martingale. With no loss of generality, we immediately make the simplifying assumptions\n\n", "index": 3, "text": "\\begin{equation}\nr = 0\\;  ; \\qquad \\sigma = 1.\n\\label{simple}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E2.m1\" class=\"ltx_Math\" alttext=\"r=0\\;;\\qquad\\sigma=1.\" display=\"block\"><mrow><mrow><mrow><mi>r</mi><mo>=</mo><mpadded width=\"+2.8pt\"><mn>0</mn></mpadded></mrow><mo rspace=\"22.5pt\">;</mo><mrow><mi>\u03c3</mi><mo>=</mo><mn>1</mn></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nand this is just the form of $S_t$ when $r=0$.\nThe second assumption involves no loss of generality, because we are going to suppose that we have to stop by some fixed time $T>0$, and that we are able to look ahead $a \\in (0,T)$ units of time. Changing $\\sigma$ in the specification of the dynamics \\eqref{eq1} simply amounts to rescaling $T$ and $a$, so we may and shall take $\\sigma = 1$.\nOur model for the asset dynamics is therefore \n\n", "itemtype": "equation", "pos": 3363, "prevtext": "\nThe first assumption involves no loss of generality, because for any choice of stopping time $\\tau$ the time-0 value of using that stopping time will be $E[ e^{-r\\tau} S_\\tau] = E[ \\tilde S_\\tau]$, so we are in effect stopping the discounted stock price\n", "index": 5, "text": "\n\\[\n\\tilde S_t = \\exp( \\sigma W_t - {  {\\scriptstyle \\frac{1}{2} }\\,  } \\sigma^2 t)  \\;  ;\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex1.m1\" class=\"ltx_Math\" alttext=\"\\tilde{S}_{t}=\\exp(\\sigma W_{t}-{{\\scriptstyle\\frac{1}{2}}\\,}\\sigma^{2}t)\\;;\" display=\"block\"><mrow><mrow><msub><mover accent=\"true\"><mi>S</mi><mo stretchy=\"false\">~</mo></mover><mi>t</mi></msub><mo>=</mo><mrow><mi>exp</mi><mo>\u2061</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mrow><mi>\u03c3</mi><mo>\u2062</mo><msub><mi>W</mi><mi>t</mi></msub></mrow><mo>-</mo><mrow><mpadded width=\"+1.7pt\"><mstyle displaystyle=\"false\" scriptlevel=\"+1\"><mfrac><mn>1</mn><mn>2</mn></mfrac></mstyle></mpadded><mo>\u2062</mo><msup><mi>\u03c3</mi><mn>2</mn></msup><mo>\u2062</mo><mi>t</mi></mrow></mrow><mo rspace=\"5.3pt\" stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>;</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nwhere $X$ is the drifting Brownian motion\n\n", "itemtype": "equation", "pos": 3895, "prevtext": "\nand this is just the form of $S_t$ when $r=0$.\nThe second assumption involves no loss of generality, because we are going to suppose that we have to stop by some fixed time $T>0$, and that we are able to look ahead $a \\in (0,T)$ units of time. Changing $\\sigma$ in the specification of the dynamics \\eqref{eq1} simply amounts to rescaling $T$ and $a$, so we may and shall take $\\sigma = 1$.\nOur model for the asset dynamics is therefore \n\n", "index": 7, "text": "\\begin{equation}\nS_t = \\exp( W_t - {  {\\scriptstyle \\frac{1}{2} }\\,  } t) \\equiv \\exp( X_t),\n\\label{eq2}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E3.m1\" class=\"ltx_Math\" alttext=\"S_{t}=\\exp(W_{t}-{{\\scriptstyle\\frac{1}{2}}\\,}t)\\equiv\\exp(X_{t}),\" display=\"block\"><mrow><mrow><msub><mi>S</mi><mi>t</mi></msub><mo>=</mo><mrow><mi>exp</mi><mo>\u2061</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msub><mi>W</mi><mi>t</mi></msub><mo>-</mo><mrow><mpadded width=\"+1.7pt\"><mstyle displaystyle=\"false\" scriptlevel=\"+1\"><mfrac><mn>1</mn><mn>2</mn></mfrac></mstyle></mpadded><mo>\u2062</mo><mi>t</mi></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2261</mo><mrow><mi>exp</mi><mo>\u2061</mo><mrow><mo stretchy=\"false\">(</mo><msub><mi>X</mi><mi>t</mi></msub><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nwith the special value\\footnote{Later on, we shall derive expressions for various probabilities and expectations associated with $X$, and it turns out to be notationally cleaner to work with a general drift, which is why we write $X$ as \\eqref{Xdef}.} $c = -{  {\\scriptstyle \\frac{1}{2} }\\,  }$. Notice that we will by convention fix $S_0 = 1$. \\\\\n\nIf $({\\mathcal F}_t)_{t \\geq 0}$ is the filtration of $W$, we express the look-ahead property by saying that we may stop at any non-negative random time $\\tau'$ with the property that \n\n", "itemtype": "equation", "pos": 4057, "prevtext": "\nwhere $X$ is the drifting Brownian motion\n\n", "index": 9, "text": "\\begin{equation}\nX_t = W_t + ct\n\\label{Xdef}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E4.m1\" class=\"ltx_Math\" alttext=\"X_{t}=W_{t}+ct\" display=\"block\"><mrow><msub><mi>X</mi><mi>t</mi></msub><mo>=</mo><mrow><msub><mi>W</mi><mi>t</mi></msub><mo>+</mo><mrow><mi>c</mi><mo>\u2062</mo><mi>t</mi></mrow></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nIt is immediate that this is equivalent to the statement that $\\tau = \\tau'+a $ is a stopping time. What we want to understand then is \n\n", "itemtype": "equation", "pos": 4651, "prevtext": "\nwith the special value\\footnote{Later on, we shall derive expressions for various probabilities and expectations associated with $X$, and it turns out to be notationally cleaner to work with a general drift, which is why we write $X$ as \\eqref{Xdef}.} $c = -{  {\\scriptstyle \\frac{1}{2} }\\,  }$. Notice that we will by convention fix $S_0 = 1$. \\\\\n\nIf $({\\mathcal F}_t)_{t \\geq 0}$ is the filtration of $W$, we express the look-ahead property by saying that we may stop at any non-negative random time $\\tau'$ with the property that \n\n", "index": 11, "text": "\\begin{equation}\n\\{ \\tau' \\leq t\\} \\in {\\mathcal F}_{t+a} \\qquad \\forall t \\geq 0.\n\\label{tau}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E5.m1\" class=\"ltx_Math\" alttext=\"\\{\\tau^{\\prime}\\leq t\\}\\in{\\mathcal{F}}_{t+a}\\qquad\\forall t\\geq 0.\" display=\"block\"><mrow><mrow><mo stretchy=\"false\">{</mo><msup><mi>\u03c4</mi><mo>\u2032</mo></msup><mo>\u2264</mo><mi>t</mi><mo stretchy=\"false\">}</mo></mrow><mo>\u2208</mo><msub><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mrow><mi>t</mi><mo>+</mo><mi>a</mi></mrow></msub><mo mathvariant=\"italic\" separator=\"true\">\u2003\u2003</mo><mo>\u2200</mo><mi>t</mi><mo>\u2265</mo><mn>0</mn><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nIt is clear that $v$ will be increasing, and $v(0) = 1$, but our aim is to determine as accurately as possible what $v(a)$ is, and to identify a good approximation to the optimal stopping time.  The first item of business, dealt with in Section \\ref{S2}, is to show that the value $v$ can be alternatively expressed as\n\n", "itemtype": "equation", "pos": 4897, "prevtext": "\nIt is immediate that this is equivalent to the statement that $\\tau = \\tau'+a $ is a stopping time. What we want to understand then is \n\n", "index": 13, "text": "\\begin{equation}\nv(a) \\equiv \\sup_{0 \\leq \\tau' \\leq T} E[\\; S_{\\tau'}\\; ] \\equiv \\sup_{a \\leq \\tau \\leq T+a}\nE[\\; S_{\\tau-a}  \\; ].\n\\label{eq3}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E6.m1\" class=\"ltx_Math\" alttext=\"v(a)\\equiv\\sup_{0\\leq\\tau^{\\prime}\\leq T}E[\\;S_{\\tau^{\\prime}}\\;]\\equiv\\sup_{a%&#10;\\leq\\tau\\leq T+a}E[\\;S_{\\tau-a}\\;].\" display=\"block\"><mrow><mrow><mrow><mi>v</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2261</mo><mrow><munder><mo movablelimits=\"false\">sup</mo><mrow><mn>0</mn><mo>\u2264</mo><msup><mi>\u03c4</mi><mo>\u2032</mo></msup><mo>\u2264</mo><mi>T</mi></mrow></munder><mo>\u2061</mo><mrow><mi>E</mi><mo>\u2062</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">[</mo><mpadded width=\"+2.8pt\"><msub><mi>S</mi><msup><mi>\u03c4</mi><mo>\u2032</mo></msup></msub></mpadded><mo stretchy=\"false\">]</mo></mrow></mrow></mrow><mo>\u2261</mo><mrow><munder><mo movablelimits=\"false\">sup</mo><mrow><mi>a</mi><mo>\u2264</mo><mi>\u03c4</mi><mo>\u2264</mo><mrow><mi>T</mi><mo>+</mo><mi>a</mi></mrow></mrow></munder><mo>\u2061</mo><mrow><mi>E</mi><mo>\u2062</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">[</mo><mpadded width=\"+2.8pt\"><msub><mi>S</mi><mrow><mi>\u03c4</mi><mo>-</mo><mi>a</mi></mrow></msub></mpadded><mo stretchy=\"false\">]</mo></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nwhere\\footnote{... using the convention that $S_u = 1$ for $u<0$, and $S_u = S_T$ for $u \\geq T$ ...} \n\n", "itemtype": "equation", "pos": 5376, "prevtext": "\nIt is clear that $v$ will be increasing, and $v(0) = 1$, but our aim is to determine as accurately as possible what $v(a)$ is, and to identify a good approximation to the optimal stopping time.  The first item of business, dealt with in Section \\ref{S2}, is to show that the value $v$ can be alternatively expressed as\n\n", "index": 15, "text": "\\begin{equation}\nv(a) = \\sup_{0 \\leq \\tau \\leq T} E[ \\; Z_\\tau \\; ],\n\\label{eq7}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E7.m1\" class=\"ltx_Math\" alttext=\"v(a)=\\sup_{0\\leq\\tau\\leq T}E[\\;Z_{\\tau}\\;],\" display=\"block\"><mrow><mrow><mrow><mi>v</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><munder><mo movablelimits=\"false\">sup</mo><mrow><mn>0</mn><mo>\u2264</mo><mi>\u03c4</mi><mo>\u2264</mo><mi>T</mi></mrow></munder><mo>\u2061</mo><mrow><mi>E</mi><mo>\u2062</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">[</mo><mpadded width=\"+2.8pt\"><msub><mi>Z</mi><mi>\u03c4</mi></msub></mpadded><mo stretchy=\"false\">]</mo></mrow></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nand where the random time $\\tau $ in \\eqref{eq7} is a stopping time. Stated differently, the value $v(a)$ is the value of an {\\em American fixed-window lookback option.} \n\\begin{remark}\n\n{Note that when $r \\neq 0$, the relationship \\eqref{eq7} does not hold if we make the natural assumption that on exercising the lookback option at stopping time $\\tau$ we receive $S_{\\tau -a}$; the point is that with foresight we receive this value at the {\\em earlier} time $\\tau' \\equiv \\tau-a$, and there is a discounting difference. Since we have reduced immediately to the case $r=0$, this point is irrelevant for us.\n\n} \n\\end{remark}\nThe next step is to approximate the value of this option by discretizing the time onto some grid $t \\in h {   {\\mathbb Z}  }^+$ and study the corresponding Bermudan option. For this, the methods in Rogers \\cite{bobs} can be applied, giving upper and lower bounds by a simulation approach. As we will see, the bounds are quite close, which is a good start. However, the exercise strategy which results from the approach of \\cite{bobs} is the product of a simulation, and has no simple interpretation; it simply exists as some large array with no intrinsic structure, and each run of the algorithm will deliver a different exercise strategy. The final contribution of the paper is to propose some plausible family of stopping rules, to calculate their values, and then to show that using well-chosen members of this family we are able to obtain most of the value of foresight. \n\n\n\n\n\\section{Foresight as lookback}\\label{S2}\n\nRecalling the convention that $S_u = 1$ for $u<0$, and $S_u = S_T$ for $u \\geq T$, we have a simple proposition.\n\n\\begin{proposition}\\label{prop1}\nWith $\\tau$ denoting a generic stopping time,\n\n", "itemtype": "equation", "pos": 5575, "prevtext": "\nwhere\\footnote{... using the convention that $S_u = 1$ for $u<0$, and $S_u = S_T$ for $u \\geq T$ ...} \n\n", "index": 17, "text": "\\begin{equation}\nZ_t \\equiv \\sup\\{ S_u: t-a \\leq u \\leq t \\},\n\\label{Zdef}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E8.m1\" class=\"ltx_Math\" alttext=\"Z_{t}\\equiv\\sup\\{S_{u}:t-a\\leq u\\leq t\\},\" display=\"block\"><mrow><mrow><msub><mi>Z</mi><mi>t</mi></msub><mo>\u2261</mo><mrow><mo movablelimits=\"false\">sup</mo><mo>\u2061</mo><mrow><mo stretchy=\"false\">{</mo><msub><mi>S</mi><mi>u</mi></msub><mo>:</mo><mrow><mrow><mi>t</mi><mo>-</mo><mi>a</mi></mrow><mo>\u2264</mo><mi>u</mi><mo>\u2264</mo><mi>t</mi></mrow><mo stretchy=\"false\">}</mo></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nwhere $Z_t \\equiv \\sup\\{ S_u: t-a \\leq u \\leq t \\}$.\n\\end{proposition}\n\n\\vskip 0.1 in \\noindent\n{\\sc Proof.}  Because $S_u = S_T$ for all $u \\geq T$, it is clear that $Z_t \\leq Z_{t \\wedge T}$.  Therefore, for any stopping time $\\tau$ such that $ a \\leq \\tau \\leq T+a$, we have\n\n", "itemtype": "equation", "pos": 7408, "prevtext": "\nand where the random time $\\tau $ in \\eqref{eq7} is a stopping time. Stated differently, the value $v(a)$ is the value of an {\\em American fixed-window lookback option.} \n\\begin{remark}\n\n{Note that when $r \\neq 0$, the relationship \\eqref{eq7} does not hold if we make the natural assumption that on exercising the lookback option at stopping time $\\tau$ we receive $S_{\\tau -a}$; the point is that with foresight we receive this value at the {\\em earlier} time $\\tau' \\equiv \\tau-a$, and there is a discounting difference. Since we have reduced immediately to the case $r=0$, this point is irrelevant for us.\n\n} \n\\end{remark}\nThe next step is to approximate the value of this option by discretizing the time onto some grid $t \\in h {   {\\mathbb Z}  }^+$ and study the corresponding Bermudan option. For this, the methods in Rogers \\cite{bobs} can be applied, giving upper and lower bounds by a simulation approach. As we will see, the bounds are quite close, which is a good start. However, the exercise strategy which results from the approach of \\cite{bobs} is the product of a simulation, and has no simple interpretation; it simply exists as some large array with no intrinsic structure, and each run of the algorithm will deliver a different exercise strategy. The final contribution of the paper is to propose some plausible family of stopping rules, to calculate their values, and then to show that using well-chosen members of this family we are able to obtain most of the value of foresight. \n\n\n\n\n\\section{Foresight as lookback}\\label{S2}\n\nRecalling the convention that $S_u = 1$ for $u<0$, and $S_u = S_T$ for $u \\geq T$, we have a simple proposition.\n\n\\begin{proposition}\\label{prop1}\nWith $\\tau$ denoting a generic stopping time,\n\n", "index": 19, "text": "\\begin{equation}\nv(a) \\equiv \\sup_{a \\leq \\tau \\leq T+a} E[\\; S_{\\tau-a}  \\; ] = \\sup_{0 \\leq \\tau \\leq T} E[ \\; Z_\\tau \\; ],\n\\label{eq9}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E9.m1\" class=\"ltx_Math\" alttext=\"v(a)\\equiv\\sup_{a\\leq\\tau\\leq T+a}E[\\;S_{\\tau-a}\\;]=\\sup_{0\\leq\\tau\\leq T}E[\\;%&#10;Z_{\\tau}\\;],\" display=\"block\"><mrow><mrow><mrow><mi>v</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2261</mo><mrow><munder><mo movablelimits=\"false\">sup</mo><mrow><mi>a</mi><mo>\u2264</mo><mi>\u03c4</mi><mo>\u2264</mo><mrow><mi>T</mi><mo>+</mo><mi>a</mi></mrow></mrow></munder><mo>\u2061</mo><mrow><mi>E</mi><mo>\u2062</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">[</mo><mpadded width=\"+2.8pt\"><msub><mi>S</mi><mrow><mi>\u03c4</mi><mo>-</mo><mi>a</mi></mrow></msub></mpadded><mo stretchy=\"false\">]</mo></mrow></mrow></mrow><mo>=</mo><mrow><munder><mo movablelimits=\"false\">sup</mo><mrow><mn>0</mn><mo>\u2264</mo><mi>\u03c4</mi><mo>\u2264</mo><mi>T</mi></mrow></munder><mo>\u2061</mo><mrow><mi>E</mi><mo>\u2062</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">[</mo><mpadded width=\"+2.8pt\"><msub><mi>Z</mi><mi>\u03c4</mi></msub></mpadded><mo stretchy=\"false\">]</mo></mrow></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nTherefore \n\n", "itemtype": "equation", "pos": 7839, "prevtext": "\nwhere $Z_t \\equiv \\sup\\{ S_u: t-a \\leq u \\leq t \\}$.\n\\end{proposition}\n\n\\vskip 0.1 in \\noindent\n{\\sc Proof.}  Because $S_u = S_T$ for all $u \\geq T$, it is clear that $Z_t \\leq Z_{t \\wedge T}$.  Therefore, for any stopping time $\\tau$ such that $ a \\leq \\tau \\leq T+a$, we have\n\n", "index": 21, "text": "\\begin{equation*}\n S_{\\tau-a} \\leq Z_\\tau \\leq Z_{\\tau \\wedge T}.\n\\end{equation*}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex2.m1\" class=\"ltx_Math\" alttext=\"S_{\\tau-a}\\leq Z_{\\tau}\\leq Z_{\\tau\\wedge T}.\" display=\"block\"><mrow><mrow><msub><mi>S</mi><mrow><mi>\u03c4</mi><mo>-</mo><mi>a</mi></mrow></msub><mo>\u2264</mo><msub><mi>Z</mi><mi>\u03c4</mi></msub><mo>\u2264</mo><msub><mi>Z</mi><mrow><mi>\u03c4</mi><mo>\u2227</mo><mi>T</mi></mrow></msub></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nFor the reverse inequality, suppose that $\\tau$ is a stopping time, $0 \\leq \\tau \\leq T$, and define a new random time $\\tilde \\tau$ by\n\n", "itemtype": "equation", "pos": 7932, "prevtext": "\nTherefore \n\n", "index": 23, "text": "\\begin{equation}\nv(a) \\equiv \\sup_{a \\leq \\tau \\leq T+a} E[\\; S_{\\tau-a}  \\; ] \\leq \\sup_{0 \\leq \\tau \\leq T} E[ \\; Z_\\tau \\; ].\n\\label{eq10}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E10.m1\" class=\"ltx_Math\" alttext=\"v(a)\\equiv\\sup_{a\\leq\\tau\\leq T+a}E[\\;S_{\\tau-a}\\;]\\leq\\sup_{0\\leq\\tau\\leq T}E%&#10;[\\;Z_{\\tau}\\;].\" display=\"block\"><mrow><mrow><mrow><mi>v</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2261</mo><mrow><munder><mo movablelimits=\"false\">sup</mo><mrow><mi>a</mi><mo>\u2264</mo><mi>\u03c4</mi><mo>\u2264</mo><mrow><mi>T</mi><mo>+</mo><mi>a</mi></mrow></mrow></munder><mo>\u2061</mo><mrow><mi>E</mi><mo>\u2062</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">[</mo><mpadded width=\"+2.8pt\"><msub><mi>S</mi><mrow><mi>\u03c4</mi><mo>-</mo><mi>a</mi></mrow></msub></mpadded><mo stretchy=\"false\">]</mo></mrow></mrow></mrow><mo>\u2264</mo><mrow><munder><mo movablelimits=\"false\">sup</mo><mrow><mn>0</mn><mo>\u2264</mo><mi>\u03c4</mi><mo>\u2264</mo><mi>T</mi></mrow></munder><mo>\u2061</mo><mrow><mi>E</mi><mo>\u2062</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">[</mo><mpadded width=\"+2.8pt\"><msub><mi>Z</mi><mi>\u03c4</mi></msub></mpadded><mo stretchy=\"false\">]</mo></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nClearly $\\tau \\vee a \\leq \\tilde\\tau \\leq \\tau + a$. We claim that $\\tilde\\tau$ is a stopping time, as follows:\n\\begin{eqnarray*}\n\\{ \\tilde\\tau \\leq v \\} &=& \\{ \\hbox{\\rm for some $u \\in [\\tau \\vee a,v], \\; \nS_{u-a} = Z_\\tau$ }  \\}\n\\\\\n&=& \\{ \\tau\\vee a \\leq v\\} \\cap \\{\n\\hbox{\\rm for some $u \\in [(\\tau \\vee a)\\wedge v ,v], \\; \nS_{u-a} = Z_{\\tau\\wedge v}$ }  \\}\n\\\\\n& \\in & {\\mathcal F}_v  \\;   ,\n\\end{eqnarray*}\nsince the event\n$ \\{\\exists u \\in [(\\tau\\vee a)\\wedge v ,v], \\; \nS_{u-a} = Z_{\\tau\\wedge v}  \\}$ is ${\\mathcal F}_v$-measurable, as is \n$(\\tau\\vee a) \\wedge v$.  Now we see that\n\n", "itemtype": "equation", "pos": 8225, "prevtext": "\nFor the reverse inequality, suppose that $\\tau$ is a stopping time, $0 \\leq \\tau \\leq T$, and define a new random time $\\tilde \\tau$ by\n\n", "index": 25, "text": "\\begin{equation}\n\\tilde\\tau\t= \\inf\\{ u \\geq \\tau\\vee a:  S_{u-a} = Z_\\tau\\}.\n\\label{tildetau}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E11.m1\" class=\"ltx_Math\" alttext=\"\\tilde{\\tau}=\\inf\\{u\\geq\\tau\\vee a:S_{u-a}=Z_{\\tau}\\}.\" display=\"block\"><mrow><mrow><mover accent=\"true\"><mi>\u03c4</mi><mo stretchy=\"false\">~</mo></mover><mo>=</mo><mrow><mo movablelimits=\"false\">inf</mo><mo>\u2061</mo><mrow><mo stretchy=\"false\">{</mo><mrow><mi>u</mi><mo>\u2265</mo><mrow><mi>\u03c4</mi><mo>\u2228</mo><mi>a</mi></mrow></mrow><mo>:</mo><mrow><msub><mi>S</mi><mrow><mi>u</mi><mo>-</mo><mi>a</mi></mrow></msub><mo>=</mo><msub><mi>Z</mi><mi>\u03c4</mi></msub></mrow><mo stretchy=\"false\">}</mo></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nand therefore\n\n", "itemtype": "equation", "pos": 8924, "prevtext": "\nClearly $\\tau \\vee a \\leq \\tilde\\tau \\leq \\tau + a$. We claim that $\\tilde\\tau$ is a stopping time, as follows:\n\\begin{eqnarray*}\n\\{ \\tilde\\tau \\leq v \\} &=& \\{ \\hbox{\\rm for some $u \\in [\\tau \\vee a,v], \\; \nS_{u-a} = Z_\\tau$ }  \\}\n\\\\\n&=& \\{ \\tau\\vee a \\leq v\\} \\cap \\{\n\\hbox{\\rm for some $u \\in [(\\tau \\vee a)\\wedge v ,v], \\; \nS_{u-a} = Z_{\\tau\\wedge v}$ }  \\}\n\\\\\n& \\in & {\\mathcal F}_v  \\;   ,\n\\end{eqnarray*}\nsince the event\n$ \\{\\exists u \\in [(\\tau\\vee a)\\wedge v ,v], \\; \nS_{u-a} = Z_{\\tau\\wedge v}  \\}$ is ${\\mathcal F}_v$-measurable, as is \n$(\\tau\\vee a) \\wedge v$.  Now we see that\n\n", "index": 27, "text": "\\begin{equation}\nZ_\\tau = S_{\\tilde\\tau - a} \n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E12.m1\" class=\"ltx_Math\" alttext=\"Z_{\\tau}=S_{\\tilde{\\tau}-a}\" display=\"block\"><mrow><msub><mi>Z</mi><mi>\u03c4</mi></msub><mo>=</mo><msub><mi>S</mi><mrow><mover accent=\"true\"><mi>\u03c4</mi><mo stretchy=\"false\">~</mo></mover><mo>-</mo><mi>a</mi></mrow></msub></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nsince  $ a \\leq \\tilde\\tau \\leq T+a$.  Since $0 \\leq \\tau \\leq T$ was any stopping time, we deduce that\n\n", "itemtype": "equation", "pos": 8999, "prevtext": "\nand therefore\n\n", "index": 29, "text": "\\begin{equation}\nE[ \\; Z_\\tau \\; ] = E[ \\; S_{\\tilde\\tau - a}  \\; ]\n\\leq \\sup_{a \\leq \\tau \\leq T+a} E[\\; S_{\\tau-a}  \\; ],\n\\label{prop1_conc}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E13.m1\" class=\"ltx_Math\" alttext=\"E[\\;Z_{\\tau}\\;]=E[\\;S_{\\tilde{\\tau}-a}\\;]\\leq\\sup_{a\\leq\\tau\\leq T+a}E[\\;S_{%&#10;\\tau-a}\\;],\" display=\"block\"><mrow><mrow><mrow><mi>E</mi><mo>\u2062</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">[</mo><mpadded width=\"+2.8pt\"><msub><mi>Z</mi><mi>\u03c4</mi></msub></mpadded><mo stretchy=\"false\">]</mo></mrow></mrow><mo>=</mo><mrow><mi>E</mi><mo>\u2062</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">[</mo><mpadded width=\"+2.8pt\"><msub><mi>S</mi><mrow><mover accent=\"true\"><mi>\u03c4</mi><mo stretchy=\"false\">~</mo></mover><mo>-</mo><mi>a</mi></mrow></msub></mpadded><mo stretchy=\"false\">]</mo></mrow></mrow><mo>\u2264</mo><mrow><munder><mo movablelimits=\"false\">sup</mo><mrow><mi>a</mi><mo>\u2264</mo><mi>\u03c4</mi><mo>\u2264</mo><mrow><mi>T</mi><mo>+</mo><mi>a</mi></mrow></mrow></munder><mo>\u2061</mo><mrow><mi>E</mi><mo>\u2062</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">[</mo><mpadded width=\"+2.8pt\"><msub><mi>S</mi><mrow><mi>\u03c4</mi><mo>-</mo><mi>a</mi></mrow></msub></mpadded><mo stretchy=\"false\">]</mo></mrow></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nand the proof is complete.\n\\vskip 0.1 in \n\\hfill $\\square$\n\n\\bigbreak\nThe importance of Proposition \\ref{prop1} is that it turns the problem of calculating the value of foresight into the calculation of an American fixed-window lookback option. By discretizing the time, we shall instead calculate numerically the value of a Bermudan fixed-window lookback option. Of course, we need to account for the difference between American and Bermudan prices, but this is in essence a solved problem; see Broadie, Glasserman \\& Kou \\cite{BGK}.\n\n\\bigbreak\nSo we shall take the standardized asset dynamics \\eqref{eq2}, fix some time horizon $T>0$ which is subdivided into $N_T$ steps of length $h = T/N_T$, and consider the problem of bounding\n\n", "itemtype": "equation", "pos": 9261, "prevtext": "\nsince  $ a \\leq \\tilde\\tau \\leq T+a$.  Since $0 \\leq \\tau \\leq T$ was any stopping time, we deduce that\n\n", "index": 31, "text": "\\begin{equation}\n\\sup_{0 \\leq \\tau \\leq T} E[ \\; Z_\\tau \\; ] \\leq \\sup_{a \\leq \\tau \\leq T+a} E[\\; S_{\\tau-a}  \\; ],\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E14.m1\" class=\"ltx_Math\" alttext=\"\\sup_{0\\leq\\tau\\leq T}E[\\;Z_{\\tau}\\;]\\leq\\sup_{a\\leq\\tau\\leq T+a}E[\\;S_{\\tau-a%&#10;}\\;],\" display=\"block\"><mrow><mrow><mrow><munder><mo movablelimits=\"false\">sup</mo><mrow><mn>0</mn><mo>\u2264</mo><mi>\u03c4</mi><mo>\u2264</mo><mi>T</mi></mrow></munder><mo>\u2061</mo><mrow><mi>E</mi><mo>\u2062</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">[</mo><mpadded width=\"+2.8pt\"><msub><mi>Z</mi><mi>\u03c4</mi></msub></mpadded><mo stretchy=\"false\">]</mo></mrow></mrow></mrow><mo>\u2264</mo><mrow><munder><mo movablelimits=\"false\">sup</mo><mrow><mi>a</mi><mo>\u2264</mo><mi>\u03c4</mi><mo>\u2264</mo><mrow><mi>T</mi><mo>+</mo><mi>a</mi></mrow></mrow></munder><mo>\u2061</mo><mrow><mi>E</mi><mo>\u2062</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">[</mo><mpadded width=\"+2.8pt\"><msub><mi>S</mi><mrow><mi>\u03c4</mi><mo>-</mo><mi>a</mi></mrow></msub></mpadded><mo stretchy=\"false\">]</mo></mrow></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nwhere $\\tau_h$ is a stopping time taking values in the set $h {   {\\mathbb Z}  }^+$, and \n\n", "itemtype": "equation", "pos": 10126, "prevtext": "\nand the proof is complete.\n\\vskip 0.1 in \n\\hfill $\\square$\n\n\\bigbreak\nThe importance of Proposition \\ref{prop1} is that it turns the problem of calculating the value of foresight into the calculation of an American fixed-window lookback option. By discretizing the time, we shall instead calculate numerically the value of a Bermudan fixed-window lookback option. Of course, we need to account for the difference between American and Bermudan prices, but this is in essence a solved problem; see Broadie, Glasserman \\& Kou \\cite{BGK}.\n\n\\bigbreak\nSo we shall take the standardized asset dynamics \\eqref{eq2}, fix some time horizon $T>0$ which is subdivided into $N_T$ steps of length $h = T/N_T$, and consider the problem of bounding\n\n", "index": 33, "text": "\\begin{equation}\nv_h(a) \\equiv \\sup_{0 \\leq \\tau_h \\leq T} E[ \\; Z^{(h)}_{\\tau_h} \\; ],\n\\label{vh}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E15.m1\" class=\"ltx_Math\" alttext=\"v_{h}(a)\\equiv\\sup_{0\\leq\\tau_{h}\\leq T}E[\\;Z^{(h)}_{\\tau_{h}}\\;],\" display=\"block\"><mrow><mrow><mrow><msub><mi>v</mi><mi>h</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2261</mo><mrow><munder><mo movablelimits=\"false\">sup</mo><mrow><mn>0</mn><mo>\u2264</mo><msub><mi>\u03c4</mi><mi>h</mi></msub><mo>\u2264</mo><mi>T</mi></mrow></munder><mo>\u2061</mo><mrow><mi>E</mi><mo>\u2062</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">[</mo><mpadded width=\"+2.8pt\"><msubsup><mi>Z</mi><msub><mi>\u03c4</mi><mi>h</mi></msub><mrow><mo stretchy=\"false\">(</mo><mi>h</mi><mo stretchy=\"false\">)</mo></mrow></msubsup></mpadded><mo stretchy=\"false\">]</mo></mrow></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nSince this discretization is now fixed for the rest of the section, we shall drop the appearance of $h$ in the notation and refer to $Z$ for $Z^{(h)}$, $v$ for $v_h$, $\\tau$ for $\\tau_h$.  We are now exclusively considering the optimal stopping of  a functional of a discrete-time Markov process. A moment's thought shows that the process $Z$ is not  Markov, but the process\n\n", "itemtype": "equation", "pos": 10330, "prevtext": "\nwhere $\\tau_h$ is a stopping time taking values in the set $h {   {\\mathbb Z}  }^+$, and \n\n", "index": 35, "text": "\\begin{equation}\nZ^{(h)}_t\t= \\max\\{ S_{kh}: t-a \\leq kh \\leq t \\}.\n\\label{Zh}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E16.m1\" class=\"ltx_Math\" alttext=\"Z^{(h)}_{t}=\\max\\{S_{kh}:t-a\\leq kh\\leq t\\}.\" display=\"block\"><mrow><mrow><msubsup><mi>Z</mi><mi>t</mi><mrow><mo stretchy=\"false\">(</mo><mi>h</mi><mo stretchy=\"false\">)</mo></mrow></msubsup><mo>=</mo><mrow><mi>max</mi><mo>\u2061</mo><mrow><mo stretchy=\"false\">{</mo><mrow><msub><mi>S</mi><mrow><mi>k</mi><mo>\u2062</mo><mi>h</mi></mrow></msub><mo>:</mo><mrow><mrow><mi>t</mi><mo>-</mo><mi>a</mi></mrow><mo>\u2264</mo><mrow><mi>k</mi><mo>\u2062</mo><mi>h</mi></mrow><mo>\u2264</mo><mi>t</mi></mrow></mrow><mo stretchy=\"false\">}</mo></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nis Markovian (where $mh = a$), and the payoff process $Z$ is simply a function of the Markov process $x$:\n\n", "itemtype": "equation", "pos": 10798, "prevtext": "\nSince this discretization is now fixed for the rest of the section, we shall drop the appearance of $h$ in the notation and refer to $Z$ for $Z^{(h)}$, $v$ for $v_h$, $\\tau$ for $\\tau_h$.  We are now exclusively considering the optimal stopping of  a functional of a discrete-time Markov process. A moment's thought shows that the process $Z$ is not  Markov, but the process\n\n", "index": 37, "text": "\\begin{equation}\nx_t\t= (S_{t-mh},\\;  \\ldots,\\;  S_t)\t\\qquad (t \\in h {   {\\mathbb Z}  }^+)\n\\label{xdef}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E17.m1\" class=\"ltx_Math\" alttext=\"x_{t}=(S_{t-mh},\\;\\ldots,\\;S_{t})\\qquad(t\\in h{{\\mathbb{Z}}}^{+})\" display=\"block\"><mrow><msub><mi>x</mi><mi>t</mi></msub><mo>=</mo><mrow><mo stretchy=\"false\">(</mo><msub><mi>S</mi><mrow><mi>t</mi><mo>-</mo><mrow><mi>m</mi><mo>\u2062</mo><mi>h</mi></mrow></mrow></msub><mo rspace=\"5.3pt\">,</mo><mi mathvariant=\"normal\">\u2026</mi><mo rspace=\"5.3pt\">,</mo><msub><mi>S</mi><mi>t</mi></msub><mo stretchy=\"false\">)</mo></mrow><mo mathvariant=\"italic\" separator=\"true\">\u2003\u2003</mo><mrow><mo stretchy=\"false\">(</mo><mi>t</mi><mo>\u2208</mo><mi>h</mi><msup><mi>\u2124</mi><mo>+</mo></msup><mo stretchy=\"false\">)</mo></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nwhere $g(x) \\equiv \\max\\{x_0, \\ldots, x_m \\}$ is the largest component of the $(m+1)$-vector $x$.  We use the approach of \\cite{bobs}, which is a combination of several techniques developed over the last twenty or so years, and in summary consists of the four steps:\n\\begin{itemize}\n\\item pretend that the stopping reward process $Z$ is itself Markovian, and by discretizing $Z$ onto a suitably-chosen finite set of values estimate the transition probabilities of this finite state Markov chain by simulation (this is the approach of Barraquand \\& Martineau \\cite{BM});\n\\item solve the optimal stopping problem for this finite state Markov chain by dynamic programming;\n\\item use the solution to generate a stopping rule whose performance is evaluated by simulation;\n\\item use the dual characterization of the value of the problem (see \\cite{R1}, \\cite{HK}, \\cite{AB}) to find a hedging martingale.  \n\\end{itemize}\nThe method is fully explained in \\cite{bobs}, and illustrated with examples, so there is no need to discuss it further here, except to highlight one point, which is used in various places in \\cite{bobs} and is needed here.  Suppose that $(M_t)_{t \\geq 0}$ is any strictly positive martingale, $M_0=1$. Then we may equivalently express the value \n\\begin{eqnarray}\nv(a) &\\equiv& \\sup_{0 \\leq \\tau \\leq T} E[ \\; Z_\\tau \\; ]\n\\nonumber\n\\\\\n&=& \\sup_{0 \\leq \\tau \\leq T} E[ \\; M_\\tau \\, (Z_\\tau/M_\\tau) \\; ]\n\\nonumber\n\\\\\n&=& \\sup_{0 \\leq \\tau \\leq T} \\tilde E[ \\;Z_\\tau/M_\\tau \\; ],\n\\label{numeraire}\n\\end{eqnarray}\nwhere the probability $\\tilde P$ equivalent to $P$ is defined by using the likelihood-ratio martingale $M$:\n\n", "itemtype": "equation", "pos": 11023, "prevtext": "\nis Markovian (where $mh = a$), and the payoff process $Z$ is simply a function of the Markov process $x$:\n\n", "index": 39, "text": "\\begin{equation}\nZ_t\t= g(x_t),\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E18.m1\" class=\"ltx_Math\" alttext=\"Z_{t}=g(x_{t}),\" display=\"block\"><mrow><mrow><msub><mi>Z</mi><mi>t</mi></msub><mo>=</mo><mrow><mi>g</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mi>t</mi></msub><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nIn the present application, it is natural to use $M_t = S_t$ as the change-of-measure martingale, and the effect of this is to change the Brownian motion $W$ into a Brownian motion with drift 1. Thus when we do simulations, we simulate a Brownian motion with drift 1 in place of $W$, and the stopping reward process is changed to $Z_t/S_t$.  This is a good thing to do, because the value of $Z_t$ will be close to $S_t$, so the binning procedure of the Barraquand-Martineau approach should achieve a lot better accuracy than we would get without this measure transformation. \n{Moreover, after the change of measure the stopping rule depends on $(Z_t/S_t, t)$ instead of $(S_t, t)$, which is more sensible and resembles the stopping rule we will propose below.}\nWe do indeed find that the accuracy is substantially improved by doing this change of measure; the results are reported in Table 1.\\\\\n\n \n\\begin{table}[h!]\n\\begin{center}\n\\begin{tabular}{cccccc}\n\\hline\n$a/h$ & Lower  & SE(low) & Upper & SE (up)& Gap(\\%)\\\\\n\\hline\n1 & 1.054 & 0.43 & 1.055 & 0.53&0.09 \\\\\n2 & 1.074 & 0.62 & 1.076 & 0.77&0.18 \\\\\n3 & 1.088 & 0.73 & 1.092 & 0.90&0.37 \\\\\n4 & 1.100 & 0.83 & 1.104 & 1.0&0.37 \\\\\n5 & 1.109 & 0.95 & 1.114 & 1.1&0.45 \\\\\n6 & 1.117 & 1.0 & 1.123 & 1.2&0.53 \\\\\n7 & 1.123 & 1.1 & 1.131 & 1.2&0.71 \\\\\n8 & 1.129 & 1.2 & 1.137 & 1.3&0.70 \\\\\n9 & 1.135 & 1.3 & 1.144 & 1.4&0.79 \\\\\n10 & 1.140 & 1.4 & 1.149 & 1.4&0.78 \\\\\n11 & 1.144 & 1.4 & 1.154 & 1.5&0.87 \\\\\n12 & 1.149 & 1.5 & 1.159 & 1.6&0.86 \\\\\n13 & 1.152 & 1.6 & 1.164 & 1.7&1.03 \\\\\n14 & 1.156 & 1.6 & 1.168 & 1.7&1.03 \\\\\n15 & 1.159 & 1.7 & 1.172 & 1.8&1.11 \\\\\n16 & 1.163 & 1.8 & 1.175 & 1.8&1.02 \\\\\n17 & 1.166 & 1.8 & 1.179 & 1.9&1.10 \\\\\n18 & 1.168 & 1.9 & 1.182 & 1.8&1.18 \\\\\n19 & 1.171 & 1.9 & 1.185 & 1.9&1.18 \\\\\n20 & 1.174 & 2.0 & 1.188 & 1.9&1.18 \\\\\n\\hline\n\\end{tabular}\n\n{\\caption{Upper and lower bounds of $\\sup_{\\tau< T} E[Z_\\tau]$ from simulation using method of \\cite{bobs} with $h = 1/2500$, $N_T = 250$. `SE' is the standard error, in basis points (1e-4). Simulation parameters: number of bins = 200, number of samples per bin = 200, lower-bound simulation = 50,000, upper-bound simulation = 10,000, sub-simulation per step = 50.}}\\label{table:bermuda}\n\\end{center}\n\\end{table}\n\n\n\n\n\n\n\n\\section{Explicit stopping rules}\\label{S3}\nAs was stated earlier, the stopping rules which are derived in Section \\ref{S2} are the output of a simulation; they have no particular structure or interpretation, and a different simulation run will generate a different stopping rule.  The methodology of \\cite{bobs} is generic, and works just the same for essentially any Markov process, and any stopping function of the process, but we may hope to improve in individual applications by exploiting the specific structure of that application, which is what we shall do here. \n\n\\bigbreak\nWe work in terms of the log price $X_t = W_t + ct$, and use the notations\n\n", "itemtype": "equation", "pos": 12701, "prevtext": "\nwhere $g(x) \\equiv \\max\\{x_0, \\ldots, x_m \\}$ is the largest component of the $(m+1)$-vector $x$.  We use the approach of \\cite{bobs}, which is a combination of several techniques developed over the last twenty or so years, and in summary consists of the four steps:\n\\begin{itemize}\n\\item pretend that the stopping reward process $Z$ is itself Markovian, and by discretizing $Z$ onto a suitably-chosen finite set of values estimate the transition probabilities of this finite state Markov chain by simulation (this is the approach of Barraquand \\& Martineau \\cite{BM});\n\\item solve the optimal stopping problem for this finite state Markov chain by dynamic programming;\n\\item use the solution to generate a stopping rule whose performance is evaluated by simulation;\n\\item use the dual characterization of the value of the problem (see \\cite{R1}, \\cite{HK}, \\cite{AB}) to find a hedging martingale.  \n\\end{itemize}\nThe method is fully explained in \\cite{bobs}, and illustrated with examples, so there is no need to discuss it further here, except to highlight one point, which is used in various places in \\cite{bobs} and is needed here.  Suppose that $(M_t)_{t \\geq 0}$ is any strictly positive martingale, $M_0=1$. Then we may equivalently express the value \n\\begin{eqnarray}\nv(a) &\\equiv& \\sup_{0 \\leq \\tau \\leq T} E[ \\; Z_\\tau \\; ]\n\\nonumber\n\\\\\n&=& \\sup_{0 \\leq \\tau \\leq T} E[ \\; M_\\tau \\, (Z_\\tau/M_\\tau) \\; ]\n\\nonumber\n\\\\\n&=& \\sup_{0 \\leq \\tau \\leq T} \\tilde E[ \\;Z_\\tau/M_\\tau \\; ],\n\\label{numeraire}\n\\end{eqnarray}\nwhere the probability $\\tilde P$ equivalent to $P$ is defined by using the likelihood-ratio martingale $M$:\n\n", "index": 41, "text": "\\begin{equation}\n\\frac{d\\tilde P}{dP}\\biggr\\vert_{{\\mathcal F}_t} = M_t.\n\\label{dPtildedP}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E19.m1\" class=\"ltx_Math\" alttext=\"\\frac{d\\tilde{P}}{dP}\\biggr{|}_{{\\mathcal{F}}_{t}}=M_{t}.\" display=\"block\"><mrow><mrow><msub><mrow><mfrac><mrow><mi>d</mi><mo>\u2062</mo><mover accent=\"true\"><mi>P</mi><mo stretchy=\"false\">~</mo></mover></mrow><mrow><mi>d</mi><mo>\u2062</mo><mi>P</mi></mrow></mfrac><mo fence=\"true\" maxsize=\"210%\" minsize=\"210%\">|</mo></mrow><msub><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mi>t</mi></msub></msub><mo>=</mo><msub><mi>M</mi><mi>t</mi></msub></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nThe first time we may need to consider stopping is the stopping time\n\n", "itemtype": "equation", "pos": 15708, "prevtext": "\nIn the present application, it is natural to use $M_t = S_t$ as the change-of-measure martingale, and the effect of this is to change the Brownian motion $W$ into a Brownian motion with drift 1. Thus when we do simulations, we simulate a Brownian motion with drift 1 in place of $W$, and the stopping reward process is changed to $Z_t/S_t$.  This is a good thing to do, because the value of $Z_t$ will be close to $S_t$, so the binning procedure of the Barraquand-Martineau approach should achieve a lot better accuracy than we would get without this measure transformation. \n{Moreover, after the change of measure the stopping rule depends on $(Z_t/S_t, t)$ instead of $(S_t, t)$, which is more sensible and resembles the stopping rule we will propose below.}\nWe do indeed find that the accuracy is substantially improved by doing this change of measure; the results are reported in Table 1.\\\\\n\n \n\\begin{table}[h!]\n\\begin{center}\n\\begin{tabular}{cccccc}\n\\hline\n$a/h$ & Lower  & SE(low) & Upper & SE (up)& Gap(\\%)\\\\\n\\hline\n1 & 1.054 & 0.43 & 1.055 & 0.53&0.09 \\\\\n2 & 1.074 & 0.62 & 1.076 & 0.77&0.18 \\\\\n3 & 1.088 & 0.73 & 1.092 & 0.90&0.37 \\\\\n4 & 1.100 & 0.83 & 1.104 & 1.0&0.37 \\\\\n5 & 1.109 & 0.95 & 1.114 & 1.1&0.45 \\\\\n6 & 1.117 & 1.0 & 1.123 & 1.2&0.53 \\\\\n7 & 1.123 & 1.1 & 1.131 & 1.2&0.71 \\\\\n8 & 1.129 & 1.2 & 1.137 & 1.3&0.70 \\\\\n9 & 1.135 & 1.3 & 1.144 & 1.4&0.79 \\\\\n10 & 1.140 & 1.4 & 1.149 & 1.4&0.78 \\\\\n11 & 1.144 & 1.4 & 1.154 & 1.5&0.87 \\\\\n12 & 1.149 & 1.5 & 1.159 & 1.6&0.86 \\\\\n13 & 1.152 & 1.6 & 1.164 & 1.7&1.03 \\\\\n14 & 1.156 & 1.6 & 1.168 & 1.7&1.03 \\\\\n15 & 1.159 & 1.7 & 1.172 & 1.8&1.11 \\\\\n16 & 1.163 & 1.8 & 1.175 & 1.8&1.02 \\\\\n17 & 1.166 & 1.8 & 1.179 & 1.9&1.10 \\\\\n18 & 1.168 & 1.9 & 1.182 & 1.8&1.18 \\\\\n19 & 1.171 & 1.9 & 1.185 & 1.9&1.18 \\\\\n20 & 1.174 & 2.0 & 1.188 & 1.9&1.18 \\\\\n\\hline\n\\end{tabular}\n\n{\\caption{Upper and lower bounds of $\\sup_{\\tau< T} E[Z_\\tau]$ from simulation using method of \\cite{bobs} with $h = 1/2500$, $N_T = 250$. `SE' is the standard error, in basis points (1e-4). Simulation parameters: number of bins = 200, number of samples per bin = 200, lower-bound simulation = 50,000, upper-bound simulation = 10,000, sub-simulation per step = 50.}}\\label{table:bermuda}\n\\end{center}\n\\end{table}\n\n\n\n\n\n\n\n\\section{Explicit stopping rules}\\label{S3}\nAs was stated earlier, the stopping rules which are derived in Section \\ref{S2} are the output of a simulation; they have no particular structure or interpretation, and a different simulation run will generate a different stopping rule.  The methodology of \\cite{bobs} is generic, and works just the same for essentially any Markov process, and any stopping function of the process, but we may hope to improve in individual applications by exploiting the specific structure of that application, which is what we shall do here. \n\n\\bigbreak\nWe work in terms of the log price $X_t = W_t + ct$, and use the notations\n\n", "index": 43, "text": "\\begin{equation}\n\\bar X_t \\equiv \\sup_{0 \\leq u \\leq t} X_u, \\qquad\n\\bar X_{[t-a,t]} \\equiv \\sup_{t-a \\leq u \\leq t} X_u \\equiv \\log Z_t\\; .\n\\label{notation}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E20.m1\" class=\"ltx_Math\" alttext=\"\\bar{X}_{t}\\equiv\\sup_{0\\leq u\\leq t}X_{u},\\qquad\\bar{X}_{[t-a,t]}\\equiv\\sup_{%&#10;t-a\\leq u\\leq t}X_{u}\\equiv\\log Z_{t}\\;.\" display=\"block\"><mrow><mrow><mrow><msub><mover accent=\"true\"><mi>X</mi><mo stretchy=\"false\">\u00af</mo></mover><mi>t</mi></msub><mo>\u2261</mo><mrow><munder><mo movablelimits=\"false\">sup</mo><mrow><mn>0</mn><mo>\u2264</mo><mi>u</mi><mo>\u2264</mo><mi>t</mi></mrow></munder><mo>\u2061</mo><msub><mi>X</mi><mi>u</mi></msub></mrow></mrow><mo rspace=\"22.5pt\">,</mo><mrow><msub><mover accent=\"true\"><mi>X</mi><mo stretchy=\"false\">\u00af</mo></mover><mrow><mo stretchy=\"false\">[</mo><mrow><mi>t</mi><mo>-</mo><mi>a</mi></mrow><mo>,</mo><mi>t</mi><mo stretchy=\"false\">]</mo></mrow></msub><mo>\u2261</mo><mrow><munder><mo movablelimits=\"false\">sup</mo><mrow><mrow><mi>t</mi><mo>-</mo><mi>a</mi></mrow><mo>\u2264</mo><mi>u</mi><mo>\u2264</mo><mi>t</mi></mrow></munder><mo>\u2061</mo><msub><mi>X</mi><mi>u</mi></msub></mrow><mo>\u2261</mo><mrow><mi>log</mi><mo>\u2061</mo><mpadded width=\"+2.8pt\"><msub><mi>Z</mi><mi>t</mi></msub></mpadded></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nbecause up until that time we have $X_{t-a} < \\bar X_{[t-a,t]}$, so it will be suboptimal to exercise - waiting a little longer may improve, and will not make the reward less.  But at time $\\tau_0$, continuation means we have to let go of the good value $X_{\\tau_0-a}$ in the hope of doing better in the future, and we may in fact do worse. Whether we should optimally continue will depend on the entire path of $X$ from $\\tau_0-a$ to $\\tau_0$, but we will simplify to consider only rules where continuation is decided by the value of $X_{\\tau_0} - X_{\\tau_0 -a}\\;$; if this is higher than some threshold $q <0$ we shall continue, otherwise we stop.\n\nAn important observation is the fact that\n\n", "itemtype": "equation", "pos": 15950, "prevtext": "\nThe first time we may need to consider stopping is the stopping time\n\n", "index": 45, "text": "\\begin{equation}\n \\tau_0 \\equiv \\inf \\{\\;  t: \\bar X_{[t-a,t]} = X_{t-a} \\; \\},\n \\label{tau0def}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E21.m1\" class=\"ltx_Math\" alttext=\"\\tau_{0}\\equiv\\inf\\{\\;t:\\bar{X}_{[t-a,t]}=X_{t-a}\\;\\},\" display=\"block\"><mrow><mrow><msub><mi>\u03c4</mi><mn>0</mn></msub><mo>\u2261</mo><mrow><mo movablelimits=\"false\">inf</mo><mo>\u2061</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">{</mo><mi>t</mi><mo>:</mo><mrow><msub><mover accent=\"true\"><mi>X</mi><mo stretchy=\"false\">\u00af</mo></mover><mrow><mo stretchy=\"false\">[</mo><mrow><mi>t</mi><mo>-</mo><mi>a</mi></mrow><mo>,</mo><mi>t</mi><mo stretchy=\"false\">]</mo></mrow></msub><mo>=</mo><mpadded width=\"+2.8pt\"><msub><mi>X</mi><mrow><mi>t</mi><mo>-</mo><mi>a</mi></mrow></msub></mpadded></mrow><mo stretchy=\"false\">}</mo></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nas a moment's thought will reveal. Therefore we have\n\n", "itemtype": "equation", "pos": 16755, "prevtext": "\nbecause up until that time we have $X_{t-a} < \\bar X_{[t-a,t]}$, so it will be suboptimal to exercise - waiting a little longer may improve, and will not make the reward less.  But at time $\\tau_0$, continuation means we have to let go of the good value $X_{\\tau_0-a}$ in the hope of doing better in the future, and we may in fact do worse. Whether we should optimally continue will depend on the entire path of $X$ from $\\tau_0-a$ to $\\tau_0$, but we will simplify to consider only rules where continuation is decided by the value of $X_{\\tau_0} - X_{\\tau_0 -a}\\;$; if this is higher than some threshold $q <0$ we shall continue, otherwise we stop.\n\nAn important observation is the fact that\n\n", "index": 47, "text": "\\begin{equation}\n\\bar X_{[\\tau_0-a,\\tau_0]}  = \\bar X_{\\tau_0},\n\\label{simplify}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E22.m1\" class=\"ltx_Math\" alttext=\"\\bar{X}_{[\\tau_{0}-a,\\tau_{0}]}=\\bar{X}_{\\tau_{0}},\" display=\"block\"><mrow><mrow><msub><mover accent=\"true\"><mi>X</mi><mo stretchy=\"false\">\u00af</mo></mover><mrow><mo stretchy=\"false\">[</mo><mrow><msub><mi>\u03c4</mi><mn>0</mn></msub><mo>-</mo><mi>a</mi></mrow><mo>,</mo><msub><mi>\u03c4</mi><mn>0</mn></msub><mo stretchy=\"false\">]</mo></mrow></msub><mo>=</mo><msub><mover accent=\"true\"><mi>X</mi><mo stretchy=\"false\">\u00af</mo></mover><msub><mi>\u03c4</mi><mn>0</mn></msub></msub></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\n\nThe stopping rule we have just described needs a small modification before it will serve us best, for reasons that will be explained later. We give ourselves an independent random variable $\\alpha \\sim \\exp(\\eta)$ for some $\\eta>0$, which is going to be a termination time; whatever happens to $X$, if we have not stopped by time $\\alpha$, then we must stop at that moment.\nSo to summarize, the rule   $R(q)$  we shall use is the following:\n\\begin{itemize}\n\\item[(i)] Wait until $\\tau_0 \\wedge \\alpha$;\n\\item[(ii)] If $\\alpha < \\tau_0$, stop and receive $Z_\\alpha = \\exp(\\bar X_\\alpha)$;\n\\item[(iii.a)] If $\\tau_0 < \\alpha$ and $X_{\\tau_0} - \\bar X_{\\tau_0} < q$, stop and receive $Z_{\\tau_0}= \\exp(\\bar X_{\\tau_0} )$;\n\\item[(iii.b)] If $\\tau_0 < \\alpha$ and $X_{\\tau_0} - \\bar X_{\\tau_0} > q$, forget and continue.\n\\end{itemize}\nIn the final eventuality (iii.b), `forget and continue' means that we wipe away the whole path of $X$ in the time interval $[0, \\tau_0)$, keeping only the value $X_{\\tau_0}$, and  restart the rule from that point.  If the value of this strategy is $K$, then we have the identity\n\\begin{eqnarray}\nK &=& E[ \\;\\exp(\\bar X_\\alpha) : \\alpha < \\tau_0]\n+ E[\\;  \\exp(\\bar X_{\\tau_0}) : \\tau_0 < \\alpha, X_{\\tau_0} - \\bar X_{\\tau_0} < q \\;  ]\n\\nonumber\n\\\\\n&& \\qquad\\qquad\\qquad  + K E[ \\; \\exp(X_{\\tau_0}): \\tau_0 < \\alpha, X_{\\tau_0} - \\bar X_{\\tau_0} > q  \\;  ].\n\\label{Keq}\n\\end{eqnarray}\nIt is therefore apparent that we can evaluate this particular stopping rule provided we can find explicit expressions for\n\\begin{eqnarray}\nA_0 &=&  E[ \\;\\exp(\\bar X_\\alpha) : \\alpha < \\tau_0\\;],  \\label{A0}\n\\\\\nA_-(q) &=& E[\\;  \\exp(\\bar X_{\\tau_0}) : \\tau_0 < \\alpha, X_{\\tau_0} - \\bar X_{\\tau_0} < q \\;  ],   \\label{A-}\n\\\\\nA_+(q) &=& E[ \\; \\exp(X_{\\tau_0}): \\tau_0 < \\alpha, X_{\\tau_0} - \\bar X_{\\tau_0} > q  \\;  ].  \\label{A+}\n\\end{eqnarray}\nWe can. If $\\varphi$ denotes the density of the standard $N(0,1)$ distribution, and $\\Phi$ denotes its distribution function, we have the following result.\n\n\n\\begin{proposition}\\label{prop2}\nFor $q<0$, denote\n\\begin{eqnarray}\n{\\beta}\t&=& \\sqrt{c^2+2\\eta},\n\\label{bdef}\n\\\\\n\\nu &=& \\frac{2}{\\sqrt{a}}\\; \\varphi({\\beta}\\sqrt a) + 2{\\beta}\\Phi({\\beta}\\sqrt a) - c - {\\beta},\n\\label{nudef}  \\\\\n\\nu_a &=&  \\frac{2}{\\sqrt{a}} \\; \\varphi(c\\sqrt{a}) - 2c\\, \\Phi(-c\\sqrt a),\n\\label{nuadef}  \\\\\n\\nu_\\alpha &=&  2{\\beta}(\\Phi({\\beta}\\sqrt a) - {  {\\scriptstyle \\frac{1}{2} }\\,  }) -2c(\\Phi(c\\sqrt a) - {  {\\scriptstyle \\frac{1}{2} }\\,  })\n \\nonumber\\\\\n &&\\qquad\\qquad \\qquad\\quad \n + \\frac{2}{\\sqrt a} \\bigl\\lbrace\\; \\varphi({\\beta}\\sqrt a) - \\varphi(c\\sqrt a)\n \\;\\bigr\\rbrace ,\n \\label{nualphadef}\n \\nonumber \\\\\n\\psi_0(q)&=& e^{-\\eta a} \\biggl\\lbrace\\;\n\\frac{2}{\\sqrt a} \\; \\varphi( (q-ca)/\\sqrt a) - 2c\\, \\Phi( (q-ca)/\\sqrt a)\n\\;\\biggr\\rbrace,\n\\label{psi0def}\n\\\\\n\\psi_1(q) \n&=& e^{(c+{  {\\scriptstyle \\frac{1}{2} }\\,  }-\\eta)a} \\biggl[ \\; \\frac{2}{\\sqrt a}\\;\\bigl\\lbrace\n \\; \\varphi(\\bar c \\sqrt a)\n-\\varphi( (q-\\bar c a)/\\sqrt a) \\;\\bigr\\rbrace\n\\nonumber \\\\\n&& \\qquad\\qquad\\qquad  2\\bar c\\bigl\\lbrace \\; \\Phi(\\bar c \\sqrt a) -\n \\Phi( -(q-\\bar c a)/\\sqrt a)  \\; \\bigr\\rbrace \\; \\biggr],\n \\label{psi1def}\n\\end{eqnarray}\nwhere $\\bar c \\equiv 1 + c$.  Then:\n\\begin{eqnarray}\nA_0 &=& \\frac{\\nu_\\alpha+ (1-e^{-\\eta a}) \\nu_a}{\\nu-1},\n\\label{A0_ans}\n\\\\\nA_-(q) &=& \\frac{\\psi_0(q)}{\\nu -1},\n\\label{A-ans}\n\\\\\nA_+(q) &=& \\frac{\\psi_1(q)}{\\nu -1}.\n\\label{A+ans}\n\\end{eqnarray}\n\\end{proposition}\n\n\n\\noindent\n{\\sc Proof.} The process $Y_t \\equiv X_t - \\bar X_t$ is a diffusion taking values in the negative half-line, and reflecting from zero. The process $\\bar X_t$ is its local time at zero, and the path of $Y$ can be decomposed into a Poisson process of excursions, as It\\^o \\cite{ito} explained. For a more extensive discussion of excursion theory, in particular, the notion of marked excursion processes, see \\cite{GTTE} or Chapter VI.8 of \\cite{RW2}.\n\nThe process $X$ runs until $\\tau_0 \\wedge \\alpha$, which happens in the first excursion of $Y$ which {\\em either} lasts at least $a$, {\\em or} contains an $\\eta$-mark.  Let $n$ denote the excursion measure, $\\zeta$ denote the lifetime of an excursion, $P^c$ denote the law of $X_t = W_t +ct$, and $H_b$ denote the first time $X$ hits $b$.\n{\nThe excursion law can be characterized as the limit as $\\varepsilon \\downarrow 0$ of the (rescaled) law of $X$ started at $ -\\varepsilon <0$ run until it hits zero; see VI.50.20 in \\cite{RW2}. The rescaling required is to multiply by \n$n (f: \\inf f < -\\epsilon )$, and it is known that $ n (f: \\inf f < -\\epsilon )\\sim \\epsilon^{-1}$ (see VI.51.2 in \\cite{RW2}). We therefore have}\n\\begin{eqnarray}\nn(\\zeta>a) &=& \\lim_{\\varepsilon\\downarrow 0}\\varepsilon^{-1}P^c[\\; H_0 >a \\;|\\; X_0 = -\\varepsilon]  \\nonumber\n\\\\\n&=&\\lim_{\\varepsilon\\downarrow 0}\\varepsilon^{-1}P^c[\\; \\bar X_a < \\varepsilon \\;|\\; X_0 = 0]  \\nonumber\n\\\\\n&=& \\lim_{\\varepsilon\\downarrow 0}\\varepsilon^{-1}\n\\biggl\\lbrace\\;\n\\Phi\\biggl( \\frac{\\varepsilon-ca}{\\sqrt{a}}  \\biggr)\n- e^{2c\\varepsilon} \\Phi\\biggl( \\frac{-\\varepsilon-ca}{\\sqrt{a}}  \\biggr)\n\\;\\biggr\\rbrace\n\\label{eq29}\n\\\\\n&=& \\frac{2}{\\sqrt{a}} \\; \\varphi(c\\sqrt{a}) - 2c\\, \\Phi(-c\\sqrt a),\n\\label{eq30}\n\\\\\n&\\equiv & \\nu_a,  \\nonumber\n\\end{eqnarray}\nwhere \\eqref{eq29} is a standard result on Brownian motion; see, for example, \\cite{BS}. By similar reasoning, \n\\begin{eqnarray}\nn(\\alpha < \\zeta < a) &=&\\lim_{\\varepsilon\\downarrow 0}\\varepsilon^{-1}\n\\int_0^a P^c[ H_0\\in ds | X_0 = -\\varepsilon] \\; (1-e^{-\\eta s})\n\\nonumber\\\\\n&=& \\lim_{\\varepsilon\\downarrow 0}\\varepsilon^{-1}\n\\int_0^a \\frac{\\varepsilon e^{-\\varepsilon^2/2s}}{\\sqrt{2\\pi s^3}}\\;\ne^{c\\varepsilon- c^2 s/2} (1-e^{-\\eta s})  \\; ds\n\\nonumber\\\\\n&=& \\int_0^a \\frac{ e^{-c^2 s/2}}{\\sqrt{2\\pi s^3}}\\;\n (1-e^{-\\eta s})  \\; ds\n \\nonumber\\\\\n &=&  2{\\beta}(\\Phi({\\beta}\\sqrt a) - {  {\\scriptstyle \\frac{1}{2} }\\,  }) -2c(\\Phi(c\\sqrt a) - {  {\\scriptstyle \\frac{1}{2} }\\,  })\n \\nonumber\\\\\n &&\\qquad\\qquad \\qquad\\quad + \\frac{2}{\\sqrt a} \\bigl\\lbrace\\; \\varphi({\\beta}\\sqrt a) - \\varphi(c\\sqrt a)\n \\;\\bigr\\rbrace  \\label{eq31}\n \\\\\n &\\equiv & \\nu_\\alpha,  \\nonumber\n\\end{eqnarray}\nwhere we recall that ${\\beta} \\equiv \\sqrt{c^2 + 2 \\eta}$.\nThe rate of excursions which {\\em either} last at least $a$, {\\em or} contain an $\\eta$-mark is \n\n", "itemtype": "equation", "pos": 16904, "prevtext": "\nas a moment's thought will reveal. Therefore we have\n\n", "index": 49, "text": "\\begin{equation}\n\\tau_0 = \\inf \\{\\;  t: \\bar X_t = X_{t-a} \\; \\}.\n\\label{tau0def_bis}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E23.m1\" class=\"ltx_Math\" alttext=\"\\tau_{0}=\\inf\\{\\;t:\\bar{X}_{t}=X_{t-a}\\;\\}.\" display=\"block\"><mrow><mrow><msub><mi>\u03c4</mi><mn>0</mn></msub><mo>=</mo><mrow><mo movablelimits=\"false\">inf</mo><mo>\u2061</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">{</mo><mi>t</mi><mo>:</mo><mrow><msub><mover accent=\"true\"><mi>X</mi><mo stretchy=\"false\">\u00af</mo></mover><mi>t</mi></msub><mo>=</mo><mpadded width=\"+2.8pt\"><msub><mi>X</mi><mrow><mi>t</mi><mo>-</mo><mi>a</mi></mrow></msub></mpadded></mrow><mo stretchy=\"false\">}</mo></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nand this is simply the sum of the two expressions \\eqref{eq30} and \\eqref{eq31}, which is therefore known explicitly. In fact, a few calculations confirm that it is the expression $\\nu$ defined at \\eqref{nudef}.  Immediately from It\\^o excursion theory:\n\\begin{itemize}\n\\item $\\bar X_{\\tau_0 \\wedge \\alpha} \\sim \\exp( \\;\n\\nu\n\\;)$;\n\\item $\nP[ \\; \\alpha < \\tau_0 \\;]\n= \\{ \\;\\nu_\\alpha+ (1-e^{-\\eta a}) \\nu_a\\; \\}/\\nu\n$;\n\\item $P[\\; \\tau_0 < \\alpha \\;] = \\nu_a\\, e^{-\\eta a} /\\nu$;\n\\end{itemize}\nand from this the expression \\eqref{A0_ans} for $A_0$ follows.\n\nTo deal with $A_\\pm$, we need to find the measure of excursions which get to time $a$ without killing, and which are  in $dy$  at time $a$. We use the reflection principle and the Cameron-Martin-Girsanov theorem to derive\n\\begin{eqnarray*}\ng(y)dy &\\equiv& n(a < \\zeta\\wedge\\alpha, Y_a \\in dy) \n\\label{gdef}\n\\\\\n&=&  \\lim_{\\varepsilon\\downarrow 0} \\varepsilon^{-1} P^c[ \\;\nH_0\\wedge \\alpha >a, Y_a \\in dy \\; \\vert \\; Y_0 = -\\varepsilon\n\\;]    \\nonumber\n\\\\\n&=&\\lim_{\\varepsilon\\downarrow 0} \\varepsilon^{-1} e^{c(y+\\varepsilon)-c^2a/2\n-\\eta a}\n\\{ \\;   \\varphi( (y + \\varepsilon)/\\sqrt{a}) - \\varphi( (y  -\\varepsilon)/\\sqrt{a}) \n\\;\\} dy /\\sqrt{a} \n\\nonumber\n\\\\\n&=&  \\frac{-2y}{a^{3/2}} \\; \\varphi((y-ca)/\\sqrt a)\\; e^{-\\eta a} \\; dy.\n\\label{g_ans}\n\\end{eqnarray*}\nStraightforward calculations lead us to \n\\begin{eqnarray*}\n\\int_{-\\infty}^q g(y) \\; dy\n&=& e^{-\\eta a} \\biggl\\lbrace\\;\n\\frac{2}{\\sqrt a} \\; \\varphi( (q-ca)/\\sqrt a) - 2c\\, \\Phi( (q-ca)/\\sqrt a)\n\\;\\biggr\\rbrace,\n\\\\\n&\\equiv & \\psi_0(q),  \\\\\n\\int_q^0 e^y g(y) \\; dy\n&=& e^{(c+{  {\\scriptstyle \\frac{1}{2} }\\,  }-\\eta)a} \\biggl[ \\; \\frac{2}{\\sqrt a}\\;\\bigl\\lbrace\n \\; \\varphi(\\bar c \\sqrt a)\n-\\varphi( (q-\\bar c a)/\\sqrt a) \\;\\bigr\\rbrace\n\\nonumber \\\\\n&& \\qquad\\qquad\\qquad  2\\bar c\\bigl\\lbrace \\; \\Phi(\\bar c \\sqrt a) -\n \\Phi( -(q-\\bar c a)/\\sqrt a)  \\; \\bigr\\rbrace \\; \\biggr],\n\\\\\n& \\equiv & \\psi_1(q).\n\\end{eqnarray*}\nHence $P( Y_{\\tau_0} < q \\;\\vert \\;\\tau_0 < \\alpha ) = \\psi_0(q)/\\psi_0(0)$. We therefore have\n\\begin{eqnarray*}\nA_-(q) &=& E[\\;  \\exp(\\bar X_{\\tau_0}) : \\tau_0 < \\alpha, X_{\\tau_0} - \\bar X_{\\tau_0} < q \\;  ]\n\\\\\n&=& \\frac{\\nu}{\\nu-1} \\; P[\\;\\tau_0 < \\alpha, X_{\\tau_0} - \\bar X_{\\tau_0} < q \\;  ]\n\\\\\n&=& \\frac{\\nu}{\\nu-1}\\cdot \\frac{\\nu_ae^{-\\eta a}}{\\nu}\\cdot \\frac{\\psi_0(q)}{\\psi_0(0)}\n\\\\\n&=& \\frac{\\psi_0(q)}{\\nu -1}\n\\end{eqnarray*}\nafter some simplifications. This is the form of $A_-$ claimed at \\eqref{A-ans}.\n\nFinally, we deal with $A_+(q)$. Observe that\n\n", "itemtype": "equation", "pos": 23258, "prevtext": "\n\nThe stopping rule we have just described needs a small modification before it will serve us best, for reasons that will be explained later. We give ourselves an independent random variable $\\alpha \\sim \\exp(\\eta)$ for some $\\eta>0$, which is going to be a termination time; whatever happens to $X$, if we have not stopped by time $\\alpha$, then we must stop at that moment.\nSo to summarize, the rule   $R(q)$  we shall use is the following:\n\\begin{itemize}\n\\item[(i)] Wait until $\\tau_0 \\wedge \\alpha$;\n\\item[(ii)] If $\\alpha < \\tau_0$, stop and receive $Z_\\alpha = \\exp(\\bar X_\\alpha)$;\n\\item[(iii.a)] If $\\tau_0 < \\alpha$ and $X_{\\tau_0} - \\bar X_{\\tau_0} < q$, stop and receive $Z_{\\tau_0}= \\exp(\\bar X_{\\tau_0} )$;\n\\item[(iii.b)] If $\\tau_0 < \\alpha$ and $X_{\\tau_0} - \\bar X_{\\tau_0} > q$, forget and continue.\n\\end{itemize}\nIn the final eventuality (iii.b), `forget and continue' means that we wipe away the whole path of $X$ in the time interval $[0, \\tau_0)$, keeping only the value $X_{\\tau_0}$, and  restart the rule from that point.  If the value of this strategy is $K$, then we have the identity\n\\begin{eqnarray}\nK &=& E[ \\;\\exp(\\bar X_\\alpha) : \\alpha < \\tau_0]\n+ E[\\;  \\exp(\\bar X_{\\tau_0}) : \\tau_0 < \\alpha, X_{\\tau_0} - \\bar X_{\\tau_0} < q \\;  ]\n\\nonumber\n\\\\\n&& \\qquad\\qquad\\qquad  + K E[ \\; \\exp(X_{\\tau_0}): \\tau_0 < \\alpha, X_{\\tau_0} - \\bar X_{\\tau_0} > q  \\;  ].\n\\label{Keq}\n\\end{eqnarray}\nIt is therefore apparent that we can evaluate this particular stopping rule provided we can find explicit expressions for\n\\begin{eqnarray}\nA_0 &=&  E[ \\;\\exp(\\bar X_\\alpha) : \\alpha < \\tau_0\\;],  \\label{A0}\n\\\\\nA_-(q) &=& E[\\;  \\exp(\\bar X_{\\tau_0}) : \\tau_0 < \\alpha, X_{\\tau_0} - \\bar X_{\\tau_0} < q \\;  ],   \\label{A-}\n\\\\\nA_+(q) &=& E[ \\; \\exp(X_{\\tau_0}): \\tau_0 < \\alpha, X_{\\tau_0} - \\bar X_{\\tau_0} > q  \\;  ].  \\label{A+}\n\\end{eqnarray}\nWe can. If $\\varphi$ denotes the density of the standard $N(0,1)$ distribution, and $\\Phi$ denotes its distribution function, we have the following result.\n\n\n\\begin{proposition}\\label{prop2}\nFor $q<0$, denote\n\\begin{eqnarray}\n{\\beta}\t&=& \\sqrt{c^2+2\\eta},\n\\label{bdef}\n\\\\\n\\nu &=& \\frac{2}{\\sqrt{a}}\\; \\varphi({\\beta}\\sqrt a) + 2{\\beta}\\Phi({\\beta}\\sqrt a) - c - {\\beta},\n\\label{nudef}  \\\\\n\\nu_a &=&  \\frac{2}{\\sqrt{a}} \\; \\varphi(c\\sqrt{a}) - 2c\\, \\Phi(-c\\sqrt a),\n\\label{nuadef}  \\\\\n\\nu_\\alpha &=&  2{\\beta}(\\Phi({\\beta}\\sqrt a) - {  {\\scriptstyle \\frac{1}{2} }\\,  }) -2c(\\Phi(c\\sqrt a) - {  {\\scriptstyle \\frac{1}{2} }\\,  })\n \\nonumber\\\\\n &&\\qquad\\qquad \\qquad\\quad \n + \\frac{2}{\\sqrt a} \\bigl\\lbrace\\; \\varphi({\\beta}\\sqrt a) - \\varphi(c\\sqrt a)\n \\;\\bigr\\rbrace ,\n \\label{nualphadef}\n \\nonumber \\\\\n\\psi_0(q)&=& e^{-\\eta a} \\biggl\\lbrace\\;\n\\frac{2}{\\sqrt a} \\; \\varphi( (q-ca)/\\sqrt a) - 2c\\, \\Phi( (q-ca)/\\sqrt a)\n\\;\\biggr\\rbrace,\n\\label{psi0def}\n\\\\\n\\psi_1(q) \n&=& e^{(c+{  {\\scriptstyle \\frac{1}{2} }\\,  }-\\eta)a} \\biggl[ \\; \\frac{2}{\\sqrt a}\\;\\bigl\\lbrace\n \\; \\varphi(\\bar c \\sqrt a)\n-\\varphi( (q-\\bar c a)/\\sqrt a) \\;\\bigr\\rbrace\n\\nonumber \\\\\n&& \\qquad\\qquad\\qquad  2\\bar c\\bigl\\lbrace \\; \\Phi(\\bar c \\sqrt a) -\n \\Phi( -(q-\\bar c a)/\\sqrt a)  \\; \\bigr\\rbrace \\; \\biggr],\n \\label{psi1def}\n\\end{eqnarray}\nwhere $\\bar c \\equiv 1 + c$.  Then:\n\\begin{eqnarray}\nA_0 &=& \\frac{\\nu_\\alpha+ (1-e^{-\\eta a}) \\nu_a}{\\nu-1},\n\\label{A0_ans}\n\\\\\nA_-(q) &=& \\frac{\\psi_0(q)}{\\nu -1},\n\\label{A-ans}\n\\\\\nA_+(q) &=& \\frac{\\psi_1(q)}{\\nu -1}.\n\\label{A+ans}\n\\end{eqnarray}\n\\end{proposition}\n\n\n\\noindent\n{\\sc Proof.} The process $Y_t \\equiv X_t - \\bar X_t$ is a diffusion taking values in the negative half-line, and reflecting from zero. The process $\\bar X_t$ is its local time at zero, and the path of $Y$ can be decomposed into a Poisson process of excursions, as It\\^o \\cite{ito} explained. For a more extensive discussion of excursion theory, in particular, the notion of marked excursion processes, see \\cite{GTTE} or Chapter VI.8 of \\cite{RW2}.\n\nThe process $X$ runs until $\\tau_0 \\wedge \\alpha$, which happens in the first excursion of $Y$ which {\\em either} lasts at least $a$, {\\em or} contains an $\\eta$-mark.  Let $n$ denote the excursion measure, $\\zeta$ denote the lifetime of an excursion, $P^c$ denote the law of $X_t = W_t +ct$, and $H_b$ denote the first time $X$ hits $b$.\n{\nThe excursion law can be characterized as the limit as $\\varepsilon \\downarrow 0$ of the (rescaled) law of $X$ started at $ -\\varepsilon <0$ run until it hits zero; see VI.50.20 in \\cite{RW2}. The rescaling required is to multiply by \n$n (f: \\inf f < -\\epsilon )$, and it is known that $ n (f: \\inf f < -\\epsilon )\\sim \\epsilon^{-1}$ (see VI.51.2 in \\cite{RW2}). We therefore have}\n\\begin{eqnarray}\nn(\\zeta>a) &=& \\lim_{\\varepsilon\\downarrow 0}\\varepsilon^{-1}P^c[\\; H_0 >a \\;|\\; X_0 = -\\varepsilon]  \\nonumber\n\\\\\n&=&\\lim_{\\varepsilon\\downarrow 0}\\varepsilon^{-1}P^c[\\; \\bar X_a < \\varepsilon \\;|\\; X_0 = 0]  \\nonumber\n\\\\\n&=& \\lim_{\\varepsilon\\downarrow 0}\\varepsilon^{-1}\n\\biggl\\lbrace\\;\n\\Phi\\biggl( \\frac{\\varepsilon-ca}{\\sqrt{a}}  \\biggr)\n- e^{2c\\varepsilon} \\Phi\\biggl( \\frac{-\\varepsilon-ca}{\\sqrt{a}}  \\biggr)\n\\;\\biggr\\rbrace\n\\label{eq29}\n\\\\\n&=& \\frac{2}{\\sqrt{a}} \\; \\varphi(c\\sqrt{a}) - 2c\\, \\Phi(-c\\sqrt a),\n\\label{eq30}\n\\\\\n&\\equiv & \\nu_a,  \\nonumber\n\\end{eqnarray}\nwhere \\eqref{eq29} is a standard result on Brownian motion; see, for example, \\cite{BS}. By similar reasoning, \n\\begin{eqnarray}\nn(\\alpha < \\zeta < a) &=&\\lim_{\\varepsilon\\downarrow 0}\\varepsilon^{-1}\n\\int_0^a P^c[ H_0\\in ds | X_0 = -\\varepsilon] \\; (1-e^{-\\eta s})\n\\nonumber\\\\\n&=& \\lim_{\\varepsilon\\downarrow 0}\\varepsilon^{-1}\n\\int_0^a \\frac{\\varepsilon e^{-\\varepsilon^2/2s}}{\\sqrt{2\\pi s^3}}\\;\ne^{c\\varepsilon- c^2 s/2} (1-e^{-\\eta s})  \\; ds\n\\nonumber\\\\\n&=& \\int_0^a \\frac{ e^{-c^2 s/2}}{\\sqrt{2\\pi s^3}}\\;\n (1-e^{-\\eta s})  \\; ds\n \\nonumber\\\\\n &=&  2{\\beta}(\\Phi({\\beta}\\sqrt a) - {  {\\scriptstyle \\frac{1}{2} }\\,  }) -2c(\\Phi(c\\sqrt a) - {  {\\scriptstyle \\frac{1}{2} }\\,  })\n \\nonumber\\\\\n &&\\qquad\\qquad \\qquad\\quad + \\frac{2}{\\sqrt a} \\bigl\\lbrace\\; \\varphi({\\beta}\\sqrt a) - \\varphi(c\\sqrt a)\n \\;\\bigr\\rbrace  \\label{eq31}\n \\\\\n &\\equiv & \\nu_\\alpha,  \\nonumber\n\\end{eqnarray}\nwhere we recall that ${\\beta} \\equiv \\sqrt{c^2 + 2 \\eta}$.\nThe rate of excursions which {\\em either} last at least $a$, {\\em or} contain an $\\eta$-mark is \n\n", "index": 51, "text": "\\begin{equation}\nn(\\zeta >a, \\; \\hbox{\\rm or} \\; \\alpha < \\zeta)\n= n(\\alpha < \\zeta<a) + n(\\zeta >a)\n\\label{eq33}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E24.m1\" class=\"ltx_Math\" alttext=\"n(\\zeta&gt;a,\\;\\hbox{\\rm or}\\;\\alpha&lt;\\zeta)=n(\\alpha&lt;\\zeta&lt;a)+n(\\zeta&gt;a)\" display=\"block\"><mrow><mi>n</mi><mrow><mo stretchy=\"false\">(</mo><mi>\u03b6</mi><mo>&gt;</mo><mi>a</mi><mo rspace=\"5.3pt\">,</mo><mpadded width=\"+2.8pt\"><mtext>or</mtext></mpadded><mi>\u03b1</mi><mo>&lt;</mo><mi>\u03b6</mi><mo stretchy=\"false\">)</mo></mrow><mo>=</mo><mi>n</mi><mrow><mo stretchy=\"false\">(</mo><mi>\u03b1</mi><mo>&lt;</mo><mi>\u03b6</mi><mo>&lt;</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow><mo>+</mo><mi>n</mi><mrow><mo stretchy=\"false\">(</mo><mi>\u03b6</mi><mo>&gt;</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nHence we have \n\\begin{eqnarray*}\nA_+(q) &=& E[ \\; \\exp(X_{\\tau_0}): \\tau_0 < \\alpha, X_{\\tau_0} - \\bar X_{\\tau_0} > q  \\;  ]\n\\\\\n&=& E[\\;  \\exp(\\bar X_{\\tau_0}) \\;] \\cdot\nE[ \\; \\exp(Y_{\\tau_0}): \\tau_0 < \\alpha, Y_{\\tau_0} > q  \\;  ]\n\\\\\n&=& \\frac{\\nu}{\\nu-1}\\cdot  P(\\tau_0 < \\alpha ) \\cdot \\frac{\\psi_1(q)}{n(a < \\zeta\\wedge\\alpha)}\n\\\\\n&=& \\frac{\\psi_1(q)}{\\nu -1}\n\\end{eqnarray*}\nafter some simplifications. This is the form claimed at \\eqref{A+ans}.\n\n\\vskip 0.1 in \\hfill $\\square$\n\n\nNow we can draw all the pieces together. Proposition \\ref{prop2} was a step on the way to evaluating $K$, the value of the proposed strategy; we found $K$ expressed in terms of $A_0$, $A_-(q)$ and $A_+(q)$ at \\eqref{Keq}, and it remains just to write the answer cleanly.\n\n\\begin{theorem}\\label{thm1}\nThe value of the rule $R(q)$ is given by\n\n", "itemtype": "equation", "pos": 25886, "prevtext": "\nand this is simply the sum of the two expressions \\eqref{eq30} and \\eqref{eq31}, which is therefore known explicitly. In fact, a few calculations confirm that it is the expression $\\nu$ defined at \\eqref{nudef}.  Immediately from It\\^o excursion theory:\n\\begin{itemize}\n\\item $\\bar X_{\\tau_0 \\wedge \\alpha} \\sim \\exp( \\;\n\\nu\n\\;)$;\n\\item $\nP[ \\; \\alpha < \\tau_0 \\;]\n= \\{ \\;\\nu_\\alpha+ (1-e^{-\\eta a}) \\nu_a\\; \\}/\\nu\n$;\n\\item $P[\\; \\tau_0 < \\alpha \\;] = \\nu_a\\, e^{-\\eta a} /\\nu$;\n\\end{itemize}\nand from this the expression \\eqref{A0_ans} for $A_0$ follows.\n\nTo deal with $A_\\pm$, we need to find the measure of excursions which get to time $a$ without killing, and which are  in $dy$  at time $a$. We use the reflection principle and the Cameron-Martin-Girsanov theorem to derive\n\\begin{eqnarray*}\ng(y)dy &\\equiv& n(a < \\zeta\\wedge\\alpha, Y_a \\in dy) \n\\label{gdef}\n\\\\\n&=&  \\lim_{\\varepsilon\\downarrow 0} \\varepsilon^{-1} P^c[ \\;\nH_0\\wedge \\alpha >a, Y_a \\in dy \\; \\vert \\; Y_0 = -\\varepsilon\n\\;]    \\nonumber\n\\\\\n&=&\\lim_{\\varepsilon\\downarrow 0} \\varepsilon^{-1} e^{c(y+\\varepsilon)-c^2a/2\n-\\eta a}\n\\{ \\;   \\varphi( (y + \\varepsilon)/\\sqrt{a}) - \\varphi( (y  -\\varepsilon)/\\sqrt{a}) \n\\;\\} dy /\\sqrt{a} \n\\nonumber\n\\\\\n&=&  \\frac{-2y}{a^{3/2}} \\; \\varphi((y-ca)/\\sqrt a)\\; e^{-\\eta a} \\; dy.\n\\label{g_ans}\n\\end{eqnarray*}\nStraightforward calculations lead us to \n\\begin{eqnarray*}\n\\int_{-\\infty}^q g(y) \\; dy\n&=& e^{-\\eta a} \\biggl\\lbrace\\;\n\\frac{2}{\\sqrt a} \\; \\varphi( (q-ca)/\\sqrt a) - 2c\\, \\Phi( (q-ca)/\\sqrt a)\n\\;\\biggr\\rbrace,\n\\\\\n&\\equiv & \\psi_0(q),  \\\\\n\\int_q^0 e^y g(y) \\; dy\n&=& e^{(c+{  {\\scriptstyle \\frac{1}{2} }\\,  }-\\eta)a} \\biggl[ \\; \\frac{2}{\\sqrt a}\\;\\bigl\\lbrace\n \\; \\varphi(\\bar c \\sqrt a)\n-\\varphi( (q-\\bar c a)/\\sqrt a) \\;\\bigr\\rbrace\n\\nonumber \\\\\n&& \\qquad\\qquad\\qquad  2\\bar c\\bigl\\lbrace \\; \\Phi(\\bar c \\sqrt a) -\n \\Phi( -(q-\\bar c a)/\\sqrt a)  \\; \\bigr\\rbrace \\; \\biggr],\n\\\\\n& \\equiv & \\psi_1(q).\n\\end{eqnarray*}\nHence $P( Y_{\\tau_0} < q \\;\\vert \\;\\tau_0 < \\alpha ) = \\psi_0(q)/\\psi_0(0)$. We therefore have\n\\begin{eqnarray*}\nA_-(q) &=& E[\\;  \\exp(\\bar X_{\\tau_0}) : \\tau_0 < \\alpha, X_{\\tau_0} - \\bar X_{\\tau_0} < q \\;  ]\n\\\\\n&=& \\frac{\\nu}{\\nu-1} \\; P[\\;\\tau_0 < \\alpha, X_{\\tau_0} - \\bar X_{\\tau_0} < q \\;  ]\n\\\\\n&=& \\frac{\\nu}{\\nu-1}\\cdot \\frac{\\nu_ae^{-\\eta a}}{\\nu}\\cdot \\frac{\\psi_0(q)}{\\psi_0(0)}\n\\\\\n&=& \\frac{\\psi_0(q)}{\\nu -1}\n\\end{eqnarray*}\nafter some simplifications. This is the form of $A_-$ claimed at \\eqref{A-ans}.\n\nFinally, we deal with $A_+(q)$. Observe that\n\n", "index": 53, "text": "\\begin{equation}\nE[\\; \\exp( \\, Y_{\\tau_0} \\, )I_{\\{ Y_{\\tau_0}>q\\}}\\; \\vert \\; \\tau_0 < \\alpha\\;]\n=\\frac{\\psi_1(q)}{n(a < \\zeta\\wedge\\alpha)} \\; .\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E25.m1\" class=\"ltx_Math\" alttext=\"E[\\;\\exp(\\,Y_{\\tau_{0}}\\,)I_{\\{Y_{\\tau_{0}}&gt;q\\}}\\;|\\;\\tau_{0}&lt;\\alpha\\;]=\\frac{%&#10;\\psi_{1}(q)}{n(a&lt;\\zeta\\wedge\\alpha)}\\;.\" display=\"block\"><mrow><mi>E</mi><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">[</mo><mi>exp</mi><mrow><mo rspace=\"4.2pt\" stretchy=\"false\">(</mo><mpadded width=\"+1.7pt\"><msub><mi>Y</mi><msub><mi>\u03c4</mi><mn>0</mn></msub></msub></mpadded><mo stretchy=\"false\">)</mo></mrow><mpadded width=\"+2.8pt\"><msub><mi>I</mi><mrow><mo stretchy=\"false\">{</mo><msub><mi>Y</mi><msub><mi>\u03c4</mi><mn>0</mn></msub></msub><mo>&gt;</mo><mi>q</mi><mo stretchy=\"false\">}</mo></mrow></msub></mpadded><mo rspace=\"5.3pt\" stretchy=\"false\">|</mo><msub><mi>\u03c4</mi><mn>0</mn></msub><mo>&lt;</mo><mpadded width=\"+2.8pt\"><mi>\u03b1</mi></mpadded><mo stretchy=\"false\">]</mo></mrow><mo>=</mo><mpadded width=\"+2.8pt\"><mfrac><mrow><msub><mi>\u03c8</mi><mn>1</mn></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>q</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mrow><mi>n</mi><mrow><mo stretchy=\"false\">(</mo><mi>a</mi><mo>&lt;</mo><mi>\u03b6</mi><mo>\u2227</mo><mi>\u03b1</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mfrac></mpadded><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nThe denominator $\\nu - 1 - \\psi_1(q)$ is always positive.\n\\end{theorem}\n\n\n\\medskip\\noindent\n{\\sc Proof.} The expression \\eqref{K_ans} is a trivial arrangement of \\eqref{Keq}, so all that remains is to deal with the final assertion.  Using the fact that $c = -{  {\\scriptstyle \\frac{1}{2} }\\,  }$, we see that \n\n", "itemtype": "equation", "pos": 26875, "prevtext": "\nHence we have \n\\begin{eqnarray*}\nA_+(q) &=& E[ \\; \\exp(X_{\\tau_0}): \\tau_0 < \\alpha, X_{\\tau_0} - \\bar X_{\\tau_0} > q  \\;  ]\n\\\\\n&=& E[\\;  \\exp(\\bar X_{\\tau_0}) \\;] \\cdot\nE[ \\; \\exp(Y_{\\tau_0}): \\tau_0 < \\alpha, Y_{\\tau_0} > q  \\;  ]\n\\\\\n&=& \\frac{\\nu}{\\nu-1}\\cdot  P(\\tau_0 < \\alpha ) \\cdot \\frac{\\psi_1(q)}{n(a < \\zeta\\wedge\\alpha)}\n\\\\\n&=& \\frac{\\psi_1(q)}{\\nu -1}\n\\end{eqnarray*}\nafter some simplifications. This is the form claimed at \\eqref{A+ans}.\n\n\\vskip 0.1 in \\hfill $\\square$\n\n\nNow we can draw all the pieces together. Proposition \\ref{prop2} was a step on the way to evaluating $K$, the value of the proposed strategy; we found $K$ expressed in terms of $A_0$, $A_-(q)$ and $A_+(q)$ at \\eqref{Keq}, and it remains just to write the answer cleanly.\n\n\\begin{theorem}\\label{thm1}\nThe value of the rule $R(q)$ is given by\n\n", "index": 55, "text": "\\begin{equation}\nK = \\frac{A_0 + A_-(q)}{1-A_+(q)} = \\frac{\\nu_\\alpha +(1-e^{-\\eta a}) \\nu_a + \\psi_0(q)}{\\nu-1-\\psi_1(q)}  \\;  .\n\\label{K_ans}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E26.m1\" class=\"ltx_Math\" alttext=\"K=\\frac{A_{0}+A_{-}(q)}{1-A_{+}(q)}=\\frac{\\nu_{\\alpha}+(1-e^{-\\eta a})\\nu_{a}+%&#10;\\psi_{0}(q)}{\\nu-1-\\psi_{1}(q)}\\;.\" display=\"block\"><mrow><mrow><mi>K</mi><mo>=</mo><mfrac><mrow><msub><mi>A</mi><mn>0</mn></msub><mo>+</mo><mrow><msub><mi>A</mi><mo>-</mo></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>q</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mrow><mn>1</mn><mo>-</mo><mrow><msub><mi>A</mi><mo>+</mo></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>q</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mfrac><mo>=</mo><mpadded width=\"+2.8pt\"><mfrac><mrow><msub><mi>\u03bd</mi><mi>\u03b1</mi></msub><mo>+</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><msup><mi>e</mi><mrow><mo>-</mo><mrow><mi>\u03b7</mi><mo>\u2062</mo><mi>a</mi></mrow></mrow></msup></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><msub><mi>\u03bd</mi><mi>a</mi></msub></mrow><mo>+</mo><mrow><msub><mi>\u03c8</mi><mn>0</mn></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>q</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mrow><mi>\u03bd</mi><mo>-</mo><mn>1</mn><mo>-</mo><mrow><msub><mi>\u03c8</mi><mn>1</mn></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>q</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mfrac></mpadded></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nTherefore\n\\begin{eqnarray*}\n\\nu - 1- \\psi_1(q) &>& \\nu - 1 - \\psi_1(-\\infty)\n\\\\\n&=& \\nu_a + \\nu_\\alpha - 1 - \\psi_1(-\\infty)\n\\\\\n&>& \\nu_a - 1 - \\psi_1(-\\infty)\n\\\\\n&=& \\frac{2}{\\sqrt a}\\; \\varphi(\\sqrt{a}/2) + \\Phi(\\sqrt{a}/2)- 1 - \\psi_1(-\\infty)\n\\\\\n&=& (1-e^{-\\eta a}) \\biggl\\lbrace \\; \\frac{2}{\\sqrt a}\\; \\varphi(\\sqrt{a}/2) -\\Phi(-\\sqrt{a}/2)\\;\n\\biggr\\rbrace\n\\\\\n&>& 0.\n\\end{eqnarray*}\n\n\\vskip 0.1 in \\hfill $\\square$\n\n\n\\subsection*{\\bf{Using the stopping rule $R(q)$}}\nHow is the stopping rule $R(q)$ (henceforth referred to as ``Rule 1'') analysed in the preceding section relevant to the original problem? Holding $\\eta$ fixed, there will be an optimal $q^* = q^*(\\eta)$ which maximizes the value $K$ given by \\eqref{K_ans}. \n\n\n\n\n\n\n\nNow recall how the stopping rule works; we let the process run until the stopping time\n\n", "itemtype": "equation", "pos": 27344, "prevtext": "\nThe denominator $\\nu - 1 - \\psi_1(q)$ is always positive.\n\\end{theorem}\n\n\n\\medskip\\noindent\n{\\sc Proof.} The expression \\eqref{K_ans} is a trivial arrangement of \\eqref{Keq}, so all that remains is to deal with the final assertion.  Using the fact that $c = -{  {\\scriptstyle \\frac{1}{2} }\\,  }$, we see that \n\n", "index": 57, "text": "\\begin{equation*}\n\\psi_1(-\\infty) = \\;\n{\\uparrow\\lim}_{q \\downarrow -\\infty} \\psi_1(q)  \n= e^{-\\eta a}\\biggl\\lbrace \\; \\frac{2}{\\sqrt a}\\; \\varphi(\\sqrt{a}/2) -\\Phi(-\\sqrt{a}/2)\\;\n\\biggr\\rbrace.\n\\end{equation*}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex3.m1\" class=\"ltx_Math\" alttext=\"\\psi_{1}(-\\infty)=\\;{\\uparrow\\lim}_{q\\downarrow-\\infty}\\psi_{1}(q)=e^{-\\eta a}%&#10;\\biggl{\\{}\\;\\frac{2}{\\sqrt{a}}\\;\\varphi(\\sqrt{a}/2)-\\Phi(-\\sqrt{a}/2)\\;\\biggr{%&#10;\\}}.\" display=\"block\"><mrow><msub><mi>\u03c8</mi><mn>1</mn></msub><mrow><mo stretchy=\"false\">(</mo><mo>-</mo><mi mathvariant=\"normal\">\u221e</mi><mo stretchy=\"false\">)</mo></mrow><mo rspace=\"5.3pt\">=</mo><mo>\u2191</mo><munder><mo movablelimits=\"false\">lim</mo><mrow><mi>q</mi><mo>\u2193</mo><mrow><mo>-</mo><mi mathvariant=\"normal\">\u221e</mi></mrow></mrow></munder><msub><mi>\u03c8</mi><mn>1</mn></msub><mrow><mo stretchy=\"false\">(</mo><mi>q</mi><mo stretchy=\"false\">)</mo></mrow><mo>=</mo><msup><mi>e</mi><mrow><mo>-</mo><mrow><mi>\u03b7</mi><mo>\u2062</mo><mi>a</mi></mrow></mrow></msup><mrow><mo maxsize=\"210%\" minsize=\"210%\" rspace=\"5.3pt\">{</mo><mpadded width=\"+2.8pt\"><mfrac><mn>2</mn><msqrt><mi>a</mi></msqrt></mfrac></mpadded><mi>\u03c6</mi><mrow><mo stretchy=\"false\">(</mo><msqrt><mi>a</mi></msqrt><mo>/</mo><mn>2</mn><mo stretchy=\"false\">)</mo></mrow><mo>-</mo><mi mathvariant=\"normal\">\u03a6</mi><mrow><mo stretchy=\"false\">(</mo><mo>-</mo><msqrt><mi>a</mi></msqrt><mo>/</mo><mn>2</mn><mo rspace=\"5.3pt\" stretchy=\"false\">)</mo></mrow><mo maxsize=\"210%\" minsize=\"210%\">}</mo></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nand at that moment we stop if and only if $Y_{\\tau_0} \\equiv X_{\\tau_0}\n-\\bar X_{\\tau_0} < q$, else we forget and continue.  What value of $q$ do we use? A natural choice is to take\n\n", "itemtype": "equation", "pos": 28380, "prevtext": "\nTherefore\n\\begin{eqnarray*}\n\\nu - 1- \\psi_1(q) &>& \\nu - 1 - \\psi_1(-\\infty)\n\\\\\n&=& \\nu_a + \\nu_\\alpha - 1 - \\psi_1(-\\infty)\n\\\\\n&>& \\nu_a - 1 - \\psi_1(-\\infty)\n\\\\\n&=& \\frac{2}{\\sqrt a}\\; \\varphi(\\sqrt{a}/2) + \\Phi(\\sqrt{a}/2)- 1 - \\psi_1(-\\infty)\n\\\\\n&=& (1-e^{-\\eta a}) \\biggl\\lbrace \\; \\frac{2}{\\sqrt a}\\; \\varphi(\\sqrt{a}/2) -\\Phi(-\\sqrt{a}/2)\\;\n\\biggr\\rbrace\n\\\\\n&>& 0.\n\\end{eqnarray*}\n\n\\vskip 0.1 in \\hfill $\\square$\n\n\n\\subsection*{\\bf{Using the stopping rule $R(q)$}}\nHow is the stopping rule $R(q)$ (henceforth referred to as ``Rule 1'') analysed in the preceding section relevant to the original problem? Holding $\\eta$ fixed, there will be an optimal $q^* = q^*(\\eta)$ which maximizes the value $K$ given by \\eqref{K_ans}. \n\n\n\n\n\n\n\nNow recall how the stopping rule works; we let the process run until the stopping time\n\n", "index": 59, "text": "\\begin{equation*}\n\\tau_0 = \\inf \\{\\;  t: \\bar X_{[t-a,t]} = X_{t-a} \\; \\} = \n \\inf \\{\\;  t: \\bar X_t = X_{t-a} \\; \\},\n\\end{equation*}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex4.m1\" class=\"ltx_Math\" alttext=\"\\tau_{0}=\\inf\\{\\;t:\\bar{X}_{[t-a,t]}=X_{t-a}\\;\\}=\\inf\\{\\;t:\\bar{X}_{t}=X_{t-a}%&#10;\\;\\},\" display=\"block\"><mrow><mrow><msub><mi>\u03c4</mi><mn>0</mn></msub><mo>=</mo><mrow><mo movablelimits=\"false\">inf</mo><mo>\u2061</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">{</mo><mi>t</mi><mo>:</mo><mrow><msub><mover accent=\"true\"><mi>X</mi><mo stretchy=\"false\">\u00af</mo></mover><mrow><mo stretchy=\"false\">[</mo><mrow><mi>t</mi><mo>-</mo><mi>a</mi></mrow><mo>,</mo><mi>t</mi><mo stretchy=\"false\">]</mo></mrow></msub><mo>=</mo><mpadded width=\"+2.8pt\"><msub><mi>X</mi><mrow><mi>t</mi><mo>-</mo><mi>a</mi></mrow></msub></mpadded></mrow><mo stretchy=\"false\">}</mo></mrow></mrow><mo>=</mo><mrow><mo movablelimits=\"false\">inf</mo><mo>\u2061</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">{</mo><mi>t</mi><mo>:</mo><mrow><msub><mover accent=\"true\"><mi>X</mi><mo stretchy=\"false\">\u00af</mo></mover><mi>t</mi></msub><mo>=</mo><mpadded width=\"+2.8pt\"><msub><mi>X</mi><mrow><mi>t</mi><mo>-</mo><mi>a</mi></mrow></msub></mpadded></mrow><mo stretchy=\"false\">}</mo></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nThis is because at time $\\tau_0$ there is time $(T-\\tau_0)$ still to go, and an exponential random variable with rate $(T-\\tau_0)^{-1}$ has this as its mean. The result of using this rule is shown in the left-hand panel of Figure \\ref{fig:sim}. The dots (evaluated by simulating 50,000 runs of the rule) are visibly close to (but below) the lower bound we obtained by the Barraquand-Martineau technique of \\cite{bobs}.\n\\\\\n\n\\noindent{\\bf Rule 2.}\nCan we do better than this? Indeed we can. Firstly, we observe that\n\n", "itemtype": "equation", "pos": 28696, "prevtext": "\nand at that moment we stop if and only if $Y_{\\tau_0} \\equiv X_{\\tau_0}\n-\\bar X_{\\tau_0} < q$, else we forget and continue.  What value of $q$ do we use? A natural choice is to take\n\n", "index": 61, "text": "\\begin{equation}\nq = q^*(\\;  (T- \\tau_0)^{-1}\\;).\n\\label{q_choice}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E27.m1\" class=\"ltx_Math\" alttext=\"q=q^{*}(\\;(T-\\tau_{0})^{-1}\\;).\" display=\"block\"><mrow><mrow><mi>q</mi><mo>=</mo><mrow><msup><mi>q</mi><mo>*</mo></msup><mo>\u2062</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">(</mo><mpadded width=\"+2.8pt\"><msup><mrow><mo stretchy=\"false\">(</mo><mrow><mi>T</mi><mo>-</mo><msub><mi>\u03c4</mi><mn>0</mn></msub></mrow><mo stretchy=\"false\">)</mo></mrow><mrow><mo>-</mo><mn>1</mn></mrow></msup></mpadded><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nThis is because when we arrive at time $\\tau_0$, we have to choose between stopping and receiving $S_{\\tau_0-a}$, or continuing and receiving $K(q^*(\\eta))\\cdot S_{\\tau_0}$ in expectation. Optimal behaviour requires us to continue if and only if\n\n", "itemtype": "equation", "pos": 29292, "prevtext": "\nThis is because at time $\\tau_0$ there is time $(T-\\tau_0)$ still to go, and an exponential random variable with rate $(T-\\tau_0)^{-1}$ has this as its mean. The result of using this rule is shown in the left-hand panel of Figure \\ref{fig:sim}. The dots (evaluated by simulating 50,000 runs of the rule) are visibly close to (but below) the lower bound we obtained by the Barraquand-Martineau technique of \\cite{bobs}.\n\\\\\n\n\\noindent{\\bf Rule 2.}\nCan we do better than this? Indeed we can. Firstly, we observe that\n\n", "index": 63, "text": "\\begin{equation}\nK(q^*(\\eta)) = \\exp( -q^*(\\eta)).\n\\label{Kq*}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E28.m1\" class=\"ltx_Math\" alttext=\"K(q^{*}(\\eta))=\\exp(-q^{*}(\\eta)).\" display=\"block\"><mrow><mrow><mrow><mi>K</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msup><mi>q</mi><mo>*</mo></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b7</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><mi>exp</mi><mo>\u2061</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mo>-</mo><mrow><msup><mi>q</mi><mo>*</mo></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b7</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nOn the other hand, the rule $R(q^*(\\eta))$ requires us to continue if and only if\n\n", "itemtype": "equation", "pos": 29616, "prevtext": "\nThis is because when we arrive at time $\\tau_0$, we have to choose between stopping and receiving $S_{\\tau_0-a}$, or continuing and receiving $K(q^*(\\eta))\\cdot S_{\\tau_0}$ in expectation. Optimal behaviour requires us to continue if and only if\n\n", "index": 65, "text": "\\begin{equation*}\nK(q^*(\\eta)) \\cdot S_{\\tau_0} > S_{\\tau_0-a}.\n\\end{equation*}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex5.m1\" class=\"ltx_Math\" alttext=\"K(q^{*}(\\eta))\\cdot S_{\\tau_{0}}&gt;S_{\\tau_{0}-a}.\" display=\"block\"><mrow><mrow><mrow><mrow><mi>K</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msup><mi>q</mi><mo>*</mo></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b7</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u22c5</mo><msub><mi>S</mi><msub><mi>\u03c4</mi><mn>0</mn></msub></msub></mrow><mo>&gt;</mo><msub><mi>S</mi><mrow><msub><mi>\u03c4</mi><mn>0</mn></msub><mo>-</mo><mi>a</mi></mrow></msub></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nSince $q^*(\\eta)$ was chosen optimally, \\eqref{Kq*} must therefore hold.\n\\\\\n\nSecondly, if $a = T$, then the value will just be the expectation of the overall maximum, $E \\exp( \\bar X_T )$.  Routine but tedious calculations  give \n\n", "itemtype": "equation", "pos": 29778, "prevtext": "\nOn the other hand, the rule $R(q^*(\\eta))$ requires us to continue if and only if\n\n", "index": 67, "text": "\\begin{equation*}\nS_{\\tau_0} > S_{\\tau_0-a} \\cdot \\exp( q^*(\\eta)).\n\\end{equation*}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex6.m1\" class=\"ltx_Math\" alttext=\"S_{\\tau_{0}}&gt;S_{\\tau_{0}-a}\\cdot\\exp(q^{*}(\\eta)).\" display=\"block\"><mrow><mrow><msub><mi>S</mi><msub><mi>\u03c4</mi><mn>0</mn></msub></msub><mo>&gt;</mo><mrow><msub><mi>S</mi><mrow><msub><mi>\u03c4</mi><mn>0</mn></msub><mo>-</mo><mi>a</mi></mrow></msub><mo>\u22c5</mo><mrow><mi>exp</mi><mo>\u2061</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msup><mi>q</mi><mo>*</mo></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b7</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nIf we had arrived at time $\\tau_0$ and it turns out that $\\tau_0 = T-a$, then by  forgetting and continuing we will actually receive expected reward $\\lambda(a) S_{\\tau_0}$, whereas if we used Rule 1 we would think we were going to receive $K(q^*(a^{-1}))\\cdot S_{\\tau_0} = e^{-q^*(a^{-1})} \\, S_{\\tau_0}$. This suggests that we modify Rule 1, replacing \\eqref{q_choice} by\n\n", "itemtype": "equation", "pos": 30092, "prevtext": "\nSince $q^*(\\eta)$ was chosen optimally, \\eqref{Kq*} must therefore hold.\n\\\\\n\nSecondly, if $a = T$, then the value will just be the expectation of the overall maximum, $E \\exp( \\bar X_T )$.  Routine but tedious calculations  give \n\n", "index": 69, "text": "\\begin{equation}\nE[\\; \\exp( \\bar X_a) \\;] = \\lambda(a) \\equiv \\left({2 + \\dfrac{a}{2}}\\right)\\Phi\\left({\\dfrac{\\sqrt{a}}{2}}\\right) + \\sqrt{a} \\varphi \\left({\\dfrac{a}{4}}\\right). \\label{smax.distr}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E29.m1\" class=\"ltx_Math\" alttext=\"E[\\;\\exp(\\bar{X}_{a})\\;]=\\lambda(a)\\equiv\\left({2+\\dfrac{a}{2}}\\right)\\Phi%&#10;\\left({\\dfrac{\\sqrt{a}}{2}}\\right)+\\sqrt{a}\\varphi\\left({\\dfrac{a}{4}}\\right).\" display=\"block\"><mrow><mrow><mrow><mi>E</mi><mo>\u2062</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">[</mo><mrow><mi>exp</mi><mo>\u2061</mo><mrow><mo stretchy=\"false\">(</mo><msub><mover accent=\"true\"><mi>X</mi><mo stretchy=\"false\">\u00af</mo></mover><mi>a</mi></msub><mo rspace=\"5.3pt\" stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">]</mo></mrow></mrow><mo>=</mo><mrow><mi>\u03bb</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2261</mo><mrow><mrow><mrow><mo>(</mo><mrow><mn>2</mn><mo>+</mo><mfrac><mi>a</mi><mn>2</mn></mfrac></mrow><mo>)</mo></mrow><mo>\u2062</mo><mi mathvariant=\"normal\">\u03a6</mi><mo>\u2062</mo><mrow><mo>(</mo><mfrac><msqrt><mi>a</mi></msqrt><mn>2</mn></mfrac><mo>)</mo></mrow></mrow><mo>+</mo><mrow><msqrt><mi>a</mi></msqrt><mo>\u2062</mo><mi>\u03c6</mi><mo>\u2062</mo><mrow><mo>(</mo><mfrac><mi>a</mi><mn>4</mn></mfrac><mo>)</mo></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05872.tex", "nexttext": "\nBy making this modification, the stop/continue decision we make in the event that $T- \\tau_0 = a$ will be exactly correct.\n\nOf course, the argument just presented is only a rough heuristic, but if we look at the right-hand panel in Figure \\ref{fig:sim} we see the results of using  Rule 2. The dots are now essentially coincident with the lower bounds, which is very encouraging, and argues for the use of Rule 2 rather than Rule 1. This rule is something which can be clearly motivated and precisely specified, in contrast to the randomly-generated rules which come from the Barraquand-Martineau technique in Section \\ref{S2}.  One could continue to search for other explicit rules which do even better, but such a study is beyond the scope of this paper.\n\n\n\\begin{figure}[H]\n\\begin{center}\n\\includegraphics[width=0.49\\linewidth]{rule1.png}\n\\includegraphics[width=0.49\\linewidth]{rule2.png} \n\\caption{The simulation results with $h = 1/2500$ and $N_T = 250$.}\\label{fig:sim}\n\\end{center}\n\\end{figure}\n\n\n\n\\begin{table}[H]\n\\begin{center}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\begin{tabular}{cccc}\n\\hline\n$a/h$ & Rule 1 &  Rule 2 & Lower bound\\\\\n\\hline\n1 & 1.055 &  1.054& 1.054 \\\\\n2 & 1.073 &  1.073 & 1.074   \\\\\n3 & 1.086 &  1.087 &1.088  \\\\\n4 & 1.096  & 1.098 & 1.100 \\\\\n5 & 1.104  & 1.107  & 1.109\\\\\n6 & 1.112 & 1.116 & 1.117  \\\\\n7 & 1.119 & 1.121 &1.123 \\\\\n8 & 1.126  & 1.128 &1.129  \\\\\n9 & 1.131  & 1.134 & 1.135 \\\\\n10 & 1.136 & 1.139 &1.140 \\\\\n11 & 1.139 & 1.143& 1.144 \\\\\n12 & 1.145  & 1.148 &1.149\\\\\n13 & 1.148  & 1.153 &1.152 \\\\\n14 & 1.152 & 1.155  & 1.156 \\\\\n15 & 1.155  & 1.160 & 1.159 \\\\\n16 & 1.158  & 1.163 & 1.163\\\\\n17 & 1.160  & 1.165 & 1.166 \\\\\n18 & 1.164  & 1.168 & 1.168 \\\\\n19 & 1.168  & 1.172  & 1.171 \\\\\n20 & 1.170 & 1.174 & 1.174 \\\\\n\\hline\n\\end{tabular}\n{\n\\caption{$E[Z_\\tau]$ estimates from simulation of Rules 1 and 2 with $h = 1/2500$ and $N_T = 250$, averaged over $50,000$ sample paths. Standard errors are 0.001 (to one significant figure) in all cases.\n  }\\label{table:rq}\n}\n\\end{center}\n\\end{table}\n\n\\section{Supplemental Materials}\nThe code for simulation of bounds in Table 1 can be found on \\url{http://stat.wharton.upenn.edu/~ernstp/blb.cpp}. The pseudocode is available on  \\url{http://stat.wharton.upenn.edu/~ernstp/Bermuda_code.pdf}. \n\n\n\n\n\n\n\\pagebreak\n\\bibliography{VF}\n\\bibliographystyle{plain}\n\n\n", "itemtype": "equation", "pos": 30680, "prevtext": "\nIf we had arrived at time $\\tau_0$ and it turns out that $\\tau_0 = T-a$, then by  forgetting and continuing we will actually receive expected reward $\\lambda(a) S_{\\tau_0}$, whereas if we used Rule 1 we would think we were going to receive $K(q^*(a^{-1}))\\cdot S_{\\tau_0} = e^{-q^*(a^{-1})} \\, S_{\\tau_0}$. This suggests that we modify Rule 1, replacing \\eqref{q_choice} by\n\n", "index": 71, "text": "\\begin{equation}\n q = q^*(\\;(T-\\tau_0)^{-1}\\;) - q^*(a^{-1}) - \\log\\lambda(a).\n \\label{q_choice_2}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E30.m1\" class=\"ltx_Math\" alttext=\"q=q^{*}(\\;(T-\\tau_{0})^{-1}\\;)-q^{*}(a^{-1})-\\log\\lambda(a).\" display=\"block\"><mrow><mrow><mi>q</mi><mo>=</mo><mrow><mrow><msup><mi>q</mi><mo>*</mo></msup><mo>\u2062</mo><mrow><mo rspace=\"5.3pt\" stretchy=\"false\">(</mo><mpadded width=\"+2.8pt\"><msup><mrow><mo stretchy=\"false\">(</mo><mrow><mi>T</mi><mo>-</mo><msub><mi>\u03c4</mi><mn>0</mn></msub></mrow><mo stretchy=\"false\">)</mo></mrow><mrow><mo>-</mo><mn>1</mn></mrow></msup></mpadded><mo stretchy=\"false\">)</mo></mrow></mrow><mo>-</mo><mrow><msup><mi>q</mi><mo>*</mo></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msup><mi>a</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup><mo stretchy=\"false\">)</mo></mrow></mrow><mo>-</mo><mrow><mrow><mi>log</mi><mo>\u2061</mo><mi>\u03bb</mi></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}]