[{"file": "1601.03768.tex", "nexttext": "\nwhere $R\\in\\symm_{++}^n$ is the (diagonal) resistance matrix.\nNote that $\\omega\\lambda'$ is the time derivative of $\\lambda$.\n\n\n\\paragraph{Magnetic circuit.}\nWe assume the magnetic elements are connected by a (planar) magnetic circuit,\nwhich we describe in terms of mesh analysis\n\n(for an introduction to mesh analysis, see \\cite{desoer1984basic}).\n\n\n\nIn particular, we assume that there are $l$ circuit meshes\n(not including the outer mesh)\neach with an associated reference direction.\nThe (reduced) \\emph{mesh matrix} $M\\in \\reals^{l \\times m}$\nis such that \n\n\n\n\n", "itemtype": "equation", "pos": 10608, "prevtext": "\n\\maketitle\n\n\\begin{abstract}\nIn this paper, we address the problem of finding current waveforms\nfor a switched reluctance motor\nthat minimize a user-defined combination of torque ripple and RMS current.\nThe motor model we use is fairly general,\nand includes magnetic saturation,\nvoltage and current limits,\nand highly coupled magnetics\n(and therefore, unconventional geometries and winding patterns).\nWe solve this problem by approximating it as a mixed-integer convex program,\nwhich we solve globally using branch and bound.\nWe demonstrate our approach on an experimentally verified\nmodel of a fully pitched switched reluctance motor,\nfor which we find the globally optimal waveforms, even for high rotor speeds.\n\\end{abstract}\n\n\\section{Introduction}\nWe consider the problem of choosing optimal current waveforms for a\nswitched reluctance motor (SRM).\nTraditionally, the shape of the current waveforms\nis determined in an ad-hoc manner\n(\\eg, by fixing the turn-on angles for each phase winding\nas a function of rotor position;\nsee \\cite{toliyat2012handbook}).\nAlthough creating these waveforms does not require a detailed motor model,\nand implementing them is simple,\nwaveforms produced in this manner rarely produce\nsmooth output torque,\nand often decrease motor efficiency\nand exacerbate mechanical vibration and acoustic noise issues.\nAlso, because of inverter voltage limits,\nsuch waveforms may not even be realizable at high rotor speeds.\n\nWe therefore propose to use optimization to find current waveforms\nthat acheive a desired average torque, \nwhile minimizing a combination of resistive power loss and RMS torque ripple.\nWe consider supply voltage limits, \nas well as current limits in each phase winding.\nOur model includes a detailed magnetic circuit,\nwhich can account for magnetic coupling between phases,\nand can be used to model motors with unconventional geometries and winding patterns,\nsuch as those with fully pitched windings.\n\nWe propose to solve this optimization problem\nby approximating it as a mixed-integer convex program (MICP).\nThis MICP reformulation approach has several inherent advantages\nover more conventional methods, such as sequential quadratic programming.\nThe most prominent, for our purposes,\nis that it can be solved globally by generic\nmethods such as branch and bound, often in a reasonable amount of time.\nThis has two benefits:\nfirst, it allows us to achieve the best performance possible for a given motor;\nsecond, it provides a metric against which other, suboptimal methods can be compared.\nWe note that although in general global optimization\nmethods for solving MICPs can have very high (exponential) runtime,\nwe find that global solutions can typically be found in a reasonable\namount of time (1-5 minutes) for the problems we encounter.\nThese waveforms can be computed and stored in a lookup table,\nindexed by desired torque and rotor speed.\nSuch a table with hundreds or thousands of entries\ncould be computed overnight on a standard multi-core computer.\n\nAnother advantage of an MICP formulation is that,\nif suboptimal solutions are acceptable,\nfirst-order methods exist that can produce a good\nsolution very quickly \nespecially when initialized with a decent initial guess.\n(see, \\ie, \\cite{takapoui2015simple})\nThis opens the possibility that (nearly) optimal waveforms can\nbe produced by a smart control scheme\neven as motor parameters vary over the life of the motor.\nThis is especially attractive when combined with a lookup table\ncontaining precomputed, globally optimal waveforms:\nthe precomputed waveforms can be used as an initial guess\nfor an online optimization method\nwhen new waveforms (corresponding to updated motor parameters) are required.\n\nWe demonstrate our approach numerically on the experimentally validated \nmotor model of \\cite{mecrow2001modeling},\nwhich describes an SRM with fully pitched phases.\n\n\\subsection{Previous work}\n\n\\paragraph{Current optimization for SRMs.}\nSeveral authors have considered optimization of SRM current waveforms.\nThe most similar work to our own is \na series of papers by Lovatt and Stephenson \n\\cite{lovatt1994computer},\n\\cite{lovatt1997computer},\n\\cite{lovatt1997optimum},\nthat use local optimization methods to find minimum RMS current waveforms\nthat acheive a given (average or pointwise) desired torque,\nsubject to voltage and current constraints.\n\nStankovic et al.\\\nderive optimal waveforms for a simple SRM,\nunder several restrictive assumptions\n(\\eg, sufficient drive voltage, \nno more than two simultaneously conducting phases);\nunder these assumptions, it is only necessary to discretize the\nwaveforms during commutation.\n\n\n\n\nKaiserseder et al.\\ \\cite{kaiserseder2003current}\nalso seek optimal current waveforms that produce smooth torque\noutput and can be chosen to either minimize current RMS values,\nor minimize vibration resulting from radial forces.\nThe method of optimization is not described.\nA similar optimization problem is posed by Chapman and Sudhoff \n\\cite{chapman2002design}\nin the frequency domain;\nsequential quadratic programming is used to (approximately) solve it.\n\n\n\nMany other works optimize over current waveforms parametrized by only\na few free variables, \nsuch as the firing angle or the corner locations of a trapezoidal waveform.\nThis of course requires predetermined current waveform shapes,\nwhich are not optimal in general.\nFor some examples of this approach, see \n\\cite{mademlis2003performance}, \\cite{le1993current}, and \\cite{choi2002new}.\n\nWe also note that our approach can be viewed as an extension\nof the authors' previous work on optimal current waveform design\nfor permanent magnet motors; see \\cite{moehle2015optimal}.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\paragraph{Hybrid control and MPC for SRMs.}\nHere we list some other optimization-based techniques \napplied to control SRMs.\nPeyrl et al.\\ propose a finite-set model predictive control approach,\nwhich involves online optimization directly over future inverter switching states.\nDue to the computationally demanding nature of this technique,\nonly very short prediction horizons (\\ie, up to three steps) are considered.\nThe work by Vasak et al.\\ \\cite{vasak2007bounding},\nuses a piecewise-affine model of the torque characteristic \n(as we do)\nto derive a feedback controller that guarantees a torque ripple.\nHowever, their proposed model is relatively low fidelity:\nthe dynamics are modelled as a first-order linear system,\nand the proposed torque characteristic \n(our $g_k(\\mathcal F_k, \\theta)$) has only nine regions\n(For comparison, in \\S\\ref{s-example} we use over one hundred regions.)\n\n\n\n\n\n\n\n\\paragraph{MICP.}\nConvex optimization problems can be solved efficiently and reliably using standard techniques \n\\cite{boyd2004convex}\n(and additionally, specialized modelling software,\nsuch as CVX \\cite{cvx},  \nenables rapid development of convex optimization applications).\nAn optimization problem with some integer variables,\nbut which is otherwise convex, is called a mixed integer convex program (MICP).\nBecause of the presence of integer variables,\nMICPs are nonconvex optimization problems, \nand are difficult to solve (globally) in general\n(\\ie, these problems are are NP-hard; see\n\\cite{kleinberg2006algorithm}).\nIndeed, all known global solution techniques for MICPs\n(such as the branch-and-bound algorithm),\nhave exponential worst-case runtime.\nNevertheless, many of these algorithms are effective in practice,\nand we found them to work well \nfor the the optimization problem we formulate in this paper.\nIn addition to global solution algorithms,\nmany approaches exist to (approximately) solve MICPs\nmore quickly;\nsee \\cite{takapoui2015simple}  \nand references therein.\n\nOur formulation is based on approximating the nonlinear constraint functions\n(the torque characteristics and the magnetic flux characteristics)\nby piecewise affine functions.\nThese constraints can then be represented as a combination\nof integer and linear constraints using disjunctive programming.\nFor details on disjunctive programming consult\nBalas \\cite{balas1979disjunctive} and Ceria and Soares \\cite{ceria1999convex}.\nDisjunctive programming has found many applications in the past decade or so,\nsuch as process engineering \\cite{grossmann2013systematic},\nfacility location, unit commitment and portfolio management \\cite{gunluk2012perspective},\nand optimal control \\cite{moehle2015perspective}.\n\n\n\n\n\n\n\n\n\n\\subsection{Contribution}\nOur reformulation of the torque control problem as a MICP opens the door for two\ninteresting possiblilites.\nThe first is that global solution methods can be used to find the optimal waveforms,\ntypically in a reasonable amount of time.\nThis is of course advantageous in its own right,\nas it allows provably optimal waveforms to be implemented.\nIt is also useful to verify the limits of performance of motors,\nand as a benchmark for comparing heuristic methods.\nThe second possibility is that fast first-order methods, \nwhich are simple enough to run on embedded platforms,\ncan be used as a heuristic to update the globally optimal waveforms as \nparameters vary over the life of the motor.\nOur proposed model is also much more general than\nthe optimization models considered in previous works,\nand can therefore be used to capture more of the characteristc features of\nswitched reluctance motors, such as magnetic coupling.\nWe hope this generality will be useful for researchers investigating\nnovel switched reluctance motor topologies,\nby giving them a practical method for optimal waveform generation,\nand by characterizing the theoretical performance of their designs.\n\n\\section{Motor model}\n\\label{s-model}\nWe consider an abstract, lumped parameter model of a switched reluctance motor.\nThe rotor, which does not contain any windings or magnetic elements,\nhas angular position $\\theta$ and angular velocity $\\omega$;\nwe assume $\\omega$ is constant. \nThe stator contains $n$ electrical circuit branches, called {\\it windings}.\nThe winding currents are $i \\in \\reals^n$,\nthe winding voltages are $v \\in \\reals^n$,\nand the magnetic flux linkages through the windings are $\\lambda \\in \\reals^n$.\nThe stator also contains $m$ magnetic elements,\nwith magnetomotive force (MMF) vector $\\mathcal F \\in \\reals^m$,\nand magnetic flux vector $\\psi \\in \\reals^m$.\n\nWe will assume that \n$i$, $v$, $\\lambda$, $\\mathcal F$, and $\\psi$\nare $2\\pi$-periodic functions of $\\theta$.\nWe use a prime ($'$) to denote differentiation of these functions with respect\nto $\\theta$. \nTo lighten notation, we often drop explicit dependence on $\\theta$.\n\n\n\\paragraph{Electrical dynamics.}\nThe electrical circuit dynamics are\n\n", "index": 1, "text": "\\begin{equation}\n\\label{e-dynamics}\nv = Ri + \\omega \\lambda',\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E1.m1\" class=\"ltx_Math\" alttext=\"v=Ri+\\omega\\lambda^{\\prime},\" display=\"block\"><mrow><mrow><mi>v</mi><mo>=</mo><mrow><mrow><mi>R</mi><mo>\u2062</mo><mi>i</mi></mrow><mo>+</mo><mrow><mi>\u03c9</mi><mo>\u2062</mo><msup><mi>\u03bb</mi><mo>\u2032</mo></msup></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nAny flux vector $\\psi$ consistent with the magnetic circuit topology\nmust be a linear combination of the rows of $M$, so that\n\n", "itemtype": "equation", "pos": 11249, "prevtext": "\nwhere $R\\in\\symm_{++}^n$ is the (diagonal) resistance matrix.\nNote that $\\omega\\lambda'$ is the time derivative of $\\lambda$.\n\n\n\\paragraph{Magnetic circuit.}\nWe assume the magnetic elements are connected by a (planar) magnetic circuit,\nwhich we describe in terms of mesh analysis\n\n(for an introduction to mesh analysis, see \\cite{desoer1984basic}).\n\n\n\nIn particular, we assume that there are $l$ circuit meshes\n(not including the outer mesh)\neach with an associated reference direction.\nThe (reduced) \\emph{mesh matrix} $M\\in \\reals^{l \\times m}$\nis such that \n\n\n\n\n", "index": 3, "text": "\n\\[\nM_{jk} = \n\\begin{cases}\n 1 & \\text{if magnetic element $k$ is in mesh $j$, with coinciding reference directions} \\\\\n-1 & \\text{if magnetic element $k$ is in mesh $j$, with opposite reference directions} \\\\\n 0 & \\text{if magnetic element $k$ is not in mesh $j$}.\n\\end{cases}\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex1.m1\" class=\"ltx_Math\" alttext=\"M_{jk}=\\begin{cases}1&amp;\\text{if magnetic element $k$ is in mesh $j$, with %&#10;coinciding reference directions}\\\\&#10;-1&amp;\\text{if magnetic element $k$ is in mesh $j$, with opposite reference %&#10;directions}\\\\&#10;0&amp;\\text{if magnetic element $k$ is not in mesh $j$}.\\end{cases}\" display=\"block\"><mrow><msub><mi>M</mi><mrow><mi>j</mi><mo>\u2062</mo><mi>k</mi></mrow></msub><mo>=</mo><mrow><mo>{</mo><mtable columnspacing=\"5pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"left\"><mn>1</mn></mtd><mtd columnalign=\"left\"><mrow><mtext>if magnetic element\u00a0</mtext><mi>k</mi><mtext>\u00a0is in mesh\u00a0</mtext><mi>j</mi><mtext>, with coinciding reference directions</mtext></mrow></mtd></mtr><mtr><mtd columnalign=\"left\"><mrow><mo>-</mo><mn>1</mn></mrow></mtd><mtd columnalign=\"left\"><mrow><mtext>if magnetic element\u00a0</mtext><mi>k</mi><mtext>\u00a0is in mesh\u00a0</mtext><mi>j</mi><mtext>, with opposite reference directions</mtext></mrow></mtd></mtr><mtr><mtd columnalign=\"left\"><mn>0</mn></mtd><mtd columnalign=\"left\"><mrow><mrow><mtext>if magnetic element\u00a0</mtext><mi>k</mi><mtext>\u00a0is not in mesh\u00a0</mtext><mi>j</mi></mrow><mo>.</mo></mrow></mtd></mtr></mtable></mrow></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nfor some $\\phi(\\theta) \\in \\reals^l$,\nwhich we call the \\emph{mesh magnetic flux vector}.\n(Because $M$ has full row rank in general, \nthere is a unique $\\phi$ for any such $\\psi$.)\n\nIn addition, the total MMF around each mesh \nis the sum of the MMFs of the magnetic elements\nthat make up the mesh (accounting for reference direction),\nso the vector of mesh MMFs is given by the vector $M \\mathcal F$.\n\n\\paragraph{Electro-magnetic geometry.}\nWe define the \\emph{electro-magnetic geometry matrix}\n$C \\in \\reals^{l \\times n}$\nsuch that $C_{jk}$ gives the amount of current passing through\nmesh $j$ per unit of current in winding $k$.\nThe total current passing through each of the $l$ meshes is therefore\ngiven by the vector $Ci$,\nwhich is related to the total MMF around the meshes by Amp\\`ere's law:\n\n", "itemtype": "equation", "pos": 11656, "prevtext": "\nAny flux vector $\\psi$ consistent with the magnetic circuit topology\nmust be a linear combination of the rows of $M$, so that\n\n", "index": 5, "text": "\\begin{equation}\n\\label{e-loop-kcl}\n\\psi = M^T \\phi,\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E2.m1\" class=\"ltx_Math\" alttext=\"\\psi=M^{T}\\phi,\" display=\"block\"><mrow><mrow><mi>\u03c8</mi><mo>=</mo><mrow><msup><mi>M</mi><mi>T</mi></msup><mo>\u2062</mo><mi>\u03d5</mi></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nSimilarly, the flux linkage is related to the mesh magnetic flux vector by\n\n", "itemtype": "equation", "pos": 12522, "prevtext": "\nfor some $\\phi(\\theta) \\in \\reals^l$,\nwhich we call the \\emph{mesh magnetic flux vector}.\n(Because $M$ has full row rank in general, \nthere is a unique $\\phi$ for any such $\\psi$.)\n\nIn addition, the total MMF around each mesh \nis the sum of the MMFs of the magnetic elements\nthat make up the mesh (accounting for reference direction),\nso the vector of mesh MMFs is given by the vector $M \\mathcal F$.\n\n\\paragraph{Electro-magnetic geometry.}\nWe define the \\emph{electro-magnetic geometry matrix}\n$C \\in \\reals^{l \\times n}$\nsuch that $C_{jk}$ gives the amount of current passing through\nmesh $j$ per unit of current in winding $k$.\nThe total current passing through each of the $l$ meshes is therefore\ngiven by the vector $Ci$,\nwhich is related to the total MMF around the meshes by Amp\\`ere's law:\n\n", "index": 7, "text": "\\begin{equation}\n\\label{e-faraday}\nM \\mathcal F = Ci.\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E3.m1\" class=\"ltx_Math\" alttext=\"M\\mathcal{F}=Ci.\" display=\"block\"><mrow><mrow><mrow><mi>M</mi><mo>\u2062</mo><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi></mrow><mo>=</mo><mrow><mi>C</mi><mo>\u2062</mo><mi>i</mi></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\n\n\n\\paragraph{Magnetic characteristic.}\nThe magnetic flux and the MMF of the $k$-th magnetic element are related by\n\n", "itemtype": "equation", "pos": 12666, "prevtext": "\nSimilarly, the flux linkage is related to the mesh magnetic flux vector by\n\n", "index": 9, "text": "\\begin{equation}\n\\label{e-flux-linkage}\n\\lambda = C^T \\phi.\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E4.m1\" class=\"ltx_Math\" alttext=\"\\lambda=C^{T}\\phi.\" display=\"block\"><mrow><mrow><mi>\u03bb</mi><mo>=</mo><mrow><msup><mi>C</mi><mi>T</mi></msup><mo>\u2062</mo><mi>\u03d5</mi></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nwhere the magnetic characteristic $f_k$ \nis a monotonically increasing function in its first argument. \n\nAs a special case, if the functions $f_k$ are affine in $\\mathcal F_k$\nfor each $\\theta$, with constant linear term\n(so that $\\psi(\\theta) = A \\mathcal F(\\theta) + b(\\theta)$,\nwith $A$ diagonal and positive definite),\nas in the case of a permanent magnet motor,\nthen \n\nwe have $\\lambda(\\theta) = Li(\\theta) + k(\\theta)$,\nwhere \n$L = C^T (MA^{-1}M^T)^{-1}C$\nis the \\emph{inductance matrix} and \n$k(\\theta) = C^T (MA^{-1}M^T)^{-1}A^{-1} Mb(\\theta)$\nis the \\emph{back-emf constant}. \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\paragraph{Torque.}\nThe magnetic co-energy is\n", "itemtype": "equation", "pos": 12856, "prevtext": "\n\n\n\\paragraph{Magnetic characteristic.}\nThe magnetic flux and the MMF of the $k$-th magnetic element are related by\n\n", "index": 11, "text": "\\begin{equation}\n\\label{e-magnetic-characteristic}\n\\psi_k(\\theta) = f_k\\big(\\mathcal F_k(\\theta), \\theta\\big),\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E5.m1\" class=\"ltx_Math\" alttext=\"\\psi_{k}(\\theta)=f_{k}\\big{(}\\mathcal{F}_{k}(\\theta),\\theta\\big{)},\" display=\"block\"><mrow><mrow><mrow><msub><mi>\u03c8</mi><mi>k</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><msub><mi>f</mi><mi>k</mi></msub><mo>\u2062</mo><mrow><mo maxsize=\"120%\" minsize=\"120%\">(</mo><mrow><msub><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mi>k</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>,</mo><mi>\u03b8</mi><mo maxsize=\"120%\" minsize=\"120%\">)</mo></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nThe electromagnetic torque can be expressed as\n\n", "itemtype": "equation", "pos": 13657, "prevtext": "\nwhere the magnetic characteristic $f_k$ \nis a monotonically increasing function in its first argument. \n\nAs a special case, if the functions $f_k$ are affine in $\\mathcal F_k$\nfor each $\\theta$, with constant linear term\n(so that $\\psi(\\theta) = A \\mathcal F(\\theta) + b(\\theta)$,\nwith $A$ diagonal and positive definite),\nas in the case of a permanent magnet motor,\nthen \n\nwe have $\\lambda(\\theta) = Li(\\theta) + k(\\theta)$,\nwhere \n$L = C^T (MA^{-1}M^T)^{-1}C$\nis the \\emph{inductance matrix} and \n$k(\\theta) = C^T (MA^{-1}M^T)^{-1}A^{-1} Mb(\\theta)$\nis the \\emph{back-emf constant}. \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\paragraph{Torque.}\nThe magnetic co-energy is\n", "index": 13, "text": "\n\\[\nE^*(\\mathcal F, \\theta) \n  \n  = \\sum_{k=1}^m \\int_0^{\\mathcal F_k} f_k(x, \\theta) \\; dx.\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex2.m1\" class=\"ltx_Math\" alttext=\"E^{*}(\\mathcal{F},\\theta)\\par&#10;=\\sum_{k=1}^{m}\\int_{0}^{\\mathcal{F}_{k}}f_{k}(x%&#10;,\\theta)\\;dx.\" display=\"block\"><mrow><mrow><mrow><msup><mi>E</mi><mo>*</mo></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mo>,</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><munderover><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mrow><msubsup><mo largeop=\"true\" symmetric=\"true\">\u222b</mo><mn>0</mn><msub><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mi>k</mi></msub></msubsup><mrow><msub><mi>f</mi><mi>k</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo>,</mo><mi>\u03b8</mi><mo rspace=\"5.3pt\" stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mrow><mo>\ud835\udc51</mo><mi>x</mi></mrow></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nBy introducing a \\emph{phase torque} function $g_k$ such that \n", "itemtype": "equation", "pos": 13800, "prevtext": "\nThe electromagnetic torque can be expressed as\n\n", "index": 15, "text": "\\begin{equation*}\n\n\\tau(\\theta) \n  = -\\frac{\\partial}{\\partial \\theta} E^*\\big(\\mathcal F(\\theta), \\theta \\big)\n  = -\\sum_{k=1}^m \\frac{\\partial}{\\partial \\theta}\n    \\int_0^{\\mathcal F_k} f_k(x, \\theta) \\; dx.\n\\end{equation*}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex3.m1\" class=\"ltx_Math\" alttext=\"\\par&#10;\\tau(\\theta)=-\\frac{\\partial}{\\partial\\theta}E^{*}\\big{(}\\mathcal{F}(%&#10;\\theta),\\theta\\big{)}=-\\sum_{k=1}^{m}\\frac{\\partial}{\\partial\\theta}\\int_{0}^{%&#10;\\mathcal{F}_{k}}f_{k}(x,\\theta)\\;dx.\" display=\"block\"><mrow><mrow><mrow><mi>\u03c4</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><mo>-</mo><mrow><mfrac><mo>\u2202</mo><mrow><mo>\u2202</mo><mo>\u2061</mo><mi>\u03b8</mi></mrow></mfrac><mo>\u2062</mo><msup><mi>E</mi><mo>*</mo></msup><mo>\u2062</mo><mrow><mo maxsize=\"120%\" minsize=\"120%\">(</mo><mrow><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>,</mo><mi>\u03b8</mi><mo maxsize=\"120%\" minsize=\"120%\">)</mo></mrow></mrow></mrow><mo>=</mo><mrow><mo>-</mo><mrow><munderover><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mrow><mfrac><mo>\u2202</mo><mrow><mo>\u2202</mo><mo>\u2061</mo><mi>\u03b8</mi></mrow></mfrac><mo>\u2062</mo><mrow><msubsup><mo largeop=\"true\" symmetric=\"true\">\u222b</mo><mn>0</mn><msub><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mi>k</mi></msub></msubsup><mrow><msub><mi>f</mi><mi>k</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo>,</mo><mi>\u03b8</mi><mo rspace=\"5.3pt\" stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mrow><mo>\ud835\udc51</mo><mi>x</mi></mrow></mrow></mrow></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nwe have \n\n", "itemtype": "equation", "pos": 14089, "prevtext": "\nBy introducing a \\emph{phase torque} function $g_k$ such that \n", "index": 17, "text": "\n\\[\ng_k(y, \\theta)\n  = -\\frac{\\partial}{\\partial \\theta}\n    \\int_0^y f_k(x, \\theta) \\; dx,\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex4.m1\" class=\"ltx_Math\" alttext=\"g_{k}(y,\\theta)=-\\frac{\\partial}{\\partial\\theta}\\int_{0}^{y}f_{k}(x,\\theta)\\;dx,\" display=\"block\"><mrow><mrow><mrow><msub><mi>g</mi><mi>k</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mo>,</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><mo>-</mo><mrow><mfrac><mo>\u2202</mo><mrow><mo>\u2202</mo><mo>\u2061</mo><mi>\u03b8</mi></mrow></mfrac><mo>\u2062</mo><mrow><msubsup><mo largeop=\"true\" symmetric=\"true\">\u222b</mo><mn>0</mn><mi>y</mi></msubsup><mrow><msub><mi>f</mi><mi>k</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo>,</mo><mi>\u03b8</mi><mo rspace=\"5.3pt\" stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mrow><mo>\ud835\udc51</mo><mi>x</mi></mrow></mrow></mrow></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\n\n\\paragraph{Voltage limits.}\nWe assume the winding voltages are bounded:\n\n", "itemtype": "equation", "pos": 14193, "prevtext": "\nwe have \n\n", "index": 19, "text": "\\begin{equation}\n\\label{e-sum-phase-torque}\n\\tau(\\theta) = \\sum_{k=1}^m g_k \\big(\\mathcal F_k(\\theta), \\theta \\big).\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E6.m1\" class=\"ltx_Math\" alttext=\"\\tau(\\theta)=\\sum_{k=1}^{m}g_{k}\\big{(}\\mathcal{F}_{k}(\\theta),\\theta\\big{)}.\" display=\"block\"><mrow><mrow><mrow><mi>\u03c4</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><munderover><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mrow><msub><mi>g</mi><mi>k</mi></msub><mo>\u2062</mo><mrow><mo maxsize=\"120%\" minsize=\"120%\">(</mo><mrow><msub><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mi>k</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>,</mo><mi>\u03b8</mi><mo maxsize=\"120%\" minsize=\"120%\">)</mo></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\n\n\n\\paragraph{Torque ripple.}\nThe average torque over one cycle is \n", "itemtype": "equation", "pos": 14398, "prevtext": "\n\n\\paragraph{Voltage limits.}\nWe assume the winding voltages are bounded:\n\n", "index": 21, "text": "\\begin{equation}\n\\label{e-voltage-limit}\n| v_k(\\theta) | \\leq v^{\\rm max}, \\quad k = 1, \\ldots, n.\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E7.m1\" class=\"ltx_Math\" alttext=\"|v_{k}(\\theta)|\\leq v^{\\rm max},\\quad k=1,\\ldots,n.\" display=\"block\"><mrow><mrow><mrow><mrow><mo stretchy=\"false\">|</mo><mrow><msub><mi>v</mi><mi>k</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">|</mo></mrow><mo>\u2264</mo><msup><mi>v</mi><mi>max</mi></msup></mrow><mo rspace=\"12.5pt\">,</mo><mrow><mi>k</mi><mo>=</mo><mrow><mn>1</mn><mo>,</mo><mi mathvariant=\"normal\">\u2026</mi><mo>,</mo><mi>n</mi></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nThe (quadratic) torque ripple is\n", "itemtype": "equation", "pos": 14578, "prevtext": "\n\n\n\\paragraph{Torque ripple.}\nThe average torque over one cycle is \n", "index": 23, "text": "\n\\[\n\\overline \\tau = \\frac1{2\\pi } \n\\int_0^{2\\pi} \\tau(\\theta) \\; d\\theta .\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex5.m1\" class=\"ltx_Math\" alttext=\"\\overline{\\tau}=\\frac{1}{2\\pi}\\int_{0}^{2\\pi}\\tau(\\theta)\\;d\\theta.\" display=\"block\"><mrow><mrow><mover accent=\"true\"><mi>\u03c4</mi><mo>\u00af</mo></mover><mo>=</mo><mrow><mfrac><mn>1</mn><mrow><mn>2</mn><mo>\u2062</mo><mi>\u03c0</mi></mrow></mfrac><mo>\u2062</mo><mrow><msubsup><mo largeop=\"true\" symmetric=\"true\">\u222b</mo><mn>0</mn><mrow><mn>2</mn><mo>\u2062</mo><mi>\u03c0</mi></mrow></msubsup><mrow><mi>\u03c4</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo rspace=\"5.3pt\" stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mrow><mo>\ud835\udc51</mo><mi>\u03b8</mi></mrow></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\n\n\\paragraph{Power loss.}\nThe power loss is the average resistive loss from the phase\ncurrents over one cycle:\n", "itemtype": "equation", "pos": 14689, "prevtext": "\nThe (quadratic) torque ripple is\n", "index": 25, "text": "\n\\[\nr = \\frac1{2\\pi} \n\\int_0^{2\\pi} \\big(\\tau(\\theta) -\\overline \\tau \\big)^2 \\; d\\theta.\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex6.m1\" class=\"ltx_Math\" alttext=\"r=\\frac{1}{2\\pi}\\int_{0}^{2\\pi}\\big{(}\\tau(\\theta)-\\overline{\\tau}\\big{)}^{2}%&#10;\\;d\\theta.\" display=\"block\"><mrow><mrow><mi>r</mi><mo>=</mo><mrow><mfrac><mn>1</mn><mrow><mn>2</mn><mo>\u2062</mo><mi>\u03c0</mi></mrow></mfrac><mo>\u2062</mo><mrow><msubsup><mo largeop=\"true\" symmetric=\"true\">\u222b</mo><mn>0</mn><mrow><mn>2</mn><mo>\u2062</mo><mi>\u03c0</mi></mrow></msubsup><mrow><mpadded width=\"+2.8pt\"><msup><mrow><mo maxsize=\"120%\" minsize=\"120%\">(</mo><mrow><mrow><mi>\u03c4</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>-</mo><mover accent=\"true\"><mi>\u03c4</mi><mo>\u00af</mo></mover></mrow><mo maxsize=\"120%\" minsize=\"120%\">)</mo></mrow><mn>2</mn></msup></mpadded><mo>\u2062</mo><mrow><mo>\ud835\udc51</mo><mi>\u03b8</mi></mrow></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\n\n\\section{Optimal torque control}\nThe optimal torque control problem is to \nchoose the phase voltages, phase currents, and eddy currents \nto achieve a desired average\ntorque while minimizing the average power loss and torque ripple:\n\n", "itemtype": "equation", "pos": 14891, "prevtext": "\n\n\\paragraph{Power loss.}\nThe power loss is the average resistive loss from the phase\ncurrents over one cycle:\n", "index": 27, "text": "\n\\[\nP_{\\rm loss} = \\frac1{2\\pi}\n\\int_0^{2\\pi} \ni(\\theta)^T R i(\\theta) \\; d\\theta .\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex7.m1\" class=\"ltx_Math\" alttext=\"P_{\\rm loss}=\\frac{1}{2\\pi}\\int_{0}^{2\\pi}i(\\theta)^{T}Ri(\\theta)\\;d\\theta.\" display=\"block\"><mrow><mrow><msub><mi>P</mi><mi>loss</mi></msub><mo>=</mo><mrow><mfrac><mn>1</mn><mrow><mn>2</mn><mo>\u2062</mo><mi>\u03c0</mi></mrow></mfrac><mo>\u2062</mo><mrow><msubsup><mo largeop=\"true\" symmetric=\"true\">\u222b</mo><mn>0</mn><mrow><mn>2</mn><mo>\u2062</mo><mi>\u03c0</mi></mrow></msubsup><mrow><mi>i</mi><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow><mi>T</mi></msup><mo>\u2062</mo><mi>R</mi><mo>\u2062</mo><mi>i</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo rspace=\"5.3pt\" stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mrow><mo>\ud835\udc51</mo><mi>\u03b8</mi></mrow></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nThe parameters are the trade-off parameter $\\alpha\\geq 0$,\nthe rotor angular velocity $\\omega$, \nthe desired average torque $\\tau^{\\rm des}$,\nthe resistance matrix $R$,\nthe mesh matrix $M$,\nthe electro-magnetic geometry matrix $C$,\nand the magnetic characteristic functions $f_k$, for $k = 1, \\ldots, m$.\nThe problem variables are the $2\\pi$-periodic functions\n$i$, $v$, $\\lambda$, $\\mathcal F$, $\\psi$, and $\\phi$.\n\nProblem (\\ref{e-opt-torque-ctrl})\nis an infinite-dimensional optimization problem.\nThe problem is nonconvex\ndue to the magnetic characteristic (\\ref{e-magnetic-characteristic})\nand the torque relation (\\ref{e-sum-phase-torque}),\nand therefore is expected to be difficult to solve globally.\n\nOne approach is to find a locally optimal solution,\nusing common local optimization methods such as sequential quadratic programming\nSoftware that implements these methods is readily available;\nsee \\cite{nocedal2006numerical}.\n\n\n\nIn this paper, we pursue a different approach,\nand will instead show how to approach (\\ref{e-opt-torque-ctrl})\nby discretizing the variables,\nand (approximately) reformulating the problem as a mixed-integer convex program (MICP),\na problem class for which efficient algorithms are available\nto find a good (or even globally optimal) solution.\n\n\n\nWe note that if the magnetic characteristic is affine,\nwith only the offset depending on rotor position,\nthe torque control problem reduces to a version of the formulation given in \n\\cite{moehle2015optimal}.\nOur current problem can therefore be interpreted as an extension\nof that formulation to cover magnetic nonlinearities and reluctance torque.\n\n\\section{Conversion to MICP}\n\\label{s-micp}\nIn this section we show how to convert (\\ref{e-opt-torque-ctrl}) to an\n(infinite-dimensional) mixed-integer convex program.\nTo do this,\nwe use piecewise-affine approximations of the nonlinear equality constraints.\n\n\\subsection{Approximation of magnetic characteristic}\nHere we approximate the equation magnetic characteristic\n(\\ref{e-magnetic-characteristic})\nby a set of linear and integer constraints.\nWe replace the constraint \n$\\psi_k = f_k(\\mathcal F_k, \\theta)$\nwith the constraint\n\n", "itemtype": "equation", "pos": 15211, "prevtext": "\n\n\\section{Optimal torque control}\nThe optimal torque control problem is to \nchoose the phase voltages, phase currents, and eddy currents \nto achieve a desired average\ntorque while minimizing the average power loss and torque ripple:\n\n", "index": 29, "text": "\\begin{equation}\n\\begin{array}{ll}\n\\mbox{minimize} & P_{\\rm loss} + \\alpha  r \\\\ \n\\mbox{subject to} & \\overline \\tau = \\tau^{\\rm des},  \\\\\n                  & \\mbox{equations\n                    (\\ref{e-dynamics}),\n                    (\\ref{e-loop-kcl}),\n                    (\\ref{e-faraday}),\n                    (\\ref{e-flux-linkage}),\n                    \n                    \n                    (\\ref{e-magnetic-characteristic}),\n                    \n                    (\\ref{e-sum-phase-torque}),\n                    \n                    and\n                    (\\ref{e-voltage-limit}).\n                    } \\\\\n\\end{array}\n\\label{e-opt-torque-ctrl}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E8.m1\" class=\"ltx_Math\" alttext=\"\\begin{array}[]{ll}\\mbox{minimize}&amp;P_{\\rm loss}+\\alpha r\\\\&#10;\\mbox{subject to}&amp;\\overline{\\tau}=\\tau^{\\rm des},\\\\&#10;&amp;\\mbox{equations&#10;(\\ref{e-dynamics}),&#10;(\\ref{e-loop-kcl}),&#10;(\\ref{e-faraday}),&#10;(\\ref{e-flux-linkage}),&#10;\\par&#10;\\par&#10;(\\ref{e-magnetic-characteristic}),&#10;\\par&#10;(\\ref{e-sum-phase-torque}),&#10;\\par&#10; and&#10;(\\ref{e-voltage-limit}).&#10;}\\\\&#10;\\end{array}\" display=\"block\"><mtable columnspacing=\"5pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"left\"><mtext>minimize</mtext></mtd><mtd columnalign=\"left\"><mrow><msub><mi>P</mi><mi>loss</mi></msub><mo>+</mo><mrow><mi>\u03b1</mi><mo>\u2062</mo><mi>r</mi></mrow></mrow></mtd></mtr><mtr><mtd columnalign=\"left\"><mtext>subject to</mtext></mtd><mtd columnalign=\"left\"><mrow><mrow><mover accent=\"true\"><mi>\u03c4</mi><mo>\u00af</mo></mover><mo>=</mo><msup><mi>\u03c4</mi><mi>des</mi></msup></mrow><mo>,</mo></mrow></mtd></mtr><mtr><mtd/><mtd columnalign=\"left\"><mrow><mtext>equations\n(</mtext><mtext><span xmlns=\"http://www.w3.org/1999/xhtml\" class=\"ltx_ref ltx_ref_self\"><span class=\"ltx_text ltx_ref_tag\">1</span></span></mtext><mtext>),\n(</mtext><mtext><span xmlns=\"http://www.w3.org/1999/xhtml\" class=\"ltx_ref ltx_ref_self\"><span class=\"ltx_text ltx_ref_tag\">2</span></span></mtext><mtext>),\n(</mtext><mtext><span xmlns=\"http://www.w3.org/1999/xhtml\" class=\"ltx_ref ltx_ref_self\"><span class=\"ltx_text ltx_ref_tag\">3</span></span></mtext><mtext>),\n(</mtext><mtext><span xmlns=\"http://www.w3.org/1999/xhtml\" class=\"ltx_ref ltx_ref_self\"><span class=\"ltx_text ltx_ref_tag\">4</span></span></mtext><mtext>),\n(</mtext><mtext><span xmlns=\"http://www.w3.org/1999/xhtml\" class=\"ltx_ref ltx_ref_self\"><span class=\"ltx_text ltx_ref_tag\">5</span></span></mtext><mtext>),\n(</mtext><mtext><span xmlns=\"http://www.w3.org/1999/xhtml\" class=\"ltx_ref ltx_ref_self\"><span class=\"ltx_text ltx_ref_tag\">6</span></span></mtext><mtext>),\nand\n(</mtext><mtext><span xmlns=\"http://www.w3.org/1999/xhtml\" class=\"ltx_ref ltx_ref_self\"><span class=\"ltx_text ltx_ref_tag\">7</span></span></mtext><mtext>).\u00a0</mtext></mrow></mtd></mtr></mtable></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nwhere $\\tilde f_k$ is a piecewise affine approximation of $f_k$.\nIn particular, we have\n", "itemtype": "equation", "pos": 18049, "prevtext": "\nThe parameters are the trade-off parameter $\\alpha\\geq 0$,\nthe rotor angular velocity $\\omega$, \nthe desired average torque $\\tau^{\\rm des}$,\nthe resistance matrix $R$,\nthe mesh matrix $M$,\nthe electro-magnetic geometry matrix $C$,\nand the magnetic characteristic functions $f_k$, for $k = 1, \\ldots, m$.\nThe problem variables are the $2\\pi$-periodic functions\n$i$, $v$, $\\lambda$, $\\mathcal F$, $\\psi$, and $\\phi$.\n\nProblem (\\ref{e-opt-torque-ctrl})\nis an infinite-dimensional optimization problem.\nThe problem is nonconvex\ndue to the magnetic characteristic (\\ref{e-magnetic-characteristic})\nand the torque relation (\\ref{e-sum-phase-torque}),\nand therefore is expected to be difficult to solve globally.\n\nOne approach is to find a locally optimal solution,\nusing common local optimization methods such as sequential quadratic programming\nSoftware that implements these methods is readily available;\nsee \\cite{nocedal2006numerical}.\n\n\n\nIn this paper, we pursue a different approach,\nand will instead show how to approach (\\ref{e-opt-torque-ctrl})\nby discretizing the variables,\nand (approximately) reformulating the problem as a mixed-integer convex program (MICP),\na problem class for which efficient algorithms are available\nto find a good (or even globally optimal) solution.\n\n\n\nWe note that if the magnetic characteristic is affine,\nwith only the offset depending on rotor position,\nthe torque control problem reduces to a version of the formulation given in \n\\cite{moehle2015optimal}.\nOur current problem can therefore be interpreted as an extension\nof that formulation to cover magnetic nonlinearities and reluctance torque.\n\n\\section{Conversion to MICP}\n\\label{s-micp}\nIn this section we show how to convert (\\ref{e-opt-torque-ctrl}) to an\n(infinite-dimensional) mixed-integer convex program.\nTo do this,\nwe use piecewise-affine approximations of the nonlinear equality constraints.\n\n\\subsection{Approximation of magnetic characteristic}\nHere we approximate the equation magnetic characteristic\n(\\ref{e-magnetic-characteristic})\nby a set of linear and integer constraints.\nWe replace the constraint \n$\\psi_k = f_k(\\mathcal F_k, \\theta)$\nwith the constraint\n\n", "index": 31, "text": "\\begin{equation}\n\\label{e-approx-magnetic-characteristic}\n\\psi_k = \\tilde f_k(\\mathcal F_k, \\theta),\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E9.m1\" class=\"ltx_Math\" alttext=\"\\psi_{k}=\\tilde{f}_{k}(\\mathcal{F}_{k},\\theta),\" display=\"block\"><mrow><mrow><msub><mi>\u03c8</mi><mi>k</mi></msub><mo>=</mo><mrow><msub><mover accent=\"true\"><mi>f</mi><mo stretchy=\"false\">~</mo></mover><mi>k</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mi>k</mi></msub><mo>,</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nwhere \n$a_k^1(\\theta), \\ldots, a_k^N(\\theta)$\nand\n$b_k^1(\\theta), \\ldots, b_k^N(\\theta)$\nparametrize the affine functions, and \n$\\tilde {\\mathcal F}_k^0, \\ldots, \\tilde {\\mathcal F}_k^N$\nare the boundaries of the affine regions, so that we have\n", "itemtype": "equation", "pos": 18252, "prevtext": "\nwhere $\\tilde f_k$ is a piecewise affine approximation of $f_k$.\nIn particular, we have\n", "index": 33, "text": "\n\\[\n\\tilde f_k(x, \\theta) = \n\\begin{cases}\na_k^{1}(\\theta) x + b_k^{1}(\\theta) &\n\\tilde {\\mathcal F}_k^{0}  \\leq x \\leq \\tilde {\\mathcal F}_k^{1} \\\\\n\\hfil \\vdots  & \\hfil \\vdots\\\\\na_k^{N}(\\theta) x + b_k^{N}(\\theta) &\n\\tilde {\\mathcal F}_k^{N-1}  \\leq x \\leq \\tilde {\\mathcal F}_k^{N},\n\\end{cases}\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex8.m1\" class=\"ltx_Math\" alttext=\"\\tilde{f}_{k}(x,\\theta)=\\begin{cases}a_{k}^{1}(\\theta)x+b_{k}^{1}(\\theta)&amp;%&#10;\\tilde{\\mathcal{F}}_{k}^{0}\\leq x\\leq\\tilde{\\mathcal{F}}_{k}^{1}\\\\&#10;\\hfil\\vdots&amp;\\hfil\\vdots\\\\&#10;a_{k}^{N}(\\theta)x+b_{k}^{N}(\\theta)&amp;\\tilde{\\mathcal{F}}_{k}^{N-1}\\leq x\\leq%&#10;\\tilde{\\mathcal{F}}_{k}^{N},\\end{cases}\" display=\"block\"><mrow><mrow><msub><mover accent=\"true\"><mi>f</mi><mo stretchy=\"false\">~</mo></mover><mi>k</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo>,</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><mo>{</mo><mtable columnspacing=\"5pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"left\"><mrow><mrow><msubsup><mi>a</mi><mi>k</mi><mn>1</mn></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mi>x</mi></mrow><mo>+</mo><mrow><msubsup><mi>b</mi><mi>k</mi><mn>1</mn></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mtd><mtd columnalign=\"left\"><mrow><msubsup><mover accent=\"true\"><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mo stretchy=\"false\">~</mo></mover><mi>k</mi><mn>0</mn></msubsup><mo>\u2264</mo><mi>x</mi><mo>\u2264</mo><msubsup><mover accent=\"true\"><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mo stretchy=\"false\">~</mo></mover><mi>k</mi><mn>1</mn></msubsup></mrow></mtd></mtr><mtr><mtd columnalign=\"left\"><mi mathvariant=\"normal\">\u22ee</mi></mtd><mtd columnalign=\"left\"><mi mathvariant=\"normal\">\u22ee</mi></mtd></mtr><mtr><mtd columnalign=\"left\"><mrow><mrow><msubsup><mi>a</mi><mi>k</mi><mi>N</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mi>x</mi></mrow><mo>+</mo><mrow><msubsup><mi>b</mi><mi>k</mi><mi>N</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mtd><mtd columnalign=\"left\"><mrow><mrow><msubsup><mover accent=\"true\"><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mo stretchy=\"false\">~</mo></mover><mi>k</mi><mrow><mi>N</mi><mo>-</mo><mn>1</mn></mrow></msubsup><mo>\u2264</mo><mi>x</mi><mo>\u2264</mo><msubsup><mover accent=\"true\"><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mo stretchy=\"false\">~</mo></mover><mi>k</mi><mi>N</mi></msubsup></mrow><mo>,</mo></mrow></mtd></mtr></mtable></mrow></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nif $\\tilde {\\mathcal F}_k^{j-1} \\leq x \\leq \\tilde {\\mathcal F}_k^j$.\n\nBy introducing additional variables $z_k^j(\\theta)$ and $s_k^j(\\theta)$,\nfor $j = 1, \\ldots, N$, and $k = 1, \\ldots, m$,\nthe approximate magnetic characteristic constraint (\\ref{e-approx-magnetic-characteristic})\ncan be written as \n\n", "itemtype": "equation", "pos": 18797, "prevtext": "\nwhere \n$a_k^1(\\theta), \\ldots, a_k^N(\\theta)$\nand\n$b_k^1(\\theta), \\ldots, b_k^N(\\theta)$\nparametrize the affine functions, and \n$\\tilde {\\mathcal F}_k^0, \\ldots, \\tilde {\\mathcal F}_k^N$\nare the boundaries of the affine regions, so that we have\n", "index": 35, "text": "\n\\[\nf_k(x, \\theta) \\approx a_k^j(\\theta) x + b_k^j(\\theta)\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex9.m1\" class=\"ltx_Math\" alttext=\"f_{k}(x,\\theta)\\approx a_{k}^{j}(\\theta)x+b_{k}^{j}(\\theta)\" display=\"block\"><mrow><mrow><msub><mi>f</mi><mi>k</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo>,</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2248</mo><mrow><mrow><msubsup><mi>a</mi><mi>k</mi><mi>j</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mi>x</mi></mrow><mo>+</mo><mrow><msubsup><mi>b</mi><mi>k</mi><mi>j</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\n\n\\subsection{Approximation of torque function}\nIn the same way, we can approximate the torque constraint\n(\\ref{e-sum-phase-torque})\nusing a set of linear and integer constraints.\nTo do this, we first approximate \neach torque function $g_k$, for $k = 1, \\ldots, m$,\nas a piecewise affine function $\\tilde g_k$:\n", "itemtype": "equation", "pos": 19162, "prevtext": "\nif $\\tilde {\\mathcal F}_k^{j-1} \\leq x \\leq \\tilde {\\mathcal F}_k^j$.\n\nBy introducing additional variables $z_k^j(\\theta)$ and $s_k^j(\\theta)$,\nfor $j = 1, \\ldots, N$, and $k = 1, \\ldots, m$,\nthe approximate magnetic characteristic constraint (\\ref{e-approx-magnetic-characteristic})\ncan be written as \n\n", "index": 37, "text": "\\begin{equation}\n\\label{e-ftilde-constraints}\n\\begin{gathered}\n\\begin{aligned}\n\\psi_k(\\theta) = \\sum_{j=1}^N a_k^j(\\theta) z_k^j(\\theta) + b_k^j(\\theta) s_k^j(\\theta) \n&\\qquad&\n\\mathcal F_k(\\theta) = \\sum_{j=1}^N z_k^j(\\theta)\n&\\qquad&\n\\sum_{j=1}^N s_k^j = 1\n\\end{aligned}\n\\\\\n\\begin{aligned}\n\\tilde {\\mathcal F}_k^{j-1} s_k^j(\\theta) \\leq z_k^j(\\theta) \n\\leq \\tilde {\\mathcal F}_k^{j} s_k^j(\\theta)\n&\\qquad&\ns_k^j(\\theta) \\in \\{0, 1\\}.\n\\end{aligned}\n\\\\\n\\end{gathered}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E10.m1\" class=\"ltx_Math\" alttext=\"\\begin{gathered}\\displaystyle\\begin{aligned} \\displaystyle\\psi_{k}(\\theta)=%&#10;\\sum_{j=1}^{N}a_{k}^{j}(\\theta)z_{k}^{j}(\\theta)+b_{k}^{j}(\\theta)s_{k}^{j}(%&#10;\\theta)&amp;&amp;\\hskip 10.0pt\\mathcal{F}_{k}(\\theta)=\\sum_{j=1}^{N}z_{k}^{j}(\\theta)&amp;%&#10;&amp;\\displaystyle\\sum_{j=1}^{N}s_{k}^{j}=1\\end{aligned}\\\\&#10;\\displaystyle\\begin{aligned} \\displaystyle\\tilde{\\mathcal{F}}_{k}^{j-1}s_{k}^{%&#10;j}(\\theta)\\leq z_{k}^{j}(\\theta)\\leq\\tilde{\\mathcal{F}}_{k}^{j}s_{k}^{j}(%&#10;\\theta)&amp;&amp;\\hskip 10.0pts_{k}^{j}(\\theta)\\in\\{0,1\\}.\\end{aligned}\\\\&#10;\\end{gathered}\" display=\"block\"><mtable displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mtable columnspacing=\"0pt\" displaystyle=\"true\"><mtr><mtd columnalign=\"right\"><mrow><mrow><msub><mi>\u03c8</mi><mi>k</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><mrow><munderover><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mrow><msubsup><mi>a</mi><mi>k</mi><mi>j</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><msubsup><mi>z</mi><mi>k</mi><mi>j</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>+</mo><mrow><msubsup><mi>b</mi><mi>k</mi><mi>j</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><msubsup><mi>s</mi><mi>k</mi><mi>j</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow></mtd><mtd/><mtd columnalign=\"left\"><mrow><mrow><msub><mpadded lspace=\"10pt\" width=\"+10pt\"><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi></mpadded><mi>k</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><munderover><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mrow><msubsup><mi>z</mi><mi>k</mi><mi>j</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow></mtd><mtd/><mtd columnalign=\"left\"><mrow><mrow><munderover><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msubsup><mi>s</mi><mi>k</mi><mi>j</mi></msubsup></mrow><mo>=</mo><mn>1</mn></mrow></mtd></mtr></mtable></mtd></mtr><mtr><mtd columnalign=\"center\"><mtable columnspacing=\"0pt\" displaystyle=\"true\"><mtr><mtd columnalign=\"right\"><mrow><mrow><msubsup><mover accent=\"true\"><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mo stretchy=\"false\">~</mo></mover><mi>k</mi><mrow><mi>j</mi><mo>-</mo><mn>1</mn></mrow></msubsup><mo>\u2062</mo><msubsup><mi>s</mi><mi>k</mi><mi>j</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2264</mo><mrow><msubsup><mi>z</mi><mi>k</mi><mi>j</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2264</mo><mrow><msubsup><mover accent=\"true\"><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mo stretchy=\"false\">~</mo></mover><mi>k</mi><mi>j</mi></msubsup><mo>\u2062</mo><msubsup><mi>s</mi><mi>k</mi><mi>j</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mtd><mtd/><mtd columnalign=\"left\"><mrow><mrow><mrow><msubsup><mpadded lspace=\"10pt\" width=\"+10pt\"><mi>s</mi></mpadded><mi>k</mi><mi>j</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2208</mo><mrow><mo stretchy=\"false\">{</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy=\"false\">}</mo></mrow></mrow><mo>.</mo></mrow></mtd></mtr></mtable></mtd></mtr></mtable></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nwhere \n$c_k^1(\\theta), \\ldots, c_k^N(\\theta)$\nand\n$d_k^1(\\theta), \\ldots, d_k^N(\\theta)$\nparametrize the affine functions.\nThen the approximate torque constraint \n", "itemtype": "equation", "pos": 19954, "prevtext": "\n\n\\subsection{Approximation of torque function}\nIn the same way, we can approximate the torque constraint\n(\\ref{e-sum-phase-torque})\nusing a set of linear and integer constraints.\nTo do this, we first approximate \neach torque function $g_k$, for $k = 1, \\ldots, m$,\nas a piecewise affine function $\\tilde g_k$:\n", "index": 39, "text": "\n\\[\n\\tilde g_k(x, \\theta) = \n\\begin{cases}\nc_k^{1}(\\theta) x + d_k^{1}(\\theta) &\n\\tilde {\\mathcal F}_k^{0}  \\leq x \\leq \\tilde {\\mathcal F}_k^{1} \\\\\n\\hfil \\vdots  & \\hfil \\vdots\\\\\nc_k^{N}(\\theta) x + d_k^{N}(\\theta) &\n\\tilde {\\mathcal F}_k^{N-1}  \\leq x \\leq \\tilde {\\mathcal F}_k^{N},\n\\end{cases}\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex10.m1\" class=\"ltx_Math\" alttext=\"\\tilde{g}_{k}(x,\\theta)=\\begin{cases}c_{k}^{1}(\\theta)x+d_{k}^{1}(\\theta)&amp;%&#10;\\tilde{\\mathcal{F}}_{k}^{0}\\leq x\\leq\\tilde{\\mathcal{F}}_{k}^{1}\\\\&#10;\\hfil\\vdots&amp;\\hfil\\vdots\\\\&#10;c_{k}^{N}(\\theta)x+d_{k}^{N}(\\theta)&amp;\\tilde{\\mathcal{F}}_{k}^{N-1}\\leq x\\leq%&#10;\\tilde{\\mathcal{F}}_{k}^{N},\\end{cases}\" display=\"block\"><mrow><mrow><msub><mover accent=\"true\"><mi>g</mi><mo stretchy=\"false\">~</mo></mover><mi>k</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo>,</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><mo>{</mo><mtable columnspacing=\"5pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"left\"><mrow><mrow><msubsup><mi>c</mi><mi>k</mi><mn>1</mn></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mi>x</mi></mrow><mo>+</mo><mrow><msubsup><mi>d</mi><mi>k</mi><mn>1</mn></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mtd><mtd columnalign=\"left\"><mrow><msubsup><mover accent=\"true\"><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mo stretchy=\"false\">~</mo></mover><mi>k</mi><mn>0</mn></msubsup><mo>\u2264</mo><mi>x</mi><mo>\u2264</mo><msubsup><mover accent=\"true\"><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mo stretchy=\"false\">~</mo></mover><mi>k</mi><mn>1</mn></msubsup></mrow></mtd></mtr><mtr><mtd columnalign=\"left\"><mi mathvariant=\"normal\">\u22ee</mi></mtd><mtd columnalign=\"left\"><mi mathvariant=\"normal\">\u22ee</mi></mtd></mtr><mtr><mtd columnalign=\"left\"><mrow><mrow><msubsup><mi>c</mi><mi>k</mi><mi>N</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mi>x</mi></mrow><mo>+</mo><mrow><msubsup><mi>d</mi><mi>k</mi><mi>N</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mtd><mtd columnalign=\"left\"><mrow><mrow><msubsup><mover accent=\"true\"><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mo stretchy=\"false\">~</mo></mover><mi>k</mi><mrow><mi>N</mi><mo>-</mo><mn>1</mn></mrow></msubsup><mo>\u2264</mo><mi>x</mi><mo>\u2264</mo><msubsup><mover accent=\"true\"><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mo stretchy=\"false\">~</mo></mover><mi>k</mi><mi>N</mi></msubsup></mrow><mo>,</mo></mrow></mtd></mtr></mtable></mrow></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\ncan be included by appending\n\n", "itemtype": "equation", "pos": 20417, "prevtext": "\nwhere \n$c_k^1(\\theta), \\ldots, c_k^N(\\theta)$\nand\n$d_k^1(\\theta), \\ldots, d_k^N(\\theta)$\nparametrize the affine functions.\nThen the approximate torque constraint \n", "index": 41, "text": "\n\\[\n\\tau(\\theta) = \\sum_{k=1}^m \\tilde g_k(\\mathcal F_k, \\theta)\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex11.m1\" class=\"ltx_Math\" alttext=\"\\tau(\\theta)=\\sum_{k=1}^{m}\\tilde{g}_{k}(\\mathcal{F}_{k},\\theta)\" display=\"block\"><mrow><mrow><mi>\u03c4</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><munderover><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mrow><msub><mover accent=\"true\"><mi>g</mi><mo stretchy=\"false\">~</mo></mover><mi>k</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mi>k</mi></msub><mo>,</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nto the constraints (\\ref{e-ftilde-constraints}) above.\n\n\n\n\n\\subsection{Improving the MICP formulation}\nBy converting the nonlinear constraints to linear and integer constraints,\nwe have succeeded in our goal of making (\\ref{e-opt-torque-ctrl})\ninto an MICP.\nHowever, the runtime of a global MICP solver often depends crucially on the problem formulation.\nHere we give an additional reformulation of the objective of \n(\\ref{e-opt-torque-ctrl})\n(specifically, of the the power loss)\nthat may improve the performance of a MICP solver\ncompared with the basic formulation.\n\n\n\n\n\n\n\n\n\nAssuming that $C$ has full column rank, \nwe can use (\\ref{e-faraday}) to express the winding current as \n$i = C^\\dagger M \\mathcal F$,\nwhere $C^\\dagger$ is the pseudo-inverse of $C$\n(or any other left inverse).\nThen the power loss can be rewriten as\n", "itemtype": "equation", "pos": 20514, "prevtext": "\ncan be included by appending\n\n", "index": 43, "text": "\\begin{align}\n\\label{e-gtilde-constraints}\n\\tau(\\theta) = \\sum_{k=1}^m \\sum_{j=1}^N  \n   c_k^j(\\theta) z_k^j(\\theta) + d_k^j(\\theta) s_k^j(\\theta)\n\\end{align}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E11.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle\\tau(\\theta)=\\sum_{k=1}^{m}\\sum_{j=1}^{N}c_{k}^{j}(\\theta)z_{k}^{%&#10;j}(\\theta)+d_{k}^{j}(\\theta)s_{k}^{j}(\\theta)\" display=\"inline\"><mrow><mrow><mi>\u03c4</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><mrow><mstyle displaystyle=\"true\"><munderover><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover></mstyle><mrow><mstyle displaystyle=\"true\"><munderover><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover></mstyle><mrow><msubsup><mi>c</mi><mi>k</mi><mi>j</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><msubsup><mi>z</mi><mi>k</mi><mi>j</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow><mo>+</mo><mrow><msubsup><mi>d</mi><mi>k</mi><mi>j</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><msubsup><mi>s</mi><mi>k</mi><mi>j</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nwhere $Q = M^T (C^\\dagger)^T R C^\\dagger M$.\n\nFor any feasible set of variables,\nand for any diagonal matrix $D$, this is equivalent to\n", "itemtype": "equation", "pos": 21499, "prevtext": "\nto the constraints (\\ref{e-ftilde-constraints}) above.\n\n\n\n\n\\subsection{Improving the MICP formulation}\nBy converting the nonlinear constraints to linear and integer constraints,\nwe have succeeded in our goal of making (\\ref{e-opt-torque-ctrl})\ninto an MICP.\nHowever, the runtime of a global MICP solver often depends crucially on the problem formulation.\nHere we give an additional reformulation of the objective of \n(\\ref{e-opt-torque-ctrl})\n(specifically, of the the power loss)\nthat may improve the performance of a MICP solver\ncompared with the basic formulation.\n\n\n\n\n\n\n\n\n\nAssuming that $C$ has full column rank, \nwe can use (\\ref{e-faraday}) to express the winding current as \n$i = C^\\dagger M \\mathcal F$,\nwhere $C^\\dagger$ is the pseudo-inverse of $C$\n(or any other left inverse).\nThen the power loss can be rewriten as\n", "index": 45, "text": "\n\\[\nP_{\\rm loss} = \\frac1{2\\pi}\n\\int_0^{2\\pi} \n\\mathcal F(\\theta)^T Q \\mathcal F (\\theta) \\; d\\theta,\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex12.m1\" class=\"ltx_Math\" alttext=\"P_{\\rm loss}=\\frac{1}{2\\pi}\\int_{0}^{2\\pi}\\mathcal{F}(\\theta)^{T}Q\\mathcal{F}(%&#10;\\theta)\\;d\\theta,\" display=\"block\"><mrow><mrow><msub><mi>P</mi><mi>loss</mi></msub><mo>=</mo><mrow><mfrac><mn>1</mn><mrow><mn>2</mn><mo>\u2062</mo><mi>\u03c0</mi></mrow></mfrac><mo>\u2062</mo><mrow><msubsup><mo largeop=\"true\" symmetric=\"true\">\u222b</mo><mn>0</mn><mrow><mn>2</mn><mo>\u2062</mo><mi>\u03c0</mi></mrow></msubsup><mrow><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow><mi>T</mi></msup><mo>\u2062</mo><mi>Q</mi><mo>\u2062</mo><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo rspace=\"5.3pt\" stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mrow><mo>\ud835\udc51</mo><mi>\u03b8</mi></mrow></mrow></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nIn particular, if we choose $D$ with nonnegative diagonal elements,\nsuch that $Q-D$ is positive semidefinite,\nthen the reformulated power loss function is convex in all its variables.\nFurthermore, the larger the elements of $D$ are,\nthe tighter the convex relaxation will be.\nFinding a suitable $D$ can be cast as a small convex optimization problem;\nfor details on this type of reformulation, see \\cite{frangioni2007sdp}.\n\n\n\\section{Symmetry and discretization}\n\n\\subsection{Symmetry}\n\\label{s-symmetry}\nMany motors have substantial symmetry,\nwhich in our formulation is encoded in the functions $f_k$, \nas well as $M$, $R$, $C$.\nAlthough it is \\emph{not} necessarily true that \noptimal variables for (\\ref{e-opt-torque-ctrl}) share this symmetry,\nit is reasonable to expect that many good sets of variables are symmetric.\nFurthermore, we may explicitly desire that the waveforms be symmetric\n(\\eg, to simplify implementation, or to wear components evenly).\nBy introducing symmetry constraints, \nwe can also reduce the interval of the variables of (\\ref{e-opt-torque-ctrl})\nthus reducing the complexity of a \ndiscretized version of the problem.\nFor some asymmetric motors,\none or more of these assumptions may not hold;\nexamples of this include motors intentionally designed without symmetry,\nor when a winding in an otherwise symmetric motor has failed.\n\n\\paragraph{Pole symmetry.}\nWe assume the rotor has $N_{\\rm p}$ pole pairs\n\\ie, $f_k$ is $2\\pi/N_{\\rm p}$-periodic for all $k$.\nConsequently, we restrict our search to\nvariables $i$, $v$, $\\lambda$, $\\psi$, $\\phi$, and $\\mathcal F$ that are also\n$2\\pi/N_{\\rm p}$-periodic.\n\n\\paragraph{Phase symmetry.} \nWe assume the motor has $K$ phases,\nand therefore search for variables that satisfy the periodicity property\n", "itemtype": "equation", "pos": 21739, "prevtext": "\nwhere $Q = M^T (C^\\dagger)^T R C^\\dagger M$.\n\nFor any feasible set of variables,\nand for any diagonal matrix $D$, this is equivalent to\n", "index": 47, "text": "\n\\[\n\\frac1{2\\pi} \\int_0^{2\\pi} \n\\Bigg(\n\\mathcal F(\\theta)^T (Q-D) \\mathcal F (\\theta) \n\n+ \\sum_{k=1}^m \\sum_{j=1}^N D_{kk} \\frac{z_k^j(\\theta)^2}{s_k^j(\\theta)}\n\\Bigg)\n\\; d\\theta.\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex13.m1\" class=\"ltx_Math\" alttext=\"\\frac{1}{2\\pi}\\int_{0}^{2\\pi}\\Bigg{(}\\mathcal{F}(\\theta)^{T}(Q-D)\\mathcal{F}(%&#10;\\theta)\\par&#10;+\\sum_{k=1}^{m}\\sum_{j=1}^{N}D_{kk}\\frac{z_{k}^{j}(\\theta)^{2}}{s_%&#10;{k}^{j}(\\theta)}\\Bigg{)}\\;d\\theta.\" display=\"block\"><mrow><mrow><mfrac><mn>1</mn><mrow><mn>2</mn><mo>\u2062</mo><mi>\u03c0</mi></mrow></mfrac><mo>\u2062</mo><mrow><msubsup><mo largeop=\"true\" symmetric=\"true\">\u222b</mo><mn>0</mn><mrow><mn>2</mn><mo>\u2062</mo><mi>\u03c0</mi></mrow></msubsup><mrow><mrow><mo maxsize=\"260%\" minsize=\"260%\">(</mo><mrow><mrow><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow><mi>T</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>Q</mi><mo>-</mo><mi>D</mi></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>+</mo><mrow><munderover><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mrow><munderover><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mrow><msub><mi>D</mi><mrow><mi>k</mi><mo>\u2062</mo><mi>k</mi></mrow></msub><mo>\u2062</mo><mfrac><mrow><msubsup><mi>z</mi><mi>k</mi><mi>j</mi></msubsup><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow><mn>2</mn></msup></mrow><mrow><msubsup><mi>s</mi><mi>k</mi><mi>j</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mfrac></mrow></mrow></mrow></mrow><mo maxsize=\"260%\" minsize=\"260%\" rspace=\"5.3pt\">)</mo></mrow><mo>\u2062</mo><mrow><mo>\ud835\udc51</mo><mi>\u03b8</mi></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nwith similary constraints holding for\n$v$, $\\lambda$, $\\mathcal F$, $\\psi$, and $\\phi$.\n\n\\paragraph{Equivalent problem.} \nThe symmetry assumptions allow us to form an equivalent problem with \nthe same constraints and objective as \n(\\ref{e-opt-torque-ctrl})\nin which the variables have domain \n$[0,2\\pi/(KN_{\\rm p})]$.  \nWe also add periodicity constraints of the form\n", "itemtype": "equation", "pos": 23689, "prevtext": "\nIn particular, if we choose $D$ with nonnegative diagonal elements,\nsuch that $Q-D$ is positive semidefinite,\nthen the reformulated power loss function is convex in all its variables.\nFurthermore, the larger the elements of $D$ are,\nthe tighter the convex relaxation will be.\nFinding a suitable $D$ can be cast as a small convex optimization problem;\nfor details on this type of reformulation, see \\cite{frangioni2007sdp}.\n\n\n\\section{Symmetry and discretization}\n\n\\subsection{Symmetry}\n\\label{s-symmetry}\nMany motors have substantial symmetry,\nwhich in our formulation is encoded in the functions $f_k$, \nas well as $M$, $R$, $C$.\nAlthough it is \\emph{not} necessarily true that \noptimal variables for (\\ref{e-opt-torque-ctrl}) share this symmetry,\nit is reasonable to expect that many good sets of variables are symmetric.\nFurthermore, we may explicitly desire that the waveforms be symmetric\n(\\eg, to simplify implementation, or to wear components evenly).\nBy introducing symmetry constraints, \nwe can also reduce the interval of the variables of (\\ref{e-opt-torque-ctrl})\nthus reducing the complexity of a \ndiscretized version of the problem.\nFor some asymmetric motors,\none or more of these assumptions may not hold;\nexamples of this include motors intentionally designed without symmetry,\nor when a winding in an otherwise symmetric motor has failed.\n\n\\paragraph{Pole symmetry.}\nWe assume the rotor has $N_{\\rm p}$ pole pairs\n\\ie, $f_k$ is $2\\pi/N_{\\rm p}$-periodic for all $k$.\nConsequently, we restrict our search to\nvariables $i$, $v$, $\\lambda$, $\\psi$, $\\phi$, and $\\mathcal F$ that are also\n$2\\pi/N_{\\rm p}$-periodic.\n\n\\paragraph{Phase symmetry.} \nWe assume the motor has $K$ phases,\nand therefore search for variables that satisfy the periodicity property\n", "index": 49, "text": "\n\\[\n\\label{e-phase-symm-current-periodicity}\ni_k(\\theta) = i_1 \\left(\\theta + \\frac{2\\pi (k-1)}{K N_{\\rm p}} \\right),\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex14.m1\" class=\"ltx_Math\" alttext=\"i_{k}(\\theta)=i_{1}\\left(\\theta+\\frac{2\\pi(k-1)}{KN_{\\rm p}}\\right),\" display=\"block\"><mrow><mrow><mrow><msub><mi>i</mi><mi>k</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b8</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><msub><mi>i</mi><mn>1</mn></msub><mo>\u2062</mo><mrow><mo>(</mo><mrow><mi>\u03b8</mi><mo>+</mo><mfrac><mrow><mn>2</mn><mo>\u2062</mo><mi>\u03c0</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>k</mi><mo>-</mo><mn>1</mn></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mrow><mi>K</mi><mo>\u2062</mo><msub><mi>N</mi><mi mathvariant=\"normal\">p</mi></msub></mrow></mfrac></mrow><mo>)</mo></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nwith similar constraints for the other variables.\nThe integrands in the definitions of\naverage torque, torque ripple, and power loss \nare each $\\pi/(3N_{\\rm p})$-periodic; \nto get equivalent definitions of these values over the appropriate domain,\nwe can integrate over $[0,2\\pi/(KN_{\\rm p})]$ instead of $[0,2\\pi]$, \nand scale the result by $KN_{\\rm p}$.\n\n\\subsection{Discretization}\nAfter reducing the domain of the variables of (\\ref{e-opt-torque-ctrl}),\nwe discretize this interval\ninto $T+1$ grid points, \n$\\theta_0,\\ldots,\\theta_T$, \nwith $\\theta_0=0$ and $\\theta_T = 2\\pi/(KN_{\\rm p})$.  All\npointwise constraints must hold at $\\theta_0,\\ldots,\\theta_{T-1}$, and\nthe periodicity constraints \nmust hold at $\\theta_0$ and $\\theta_T$. \nIntegration over the interval is replaced by summation from\n$\\theta_0$ to $\\theta_{T-1}$, with appropriate scaling.   \nWe approximate the derivative in (\\ref{e-dynamics}) \nusing a forward difference approximation.\n\n\n\n\n\n\\section{Example}\n\\label{s-example}\n\n\\subsection{Motor model}\nWe consider the switched reluctance motor with fully pitched windings shown in \nfigure \\ref{f-sr-motor}.\nOur model is based the first example of \\cite{mecrow2001modeling}.\nThe motor model has fully pitched windings,\ninstead of the more usual concentrated windings.\n(This is reflected by the matrix $M$,\nwhich would be diagonal for a motor with concentrated windings).\n\n\\begin{figure} \n\\begin{center}\n\\psfrag{a}[][cc]{$\\rm A$} \n\\psfrag{b}[][cc]{$\\rm B'$} \n\\psfrag{c}[][cc]{$\\rm C$} \n\\psfrag{d}[][cc]{$\\rm A'$} \n\\psfrag{e}[][cc]{$\\rm B$} \n\\psfrag{f}[][cc]{$\\rm C'$} \n\\psfrag{1}{\\color{white} $3'$} \n\\psfrag{2}{\\color{white} $1$} \n\\psfrag{3}{\\color{white} $2'$} \n\\psfrag{4}{\\color{white} $3$} \n\\psfrag{5}{\\color{white} $1'$} \n\\psfrag{6}{\\color{white} $2$} \n\\ifarxiv\n\\includegraphics[width=.3\\textwidth]{sr_motor.eps}\n\\else\n\\includegraphics[width=.3\\textwidth]{fig/sr_motor.eps}\n\\fi\n\\caption{\nA switched reluctance motor with fully pitched windings.\nPhase windings are shown in light gray, and are labeled A, B, and C\nfor current flowing out of the page\n(with complementary flow denoted with a prime).\nMagnetic elements are shown in dark gray, \nand are labeled 1, 2, and 3, with magnetic flow toward the rotor\n(with complementary flow denoted with a prime).\nNote that every third stator teeth belongs to a single magnetic element.\n}\n\\label{f-sr-motor}\n\\end{center}\n\\end{figure}\n\n\\paragraph{Symmetry and discretization.}\nWe assume that each stator tooth is magnetically identical,\nwhich allows us to group every third stator tooth into a single magnetic element.\nWith this assumption,\nthe motor exhibits pole symmetry, with $N_{\\rm p} = 2$,\nand phase symmetry, with $K = 3$ phases.\nWe discretize the interval $[0, \\pi/3]$ with $T = 40$,\nso that $\\theta_0 = 0$ and $\\theta_T = \\pi/3$.\n\n\\paragraph{Electromagnetic.}\nWe have $m = 3$ magnetic elements, and $l = 3$ meshes.\nThe mesh matrix of the magnetic circuit is\n", "itemtype": "equation", "pos": 24177, "prevtext": "\nwith similary constraints holding for\n$v$, $\\lambda$, $\\mathcal F$, $\\psi$, and $\\phi$.\n\n\\paragraph{Equivalent problem.} \nThe symmetry assumptions allow us to form an equivalent problem with \nthe same constraints and objective as \n(\\ref{e-opt-torque-ctrl})\nin which the variables have domain \n$[0,2\\pi/(KN_{\\rm p})]$.  \nWe also add periodicity constraints of the form\n", "index": 51, "text": "\n\\[\ni_k(0) = i_1 \\left(\\frac{2\\pi (k-1)}{K N_{\\rm p}} \\right),\n\\qquad \\text{for $k = 1, \\ldots K$}.\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex15.m1\" class=\"ltx_Math\" alttext=\"i_{k}(0)=i_{1}\\left(\\frac{2\\pi(k-1)}{KN_{\\rm p}}\\right),\\qquad\\text{for $k=1,%&#10;\\ldots K$}.\" display=\"block\"><mrow><mrow><mrow><msub><mi>i</mi><mi>k</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><mrow><msub><mi>i</mi><mn>1</mn></msub><mo>\u2062</mo><mrow><mo>(</mo><mfrac><mrow><mn>2</mn><mo>\u2062</mo><mi>\u03c0</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>k</mi><mo>-</mo><mn>1</mn></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mrow><mi>K</mi><mo>\u2062</mo><msub><mi>N</mi><mi mathvariant=\"normal\">p</mi></msub></mrow></mfrac><mo>)</mo></mrow></mrow><mo rspace=\"22.5pt\">,</mo><mrow><mtext>for\u00a0</mtext><mrow><mi>k</mi><mo>=</mo><mrow><mn>1</mn><mo>,</mo><mrow><mi mathvariant=\"normal\">\u2026</mi><mo>\u2062</mo><mi>K</mi></mrow></mrow></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nThe motor has $n = 3$ windings.\nThe voltage limit is $600 \\; \\rm V$.\n\n\n\nThe resistance and electro-magnetic geometry matrices are\n", "itemtype": "equation", "pos": 27207, "prevtext": "\nwith similar constraints for the other variables.\nThe integrands in the definitions of\naverage torque, torque ripple, and power loss \nare each $\\pi/(3N_{\\rm p})$-periodic; \nto get equivalent definitions of these values over the appropriate domain,\nwe can integrate over $[0,2\\pi/(KN_{\\rm p})]$ instead of $[0,2\\pi]$, \nand scale the result by $KN_{\\rm p}$.\n\n\\subsection{Discretization}\nAfter reducing the domain of the variables of (\\ref{e-opt-torque-ctrl}),\nwe discretize this interval\ninto $T+1$ grid points, \n$\\theta_0,\\ldots,\\theta_T$, \nwith $\\theta_0=0$ and $\\theta_T = 2\\pi/(KN_{\\rm p})$.  All\npointwise constraints must hold at $\\theta_0,\\ldots,\\theta_{T-1}$, and\nthe periodicity constraints \nmust hold at $\\theta_0$ and $\\theta_T$. \nIntegration over the interval is replaced by summation from\n$\\theta_0$ to $\\theta_{T-1}$, with appropriate scaling.   \nWe approximate the derivative in (\\ref{e-dynamics}) \nusing a forward difference approximation.\n\n\n\n\n\n\\section{Example}\n\\label{s-example}\n\n\\subsection{Motor model}\nWe consider the switched reluctance motor with fully pitched windings shown in \nfigure \\ref{f-sr-motor}.\nOur model is based the first example of \\cite{mecrow2001modeling}.\nThe motor model has fully pitched windings,\ninstead of the more usual concentrated windings.\n(This is reflected by the matrix $M$,\nwhich would be diagonal for a motor with concentrated windings).\n\n\\begin{figure} \n\\begin{center}\n\\psfrag{a}[][cc]{$\\rm A$} \n\\psfrag{b}[][cc]{$\\rm B'$} \n\\psfrag{c}[][cc]{$\\rm C$} \n\\psfrag{d}[][cc]{$\\rm A'$} \n\\psfrag{e}[][cc]{$\\rm B$} \n\\psfrag{f}[][cc]{$\\rm C'$} \n\\psfrag{1}{\\color{white} $3'$} \n\\psfrag{2}{\\color{white} $1$} \n\\psfrag{3}{\\color{white} $2'$} \n\\psfrag{4}{\\color{white} $3$} \n\\psfrag{5}{\\color{white} $1'$} \n\\psfrag{6}{\\color{white} $2$} \n\\ifarxiv\n\\includegraphics[width=.3\\textwidth]{sr_motor.eps}\n\\else\n\\includegraphics[width=.3\\textwidth]{fig/sr_motor.eps}\n\\fi\n\\caption{\nA switched reluctance motor with fully pitched windings.\nPhase windings are shown in light gray, and are labeled A, B, and C\nfor current flowing out of the page\n(with complementary flow denoted with a prime).\nMagnetic elements are shown in dark gray, \nand are labeled 1, 2, and 3, with magnetic flow toward the rotor\n(with complementary flow denoted with a prime).\nNote that every third stator teeth belongs to a single magnetic element.\n}\n\\label{f-sr-motor}\n\\end{center}\n\\end{figure}\n\n\\paragraph{Symmetry and discretization.}\nWe assume that each stator tooth is magnetically identical,\nwhich allows us to group every third stator tooth into a single magnetic element.\nWith this assumption,\nthe motor exhibits pole symmetry, with $N_{\\rm p} = 2$,\nand phase symmetry, with $K = 3$ phases.\nWe discretize the interval $[0, \\pi/3]$ with $T = 40$,\nso that $\\theta_0 = 0$ and $\\theta_T = \\pi/3$.\n\n\\paragraph{Electromagnetic.}\nWe have $m = 3$ magnetic elements, and $l = 3$ meshes.\nThe mesh matrix of the magnetic circuit is\n", "index": 53, "text": "\n\\[\nM = \n\\begin{bmatrix}\n   0 &  1 &  1 \\\\\n   1 &  0 &  1 \\\\\n   1 &  1 &  0\n\\end{bmatrix}.\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex16.m1\" class=\"ltx_Math\" alttext=\"M=\\begin{bmatrix}0&amp;1&amp;1\\\\&#10;1&amp;0&amp;1\\\\&#10;1&amp;1&amp;0\\end{bmatrix}.\" display=\"block\"><mrow><mrow><mi>M</mi><mo>=</mo><mrow><mo>[</mo><mtable columnspacing=\"5pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mn>1</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>1</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr></mtable><mo>]</mo></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nwhere $N_{\\rm turns} = 204$ is the number of turns in each winding.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\paragraph{Flux characteristic and phase torque functions.}\nThe magnetic flux characteristic $f_1$ and the phase torque function $g_1$ \nare shown in figures~\\ref{f-flux-characteristic}\nand \\ref{f-torque-function}.\n\n\nWe only show these functions for the first magnetic element.\n(Due to phase symmetry,\nthe other two functions are shifted versions of the first.)\n\n\\begin{figure} \n\\begin{center}\n\n\\ifarxiv\n\\includegraphics[width=.4\\textwidth]{psi.eps}\n\\includegraphics[width=.4\\textwidth]{phi_hat.eps}\n\\else\n\\includegraphics[width=.4\\textwidth]{matlab/mecrow_model/psi.eps}\n\\includegraphics[width=.4\\textwidth]{matlab/phi_hat.eps}\n\\fi\n\\caption{\nThe flux characteristic $f_1$ (left),\nand its piecewise affine approximation $\\tilde f_1$ (right).\n}\n\\label{f-flux-characteristic}\n\\end{center}\n\\end{figure}\n\n\\begin{figure} \n\\begin{center}\n\n\\ifarxiv\n\\includegraphics[width=.4\\textwidth]{tau.eps}\n\\includegraphics[width=.4\\textwidth]{tau_hat.eps}\n\\else\n\\includegraphics[width=.4\\textwidth]{matlab/mecrow_model/tau.eps}\n\\includegraphics[width=.4\\textwidth]{matlab/tau_hat.eps}\n\\fi\n\\caption{\nThe torque characteristic $g_1$ (left),\nand its piecewise-affine approximation $\\tilde g_1$ (right).\n}\n\\label{f-torque-function}\n\\end{center}\n\\end{figure}\n\nFor each value of $\\theta_t$, for $t = 0, \\ldots, T$,\nwe fit piecewise-affine functions to $f_k$ and $g_k$.\nThe piecewise-affine region boundaries were chosen as\n", "itemtype": "equation", "pos": 27430, "prevtext": "\nThe motor has $n = 3$ windings.\nThe voltage limit is $600 \\; \\rm V$.\n\n\n\nThe resistance and electro-magnetic geometry matrices are\n", "index": 55, "text": "\n\\[\nR = \n\\begin{bmatrix}\n  0.1 &   0 &   0 \\\\\n    0 & 0.1 &   0 \\\\\n    0 &   0 & 0.1\n\\end{bmatrix} \\; \\Omega,\n\\qquad\nC = (1/2)N_{\\rm turns}\n\\begin{bmatrix}\n  1 & 0 & 0 \\\\\n  0 & 1 & 0 \\\\\n  0 & 0 & 1\n\\end{bmatrix},\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex17.m1\" class=\"ltx_Math\" alttext=\"R=\\begin{bmatrix}0.1&amp;0&amp;0\\\\&#10;0&amp;0.1&amp;0\\\\&#10;0&amp;0&amp;0.1\\end{bmatrix}\\;\\Omega,\\qquad C=(1/2)N_{\\rm turns}\\begin{bmatrix}1&amp;0&amp;0\\\\&#10;0&amp;1&amp;0\\\\&#10;0&amp;0&amp;1\\end{bmatrix},\" display=\"block\"><mrow><mrow><mrow><mi>R</mi><mo>=</mo><mrow><mpadded width=\"+2.8pt\"><mrow><mo>[</mo><mtable columnspacing=\"5pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mn>0.1</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0.1</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0.1</mn></mtd></mtr></mtable><mo>]</mo></mrow></mpadded><mo>\u2062</mo><mi mathvariant=\"normal\">\u03a9</mi></mrow></mrow><mo rspace=\"22.5pt\">,</mo><mrow><mi>C</mi><mo>=</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>/</mo><mn>2</mn></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><msub><mi>N</mi><mi>turns</mi></msub><mo>\u2062</mo><mrow><mo>[</mo><mtable columnspacing=\"5pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>1</mn></mtd></mtr></mtable><mo>]</mo></mrow></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.03768.tex", "nexttext": "\nWith the region boundaries fixed,\nthe values of the coefficient functions $a_k$, $b_k$, $c_k$, and $d_k$\nwere determined at the relevant (discrete) rotor positions using least-squares,\nwith the constraint that both piecewise-affine functions be continuous\nin $\\mathcal F$ for all values of $\\theta$.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\subsection{Results}\n\n\\paragraph{Low-speed operation.}\nThe optimal current, voltage, and phase torque waveforms\nfor $\\omega = 1000$ rpm, $\\tau_{\\rm des} = 10$ $\\rm N\\cdot m$ and\n$\\alpha = 3$ $\\rm J/(N\\cdot m)^2$\nare shown in figure~\\ref{f-waves-low-speed}.\n(We restricted our search to waveforms that are phase symmetric,\nas discussed in $\\S\\ref{s-symmetry}$.)\n\n\\begin{figure} \n\\begin{center}\n\n\\ifarxiv\n\\includegraphics[width=.7\\textwidth]{waves_low_speed.eps}\n\\else\n\\includegraphics[width=.7\\textwidth]{matlab/waves_low_speed.eps}\n\\fi\n\\caption{\nThe optimal current, voltage, and torque waveforms for\n$\\omega = 1000$ rpm.\n}\n\\label{f-waves-low-speed}\n\\end{center}\n\\end{figure}\n\nNote that while the voltage limit is active over the commutation period\nfor two of the windings,\nthe third winding current is manipulated to maintain near-constant torque.\nDue to the fully pitched winding pattern,\nand in contrast to a motor with concentrated windings, \nit is not possible to derive a ``torque-sharing function'' for this example.\nThis is because torque cannot be decomposed into components attributable to each winding\n(indeed, it is the changing mutual inductance between windings which generates torque;\nfor a discussion of this, see \\cite{mecrow1993fully}).\n\n\\paragraph{High-speed operation.}\nHere we show the optimal symmetric\ncurrent, voltage, and phase torque waveforms\nfor $\\omega = 4000$ rpm,\nwith all other values kept the same as for the low-speed example.\n\nWe see that when the rotor speed is higher, \nthe optimal waveforms are much more complicated\nthan the corresponding low-speed waveforms.\nIndeed, for high rotor speeds,\nderiving a simple, ``closed-form'' solution\nfor the optimal current waveforms seems unlikely.\nThe optimal current waveforms are strictly positive\nduring the entire cycle;\n\\ie, there is no ``firing angle''\nat which a given phase phase should be energized.\n\n\\begin{figure} \n\\begin{center}\n\n\\ifarxiv\n\\includegraphics[width=.7\\textwidth]{waves_hi_speed.eps}\n\\else\n\\includegraphics[width=.7\\textwidth]{matlab/waves_hi_speed.eps}\n\\fi\n\\caption{\nThe optimal current, voltage, and torque waveforms for\n$\\omega = 4000$ $\\rm rpm$.\n}\n\\label{f-waves-hi-speed}\n\\end{center}\n\\end{figure}\n\n\n\\subsection{Computational aspects}\nTo compute the waveforms above,\nproblem (\\ref{e-opt-torque-ctrl}) was solved \nusing CVX \\cite{cvx, gb08},\n\nwith Gurobi as the backend solver.\nWe used a Linux machine with an Intel Xeon processor.\nThe (global) solve time for low-speed operation was 6 seconds,\nwhile the solve time for high-speed operation was 4 minutes.\n\n\nIn order to verify that these solve times were representitive\nof the solve time over several motor operating points,\nwe solved (\\ref{e-opt-torque-ctrl}), \nusing the same motor parameters \n(except for a courser grid of $T = 20$)\nfor 250 randomly selected values of $\\omega$ and $\\tau_{\\rm des}$.\nin the intervals $[0, 4000]$ $\\rm rpm$ and $[0, 15]$ $\\rm N$, respectively.\nThe median global solve times was ten seconds,\nthough we note that for some areas of operation\n(in particular, for very-low-torque operation)\nthe global solve times can be very high, sometimes exceeding thirty minutes;\nin these cases, it is standard to terminate the solver early\n(after, say, several minutes)\nsimply use the best point found so far.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\section{Conclusion}\nIn this paper we presented a method for generating optimal current waveforms\nfor switched reluctance motors.\nOur model handles a reasonably complicated magnetic structure,\nand respects voltage and current constraints.\nOur method finds, to within reasonable accuracy,\nthe globally optimal waveforms.\nAlthough we provide to runtime guarentees,\nfor our example, optimal waveforms could be generated in a few minutes,\nraising the possibility that optimal waveforms can be generated\nand stored as a lookup table indexed by desired torque and rotor speed.\n\n\n\\newpage\n\\bibliography{sw_reluc_motor}\n\n\n", "itemtype": "equation", "pos": 29187, "prevtext": "\nwhere $N_{\\rm turns} = 204$ is the number of turns in each winding.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\paragraph{Flux characteristic and phase torque functions.}\nThe magnetic flux characteristic $f_1$ and the phase torque function $g_1$ \nare shown in figures~\\ref{f-flux-characteristic}\nand \\ref{f-torque-function}.\n\n\nWe only show these functions for the first magnetic element.\n(Due to phase symmetry,\nthe other two functions are shifted versions of the first.)\n\n\\begin{figure} \n\\begin{center}\n\n\\ifarxiv\n\\includegraphics[width=.4\\textwidth]{psi.eps}\n\\includegraphics[width=.4\\textwidth]{phi_hat.eps}\n\\else\n\\includegraphics[width=.4\\textwidth]{matlab/mecrow_model/psi.eps}\n\\includegraphics[width=.4\\textwidth]{matlab/phi_hat.eps}\n\\fi\n\\caption{\nThe flux characteristic $f_1$ (left),\nand its piecewise affine approximation $\\tilde f_1$ (right).\n}\n\\label{f-flux-characteristic}\n\\end{center}\n\\end{figure}\n\n\\begin{figure} \n\\begin{center}\n\n\\ifarxiv\n\\includegraphics[width=.4\\textwidth]{tau.eps}\n\\includegraphics[width=.4\\textwidth]{tau_hat.eps}\n\\else\n\\includegraphics[width=.4\\textwidth]{matlab/mecrow_model/tau.eps}\n\\includegraphics[width=.4\\textwidth]{matlab/tau_hat.eps}\n\\fi\n\\caption{\nThe torque characteristic $g_1$ (left),\nand its piecewise-affine approximation $\\tilde g_1$ (right).\n}\n\\label{f-torque-function}\n\\end{center}\n\\end{figure}\n\nFor each value of $\\theta_t$, for $t = 0, \\ldots, T$,\nwe fit piecewise-affine functions to $f_k$ and $g_k$.\nThe piecewise-affine region boundaries were chosen as\n", "index": 57, "text": "\n\\[\n\\tilde {\\mathcal F} = (0, 1000, 2000, 3500, 6000) \\text{ Ampere-turns}.\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex18.m1\" class=\"ltx_Math\" alttext=\"\\tilde{\\mathcal{F}}=(0,1000,2000,3500,6000)\\text{ Ampere-turns}.\" display=\"block\"><mrow><mrow><mover accent=\"true\"><mi class=\"ltx_font_mathcaligraphic\">\u2131</mi><mo stretchy=\"false\">~</mo></mover><mo>=</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo>,</mo><mn>1000</mn><mo>,</mo><mn>2000</mn><mo>,</mo><mn>3500</mn><mo>,</mo><mn>6000</mn><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mtext>\u00a0Ampere-turns</mtext></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}]