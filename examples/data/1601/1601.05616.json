[{"file": "1601.05616.tex", "nexttext": "\nwhere $U,\\tilde U, V,\\tilde V$ are groupoid neighborhoods in $\\nu(G_S),\\nu(\\tilde G_{\\tilde S}),G,G_S$ around $\\tilde S,S$. When $\\tilde G$ and $G$ are proper these neighborhoods can be taken to be full, and when $\\phi$ is proper we can further take $\\tilde U=(\\overline{{\\rm d}\\phi})^{-1}(U)$ and $\\tilde V=\\phi^{-1}(V)$. \n\\end{theorem*} \n\nThe last statement in the theorem can be thought of as a version for proper groupoid submersions of the classic Ehresmann's theorem.\n\n\nThe theorem shows that Riemannian submersions of Lie groupoids are rather rigid, so one may wonder about the existence of such submersions. In this respect, a special kind of submersions, known as fibrations, arise as a key concept. On the one hand, fibrations are rigid enough so that they are easier to handle than arbitrary submersions. On the other hand, there are plenty of examples and we have the following fundamental result, which shows their relevance for our theory:\n\n\\begin{theorem*}[Existence of fibered metrics]\nLet $\\phi:\\tilde G\\to G$ be a split fibration between proper Lie groupoids. Then there exist 2-metrics $\\tilde\\eta$ on $\\tilde G$ and $\\eta$ on $G$ making $\\phi$ into a Riemannian submersion.\n\\end{theorem*}\n\nThe proof consists in adapting an averaging argument, introduced in \\cite{dhf}, which we call the \\emph{gauge trick}.\n\n\n\nAlthough the results above look like simple extensions to the groupoid framework of basic facts on fibrations and metrics, they are actually quite powerful and have non-trivial, interesting, consequences. As a first application, we will give simple geometric proofs of some rigidity results for Lie groupoids. Some of these results were obtained recently in \\cite{cms}, where the authors use a sophisticated theory of deformation cohomology to deduce them. The main result in this direction is the following:\n\n\\begin{theorem*}[Rigidity of compact Lie groupoids]\nCompact Lie groupoids are rigid: every proper deformation of a compact Lie groupoid $G\\rightrightarrows M$ is locally trivial.\n\\end{theorem*}\n\nSuch rigidity results include, as special cases, classic theorems on the rigidity of groups (\\cite{nr}), group actions (\\cite{palais}) and foliations (\\cite{rosenberg1,rosenberg2}). Our metric approach provides a novel perspective even for these classic results.\n\n\n\n\nAnother important aspect of our theory arises from the \\emph{stack perspective}. Recall that a presentable (or geometric) stack can be thought of as a Morita equivalence class of Lie groupoids, a categorified version of manifold encoding the transverse geometry. In fact, every Lie groupoid $G\\rightrightarrows M$ determines an \\emph{orbit stack} ${\\ensuremath{\\mathfrak{X}}}=[M/G]$ with a presentation $M\\to {\\ensuremath{\\mathfrak{X}}}$, \nand two groupoids determine the same stack if and only if they are Morita equivalent.\nA key point here is that every Morita equivalence can be realized by a fraction of fibrations. This allow us to apply the previous results to develop the rudiments of the Riemannian geometry of stacks.\n\n\n\n\n\nOur fourth main theorem lead us to the notion of a \\emph{Riemannian metric on a (presentable) stack}, generalizing the usual concepts of Riemannian metrics on manifolds and orbifolds.\n\n\\begin{theorem*}[Morita invariance of 2-metrics]\nA Morita equivalence yields a 1-1 correspondence between equivalence classes of 2-metrics.\n\\end{theorem*}\n\n\n\nGiven a presentable stack ${\\ensuremath{\\mathfrak{X}}}$ and an embedded substack ${\\ensuremath{\\mathfrak{S}}}\\subset {\\ensuremath{\\mathfrak{X}}}$ the normal bundle to ${\\ensuremath{\\mathfrak{S}}}$ in ${\\ensuremath{\\mathfrak{X}}}$ is a well-defined stack $\\nu({\\ensuremath{\\mathfrak{S}}})$, which contains ${\\ensuremath{\\mathfrak{S}}}$ as an embedded substack (the \\emph{zero section}). Given a metric $[\\eta]$ on a \\emph{separated stack} ${\\ensuremath{\\mathfrak{X}}}$, i.e. one arising from a proper groupoid, we have an exponential map $\\exp_{[\\eta]}:\\nu({\\ensuremath{\\mathfrak{S}}}){\\dashrightarrow} {\\ensuremath{\\mathfrak{X}}}$, well-defined in a stacky neighborhood of ${\\ensuremath{\\mathfrak{S}}}$. This map is invertible over some neighborhood, providing a construction of a \\emph{Stacky Tubular Neighborhood}. We also show that, even in the non-proper case, linearization of groupoids is equivalent to the existence of stacky tubular neighborhoods.\n\nGiven a submersion between separated stacks, we construct stacky tubular neighborhoods compatible with the submersion, yielding the following stacky versions of Ehresmann's Theorem. \n\n\\begin{theorem*}[Stacky Ehresmann]\nLet $\\pi:\\tilde {\\ensuremath{\\mathfrak{X}}}{\\dashrightarrow} {\\ensuremath{\\mathfrak{X}}}$ be a surjective submersion between separated stacks, and let ${\\ensuremath{\\mathfrak{S}}}\\subset {\\ensuremath{\\mathfrak{X}}}$ be an embedded substack. Then:\n\\begin{enumerate}[(i)]\n\\item $\\pi$ is linearizable in a neighborhood of $\\tilde {\\ensuremath{\\mathfrak{S}}}:=\\pi^{-1}({\\ensuremath{\\mathfrak{S}}})\\subset {\\ensuremath{\\mathfrak{X}}}$;\n\\item if $\\pi$ is proper, then $\\pi$ is linearizable in a tube $\\tilde{\\mathfrak{U}}=\\pi^{-1}(\\mathfrak{U})$ around  $\\tilde {\\ensuremath{\\mathfrak{S}}}$.\n\\end{enumerate}\n\\end{theorem*}\n\nThis stacky theorem generalizes and encompasses all the above linearization and rigidity results. Its appearance can be explained and motivated as follows. Submersions between manifolds can be identified with a very particular family of Lie groupoids, namely those that are proper without isotropy:\n\n", "itemtype": "equation", "pos": 3305, "prevtext": "\n\n\n\\title[Riemannian submersions]{\nRiemannian submersions of groupoids\\linebreak and \\linebreak a stacky Ehresmann's theorem}\n\n\n\\author{Matias del Hoyo}\n\\address{Instituto de Matem\\'atica Pura e Aplicada, Estrada Dona Castorina 110, Rio de Janeiro, 22460-320, Brazil}\n\\email{mdelhoyo@impa.br}\n\\author{Rui Loja Fernandes}\n\\address{Department of Mathematics, University of Illinois at Urbana-Champaign, 1409 W. Green Street, Urbana, IL 61801, USA} \n\\email{ruiloja@illinois.edu}\n\n\\thanks{MdH was partially supported by the ERC Starting Grant No. 279729. RLF was partially supported by NSF grants DMS 1308472, DMS 1405671 and FCT/Portugal. Both authors acknowledge the support of the \\emph{Ci\\^encias Sem Fronteiras} grant 401817/2013-0.}\n\n\\date{\\today}\n\n \\begin{abstract} \nWe introduce Riemannian submersions between Lie groupoids, showing that split fibrations between proper Lie groupoids can be made Riemannian, and that general Riemannian submersions can be linearized. We apply these results to prove rigidity theorems for Lie groupoids and, as a corollary, rigidity in some classic geometries. We establish Morita invariance of groupoid metrics, leading to metrics over stacks, and we use our linearization results to construct stacky tubular neighborhoods and to prove a stacky Ehresmann's Theorem. \n  \\end{abstract}\n\n\\maketitle\n\n\\vspace{-1cm}\n\n\\setcounter{tocdepth}{1} \n\\tableofcontents \n\n\\vspace{-1cm}\n\n\n\n\n\n\\section{Introduction}\n\n\n\nIn \\cite{dhf} we have introduced compatible Riemannian metrics on Lie groupoids, which we call \\emph{2-metrics}. A pair $(G,\\eta)$ formed by a groupoid $G$ and a 2-metric $\\eta$ is called a \\emph{Riemannian Lie groupoid}. This new notion of metric opens up the possibility of studying Riemannian geometry over Lie groupoids, and in their orbit spaces, a categorified version of manifolds known as \\emph{stacks}. \n\n\n\nA linearization of a groupoid around a subgroupoid is an isomorphism between a suitable groupoid neighborhood in the original groupoid and in the normal bundle. We showed in \\cite{dhf} that the exponential maps of 2-metrics give linearizations around saturated submanifolds. Moreover, we showed that for proper Lie groupoid 2-metrics always exist and that the groupoid neighborhoods can be taken to be full. These results greatly extend and simplify the linearization results for Lie groupoids of Weinstein \\cite{weinstein}, Zung \\cite{zung} and Crainic-Struchiner \\cite{cs}.\n\n\n\nIn this paper, which is a natural sequel to \\cite{dhf}, we study Riemannian submersions $\\phi:(\\tilde G,\\tilde\\eta)\\to (G,\\eta)$ between Riemannian Lie groupoids, developing fibered versions of the result obtained there, and deducing several interesting consequences. \n\n\nWe start by extending the results of \\cite{dhf} concerning linearization of groupoids to the linearization of submersions. We will show that Riemannian submersions can always be linearized via the exponential maps of 2-metrics:\n\n\\begin{theorem*}[Linearization of Riemannian submersions]\nLet $\\phi:(\\tilde G,\\tilde \\eta)\\to (G,\\eta)$ be a Riemannian submersion between Lie groupoids, let $S\\subset M$ be an embedded saturated submanifold, and set $\\tilde S=\\phi^{-1}(S)$. Then the exponential maps of $\\tilde \\eta$ and $\\eta$ define a linearization of $\\phi$ around $S$, namely a commutative diagram:\n\n", "index": 1, "text": "$$\\xymatrix@C=50pt{\n\\nu(\\tilde G_{\\tilde S}) \\supset\n\\tilde U \\ar[d]_{\\overline{{\\rm d}\\phi}} \\ar[r]^{\\exp_{\\tilde \\eta}}\n& \\tilde V \\subset \\tilde G \\ar[d]^\\phi \\\\\n\\nu(G_S) \\supset U \\ar[r]^{\\exp_\\eta} & V \\subset G}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex1.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix@C=50pt{\\nu(\\tilde{G}_{\\tilde{S}})\\supset\\tilde{U}\\ar[d]_{\\overline{{%&#10;\\rm d}\\phi}}\\ar[r]^{\\exp_{\\tilde{\\eta}}}&amp;\\tilde{V}\\subset\\tilde{G}\\ar[d]^{\\phi%&#10;}\\\\&#10;\\nu(G_{S})\\supset U\\ar[r]^{\\exp_{\\eta}}&amp;V\\subset G}\" display=\"block\"><mrow><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mi>C</mi></mrow><mo>=</mo><mrow><mn>50</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>t</mi><mo>\u2062</mo><mi>\u03bd</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mover accent=\"true\"><mi>S</mi><mo stretchy=\"false\">~</mo></mover></msub><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2283</mo><mrow><mover accent=\"true\"><mi>U</mi><mo stretchy=\"false\">~</mo></mover><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mover accent=\"true\"><mrow><mi mathvariant=\"normal\">d</mi><mo>\u2062</mo><mi>\u03d5</mi></mrow><mo>\u00af</mo></mover></msub><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><msub><mi>exp</mi><mover accent=\"true\"><mi>\u03b7</mi><mo stretchy=\"false\">~</mo></mover></msub></msup><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mover accent=\"true\"><mi>V</mi><mo stretchy=\"false\">~</mo></mover></mrow><mo>\u2282</mo><mrow><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mi>\u03d5</mi></msup><mo>\u2062</mo><mi>\u03bd</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mi>G</mi><mi>S</mi></msub><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2283</mo><mrow><mi>U</mi><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><msub><mi>exp</mi><mi>\u03b7</mi></msub></msup><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mi>V</mi></mrow><mo>\u2282</mo><mi>G</mi></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nIn this way one can think of the Weinstein-Zung Linearization Theorem for proper Lie groupoids as a far-reaching extension of the classic Ehresmann Theorem (and its non-proper variant). Now, if we let stacks enter into the picture, we can identify arbitrary Lie groupoids with a particular family of submersions, namely the presentations from a smooth manifold to a stack:\n\n", "itemtype": "equation", "pos": 8997, "prevtext": "\nwhere $U,\\tilde U, V,\\tilde V$ are groupoid neighborhoods in $\\nu(G_S),\\nu(\\tilde G_{\\tilde S}),G,G_S$ around $\\tilde S,S$. When $\\tilde G$ and $G$ are proper these neighborhoods can be taken to be full, and when $\\phi$ is proper we can further take $\\tilde U=(\\overline{{\\rm d}\\phi})^{-1}(U)$ and $\\tilde V=\\phi^{-1}(V)$. \n\\end{theorem*} \n\nThe last statement in the theorem can be thought of as a version for proper groupoid submersions of the classic Ehresmann's theorem.\n\n\nThe theorem shows that Riemannian submersions of Lie groupoids are rather rigid, so one may wonder about the existence of such submersions. In this respect, a special kind of submersions, known as fibrations, arise as a key concept. On the one hand, fibrations are rigid enough so that they are easier to handle than arbitrary submersions. On the other hand, there are plenty of examples and we have the following fundamental result, which shows their relevance for our theory:\n\n\\begin{theorem*}[Existence of fibered metrics]\nLet $\\phi:\\tilde G\\to G$ be a split fibration between proper Lie groupoids. Then there exist 2-metrics $\\tilde\\eta$ on $\\tilde G$ and $\\eta$ on $G$ making $\\phi$ into a Riemannian submersion.\n\\end{theorem*}\n\nThe proof consists in adapting an averaging argument, introduced in \\cite{dhf}, which we call the \\emph{gauge trick}.\n\n\n\nAlthough the results above look like simple extensions to the groupoid framework of basic facts on fibrations and metrics, they are actually quite powerful and have non-trivial, interesting, consequences. As a first application, we will give simple geometric proofs of some rigidity results for Lie groupoids. Some of these results were obtained recently in \\cite{cms}, where the authors use a sophisticated theory of deformation cohomology to deduce them. The main result in this direction is the following:\n\n\\begin{theorem*}[Rigidity of compact Lie groupoids]\nCompact Lie groupoids are rigid: every proper deformation of a compact Lie groupoid $G\\rightrightarrows M$ is locally trivial.\n\\end{theorem*}\n\nSuch rigidity results include, as special cases, classic theorems on the rigidity of groups (\\cite{nr}), group actions (\\cite{palais}) and foliations (\\cite{rosenberg1,rosenberg2}). Our metric approach provides a novel perspective even for these classic results.\n\n\n\n\nAnother important aspect of our theory arises from the \\emph{stack perspective}. Recall that a presentable (or geometric) stack can be thought of as a Morita equivalence class of Lie groupoids, a categorified version of manifold encoding the transverse geometry. In fact, every Lie groupoid $G\\rightrightarrows M$ determines an \\emph{orbit stack} ${\\ensuremath{\\mathfrak{X}}}=[M/G]$ with a presentation $M\\to {\\ensuremath{\\mathfrak{X}}}$, \nand two groupoids determine the same stack if and only if they are Morita equivalent.\nA key point here is that every Morita equivalence can be realized by a fraction of fibrations. This allow us to apply the previous results to develop the rudiments of the Riemannian geometry of stacks.\n\n\n\n\n\nOur fourth main theorem lead us to the notion of a \\emph{Riemannian metric on a (presentable) stack}, generalizing the usual concepts of Riemannian metrics on manifolds and orbifolds.\n\n\\begin{theorem*}[Morita invariance of 2-metrics]\nA Morita equivalence yields a 1-1 correspondence between equivalence classes of 2-metrics.\n\\end{theorem*}\n\n\n\nGiven a presentable stack ${\\ensuremath{\\mathfrak{X}}}$ and an embedded substack ${\\ensuremath{\\mathfrak{S}}}\\subset {\\ensuremath{\\mathfrak{X}}}$ the normal bundle to ${\\ensuremath{\\mathfrak{S}}}$ in ${\\ensuremath{\\mathfrak{X}}}$ is a well-defined stack $\\nu({\\ensuremath{\\mathfrak{S}}})$, which contains ${\\ensuremath{\\mathfrak{S}}}$ as an embedded substack (the \\emph{zero section}). Given a metric $[\\eta]$ on a \\emph{separated stack} ${\\ensuremath{\\mathfrak{X}}}$, i.e. one arising from a proper groupoid, we have an exponential map $\\exp_{[\\eta]}:\\nu({\\ensuremath{\\mathfrak{S}}}){\\dashrightarrow} {\\ensuremath{\\mathfrak{X}}}$, well-defined in a stacky neighborhood of ${\\ensuremath{\\mathfrak{S}}}$. This map is invertible over some neighborhood, providing a construction of a \\emph{Stacky Tubular Neighborhood}. We also show that, even in the non-proper case, linearization of groupoids is equivalent to the existence of stacky tubular neighborhoods.\n\nGiven a submersion between separated stacks, we construct stacky tubular neighborhoods compatible with the submersion, yielding the following stacky versions of Ehresmann's Theorem. \n\n\\begin{theorem*}[Stacky Ehresmann]\nLet $\\pi:\\tilde {\\ensuremath{\\mathfrak{X}}}{\\dashrightarrow} {\\ensuremath{\\mathfrak{X}}}$ be a surjective submersion between separated stacks, and let ${\\ensuremath{\\mathfrak{S}}}\\subset {\\ensuremath{\\mathfrak{X}}}$ be an embedded substack. Then:\n\\begin{enumerate}[(i)]\n\\item $\\pi$ is linearizable in a neighborhood of $\\tilde {\\ensuremath{\\mathfrak{S}}}:=\\pi^{-1}({\\ensuremath{\\mathfrak{S}}})\\subset {\\ensuremath{\\mathfrak{X}}}$;\n\\item if $\\pi$ is proper, then $\\pi$ is linearizable in a tube $\\tilde{\\mathfrak{U}}=\\pi^{-1}(\\mathfrak{U})$ around  $\\tilde {\\ensuremath{\\mathfrak{S}}}$.\n\\end{enumerate}\n\\end{theorem*}\n\nThis stacky theorem generalizes and encompasses all the above linearization and rigidity results. Its appearance can be explained and motivated as follows. Submersions between manifolds can be identified with a very particular family of Lie groupoids, namely those that are proper without isotropy:\n\n", "index": 3, "text": "$$ M\\to N\\qquad \\longmapsto \\qquad M\\times_N M\\rightrightarrows M$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex2.m1\" class=\"ltx_Math\" alttext=\"M\\to N\\qquad\\longmapsto\\qquad M\\times_{N}M\\rightrightarrows M\" display=\"block\"><mrow><mrow><mi>M</mi><mo>\u2192</mo><mrow><mi>N</mi><mo mathvariant=\"italic\" separator=\"true\">\u2003\u2003</mo><mo>\u27fc</mo></mrow></mrow><mo mathvariant=\"italic\" separator=\"true\">\u2003\u2003</mo><mrow><mrow><mi>M</mi><msub><mo>\u00d7</mo><mi>N</mi></msub><mi>M</mi></mrow><mo>\u21c9</mo><mi>M</mi></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nThis shift of perspective allow us to think of the Stacky Ehresmann Theorem (and its non-proper variant), valid for submersions $\\tilde{\\ensuremath{\\mathfrak{X}}}\\to{\\ensuremath{\\mathfrak{X}}}$ between separated stacks, as a far-reaching extension of the Weinstein-Zung Linearization Theorem. \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\vskip 5 pt\n\n\n\\noindent{\\bf  Organization.} In Section \\ref{sec:fibrations}, we review basic facts about submersions and fibrations between Lie groupoids. In Section \\ref{sec:riemannian:subm} we recall the main properties of Riemannian groupoids and we adapt the gauge trick construction of \\cite{dhf} to the case of fibrations, proving that split fibrations between proper groupoids can be made Riemannian. In Section \\ref{sec:linear:fibrations} we prove our linearization theorems for submersions and proper split fibrations. In Section \\ref{section:rigidity} we give applications of our linearization results to deduce rigidity theorems for Lie groupoids. In Section \\ref{sec:stack} we develop the preliminaries for the stacky approach and in Section \\ref{sec:stack2} we present the Morita invariance of metrics and the stacky Ehresmann.\n\\vskip 5 pt\n\n\\noindent{\\bf  Acknowledgments. } We are grateful to IMPA, UU and UIUC for hosting us at several stages of this project.\nWe thank H. Bursztyn, E. Lerman and I. Moerdijk for fruitful discussions, and M. Crainic, J.N. Mestre and I. Struchiner for sharing with us a preliminary version of their preprint \\cite{cms}.\n\n\n\n \n\n\n\n\n\n\n\n\n\n\n\n\n\n\\section{Fibrations between Lie groupoids}\n\\label{sec:fibrations}\n\n\n\nWe review here definitions and basic facts on fibrations between Lie groupoids, provide examples, and discuss the key concept of a cleavage, that play a role in a sense analogous to connections in ordinary differential geometry. Then we review the correspondence between split fibrations and semi-direct product. Finally, we define and discuss basic facts on proper maps between Lie groupoids, that will be used later.\n\n\\subsection{Definitions and examples}\n\n\n\nFibrations between categories were introduced by Grothendieck \\cite{sga1} in his work on descent theory. A fibration between set-theoretic groupoids is a functor surjective on objects, and for which any arrow can be lifted by setting its source arbitrarily. We are interested in the smooth version, explored by Mackenzie \\cite{mkbook} among others, and which we now recall.\n\n\n\nGiven a Lie groupoid $G=(G\\rightrightarrows M)$, we denote by $G^{(k)}$ the manifold of $k$-tuples of composable arrows. In particular, $G^{(1)}=G$ are the arrows and $G^{(0)}=M$ are the objects. By a {\\bf map of Lie groupoids} $\\phi:G\\to H$ we mean a smooth functor, and we denote by $\\phi^{(k)}:G^{(k)}\\to H^{(k)}$ the induced smooth map. By convention, all our manifolds are second countable and Hausdorff.\n\n\n\n\\begin{definition}\nA map of Lie groupoids $\\phi:\\tilde G\\to G$ is called a {\\bf fibration} if both $\\phi^{(0)}:\\tilde M\\to M$ and\n$\\phi':\\tilde G\\to G\\times_{M}\\tilde M$, $\\phi'(g)=(\\phi^{(1)}(g),s(g))$,\nare surjective submersions. \nWe call $G$ the {\\bf base groupoid} and $\\tilde G$ the {\\bf total groupoid}. \n\\end{definition}\n\n\n\n\\begin{examples}{ex:fibrations}\n \n \\item \n A fibration between manifolds $\\phi:\\tilde M\\to M$, regarded as groupoids with only identity arrows, is just a surjective submersion.\n A fibration between Lie groups $\\phi:\\tilde G\\to G$, regarded as groupoids with only one object, is just a surjective homomorphism. \n\n \\item We define a {\\bf family of Lie groupoids} parametrized by a manifold $M$ as a fibration $\\phi:(\\tilde G\\rightrightarrows \\tilde M)\\to (M\\rightrightarrows M)$ with base $M$. This amounts to give a surjective submersion $\\tilde M\\to M$ that is constant along the $\\tilde G$-orbits. \n \n \\item If $G\\rightrightarrows M$ is a Lie groupoid acting along a surjective submersion $\\mu:{\\tilde M}\\to M$, the projection from the corresponding action groupoid\n $(G\\ltimes {\\tilde M}\\rightrightarrows {\\tilde M})\\to (G\\rightrightarrows M)$ is a fibration. \n Every fibration for which $\\phi'$ is bijective arises in this way -- such a $\\phi$ is called an {\\bf action fibration}.\nOne can think of fibrations as generalized actions.\n \n \\item If $G\\rightrightarrows M$ is a Lie groupoid, then the projections $TG\\to G$ and $T^*G\\to G$ are fibrations of the tangent and cotangent groupoids over $G$. More generally, for any VB-groupoid $\\Gamma\\to G$ (see, e.g., \\cite{bcdh}) the projection is a fibration. \n \n \\item If $\\phi:\\tilde G\\to G$ is a Morita map (weak equivalence according to \\cite{mm}) such that $\\phi^{(0)}$ is a surjective submersion, then $\\phi$ is a fibration. \nMorita fibrations play an important role in the theory of smooth stacks. We will come back to them in section \\ref{sec:Morita:maps}.\n\\end{examples}\n\n\n\nWe say that a map $\\phi:G\\to G'$ is a {\\bf $k$-submersion} if $\\phi^{(k)}$ is a submersion. \nIt is easy to see that a $k$-submersion is also a $(k-1)$-submersion, and that a fibration is a $k$-submersion for every $k$. \nBy a standard transversality criterion (cf. \\cite[A]{bcdh}), the groupoid-theoretic {\\bf fiber product} of a 1-submersion $\\phi$ and any other groupoid map exists and is good, in the sense that their objects and arrows are embedded submanifolds with the expected dimension.\nIn such a fiber product,\n\n", "itemtype": "equation", "pos": 9438, "prevtext": "\nIn this way one can think of the Weinstein-Zung Linearization Theorem for proper Lie groupoids as a far-reaching extension of the classic Ehresmann Theorem (and its non-proper variant). Now, if we let stacks enter into the picture, we can identify arbitrary Lie groupoids with a particular family of submersions, namely the presentations from a smooth manifold to a stack:\n\n", "index": 5, "text": "$$ M\\to [M/G]={\\ensuremath{\\mathfrak{X}}}\\qquad\\longmapsfrom\\qquad G\\rightrightarrows M$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex3.m1\" class=\"ltx_Math\" alttext=\"M\\to[M/G]={\\mathfrak{X}}\\qquad\\longmapsfrom\\qquad G\\rightrightarrows M\" display=\"block\"><mrow><mrow><mi>M</mi><mo>\u2192</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>M</mi><mo>/</mo><mi>G</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mo>=</mo><mi>\ud835\udd1b</mi></mrow><mo mathvariant=\"italic\" separator=\"true\">\u2003\u2003</mo><mrow><mrow><mo>\u27fb</mo><mo mathvariant=\"italic\" separator=\"true\">\u2003\u2003</mo><mi>G</mi></mrow><mo>\u21c9</mo><mi>M</mi></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nif $\\phi$ is a $k$-submersion or a fibration, then the same holds for its {\\bf base-change} $\\psi$.\n\n\n\n\\begin{definition}\nGiven a fibration $\\phi:\\tilde G\\to G$, or more generally a 1-submersion, its {\\bf kernel} $K\\rightrightarrows\\tilde M$ and its {\\bf fibers} $\\tilde G_x\\rightrightarrows\\tilde M_x$ are the fiber products between $\\phi$ and the inclusions $M\\to G$ and ${\\rm id}_x\\to G$, respectively.\n\\end{definition}\n\nThe kernel $K$ consists of the arrows in $\\tilde G$ that are mapped into identities. It is a family of Lie groupoids, the fibers, parametrized by the base. We remark that:\n\\begin{itemize}\n \\item $\\phi$ is an action fibration if and only if $K=\\tilde M$,\n \\item $\\phi$ is a Morita fibration if and only if $K=\\tilde M\\times_M\\tilde M$.\n\\end{itemize}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIn a fibration $\\phi:\\tilde G\\to G$ we can think of the total groupoid $\\tilde G$ as an extension of the base $G$ by the kernel $K$,\n\nand visualize $\\tilde G$ as sitting over $G$, $\\phi$ as a projection, and $K$ as the vertical arrows. \n\n\\begin{definition}\nA {\\bf cleavage} $\\sigma$ for a fibration $\\phi:\\tilde G\\to G$ is a smooth section for the map $\\phi':\\tilde G\\to G\\times_M\\tilde M$.\n\nThe cleavage is {\\bf unital} if it preserves identities, and is  {\\bf flat} if it is closed under multiplication. A {\\bf split fibration} is a fibration endowed with a unital flat cleavage.\n\\end{definition}\n\nNotice that a cleavage $\\sigma:G\\times_M\\tilde M\\to \\tilde G$ is flat if and only if is multiplicative, in the sense that \n\n$\\sigma(g_1g_2,x)=\\sigma(g_1,\\tilde{t}(\\sigma(g_2)))\\sigma(g_2,x)$\nfor any pair $(g_1,g_2)\\in G^{(2)}$. One can think of a cleavage as a choice of horizontal arrows which allow us to relate different fibers, playing a role similar to a connection in differential geometry.\n\n\n\\begin{examples}{ex:fibrations:cleavages}\n\\item A cleavage $\\sigma$ for a surjective group homomorphism $\\phi:\\tilde G\\to G$ is just a smooth section, and is unital and flat if and only if it is a morphism of Lie groups. Therefore, a fibration of Lie groups splits if and only if $\\tilde G$ is a semi-direct product $G\\ltimes K$. \n\n\n\n\n\\item A family of Lie groupoids $\\phi:\\tilde G\\to M$ is a split fibration, for the unit map $\\tilde u:\\tilde M\\to \\tilde G$ yields a unital, flat, cleavage in an obvious way. \n\n\\item In an action fibration $(\\tilde G\\rightrightarrows {\\tilde M})\\to (G\\rightrightarrows M)$ the map $\\phi'$ is invertible, hence there exists a unique cleavage, which is both unital and flat.\n\n\\item Cleavages for the tangent bundle projection $TG\\to G$ that are both linear and unital are called {\\bf connections} of $G$ in \\cite{ac,dhf}. Every Lie groupoid admits a connection, but in general there is not a flat one. \nLinear cleavages for a general VB-groupoid $\\Gamma\\to G$ are called {\\bf horizontal lifts} in \\cite{bcdh,gm}.\n\n\\item For an example on which does not exists a cleavage, consider the Morita fibration $\\phi:({\\mathbb R}\\times{\\mathbb R}\\rightrightarrows{\\mathbb R})\\to(S^1\\times S^1\\rightrightarrows S^1)$ induced by the usual covering map ${\\mathbb R}\\to S^1$.\n\\end{examples}\n\n\n\nA cleavage gives a way to lift an arrow $g$ in the base to {\\bf horizontal arrows} in the total groupoid, defining a mapping $\\theta_g$ between fibers of $\\phi^{(0)}$ as follows:\n\\vspace{-5pt}\n\n", "itemtype": "equation", "pos": 14830, "prevtext": "\nThis shift of perspective allow us to think of the Stacky Ehresmann Theorem (and its non-proper variant), valid for submersions $\\tilde{\\ensuremath{\\mathfrak{X}}}\\to{\\ensuremath{\\mathfrak{X}}}$ between separated stacks, as a far-reaching extension of the Weinstein-Zung Linearization Theorem. \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\vskip 5 pt\n\n\n\\noindent{\\bf  Organization.} In Section \\ref{sec:fibrations}, we review basic facts about submersions and fibrations between Lie groupoids. In Section \\ref{sec:riemannian:subm} we recall the main properties of Riemannian groupoids and we adapt the gauge trick construction of \\cite{dhf} to the case of fibrations, proving that split fibrations between proper groupoids can be made Riemannian. In Section \\ref{sec:linear:fibrations} we prove our linearization theorems for submersions and proper split fibrations. In Section \\ref{section:rigidity} we give applications of our linearization results to deduce rigidity theorems for Lie groupoids. In Section \\ref{sec:stack} we develop the preliminaries for the stacky approach and in Section \\ref{sec:stack2} we present the Morita invariance of metrics and the stacky Ehresmann.\n\\vskip 5 pt\n\n\\noindent{\\bf  Acknowledgments. } We are grateful to IMPA, UU and UIUC for hosting us at several stages of this project.\nWe thank H. Bursztyn, E. Lerman and I. Moerdijk for fruitful discussions, and M. Crainic, J.N. Mestre and I. Struchiner for sharing with us a preliminary version of their preprint \\cite{cms}.\n\n\n\n \n\n\n\n\n\n\n\n\n\n\n\n\n\n\\section{Fibrations between Lie groupoids}\n\\label{sec:fibrations}\n\n\n\nWe review here definitions and basic facts on fibrations between Lie groupoids, provide examples, and discuss the key concept of a cleavage, that play a role in a sense analogous to connections in ordinary differential geometry. Then we review the correspondence between split fibrations and semi-direct product. Finally, we define and discuss basic facts on proper maps between Lie groupoids, that will be used later.\n\n\\subsection{Definitions and examples}\n\n\n\nFibrations between categories were introduced by Grothendieck \\cite{sga1} in his work on descent theory. A fibration between set-theoretic groupoids is a functor surjective on objects, and for which any arrow can be lifted by setting its source arbitrarily. We are interested in the smooth version, explored by Mackenzie \\cite{mkbook} among others, and which we now recall.\n\n\n\nGiven a Lie groupoid $G=(G\\rightrightarrows M)$, we denote by $G^{(k)}$ the manifold of $k$-tuples of composable arrows. In particular, $G^{(1)}=G$ are the arrows and $G^{(0)}=M$ are the objects. By a {\\bf map of Lie groupoids} $\\phi:G\\to H$ we mean a smooth functor, and we denote by $\\phi^{(k)}:G^{(k)}\\to H^{(k)}$ the induced smooth map. By convention, all our manifolds are second countable and Hausdorff.\n\n\n\n\\begin{definition}\nA map of Lie groupoids $\\phi:\\tilde G\\to G$ is called a {\\bf fibration} if both $\\phi^{(0)}:\\tilde M\\to M$ and\n$\\phi':\\tilde G\\to G\\times_{M}\\tilde M$, $\\phi'(g)=(\\phi^{(1)}(g),s(g))$,\nare surjective submersions. \nWe call $G$ the {\\bf base groupoid} and $\\tilde G$ the {\\bf total groupoid}. \n\\end{definition}\n\n\n\n\\begin{examples}{ex:fibrations}\n \n \\item \n A fibration between manifolds $\\phi:\\tilde M\\to M$, regarded as groupoids with only identity arrows, is just a surjective submersion.\n A fibration between Lie groups $\\phi:\\tilde G\\to G$, regarded as groupoids with only one object, is just a surjective homomorphism. \n\n \\item We define a {\\bf family of Lie groupoids} parametrized by a manifold $M$ as a fibration $\\phi:(\\tilde G\\rightrightarrows \\tilde M)\\to (M\\rightrightarrows M)$ with base $M$. This amounts to give a surjective submersion $\\tilde M\\to M$ that is constant along the $\\tilde G$-orbits. \n \n \\item If $G\\rightrightarrows M$ is a Lie groupoid acting along a surjective submersion $\\mu:{\\tilde M}\\to M$, the projection from the corresponding action groupoid\n $(G\\ltimes {\\tilde M}\\rightrightarrows {\\tilde M})\\to (G\\rightrightarrows M)$ is a fibration. \n Every fibration for which $\\phi'$ is bijective arises in this way -- such a $\\phi$ is called an {\\bf action fibration}.\nOne can think of fibrations as generalized actions.\n \n \\item If $G\\rightrightarrows M$ is a Lie groupoid, then the projections $TG\\to G$ and $T^*G\\to G$ are fibrations of the tangent and cotangent groupoids over $G$. More generally, for any VB-groupoid $\\Gamma\\to G$ (see, e.g., \\cite{bcdh}) the projection is a fibration. \n \n \\item If $\\phi:\\tilde G\\to G$ is a Morita map (weak equivalence according to \\cite{mm}) such that $\\phi^{(0)}$ is a surjective submersion, then $\\phi$ is a fibration. \nMorita fibrations play an important role in the theory of smooth stacks. We will come back to them in section \\ref{sec:Morita:maps}.\n\\end{examples}\n\n\n\nWe say that a map $\\phi:G\\to G'$ is a {\\bf $k$-submersion} if $\\phi^{(k)}$ is a submersion. \nIt is easy to see that a $k$-submersion is also a $(k-1)$-submersion, and that a fibration is a $k$-submersion for every $k$. \nBy a standard transversality criterion (cf. \\cite[A]{bcdh}), the groupoid-theoretic {\\bf fiber product} of a 1-submersion $\\phi$ and any other groupoid map exists and is good, in the sense that their objects and arrows are embedded submanifolds with the expected dimension.\nIn such a fiber product,\n\n", "index": 7, "text": "$$\\xymatrix@R=15pt{\\ar@{}[dr]|{\\rm fp}\n\\tilde H \\ar[r] \\ar[d]_{\\psi} & \\tilde G \\ar[d]^{\\phi} \\\\ H \\ar[r] & G\n}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex4.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix@R=15pt{\\ar@{}[dr]|{\\rm fp}\\tilde{H}\\ar[r]\\ar[d]_{\\psi}&amp;\\tilde{G}\\ar[%&#10;d]^{\\phi}\\\\&#10;H\\ar[r]&amp;G}\" display=\"block\"><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mi mathvariant=\"normal\">@</mi><mi>R</mi><mo>=</mo><mn>15</mn><mi>p</mi><mi>t</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mi mathvariant=\"normal\">@</mi><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo stretchy=\"false\">|</mo><mi>fp</mi><mover accent=\"true\"><mi>H</mi><mo stretchy=\"false\">~</mo></mover><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mi>\u03c8</mi></msub><mi mathvariant=\"normal\">&amp;</mi><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msup><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mi>\u03d5</mi></msup><mi>H</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mi mathvariant=\"normal\">&amp;</mi><mi>G</mi></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nThis defines a {\\bf quasi-action} $\\theta:G\\tilde{\\curvearrowright} \\tilde M$, for $g\\mapsto\\theta_g$ does not preserve, in general, identities nor compositions.\n\nThe quasi-action $\\theta:G\\tilde{\\curvearrowright} \\tilde M$ can be upgrade to a quasi-action on the  kernel $\\theta: G\\tilde{\\curvearrowright} K$, by setting $\\theta_g(k):= \\sigma(g,\\tilde x_2)k\\sigma(g,\\tilde x_1)^{-1}$.\n\n\n\nThe structural maps of the kernel $K\\rightrightarrows \\tilde M$ are $G$-equivariant with respect to the quasi-actions, for instance $\\theta_g(k_1 k_2)=\\theta_g(k_1)\\theta_g(k_2)$. In fact, each arrow $g\\in G$ defines a groupoid map $\\theta_g:\\tilde G_x\\to\\tilde G_y$ between the corresponding fibers. \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\subsection{Split fibrations and semidirect product}\n\n\n\nIn a split fibration $\\phi:\\tilde G\\to G$ the whole structure of the total groupoid $\\tilde G$ can be recovered out of the base $G$, the kernel $K$ and the above quasi-actions $\\theta$, as we now explain. \n\nIf $\\sigma$ a unital flat cleavage, then the horizontal arrows define a wide Lie subgroupoid, the {\\bf horizontal groupoid}\n\n", "itemtype": "equation", "pos": 18265, "prevtext": "\nif $\\phi$ is a $k$-submersion or a fibration, then the same holds for its {\\bf base-change} $\\psi$.\n\n\n\n\\begin{definition}\nGiven a fibration $\\phi:\\tilde G\\to G$, or more generally a 1-submersion, its {\\bf kernel} $K\\rightrightarrows\\tilde M$ and its {\\bf fibers} $\\tilde G_x\\rightrightarrows\\tilde M_x$ are the fiber products between $\\phi$ and the inclusions $M\\to G$ and ${\\rm id}_x\\to G$, respectively.\n\\end{definition}\n\nThe kernel $K$ consists of the arrows in $\\tilde G$ that are mapped into identities. It is a family of Lie groupoids, the fibers, parametrized by the base. We remark that:\n\\begin{itemize}\n \\item $\\phi$ is an action fibration if and only if $K=\\tilde M$,\n \\item $\\phi$ is a Morita fibration if and only if $K=\\tilde M\\times_M\\tilde M$.\n\\end{itemize}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIn a fibration $\\phi:\\tilde G\\to G$ we can think of the total groupoid $\\tilde G$ as an extension of the base $G$ by the kernel $K$,\n\nand visualize $\\tilde G$ as sitting over $G$, $\\phi$ as a projection, and $K$ as the vertical arrows. \n\n\\begin{definition}\nA {\\bf cleavage} $\\sigma$ for a fibration $\\phi:\\tilde G\\to G$ is a smooth section for the map $\\phi':\\tilde G\\to G\\times_M\\tilde M$.\n\nThe cleavage is {\\bf unital} if it preserves identities, and is  {\\bf flat} if it is closed under multiplication. A {\\bf split fibration} is a fibration endowed with a unital flat cleavage.\n\\end{definition}\n\nNotice that a cleavage $\\sigma:G\\times_M\\tilde M\\to \\tilde G$ is flat if and only if is multiplicative, in the sense that \n\n$\\sigma(g_1g_2,x)=\\sigma(g_1,\\tilde{t}(\\sigma(g_2)))\\sigma(g_2,x)$\nfor any pair $(g_1,g_2)\\in G^{(2)}$. One can think of a cleavage as a choice of horizontal arrows which allow us to relate different fibers, playing a role similar to a connection in differential geometry.\n\n\n\\begin{examples}{ex:fibrations:cleavages}\n\\item A cleavage $\\sigma$ for a surjective group homomorphism $\\phi:\\tilde G\\to G$ is just a smooth section, and is unital and flat if and only if it is a morphism of Lie groups. Therefore, a fibration of Lie groups splits if and only if $\\tilde G$ is a semi-direct product $G\\ltimes K$. \n\n\n\n\n\\item A family of Lie groupoids $\\phi:\\tilde G\\to M$ is a split fibration, for the unit map $\\tilde u:\\tilde M\\to \\tilde G$ yields a unital, flat, cleavage in an obvious way. \n\n\\item In an action fibration $(\\tilde G\\rightrightarrows {\\tilde M})\\to (G\\rightrightarrows M)$ the map $\\phi'$ is invertible, hence there exists a unique cleavage, which is both unital and flat.\n\n\\item Cleavages for the tangent bundle projection $TG\\to G$ that are both linear and unital are called {\\bf connections} of $G$ in \\cite{ac,dhf}. Every Lie groupoid admits a connection, but in general there is not a flat one. \nLinear cleavages for a general VB-groupoid $\\Gamma\\to G$ are called {\\bf horizontal lifts} in \\cite{bcdh,gm}.\n\n\\item For an example on which does not exists a cleavage, consider the Morita fibration $\\phi:({\\mathbb R}\\times{\\mathbb R}\\rightrightarrows{\\mathbb R})\\to(S^1\\times S^1\\rightrightarrows S^1)$ induced by the usual covering map ${\\mathbb R}\\to S^1$.\n\\end{examples}\n\n\n\nA cleavage gives a way to lift an arrow $g$ in the base to {\\bf horizontal arrows} in the total groupoid, defining a mapping $\\theta_g$ between fibers of $\\phi^{(0)}$ as follows:\n\\vspace{-5pt}\n\n", "index": 9, "text": "$$\\xymatrix@R=8pt@C=40pt{ & \\\\ \\theta_g(\\bar{x}_2) \\ar@{-}[u] & \\ar@/_1pc/[l]^{\\sigma(g,\\bar{x}_2)} \\bar{x}_2 \\ar@{-}[u] \\\\ \\theta_g(\\bar{x}_1)\\ar@{-}[u]& \\ar@/_1pc/[l]^{\\sigma(g,\\bar{x}_1)} \\bar{x}_1\\ar@{-}[u] \\\\ \\ar@{-}[u] & \\ar@{-}[u]\\\\ y & \\ar@/_1pc/[l]^g x}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex5.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix@R=8pt@C=40pt{&amp;\\\\&#10;\\theta_{g}(\\bar{x}_{2})\\ar@{-}[u]&amp;\\ar@/_{1}pc/[l]^{\\sigma(g,\\bar{x}_{2})}\\bar{%&#10;x}_{2}\\ar@{-}[u]\\\\&#10;\\theta_{g}(\\bar{x}_{1})\\ar@{-}[u]&amp;\\ar@/_{1}pc/[l]^{\\sigma(g,\\bar{x}_{1})}\\bar{%&#10;x}_{1}\\ar@{-}[u]\\\\&#10;\\ar@{-}[u]&amp;\\ar@{-}[u]\\\\&#10;y&amp;\\ar@/_{1}pc/[l]^{g}x}\" display=\"block\"><mrow><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mi>R</mi></mrow><mo>=</mo><mrow><mn>8</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>t</mi><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mi>C</mi></mrow><mo>=</mo><mrow><mrow><mn>40</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>t</mi><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><msub><mi>\u03b8</mi><mi>g</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mover accent=\"true\"><mi>x</mi><mo stretchy=\"false\">\u00af</mo></mover><mn>2</mn></msub><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi></mrow><mo>-</mo><mrow><mrow><mrow><mrow><mrow><mrow><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi></mrow><msub><mo>/</mo><mn>1</mn></msub><mi>p</mi></mrow><mo>\u2062</mo><mi>c</mi></mrow><mo>/</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow><mrow><mi>\u03c3</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo>,</mo><msub><mover accent=\"true\"><mi>x</mi><mo stretchy=\"false\">\u00af</mo></mover><mn>2</mn></msub><mo stretchy=\"false\">)</mo></mrow></mrow></msup></mrow><mo>\u2062</mo><msub><mover accent=\"true\"><mi>x</mi><mo stretchy=\"false\">\u00af</mo></mover><mn>2</mn></msub><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi></mrow><mo>-</mo><mrow><mrow><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><msub><mi>\u03b8</mi><mi>g</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mover accent=\"true\"><mi>x</mi><mo stretchy=\"false\">\u00af</mo></mover><mn>1</mn></msub><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi></mrow><mo>-</mo><mrow><mrow><mrow><mrow><mrow><mrow><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi></mrow><msub><mo>/</mo><mn>1</mn></msub><mi>p</mi></mrow><mo>\u2062</mo><mi>c</mi></mrow><mo>/</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow><mrow><mi>\u03c3</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo>,</mo><msub><mover accent=\"true\"><mi>x</mi><mo stretchy=\"false\">\u00af</mo></mover><mn>1</mn></msub><mo stretchy=\"false\">)</mo></mrow></mrow></msup></mrow><mo>\u2062</mo><msub><mover accent=\"true\"><mi>x</mi><mo stretchy=\"false\">\u00af</mo></mover><mn>1</mn></msub><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi></mrow><mo>-</mo><mrow><mrow><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi></mrow><mo>-</mo><mrow><mrow><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi></mrow><mo>-</mo><mrow><mrow><mrow><mrow><mrow><mrow><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mi>y</mi><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi></mrow><msub><mo>/</mo><mn>1</mn></msub><mi>p</mi></mrow><mo>\u2062</mo><mi>c</mi></mrow><mo>/</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow><mi>g</mi></msup></mrow><mo>\u2062</mo><mi>x</mi></mrow></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nand the quasi-actions $\\theta:G{\\curvearrowright} \\tilde M$, $\\theta: G{\\curvearrowright} K$ become honest actions, compatible with the groupoid structure in the sense of the following definition (\\cite[Def. 2.5.1]{mkbook}):\n\n\n\n\\begin{definition}\nLet $G\\rightrightarrows M$ be a Lie groupoid, and let $q:(K\\rightrightarrows \\tilde M)\\to M$ be a family of Lie groupoids parametrized by $M$. Then an {\\bf action}\n\n", "itemtype": "equation", "pos": 19628, "prevtext": "\nThis defines a {\\bf quasi-action} $\\theta:G\\tilde{\\curvearrowright} \\tilde M$, for $g\\mapsto\\theta_g$ does not preserve, in general, identities nor compositions.\n\nThe quasi-action $\\theta:G\\tilde{\\curvearrowright} \\tilde M$ can be upgrade to a quasi-action on the  kernel $\\theta: G\\tilde{\\curvearrowright} K$, by setting $\\theta_g(k):= \\sigma(g,\\tilde x_2)k\\sigma(g,\\tilde x_1)^{-1}$.\n\n\n\nThe structural maps of the kernel $K\\rightrightarrows \\tilde M$ are $G$-equivariant with respect to the quasi-actions, for instance $\\theta_g(k_1 k_2)=\\theta_g(k_1)\\theta_g(k_2)$. In fact, each arrow $g\\in G$ defines a groupoid map $\\theta_g:\\tilde G_x\\to\\tilde G_y$ between the corresponding fibers. \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\subsection{Split fibrations and semidirect product}\n\n\n\nIn a split fibration $\\phi:\\tilde G\\to G$ the whole structure of the total groupoid $\\tilde G$ can be recovered out of the base $G$, the kernel $K$ and the above quasi-actions $\\theta$, as we now explain. \n\nIf $\\sigma$ a unital flat cleavage, then the horizontal arrows define a wide Lie subgroupoid, the {\\bf horizontal groupoid}\n\n", "index": 11, "text": "$$(H \\rightrightarrows \\tilde M)\\subset (\\tilde G\\rightrightarrows \\tilde M),$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex6.m1\" class=\"ltx_Math\" alttext=\"(H\\rightrightarrows\\tilde{M})\\subset(\\tilde{G}\\rightrightarrows\\tilde{M}),\" display=\"block\"><mrow><mrow><mo stretchy=\"false\">(</mo><mi>H</mi><mo>\u21c9</mo><mover accent=\"true\"><mi>M</mi><mo stretchy=\"false\">~</mo></mover><mo stretchy=\"false\">)</mo></mrow><mo>\u2282</mo><mrow><mo stretchy=\"false\">(</mo><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mo>\u21c9</mo><mover accent=\"true\"><mi>M</mi><mo stretchy=\"false\">~</mo></mover><mo stretchy=\"false\">)</mo></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nconsists of a pair of groupoid actions $G{\\curvearrowright} K$, $G{\\curvearrowright} \\tilde M$, in such a way that the structural maps of $K\\rightrightarrows \\tilde M$ are $G$-equivariant.\n\\end{definition}\n\nA unital flat cleavage $\\sigma$ defines therefore an action  $(G\\rightrightarrows M){\\curvearrowright} (K\\rightrightarrows \\tilde M)$, and as it turns out, every split fibration arises in this way. For the inverse procedure, i.e., to construct a split fibration out of an action, we have the following generalization from groups to groupoids of the notion of semi-direct product:\n\n\n\n\\begin{definition}[\\cite{mkbook}]\nGiven an action $(G\\rightrightarrows M){\\curvearrowright} (K\\rightrightarrows \\tilde M)$, the {\\bf semidirect product} $G\\ltimes K =(G\\times_M K \\rightrightarrows \\tilde M)$ is the Lie groupoid where:\n\\begin{itemize}\n\\item the arrows consist of pairs $(g,k)$ such that $q(k)=s(g)$; \n\\item the source and target are given by $s(g,k)=s(k)$, $t(g,k)=\\theta_{g}(t(k))$; \n\\item the multiplication is given by $(g',k')(g,k)=(g'g,\\theta_{g^{-1}}(k')k)$.\n\\end{itemize}\n\n", "itemtype": "equation", "pos": 20119, "prevtext": "\nand the quasi-actions $\\theta:G{\\curvearrowright} \\tilde M$, $\\theta: G{\\curvearrowright} K$ become honest actions, compatible with the groupoid structure in the sense of the following definition (\\cite[Def. 2.5.1]{mkbook}):\n\n\n\n\\begin{definition}\nLet $G\\rightrightarrows M$ be a Lie groupoid, and let $q:(K\\rightrightarrows \\tilde M)\\to M$ be a family of Lie groupoids parametrized by $M$. Then an {\\bf action}\n\n", "index": 13, "text": "$$(G\\rightrightarrows M){\\curvearrowright} (K\\rightrightarrows \\tilde M)$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex7.m1\" class=\"ltx_Math\" alttext=\"(G\\rightrightarrows M){\\curvearrowright}(K\\rightrightarrows\\tilde{M})\" display=\"block\"><mrow><mrow><mo stretchy=\"false\">(</mo><mi>G</mi><mo>\u21c9</mo><mi>M</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u21b7</mo><mrow><mo stretchy=\"false\">(</mo><mi>K</mi><mo>\u21c9</mo><mover accent=\"true\"><mi>M</mi><mo stretchy=\"false\">~</mo></mover><mo stretchy=\"false\">)</mo></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\n\\end{definition}\n\nIn the semi-direct product $G\\ltimes K$, the obvious projection $(g,k)\\mapsto g$ defines a split fibration \n$(G\\times_M K \\rightrightarrows \\tilde M)\\to (G\\rightrightarrows M)$,\nwith a canonical unital flat cleavage given by $\\sigma(g,\\tilde x)=(g,{\\rm id}_{\\tilde x})$.\nThese two constructions are mutually inverse:\n\n\\begin{theorem}[{\\cite[Thm 2.5.3]{mkbook}}]\nThere is a 1-1 correspondence between (isomorphisms classes of) split fibrations and actions of a groupoid over another one. Every split fibration is isomorphic to a semi-direct product.\n\\end{theorem}\n\n\\begin{remark}\nThis extends the correspondence between actions of groupoids over manifolds and action fibrations (see, e.g., \\cite[Proposition 3.3.2]{dh}). It can be seen as a smooth version of the correspondence between categorical split fibrations $\\phi:\\tilde G\\to G$ and functors $G^\\circ\\to\\{\\text{Categories}\\}$,\n\n\n\n\nthat extends to arbitrary cleavages and pseudo-functors (see e.g. \\cite[3.1]{vistoli}).\n \\end{remark}\n\n\n\n\nA fundamental class of Lie groupoids, that play a key role, is that of {\\bf proper groupoids}, i.e, groupoids $G\\rightrightarrows M$ for which the anchor $(t,s):G\\to M\\times M$ is a proper map. Concerning properness, for a split fibration, we have:\n\n\\begin{lemma}\\label{lemma:proper-semidirect-product}\nLet $\\phi:\\tilde G\\to G$ be a split fibration with kernel $K$ and horizontal groupoid $H$.\n\\begin{enumerate}[(a)]\n \\item If $G$ and $K$ are proper, then $\\tilde G$ is proper,\n \\item If $\\tilde G$ is proper then both $H$ and $K$ are proper.\n\\end{enumerate}\n\\end{lemma}\n\n\\begin{proof}\nWe can assume that $\\tilde G = G\\ltimes K$. \nTo prove (a), let $y_n{\\xleftarrow} {(g_n,k_n)}x_n$ be a sequence of arrows in $\\tilde G$ such that $\\lim x_n=x$ and $\\lim y_n= y$.\nSince $\\lim \\phi(y_n)=\\phi(y)$ and $\\lim \\phi(x_n)=\\phi(x)$ and $G$ is proper, $\\{g_n\\}$ has a convergent subsequence, which we may assume is $\\{g_n\\}$ itself. But then, \\smash{$g_n^{-1}y_{n}{\\xleftarrow} {k_{n}}x_{n}$} is a sequence of arrows in $K$ whose source and target form convergent sequences. \n\n", "itemtype": "equation", "pos": 21279, "prevtext": "\nconsists of a pair of groupoid actions $G{\\curvearrowright} K$, $G{\\curvearrowright} \\tilde M$, in such a way that the structural maps of $K\\rightrightarrows \\tilde M$ are $G$-equivariant.\n\\end{definition}\n\nA unital flat cleavage $\\sigma$ defines therefore an action  $(G\\rightrightarrows M){\\curvearrowright} (K\\rightrightarrows \\tilde M)$, and as it turns out, every split fibration arises in this way. For the inverse procedure, i.e., to construct a split fibration out of an action, we have the following generalization from groups to groupoids of the notion of semi-direct product:\n\n\n\n\\begin{definition}[\\cite{mkbook}]\nGiven an action $(G\\rightrightarrows M){\\curvearrowright} (K\\rightrightarrows \\tilde M)$, the {\\bf semidirect product} $G\\ltimes K =(G\\times_M K \\rightrightarrows \\tilde M)$ is the Lie groupoid where:\n\\begin{itemize}\n\\item the arrows consist of pairs $(g,k)$ such that $q(k)=s(g)$; \n\\item the source and target are given by $s(g,k)=s(k)$, $t(g,k)=\\theta_{g}(t(k))$; \n\\item the multiplication is given by $(g',k')(g,k)=(g'g,\\theta_{g^{-1}}(k')k)$.\n\\end{itemize}\n\n", "index": 15, "text": "$$\\xymatrix@R=12pt{\ng\\tilde y & \\tilde y\\\\ \n & \\tilde x \\ar@{-->}[ul]^{(g,k)}  \\ar[u]_{k} \\\\ y & \\ar[l]^g x}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex8.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix@R=12pt{g\\tilde{y}&amp;\\tilde{y}\\\\&#10;&amp;\\tilde{x}\\ar@{--&gt;}[ul]^{(g,k)}\\ar[u]_{k}\\\\&#10;y&amp;\\ar[l]^{g}x}\" display=\"block\"><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mi mathvariant=\"normal\">@</mi><mi>R</mi><mo>=</mo><mn>12</mn><mi>p</mi><mi>t</mi><mi>g</mi><mover accent=\"true\"><mi>y</mi><mo stretchy=\"false\">~</mo></mover><mi mathvariant=\"normal\">&amp;</mi><mover accent=\"true\"><mi>y</mi><mo stretchy=\"false\">~</mo></mover><mi mathvariant=\"normal\">&amp;</mi><mover accent=\"true\"><mi>x</mi><mo stretchy=\"false\">~</mo></mover><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mi mathvariant=\"normal\">@</mi><mo>-</mo><mo>-</mo><mo>&gt;</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>u</mi><mi>l</mi><mo stretchy=\"false\">]</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo>,</mo><mi>k</mi><mo stretchy=\"false\">)</mo></mrow></msup><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msub><mrow><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo></mrow><mi>k</mi></msub><mi>y</mi><mi mathvariant=\"normal\">&amp;</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msup><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow><mi>g</mi></msup><mi>x</mi></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nSince $K$ is proper, the sequence $\\{k_n\\}$ has a convergent subsequence $\\{k_{n_i}\\}$. We conclude that $\\{(g_{n_i},k_{n_i})\\}$ is a convergent sequence and $\\tilde G=G\\times_M K$ is proper. \n\nWe can prove (b) by using that a closed subgroupoid of a proper groupoid is proper. Since a section of a surjective submersion is a closed map, the set of horizontal arrows $H\\subset \\tilde G$ is a closed submanifold. Similarly, $M\\subset G$ is a closed submanifold, and therefore \\smash{$K={\\phi^{(1)}}^{-1}(M)\\subset \\tilde G$} is also closed.\n\\end{proof}\n\n\n\n\\begin{example}\nBoth implications in the previous lemma are, in general, strict.\nFor instance, the action by translations $({\\mathbb R}\\rightrightarrows\\ast){\\curvearrowright}({\\mathbb R}\\rightrightarrows{\\mathbb R})$ leads to a split fibration with proper total groupoid but whose base is not proper. \nBesides, translations on the units and arrows of the pair groupoid $({\\mathbb R}\\rightrightarrows\\ast){\\curvearrowright}({\\mathbb R}\\times{\\mathbb R}\\rightrightarrows{\\mathbb R})$ yields a fibration for which kernel and horizontal groupoids are proper but the total groupoid is not.\n\\end{example}\n\n\n\\subsection{Proper fibrations between Lie groupoids}\n\n\n\nBesides proper groupoids, we are also interested in proper maps between groupoids, which play a crucial role in one of our main results, namely the groupoid version of Ehresmann's theorem. We propose the following definition:\n\n\\begin{definition}\\label{def:proper-map}\nWe say that a map between Lie groupoids $\\phi:\\tilde G\\to G$ is {\\bf proper} if $\\phi^{(1)}$ is, or equivalently, if $\\phi^{(k)}$ is proper for some, and hence all, $k\\geq 1$.\n\\end{definition}\n\n\n\nThis definition is justified by the following lemma, which also gives basic properties of such proper maps.\n\n\n\\begin{lemma}\nLet $\\phi:\\tilde G\\to G$ be a Lie groupoid map. Then:\n\\begin{enumerate}[(a)]\n \\item If $\\phi^{(k)}$ is proper then $\\phi^{(k-1)}$ also is.\n \\item If $\\phi^{(1)}$ is proper then $\\phi^{(k)}$ is proper for all $k>0$. \n \\item If $\\phi^{(0)}$ is proper and $\\tilde G$ is proper then $\\phi^{(1)}$ is proper.\n\\end{enumerate}\n\\end{lemma}\n\\begin{proof}\nThe restriction of a proper map  $\\tilde X\\to X$ between Hausdorff spaces to closed subsets $\\tilde A\\subset \\tilde X$ and $A\\subset X$ remains proper. Then (a) follows since we can see $G^{(k-1)}$ as a closed submanifold of $G^{(k)}$ by using one of the degeneracy maps. Similarly, (b) follows  since we have the inclusion $G^{(k)}\\subset G^k$ and the cartesian product map $(\\phi^{(1)})^k:\\tilde G^k\\to G^k$ is proper. For (c), we consider the commutative square:\n\n", "itemtype": "equation", "pos": 23467, "prevtext": "\n\\end{definition}\n\nIn the semi-direct product $G\\ltimes K$, the obvious projection $(g,k)\\mapsto g$ defines a split fibration \n$(G\\times_M K \\rightrightarrows \\tilde M)\\to (G\\rightrightarrows M)$,\nwith a canonical unital flat cleavage given by $\\sigma(g,\\tilde x)=(g,{\\rm id}_{\\tilde x})$.\nThese two constructions are mutually inverse:\n\n\\begin{theorem}[{\\cite[Thm 2.5.3]{mkbook}}]\nThere is a 1-1 correspondence between (isomorphisms classes of) split fibrations and actions of a groupoid over another one. Every split fibration is isomorphic to a semi-direct product.\n\\end{theorem}\n\n\\begin{remark}\nThis extends the correspondence between actions of groupoids over manifolds and action fibrations (see, e.g., \\cite[Proposition 3.3.2]{dh}). It can be seen as a smooth version of the correspondence between categorical split fibrations $\\phi:\\tilde G\\to G$ and functors $G^\\circ\\to\\{\\text{Categories}\\}$,\n\n\n\n\nthat extends to arbitrary cleavages and pseudo-functors (see e.g. \\cite[3.1]{vistoli}).\n \\end{remark}\n\n\n\n\nA fundamental class of Lie groupoids, that play a key role, is that of {\\bf proper groupoids}, i.e, groupoids $G\\rightrightarrows M$ for which the anchor $(t,s):G\\to M\\times M$ is a proper map. Concerning properness, for a split fibration, we have:\n\n\\begin{lemma}\\label{lemma:proper-semidirect-product}\nLet $\\phi:\\tilde G\\to G$ be a split fibration with kernel $K$ and horizontal groupoid $H$.\n\\begin{enumerate}[(a)]\n \\item If $G$ and $K$ are proper, then $\\tilde G$ is proper,\n \\item If $\\tilde G$ is proper then both $H$ and $K$ are proper.\n\\end{enumerate}\n\\end{lemma}\n\n\\begin{proof}\nWe can assume that $\\tilde G = G\\ltimes K$. \nTo prove (a), let $y_n{\\xleftarrow} {(g_n,k_n)}x_n$ be a sequence of arrows in $\\tilde G$ such that $\\lim x_n=x$ and $\\lim y_n= y$.\nSince $\\lim \\phi(y_n)=\\phi(y)$ and $\\lim \\phi(x_n)=\\phi(x)$ and $G$ is proper, $\\{g_n\\}$ has a convergent subsequence, which we may assume is $\\{g_n\\}$ itself. But then, \\smash{$g_n^{-1}y_{n}{\\xleftarrow} {k_{n}}x_{n}$} is a sequence of arrows in $K$ whose source and target form convergent sequences. \n\n", "index": 17, "text": "$$\\xymatrix@R=15pt\n{y_n & g_n^{-1} y_n\\\\ \n & x_n \\ar@{-->}[ul]^{(g_n,k_n)}  \\ar[u]_{k_n} \\\\ \\phi(y_n) & \\ar[l]_{g_n} \\phi(x_n)}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex9.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix@R=15pt{y_{n}&amp;g_{n}^{-1}y_{n}\\\\&#10;&amp;x_{n}\\ar@{--&gt;}[ul]^{(g_{n},k_{n})}\\ar[u]_{k_{n}}\\\\&#10;\\phi(y_{n})&amp;\\ar[l]_{g_{n}}\\phi(x_{n})}\" display=\"block\"><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mi mathvariant=\"normal\">@</mi><mi>R</mi><mo>=</mo><mn>15</mn><mi>p</mi><mi>t</mi><msub><mi>y</mi><mi>n</mi></msub><mi mathvariant=\"normal\">&amp;</mi><msubsup><mi>g</mi><mi>n</mi><mrow><mo>-</mo><mn>1</mn></mrow></msubsup><msub><mi>y</mi><mi>n</mi></msub><mi mathvariant=\"normal\">&amp;</mi><msub><mi>x</mi><mi>n</mi></msub><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mi mathvariant=\"normal\">@</mi><mo>-</mo><mo>-</mo><mo>&gt;</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>u</mi><mi>l</mi><mo stretchy=\"false\">]</mo></mrow><mrow><mo stretchy=\"false\">(</mo><msub><mi>g</mi><mi>n</mi></msub><mo>,</mo><msub><mi>k</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo></mrow></msup><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msub><mrow><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo></mrow><msub><mi>k</mi><mi>n</mi></msub></msub><mi>\u03d5</mi><mrow><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo></mrow><mi mathvariant=\"normal\">&amp;</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msub><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow><msub><mi>g</mi><mi>n</mi></msub></msub><mi>\u03d5</mi><mrow><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nIf $K\\subset G$ is compact, its preimage ${\\phi^{(1)}}^{-1}(K)$ is a closed set inside the compact set \n\n", "itemtype": "equation", "pos": 26209, "prevtext": "\nSince $K$ is proper, the sequence $\\{k_n\\}$ has a convergent subsequence $\\{k_{n_i}\\}$. We conclude that $\\{(g_{n_i},k_{n_i})\\}$ is a convergent sequence and $\\tilde G=G\\times_M K$ is proper. \n\nWe can prove (b) by using that a closed subgroupoid of a proper groupoid is proper. Since a section of a surjective submersion is a closed map, the set of horizontal arrows $H\\subset \\tilde G$ is a closed submanifold. Similarly, $M\\subset G$ is a closed submanifold, and therefore \\smash{$K={\\phi^{(1)}}^{-1}(M)\\subset \\tilde G$} is also closed.\n\\end{proof}\n\n\n\n\\begin{example}\nBoth implications in the previous lemma are, in general, strict.\nFor instance, the action by translations $({\\mathbb R}\\rightrightarrows\\ast){\\curvearrowright}({\\mathbb R}\\rightrightarrows{\\mathbb R})$ leads to a split fibration with proper total groupoid but whose base is not proper. \nBesides, translations on the units and arrows of the pair groupoid $({\\mathbb R}\\rightrightarrows\\ast){\\curvearrowright}({\\mathbb R}\\times{\\mathbb R}\\rightrightarrows{\\mathbb R})$ yields a fibration for which kernel and horizontal groupoids are proper but the total groupoid is not.\n\\end{example}\n\n\n\\subsection{Proper fibrations between Lie groupoids}\n\n\n\nBesides proper groupoids, we are also interested in proper maps between groupoids, which play a crucial role in one of our main results, namely the groupoid version of Ehresmann's theorem. We propose the following definition:\n\n\\begin{definition}\\label{def:proper-map}\nWe say that a map between Lie groupoids $\\phi:\\tilde G\\to G$ is {\\bf proper} if $\\phi^{(1)}$ is, or equivalently, if $\\phi^{(k)}$ is proper for some, and hence all, $k\\geq 1$.\n\\end{definition}\n\n\n\nThis definition is justified by the following lemma, which also gives basic properties of such proper maps.\n\n\n\\begin{lemma}\nLet $\\phi:\\tilde G\\to G$ be a Lie groupoid map. Then:\n\\begin{enumerate}[(a)]\n \\item If $\\phi^{(k)}$ is proper then $\\phi^{(k-1)}$ also is.\n \\item If $\\phi^{(1)}$ is proper then $\\phi^{(k)}$ is proper for all $k>0$. \n \\item If $\\phi^{(0)}$ is proper and $\\tilde G$ is proper then $\\phi^{(1)}$ is proper.\n\\end{enumerate}\n\\end{lemma}\n\\begin{proof}\nThe restriction of a proper map  $\\tilde X\\to X$ between Hausdorff spaces to closed subsets $\\tilde A\\subset \\tilde X$ and $A\\subset X$ remains proper. Then (a) follows since we can see $G^{(k-1)}$ as a closed submanifold of $G^{(k)}$ by using one of the degeneracy maps. Similarly, (b) follows  since we have the inclusion $G^{(k)}\\subset G^k$ and the cartesian product map $(\\phi^{(1)})^k:\\tilde G^k\\to G^k$ is proper. For (c), we consider the commutative square:\n\n", "index": 19, "text": "$$\\xymatrix@R=15pt{\n\\tilde G \\ar[r]^----{(\\tilde t,\\tilde s)} \\ar[d]_{\\phi^{(1)}} & \\tilde M\\times \\tilde M \\ar[d]^{\\phi^{(0)}\\times\\phi^{(0)}} \\\\\nG \\ar[r]^----{(t,s)} & M\\times M\n}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex10.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix@R=15pt{\\tilde{G}\\ar[r]^{-}---{(\\tilde{t},\\tilde{s})}\\ar[d]_{\\phi^{(1%&#10;)}}&amp;\\tilde{M}\\times\\tilde{M}\\ar[d]^{\\phi^{(0)}\\times\\phi^{(0)}}\\\\&#10;G\\ar[r]^{-}---{(t,s)}&amp;M\\times M}\" display=\"block\"><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mi mathvariant=\"normal\">@</mi><mi>R</mi><mo>=</mo><mn>15</mn><mi>p</mi><mi>t</mi><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>-</mo></msup><mo>-</mo><mo>-</mo><mo>-</mo><mrow><mo stretchy=\"false\">(</mo><mover accent=\"true\"><mi>t</mi><mo stretchy=\"false\">~</mo></mover><mo>,</mo><mover accent=\"true\"><mi>s</mi><mo stretchy=\"false\">~</mo></mover><mo stretchy=\"false\">)</mo></mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><msup><mi>\u03d5</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></msup></msub><mi mathvariant=\"normal\">&amp;</mi><mover accent=\"true\"><mi>M</mi><mo stretchy=\"false\">~</mo></mover><mo>\u00d7</mo><mover accent=\"true\"><mi>M</mi><mo stretchy=\"false\">~</mo></mover><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msup><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mrow><msup><mi>\u03d5</mi><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo>\u00d7</mo><msup><mi>\u03d5</mi><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow></msup></mrow></msup><mi>G</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>-</mo></msup><mo>-</mo><mo>-</mo><mo>-</mo><mrow><mo stretchy=\"false\">(</mo><mi>t</mi><mo>,</mo><mi>s</mi><mo stretchy=\"false\">)</mo></mrow><mi mathvariant=\"normal\">&amp;</mi><mi>M</mi><mo>\u00d7</mo><mi>M</mi></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": " \nso it must be compact as well. \n\\end{proof}\n\n\n\nIn a proper fibration the total groupoid is proper if and only if the base groupoid is proper, as shown by the following result, whose proof is similar to that of the above lemma and is left to the reader.\n\n\\begin{lemma}\nLet $\\phi:\\tilde G\\to G$ be a proper map. Then:\n\\begin{enumerate}[(i)]\n\\item If $G$ is proper then $\\tilde G$ is also proper;\n\\item If $\\phi^{(1)}$ is a submersion and $\\tilde G$ is proper then $G$ is also proper.\n\\end{enumerate}\n\\end{lemma}\n\n\n\nBy a {\\bf proper family} we mean a fibration $\\phi:({\\tilde G\\rightrightarrows \\tilde M})\\to ({M\\rightrightarrows M})$ that is also a proper map. This amounts to be the same as a proper Lie groupoid $\\tilde G\\rightrightarrows \\tilde M$ and a proper submersion $\\tilde M\\to M$ that is constant along the $\\tilde G$-orbits.\n\n\\begin{lemma}\nA fibration is proper if and only if its kernel is a proper family. \n\\end{lemma}\n\n\\begin{proof}\nFibrations, surjective submersions, and proper maps are all stable under base-change. It follows that the kernel of any proper submersion, in particular of a fibration, is a proper submersion over $M\\rightrightarrows M$, hence a proper family.\n\nFor the converse, let $\\phi:\\tilde G\\to G$ be a fibration with kernel $K$ a proper family, and let $\\tilde g_n$ be a sequence in $\\tilde G$ such that $\\phi(\\tilde g_n)=g_n$ converges to $g$. Since $\\phi^{(0)}$ is proper, by restricting to a subsequence, we can assume that $\\tilde x_n$ and $\\tilde y_n$ converge to $\\tilde x$ and $\\tilde y$. Choose a local section $\\sigma$ for $\\phi':\\tilde G\\to G\\times_M\\tilde M$ around $(g,\\tilde x)$, call $\\sigma(g_n,\\tilde x_n)=h_n$, and consider $k_n=\\tilde g_nh_n^{-1}\\in K$, well-defined for large $n$.\n\n", "itemtype": "equation", "pos": -1, "prevtext": "\nIf $K\\subset G$ is compact, its preimage ${\\phi^{(1)}}^{-1}(K)$ is a closed set inside the compact set \n\n", "index": 21, "text": "$$(\\tilde t,\\tilde s)^{-1}((\\phi^{(0)}\\times\\phi^{(0)})^{-1}((t,s)(K))),$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex11.m1\" class=\"ltx_Math\" alttext=\"(\\tilde{t},\\tilde{s})^{-1}((\\phi^{(0)}\\times\\phi^{(0)})^{-1}((t,s)(K))),\" display=\"block\"><mrow><mrow><msup><mrow><mo stretchy=\"false\">(</mo><mover accent=\"true\"><mi>t</mi><mo stretchy=\"false\">~</mo></mover><mo>,</mo><mover accent=\"true\"><mi>s</mi><mo stretchy=\"false\">~</mo></mover><mo stretchy=\"false\">)</mo></mrow><mrow><mo>-</mo><mn>1</mn></mrow></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msup><mrow><mo stretchy=\"false\">(</mo><mrow><msup><mi>\u03d5</mi><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo>\u00d7</mo><msup><mi>\u03d5</mi><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow></msup></mrow><mo stretchy=\"false\">)</mo></mrow><mrow><mo>-</mo><mn>1</mn></mrow></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mi>t</mi><mo>,</mo><mi>s</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>K</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nSince $\\phi^{(1)}|_K:K\\to M$ is proper and $\\phi^{(1)}(k_n)=y_n$, there is a subsequence $k_{n_i}$ converging to $k$. Then $\\tilde g_{n_i}$ converges to $k\\sigma(g)=kh$, proving that $\\phi^{(1)}$ is proper.\n\\end{proof}\n\n\n\nProperness of a map is intimately related to the {\\em tube principle}, see e.g.~\\cite{dh}. Within the context of Lie groupoids, we say that a map $\\phi:\\tilde G\\to G$ satisfies the {\\bf tube principle} if for any saturated embedded submanifold $S\\subset M$ and any open subgroupoid $\\tilde G_{\\tilde S}\\subset \\tilde U\\subset \\tilde G$, where $\\tilde S=(\\phi^{(0)})^{-1}(S)$, there exists an open subgroupoid $G_S\\subset V\\subset G$ such that $\\phi^{-1}(V)\\subset \\tilde U$.\n\n\\begin{proposition}\n\\label{prop:tube}\nLet $\\phi:\\tilde G\\to G$ be a proper submersion. If either (i) $G$ is proper or (ii) $\\phi$ is a fibration, then $\\phi$ satisfies the tube principle.\n\\end{proposition}\n\\begin{proof}\nGiven $S\\subset M$ and an open subgroupoid $\\tilde G_{\\tilde S}\\subset \\tilde U\\subset \\tilde G$, let us set:\n\n", "itemtype": "equation", "pos": 28310, "prevtext": " \nso it must be compact as well. \n\\end{proof}\n\n\n\nIn a proper fibration the total groupoid is proper if and only if the base groupoid is proper, as shown by the following result, whose proof is similar to that of the above lemma and is left to the reader.\n\n\\begin{lemma}\nLet $\\phi:\\tilde G\\to G$ be a proper map. Then:\n\\begin{enumerate}[(i)]\n\\item If $G$ is proper then $\\tilde G$ is also proper;\n\\item If $\\phi^{(1)}$ is a submersion and $\\tilde G$ is proper then $G$ is also proper.\n\\end{enumerate}\n\\end{lemma}\n\n\n\nBy a {\\bf proper family} we mean a fibration $\\phi:({\\tilde G\\rightrightarrows \\tilde M})\\to ({M\\rightrightarrows M})$ that is also a proper map. This amounts to be the same as a proper Lie groupoid $\\tilde G\\rightrightarrows \\tilde M$ and a proper submersion $\\tilde M\\to M$ that is constant along the $\\tilde G$-orbits.\n\n\\begin{lemma}\nA fibration is proper if and only if its kernel is a proper family. \n\\end{lemma}\n\n\\begin{proof}\nFibrations, surjective submersions, and proper maps are all stable under base-change. It follows that the kernel of any proper submersion, in particular of a fibration, is a proper submersion over $M\\rightrightarrows M$, hence a proper family.\n\nFor the converse, let $\\phi:\\tilde G\\to G$ be a fibration with kernel $K$ a proper family, and let $\\tilde g_n$ be a sequence in $\\tilde G$ such that $\\phi(\\tilde g_n)=g_n$ converges to $g$. Since $\\phi^{(0)}$ is proper, by restricting to a subsequence, we can assume that $\\tilde x_n$ and $\\tilde y_n$ converge to $\\tilde x$ and $\\tilde y$. Choose a local section $\\sigma$ for $\\phi':\\tilde G\\to G\\times_M\\tilde M$ around $(g,\\tilde x)$, call $\\sigma(g_n,\\tilde x_n)=h_n$, and consider $k_n=\\tilde g_nh_n^{-1}\\in K$, well-defined for large $n$.\n\n", "index": 23, "text": "$$\\xymatrix{\n\\tilde y_n & \\\\\n\\bullet \\ar[u]^{k_n} & \\tilde x_n \\ar[l]_{h_n} \\ar[lu]_{\\tilde g_n}\n}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex12.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix{\\tilde{y}_{n}&amp;\\\\&#10;\\bullet\\ar[u]^{k_{n}}&amp;\\tilde{x}_{n}\\ar[l]_{h_{n}}\\ar[lu]_{\\tilde{g}_{n}}}\" display=\"block\"><mrow><mrow><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mo>\u2062</mo><msub><mover accent=\"true\"><mi>y</mi><mo stretchy=\"false\">~</mo></mover><mi>n</mi></msub><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi></mrow><mo>\u2219</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror></mrow><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>u</mi><mo stretchy=\"false\">]</mo></mrow><msub><mi>k</mi><mi>n</mi></msub></msup><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><msub><mover accent=\"true\"><mi>x</mi><mo stretchy=\"false\">~</mo></mover><mi>n</mi></msub><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msub><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow><msub><mi>h</mi><mi>n</mi></msub></msub><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msub><mrow><mo stretchy=\"false\">[</mo><mrow><mi>l</mi><mo>\u2062</mo><mi>u</mi></mrow><mo stretchy=\"false\">]</mo></mrow><msub><mover accent=\"true\"><mi>g</mi><mo stretchy=\"false\">~</mo></mover><mi>n</mi></msub></msub></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": " \nNotice that $W$ is an open set, since $\\phi^{(1)}$ is a proper map, hence closed.\n\n(i) If $G$ is proper then there is an open $S\\subset U\\subset M$ such that $G_U\\subset W$ (see \\cite[Lemma 5.1.3]{dhf}) and we can take $V=G_U$. To be precise, this follows from the proof rather than from the statement: the requirement of the open neighborhood being a subgroupoid is not used along the proof.\n\n(ii) If $\\phi$ is a fibration then we assert that $W$ is already an open subgroupoid, so we can take $V=W$. In fact, given $g,h\\in W$ two composable arrows, and given $\\tilde k$ an arrow over the product $gh$, we can lift $h$ to an arrow $\\tilde h$ with the same source as $\\tilde k$. Then both $\\tilde h$ and $\\tilde k\\tilde h^{-1}$ are in $\\tilde U$, for its projections are in $W$. Since $\\tilde U$ is closed under products it follows that $\\tilde k$ also belongs to $\\tilde U$. This shows that $gh$ is in $W$. The fact that $W$ is closed under inversion is proved similarly.\n\\end{proof}\n\n\n\n\\section{Riemannian submersions between Lie groupoids}\n\\label{sec:riemannian:subm}\n\nWe recall the definition and main properties of Riemannian groupoids, in particular the gauge trick presented in \\cite{dhf}, a recipe to construct metrics on proper groupoids. Then we develop a fibered version of Haar systems, and we adapt the gauge trick to fibrations,\nobtaining our first major result: every split fibration between proper groupoids can be made Riemannian.\n\n\\subsection{Riemannian groupoids}\n\\label{sec:review}\n\n\nBy a \\emph{Riemannian groupoid} we mean a Lie groupoid equipped with a 2-metric, a concept we have introduced in the first paper of this series \\cite{dhf} and which we now recall briefly. \n\n\n\nRecall that a submersion $p:E\\to B$ is {\\bf Riemannian} if $E,B$ are manifolds endowed with metrics $\\eta^E,\\eta^B$ such that ${\\rm d}_ep:T_eF^\\bot\\to T_bB$ is an isometry for every $e\\in E$. Equivalently, we can require the map $(d_ep)^*:T_b^*B\\to T_eF^\\circ$ to be an isometry with respect to the dual metrics. \nGiven a Riemannian submersion $p:E\\to B$, the metric $\\eta^E$ is {\\bf $p$-transverse}, in the sense that for any two points $e,e'$ in the same fiber $F_b$ the composition $T_eF_b^\\circ\\cong T_b^*B\\cong T_{e'}F^\\circ$ is an isometry. Any $p$-transverse metric induces a {\\bf push-forward metric} $p_*\\eta^E=\\eta^B$ on the base. The notions of Riemannian submersions and $p$-transverse metrics are clearly equivalent.\n\n\n\nGiven a Lie groupoid $G\\rightrightarrows M$, and recalling that $\\G2$ stands for the pairs of composable arrows, there is a natural group action $S_3{\\curvearrowright} \\G2$ by permuting the vertices of the corresponding commutative triangles. There are also three proper and free commuting groupoid actions $G{\\curvearrowright}\\G2$, given by:\n\n", "itemtype": "equation", "pos": -1, "prevtext": "\nSince $\\phi^{(1)}|_K:K\\to M$ is proper and $\\phi^{(1)}(k_n)=y_n$, there is a subsequence $k_{n_i}$ converging to $k$. Then $\\tilde g_{n_i}$ converges to $k\\sigma(g)=kh$, proving that $\\phi^{(1)}$ is proper.\n\\end{proof}\n\n\n\nProperness of a map is intimately related to the {\\em tube principle}, see e.g.~\\cite{dh}. Within the context of Lie groupoids, we say that a map $\\phi:\\tilde G\\to G$ satisfies the {\\bf tube principle} if for any saturated embedded submanifold $S\\subset M$ and any open subgroupoid $\\tilde G_{\\tilde S}\\subset \\tilde U\\subset \\tilde G$, where $\\tilde S=(\\phi^{(0)})^{-1}(S)$, there exists an open subgroupoid $G_S\\subset V\\subset G$ such that $\\phi^{-1}(V)\\subset \\tilde U$.\n\n\\begin{proposition}\n\\label{prop:tube}\nLet $\\phi:\\tilde G\\to G$ be a proper submersion. If either (i) $G$ is proper or (ii) $\\phi$ is a fibration, then $\\phi$ satisfies the tube principle.\n\\end{proposition}\n\\begin{proof}\nGiven $S\\subset M$ and an open subgroupoid $\\tilde G_{\\tilde S}\\subset \\tilde U\\subset \\tilde G$, let us set:\n\n", "index": 25, "text": "$$W:=G\\setminus(\\phi^{(1)}(\\tilde G\\setminus\\tilde U)).$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex13.m1\" class=\"ltx_Math\" alttext=\"W:=G\\setminus(\\phi^{(1)}(\\tilde{G}\\setminus\\tilde{U})).\" display=\"block\"><mrow><mrow><mi>W</mi><mo>:=</mo><mrow><mi>G</mi><mo>\u2216</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msup><mi>\u03d5</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mo>\u2216</mo><mover accent=\"true\"><mi>U</mi><mo stretchy=\"false\">~</mo></mover></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nThe associated principal $G$-bundles are given, respectively, by the face-maps:\n\n", "itemtype": "equation", "pos": 32270, "prevtext": " \nNotice that $W$ is an open set, since $\\phi^{(1)}$ is a proper map, hence closed.\n\n(i) If $G$ is proper then there is an open $S\\subset U\\subset M$ such that $G_U\\subset W$ (see \\cite[Lemma 5.1.3]{dhf}) and we can take $V=G_U$. To be precise, this follows from the proof rather than from the statement: the requirement of the open neighborhood being a subgroupoid is not used along the proof.\n\n(ii) If $\\phi$ is a fibration then we assert that $W$ is already an open subgroupoid, so we can take $V=W$. In fact, given $g,h\\in W$ two composable arrows, and given $\\tilde k$ an arrow over the product $gh$, we can lift $h$ to an arrow $\\tilde h$ with the same source as $\\tilde k$. Then both $\\tilde h$ and $\\tilde k\\tilde h^{-1}$ are in $\\tilde U$, for its projections are in $W$. Since $\\tilde U$ is closed under products it follows that $\\tilde k$ also belongs to $\\tilde U$. This shows that $gh$ is in $W$. The fact that $W$ is closed under inversion is proved similarly.\n\\end{proof}\n\n\n\n\\section{Riemannian submersions between Lie groupoids}\n\\label{sec:riemannian:subm}\n\nWe recall the definition and main properties of Riemannian groupoids, in particular the gauge trick presented in \\cite{dhf}, a recipe to construct metrics on proper groupoids. Then we develop a fibered version of Haar systems, and we adapt the gauge trick to fibrations,\nobtaining our first major result: every split fibration between proper groupoids can be made Riemannian.\n\n\\subsection{Riemannian groupoids}\n\\label{sec:review}\n\n\nBy a \\emph{Riemannian groupoid} we mean a Lie groupoid equipped with a 2-metric, a concept we have introduced in the first paper of this series \\cite{dhf} and which we now recall briefly. \n\n\n\nRecall that a submersion $p:E\\to B$ is {\\bf Riemannian} if $E,B$ are manifolds endowed with metrics $\\eta^E,\\eta^B$ such that ${\\rm d}_ep:T_eF^\\bot\\to T_bB$ is an isometry for every $e\\in E$. Equivalently, we can require the map $(d_ep)^*:T_b^*B\\to T_eF^\\circ$ to be an isometry with respect to the dual metrics. \nGiven a Riemannian submersion $p:E\\to B$, the metric $\\eta^E$ is {\\bf $p$-transverse}, in the sense that for any two points $e,e'$ in the same fiber $F_b$ the composition $T_eF_b^\\circ\\cong T_b^*B\\cong T_{e'}F^\\circ$ is an isometry. Any $p$-transverse metric induces a {\\bf push-forward metric} $p_*\\eta^E=\\eta^B$ on the base. The notions of Riemannian submersions and $p$-transverse metrics are clearly equivalent.\n\n\n\nGiven a Lie groupoid $G\\rightrightarrows M$, and recalling that $\\G2$ stands for the pairs of composable arrows, there is a natural group action $S_3{\\curvearrowright} \\G2$ by permuting the vertices of the corresponding commutative triangles. There are also three proper and free commuting groupoid actions $G{\\curvearrowright}\\G2$, given by:\n\n", "index": 27, "text": "$$k\\cdot (g,h)=(kg,h), \\qquad k\\cdot (g,h)=(gk^{-1},kh), \\qquad k\\cdot (g,h)=(g,hk^{-1}).$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex14.m1\" class=\"ltx_Math\" alttext=\"k\\cdot(g,h)=(kg,h),\\qquad k\\cdot(g,h)=(gk^{-1},kh),\\qquad k\\cdot(g,h)=(g,hk^{-%&#10;1}).\" display=\"block\"><mrow><mrow><mrow><mrow><mi>k</mi><mo>\u22c5</mo><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo>,</mo><mi>h</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>k</mi><mo>\u2062</mo><mi>g</mi></mrow><mo>,</mo><mi>h</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo rspace=\"22.5pt\">,</mo><mrow><mrow><mrow><mi>k</mi><mo>\u22c5</mo><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo>,</mo><mi>h</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>g</mi><mo>\u2062</mo><msup><mi>k</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup></mrow><mo>,</mo><mrow><mi>k</mi><mo>\u2062</mo><mi>h</mi></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo rspace=\"22.5pt\">,</mo><mrow><mrow><mi>k</mi><mo>\u22c5</mo><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo>,</mo><mi>h</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo>,</mo><mrow><mi>h</mi><mo>\u2062</mo><msup><mi>k</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\n\n\n\n\\begin{definition}\nA {\\bf 2-metric} on $G\\rightrightarrows M$ is a metric $\\e2$ on the manifold $\\G2$ which is invariant under $S_3$ and that is transverse to one (and hence all) the face-maps $\\G2\\to G$. The pair $(G\\rightrightarrows M,\\e2)$ is called a \\textbf{Riemannian groupoid}.\n\\end{definition}\n\nEquivalently, 2-metrics can be described, and this is how it appears in \\cite{dhf}, by saying that they are $G$-invariant. Given a Lie groupoid action over a manifold $G{\\curvearrowright} E$, a metric $\\eta$ on $E$ is $G$-invariant if the normal representations of the action groupoid \n$\\tilde\\theta_{(g,e)}:T_eO^\\circ\\cong T_{ge}O^\\circ$ are by isometries. Note that when the action is free and proper, a metric $\\eta^E$ is $G$-invariant if and only if it is transverse to the underlying submersion.\n\n\n\nIt is shown in \\cite{dhf} that many classes of Lie groupoids admit 2-metrics, including all proper groupoids. Our construction of metrics on proper groupoids is by averaging  metrics. To do this we choose a connection on $G$ (cf.~Example \\ref{ex:fibrations:cleavages}.d), yielding a quasi-action $G\\tilde{\\curvearrowright} S^2(TG^{(2)})$ on symmetric 2-tensors, and a normalized {\\bf Haar density} $\\mu^G$, that exists by properness. \nWe give here a brief outline for later reference. \n\n\n\n\\begin{definition}\nGiven $\\theta:G{\\curvearrowright} E$ a groupoid action, and $\\eta$ a metric on $E$, the {\\bf cotangent average} $\\underline{\\eta}\\in \\Gamma(E,S^2(T^*E))$ \nis defined by averaging the dual metric:\n\n", "itemtype": "equation", "pos": 32442, "prevtext": "\nThe associated principal $G$-bundles are given, respectively, by the face-maps:\n\n", "index": 29, "text": "\\begin{align*} \n\\pi_2:\\G2\\to G, &&m:\\G2\\to G, &&\\pi_1:\\G2\\to G,\\\\\n(g,h)\\mapsto h, &&(g,h)\\mapsto gh, &&(g,h)\\mapsto g.\n\\end{align*}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex15.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle\\pi_{2}:\\G 2\\to G,\" display=\"inline\"><mrow><mrow><msub><mi>\u03c0</mi><mn>2</mn></msub><mo>:</mo><mrow><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\G</mtext></merror><mo>\u2062</mo><mn>2</mn></mrow><mo>\u2192</mo><mi>G</mi></mrow></mrow><mo>,</mo></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex15.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle m:\\G 2\\to G,\" display=\"inline\"><mrow><mrow><mi>m</mi><mo>:</mo><mrow><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\G</mtext></merror><mo>\u2062</mo><mn>2</mn></mrow><mo>\u2192</mo><mi>G</mi></mrow></mrow><mo>,</mo></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex15.m3\" class=\"ltx_Math\" alttext=\"\\displaystyle\\pi_{1}:\\G 2\\to G,\" display=\"inline\"><mrow><mrow><msub><mi>\u03c0</mi><mn>1</mn></msub><mo>:</mo><mrow><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\G</mtext></merror><mo>\u2062</mo><mn>2</mn></mrow><mo>\u2192</mo><mi>G</mi></mrow></mrow><mo>,</mo></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex16.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle(g,h)\\mapsto h,\" display=\"inline\"><mrow><mrow><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo>,</mo><mi>h</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u21a6</mo><mi>h</mi></mrow><mo>,</mo></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex16.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle(g,h)\\mapsto gh,\" display=\"inline\"><mrow><mrow><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo>,</mo><mi>h</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u21a6</mo><mrow><mi>g</mi><mo>\u2062</mo><mi>h</mi></mrow></mrow><mo>,</mo></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex16.m3\" class=\"ltx_Math\" alttext=\"\\displaystyle(g,h)\\mapsto g.\" display=\"inline\"><mrow><mrow><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo>,</mo><mi>h</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u21a6</mo><mi>g</mi></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nwhere $x=q(e)$, $g$ runs over $G(-,x)$, and  $\\alpha,\\beta\\in T_e^*E$.\n\\end{definition}\n\nOne must use cotangent averages rather than tangent averages, as explained in \\cite{dhf}, \nto get a {\\bf $G$-invariant} metric on $E$, for $G$-invariant metrics on the tangent bundle do not form a convex set. \nNote that when the action $G{\\curvearrowright} E$ is free and proper, a metric $\\eta^E$ is $G$-invariant if and only if it is transverse to the underlying submersion. The fundamental properties of the cotangent average are listed in the following proposition, whose proof is straightforward.\n\n\\begin{proposition}\\label{prop:averaging-properties}\\\n\n\n\\begin{enumerate}[(a)]\n\\item If $\\eta$ is $G$-invariant, then $\\eta$ and $\\underline\\eta$ agree in the directions normal to the orbits.\n\n\\item If $p:(E,\\eta^E)\\to (B,\\eta^B)$ is a Riemannian submersion equivariant for actions $\\theta^E:G{\\curvearrowright} E$ and $\\theta^B:G{\\curvearrowright} B$, then $p:(E,\\underline\\eta^E)\\to(B,\\underline\\eta^B)$ is also Riemannian.\n\\item If $p:(E,\\eta^E)\\to (B,\\eta^B)$ is a Riemannian submersion and invariant for an action $\\theta^E:G{\\curvearrowright} E$, then $p:(E,\\underline\\eta^E)\\to(B,\\eta^B)$ is also Riemannian.\n\\end{enumerate}\n\\end{proposition}\n\n\n\nWe can summarize now our method to construct 2-metrics on proper  groupoids, referred to as the {\\em gauge trick} in \\cite{dhf}, that will be adapted later to the fibered case:\n\n\\begin{remark}[Gauge Trick]\\label{recipe}\\\n\n\\begin{enumerate}[(a)]\n \\item One starts by invoking the existence of an $s$-transverse metric $\\eta=\\eta^{[1]}$ on $G$, since any submersion admits a transverse metric.\n \\item Then, one endows the $3$-fold $s$-fiber product $G^{[3]}$ with the {\\it fiber product metric} of $\\eta^{[1]}$ with itself, denoted $\\eta^{[3]}$ (see \\cite[Remark 2.5]{dhf}). This is a 2-metric $\\eta^{[3]}$ for the submersion groupoid \n $G^{[2]}\\rightrightarrows G$ arising from $s:G\\to M$.\n \\item Finally, one replaces $\\eta^{[3]}$ by its cotangent average $\\underline{\\eta^{[3]}}$ with respect to the free proper action\n \n", "itemtype": "equation", "pos": 34088, "prevtext": "\n\n\n\n\\begin{definition}\nA {\\bf 2-metric} on $G\\rightrightarrows M$ is a metric $\\e2$ on the manifold $\\G2$ which is invariant under $S_3$ and that is transverse to one (and hence all) the face-maps $\\G2\\to G$. The pair $(G\\rightrightarrows M,\\e2)$ is called a \\textbf{Riemannian groupoid}.\n\\end{definition}\n\nEquivalently, 2-metrics can be described, and this is how it appears in \\cite{dhf}, by saying that they are $G$-invariant. Given a Lie groupoid action over a manifold $G{\\curvearrowright} E$, a metric $\\eta$ on $E$ is $G$-invariant if the normal representations of the action groupoid \n$\\tilde\\theta_{(g,e)}:T_eO^\\circ\\cong T_{ge}O^\\circ$ are by isometries. Note that when the action is free and proper, a metric $\\eta^E$ is $G$-invariant if and only if it is transverse to the underlying submersion.\n\n\n\nIt is shown in \\cite{dhf} that many classes of Lie groupoids admit 2-metrics, including all proper groupoids. Our construction of metrics on proper groupoids is by averaging  metrics. To do this we choose a connection on $G$ (cf.~Example \\ref{ex:fibrations:cleavages}.d), yielding a quasi-action $G\\tilde{\\curvearrowright} S^2(TG^{(2)})$ on symmetric 2-tensors, and a normalized {\\bf Haar density} $\\mu^G$, that exists by properness. \nWe give here a brief outline for later reference. \n\n\n\n\\begin{definition}\nGiven $\\theta:G{\\curvearrowright} E$ a groupoid action, and $\\eta$ a metric on $E$, the {\\bf cotangent average} $\\underline{\\eta}\\in \\Gamma(E,S^2(T^*E))$ \nis defined by averaging the dual metric:\n\n", "index": 31, "text": "$$(\\underline\\eta)^*_e(\\alpha,\\beta):=I_\\theta(\\eta^*)_e(\\alpha,\\beta)= \\int_{G(-,x)} \\eta^*_{ge}(g\\alpha,g\\beta) \\mu^x(g) $$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex17.m1\" class=\"ltx_Math\" alttext=\"(\\underline{\\eta})^{*}_{e}(\\alpha,\\beta):=I_{\\theta}(\\eta^{*})_{e}(\\alpha,%&#10;\\beta)=\\int_{G(-,x)}\\eta^{*}_{ge}(g\\alpha,g\\beta)\\mu^{x}(g)\" display=\"block\"><mrow><mrow><msubsup><mrow><mo stretchy=\"false\">(</mo><munder accentunder=\"true\"><mi>\u03b7</mi><mo>\u00af</mo></munder><mo stretchy=\"false\">)</mo></mrow><mi>e</mi><mo>*</mo></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b1</mi><mo>,</mo><mi>\u03b2</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>:=</mo><mrow><msub><mi>I</mi><mi>\u03b8</mi></msub><mo>\u2062</mo><msub><mrow><mo stretchy=\"false\">(</mo><msup><mi>\u03b7</mi><mo>*</mo></msup><mo stretchy=\"false\">)</mo></mrow><mi>e</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>\u03b1</mi><mo>,</mo><mi>\u03b2</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><msub><mo largeop=\"true\" symmetric=\"true\">\u222b</mo><mrow><mi>G</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mo>-</mo><mo>,</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow></mrow></msub><mrow><msubsup><mi>\u03b7</mi><mrow><mi>g</mi><mo>\u2062</mo><mi>e</mi></mrow><mo>*</mo></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>g</mi><mo>\u2062</mo><mi>\u03b1</mi></mrow><mo>,</mo><mrow><mi>g</mi><mo>\u2062</mo><mi>\u03b2</mi></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><msup><mi>\u03bc</mi><mi>x</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nThe metric $\\underline\\eta^{[3]}$ is still a 2-metric for $G^{[2]}\\rightrightarrows G$, but in addition it is $G$-invariant, so it descends to a metric $\\eta^{(2)}$ on $G^{(2)}=G^{[3]}/G$, that is  a 2-metric on $G\\rightrightarrows M$.\n\\end{enumerate}\n\\end{remark}\n\nWe know that a 2-metric induces a 1-metric and also a 0-metric. The gauge trick yields out of an $s$-transverse metric $\\eta$ on $G$ a 2-metric $\\eta^{(2)}$, but also subsidiary metrics that make all maps in the following diagram Riemannian submersions:\n\n", "itemtype": "equation", "pos": 36280, "prevtext": "\nwhere $x=q(e)$, $g$ runs over $G(-,x)$, and  $\\alpha,\\beta\\in T_e^*E$.\n\\end{definition}\n\nOne must use cotangent averages rather than tangent averages, as explained in \\cite{dhf}, \nto get a {\\bf $G$-invariant} metric on $E$, for $G$-invariant metrics on the tangent bundle do not form a convex set. \nNote that when the action $G{\\curvearrowright} E$ is free and proper, a metric $\\eta^E$ is $G$-invariant if and only if it is transverse to the underlying submersion. The fundamental properties of the cotangent average are listed in the following proposition, whose proof is straightforward.\n\n\\begin{proposition}\\label{prop:averaging-properties}\\\n\n\n\\begin{enumerate}[(a)]\n\\item If $\\eta$ is $G$-invariant, then $\\eta$ and $\\underline\\eta$ agree in the directions normal to the orbits.\n\n\\item If $p:(E,\\eta^E)\\to (B,\\eta^B)$ is a Riemannian submersion equivariant for actions $\\theta^E:G{\\curvearrowright} E$ and $\\theta^B:G{\\curvearrowright} B$, then $p:(E,\\underline\\eta^E)\\to(B,\\underline\\eta^B)$ is also Riemannian.\n\\item If $p:(E,\\eta^E)\\to (B,\\eta^B)$ is a Riemannian submersion and invariant for an action $\\theta^E:G{\\curvearrowright} E$, then $p:(E,\\underline\\eta^E)\\to(B,\\eta^B)$ is also Riemannian.\n\\end{enumerate}\n\\end{proposition}\n\n\n\nWe can summarize now our method to construct 2-metrics on proper  groupoids, referred to as the {\\em gauge trick} in \\cite{dhf}, that will be adapted later to the fibered case:\n\n\\begin{remark}[Gauge Trick]\\label{recipe}\\\n\n\\begin{enumerate}[(a)]\n \\item One starts by invoking the existence of an $s$-transverse metric $\\eta=\\eta^{[1]}$ on $G$, since any submersion admits a transverse metric.\n \\item Then, one endows the $3$-fold $s$-fiber product $G^{[3]}$ with the {\\it fiber product metric} of $\\eta^{[1]}$ with itself, denoted $\\eta^{[3]}$ (see \\cite[Remark 2.5]{dhf}). This is a 2-metric $\\eta^{[3]}$ for the submersion groupoid \n $G^{[2]}\\rightrightarrows G$ arising from $s:G\\to M$.\n \\item Finally, one replaces $\\eta^{[3]}$ by its cotangent average $\\underline{\\eta^{[3]}}$ with respect to the free proper action\n \n", "index": 33, "text": "$$G^{[3]}{\\curvearrowleft} G \\qquad (h_1,h_2,h_3)\\cdot g= (h_1g,h_2g,h_3g).$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex18.m1\" class=\"ltx_Math\" alttext=\"G^{[3]}{\\curvearrowleft}G\\qquad(h_{1},h_{2},h_{3})\\cdot g=(h_{1}g,h_{2}g,h_{3}%&#10;g).\" display=\"block\"><mrow><mrow><mrow><msup><mi>G</mi><mrow><mo stretchy=\"false\">[</mo><mn>3</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo>\u21b6</mo><mi>G</mi></mrow><mo mathvariant=\"italic\" separator=\"true\">\u2003\u2003</mo><mrow><mrow><mrow><mo stretchy=\"false\">(</mo><msub><mi>h</mi><mn>1</mn></msub><mo>,</mo><msub><mi>h</mi><mn>2</mn></msub><mo>,</mo><msub><mi>h</mi><mn>3</mn></msub><mo stretchy=\"false\">)</mo></mrow><mo>\u22c5</mo><mi>g</mi></mrow><mo>=</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msub><mi>h</mi><mn>1</mn></msub><mo>\u2062</mo><mi>g</mi></mrow><mo>,</mo><mrow><msub><mi>h</mi><mn>2</mn></msub><mo>\u2062</mo><mi>g</mi></mrow><mo>,</mo><mrow><msub><mi>h</mi><mn>3</mn></msub><mo>\u2062</mo><mi>g</mi></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nThe induced metrics $\\underline\\eta^{[2]}$ and $\\underline\\eta$ are exactly the cotangent averages for the obvious right actions (cf.~Proposition \\ref{prop:averaging-properties}). In general, we have little control over the resulting metrics for they rely on the choice of connection and Haar system. Even if we start with a 1-metric $\\eta$, in general, we have $\\underline\\eta^{(1)}\\ne\\eta^{(1)}$. Still, we have:\n\n\n\n\\begin{lemma}\\label{lemma:trick-fix}\nIf $\\eta$ is a 1-metric on $G\\rightrightarrows M$ and $\\eta^{(2)}$ is the 2-metric obtained by the gauge trick, then both $\\eta$ and $\\eta^{(2)}$ induce the same 0-metric on the units.\n\\end{lemma}\n\n\\begin{proof}\nThis follows from the above diagram: since $\\eta$ is $G$-invariant then, by  Proposition \\ref{prop:averaging-properties} (c), both $\\eta$ and $\\underline\\eta$ agree in normal directions to the orbits, and therefore they have the same pushforward metric along $t$.\n\\end{proof}\n\n\n\n\\subsection{Riemannian submersions}\n\n\\label{subsection:riemannian-submersion}\n\n\n\nWe are interested in maps between Riemannian groupoids which preserve the metrics:\n\n\\begin{definition}\nA Lie groupoid map $\\phi:\\tilde G\\to G$ is a called a {\\bf Riemannian submersion} if both $\\tilde G$ and $G$ are endowed with 2-metrics, for which $\\phi^{(2)}$ becomes a Riemannian submersion.\n\\end{definition}\n\nNote that if $\\phi^{(2)}$ is a Riemannian submersion then the same holds for $\\phi^{(1)}$ and $\\phi^{(0)}$. \nRequiring the metrics to be compatible both with the groupoid structure and the submersion may seem too restrictive a priori. However, we will show that such metrics exist when the groupoids are proper and $\\phi$ is a split fibration. This is our first major result and yields plenty of examples on which such metrics exist. It will be used later to deduce some fundamental properties of groupoids and stacks.\n\n\n\n\\begin{theorem}\n\\label{thm:Riemannian:submersions}\nEvery split fibration $\\phi:\\tilde G\\to G$ between proper groupoids can be made Riemannian, i.e., there exist 2-metrics $\\tilde\\eta$ on $\\tilde G$ and $\\eta$ on $G$ for which $\\phi$ is a Riemannian submersion.\n\\end{theorem}\n\nThis result generalizes the existence of 2-metrics on a proper Lie groupoid $G$, by considering either the split fibration ${\\rm id}:G\\to G$ or $G\\to\\ast$. We will prove the theorem by adapting the gauge trick from the previous section, now choosing the metric $\\eta$ on $\\tilde G$ already compatible with the fibration, and performing an averaging with respect to suitable fibered Haar densities and connections. \n\n\n\n\n\n\n\n\n\n\n\n\\subsubsection{Fibered Haar densities}\n\n\n\nIn a semi-direct product groupoid $G\\ltimes K$ the source-fiber over $x$ can be written as\n$(G\\ltimes K)(-,x)\\cong G(-,\\phi(x)) \\times K(-,x)$,\nand consequently, we have the following vector bundle isomorphisms involving the Lie algebroids of $G\\ltimes K$, $G$, $K$ and $H$:\n\n", "itemtype": "equation", "pos": 36878, "prevtext": "\nThe metric $\\underline\\eta^{[3]}$ is still a 2-metric for $G^{[2]}\\rightrightarrows G$, but in addition it is $G$-invariant, so it descends to a metric $\\eta^{(2)}$ on $G^{(2)}=G^{[3]}/G$, that is  a 2-metric on $G\\rightrightarrows M$.\n\\end{enumerate}\n\\end{remark}\n\nWe know that a 2-metric induces a 1-metric and also a 0-metric. The gauge trick yields out of an $s$-transverse metric $\\eta$ on $G$ a 2-metric $\\eta^{(2)}$, but also subsidiary metrics that make all maps in the following diagram Riemannian submersions:\n\n", "index": 35, "text": "$$\\xymatrix{\n(G^{[3]},\\underline\\eta^{[3]}) \\ar@<0.30pc>[r] \\ar[r] \\ar@<-0.30pc>[r] \\ar[d]& (G^{[2]}, \\underline\\eta^{[2]})\\ar@<0.2pc>[r]\\ar@<-0.2pc>[r] \\ar[d]& (G,\\underline\\eta) \\ar[d]^t\\\\\n(\\G2,\\eta^{(2)}) \\ar@<0.30pc>[r] \\ar[r] \\ar@<-0.30pc>[r]& (\\G1,\\eta^{(1)}) \\ar@<0.2pc>[r]\\ar@<-0.2pc>[r] & (M,\\eta^{(0)}).\n}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex19.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix{(G^{[3]},\\underline{\\eta}^{[3]})\\ar@&lt;0.30pc&gt;[r]\\ar[r]\\ar@&lt;-0.30pc&gt;[r%&#10;]\\ar[d]&amp;(G^{[2]},\\underline{\\eta}^{[2]})\\ar@&lt;0.2pc&gt;[r]\\ar@&lt;-0.2pc&gt;[r]\\ar[d]&amp;(G%&#10;,\\underline{\\eta})\\ar[d]^{t}\\\\&#10;(\\G 2,\\eta^{(2)})\\ar@&lt;0.30pc&gt;[r]\\ar[r]\\ar@&lt;-0.30pc&gt;[r]&amp;(\\G 1,\\eta^{(1)})\\ar@&lt;0%&#10;.2pc&gt;[r]\\ar@&lt;-0.2pc&gt;[r]&amp;(M,\\eta^{(0)}).}\" display=\"block\"><mrow><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msup><mi>G</mi><mrow><mo stretchy=\"false\">[</mo><mn>3</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo>,</mo><msup><munder accentunder=\"true\"><mi>\u03b7</mi><mo>\u00af</mo></munder><mrow><mo stretchy=\"false\">[</mo><mn>3</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mrow><mo>&lt;</mo><mrow><mn>0.30</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>c</mi></mrow><mo>&gt;</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mrow><mo>&lt;</mo><mrow><mo>-</mo><mrow><mn>0.30</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>c</mi></mrow></mrow><mo>&gt;</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msup><mi>G</mi><mrow><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo>,</mo><msup><munder accentunder=\"true\"><mi>\u03b7</mi><mo>\u00af</mo></munder><mrow><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mrow><mo>&lt;</mo><mrow><mn>0.2</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>c</mi></mrow><mo>&gt;</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mrow><mo>&lt;</mo><mrow><mo>-</mo><mrow><mn>0.2</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>c</mi></mrow></mrow><mo>&gt;</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>G</mi><mo>,</mo><munder accentunder=\"true\"><mi>\u03b7</mi><mo>\u00af</mo></munder><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mi>t</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\G</mtext></merror><mo>\u2062</mo><mn>2</mn></mrow><mo>,</mo><msup><mi>\u03b7</mi><mrow><mo stretchy=\"false\">(</mo><mn>2</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mrow><mo>&lt;</mo><mrow><mn>0.30</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>c</mi></mrow><mo>&gt;</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mrow><mo>&lt;</mo><mrow><mo>-</mo><mrow><mn>0.30</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>c</mi></mrow></mrow><mo>&gt;</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\G</mtext></merror><mo>\u2062</mo><mn>1</mn></mrow><mo>,</mo><msup><mi>\u03b7</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mrow><mo>&lt;</mo><mrow><mn>0.2</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>c</mi></mrow><mo>&gt;</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mrow><mo>&lt;</mo><mrow><mo>-</mo><mrow><mn>0.2</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>c</mi></mrow></mrow><mo>&gt;</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>M</mi><mo>,</mo><msup><mi>\u03b7</mi><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo stretchy=\"false\">)</mo></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nIn fact, it is possible to define fibrations and semi-direct products at the infinitesimal level, and to show that the Lie functor preserves these structures (\\cite[\\S 4.4-5]{mkbook}), but we do not need to go further than the above vector bundle isomorphisms here.\n\n\n\n\n\n\n\nRecall that a {\\bf Haar density} in a Lie groupoid $G\\rightrightarrows M$ is a density $\\mu$ on the vector bundle underlying its algebroid $A_G$, which by pullback, yields a smooth family of densities $\\{\\mu^x\\}_{x\\in M}$ on the tangent bundles of the source-fibers\n$TG(-,x)\\cong t^*A$.\n\n\n\n\nThe Haar density is {\\bf normalized} if ${\\rm supp}(\\mu^x)$ is compact for all $x\\in M$ and\n\n", "itemtype": "equation", "pos": 40078, "prevtext": "\nThe induced metrics $\\underline\\eta^{[2]}$ and $\\underline\\eta$ are exactly the cotangent averages for the obvious right actions (cf.~Proposition \\ref{prop:averaging-properties}). In general, we have little control over the resulting metrics for they rely on the choice of connection and Haar system. Even if we start with a 1-metric $\\eta$, in general, we have $\\underline\\eta^{(1)}\\ne\\eta^{(1)}$. Still, we have:\n\n\n\n\\begin{lemma}\\label{lemma:trick-fix}\nIf $\\eta$ is a 1-metric on $G\\rightrightarrows M$ and $\\eta^{(2)}$ is the 2-metric obtained by the gauge trick, then both $\\eta$ and $\\eta^{(2)}$ induce the same 0-metric on the units.\n\\end{lemma}\n\n\\begin{proof}\nThis follows from the above diagram: since $\\eta$ is $G$-invariant then, by  Proposition \\ref{prop:averaging-properties} (c), both $\\eta$ and $\\underline\\eta$ agree in normal directions to the orbits, and therefore they have the same pushforward metric along $t$.\n\\end{proof}\n\n\n\n\\subsection{Riemannian submersions}\n\n\\label{subsection:riemannian-submersion}\n\n\n\nWe are interested in maps between Riemannian groupoids which preserve the metrics:\n\n\\begin{definition}\nA Lie groupoid map $\\phi:\\tilde G\\to G$ is a called a {\\bf Riemannian submersion} if both $\\tilde G$ and $G$ are endowed with 2-metrics, for which $\\phi^{(2)}$ becomes a Riemannian submersion.\n\\end{definition}\n\nNote that if $\\phi^{(2)}$ is a Riemannian submersion then the same holds for $\\phi^{(1)}$ and $\\phi^{(0)}$. \nRequiring the metrics to be compatible both with the groupoid structure and the submersion may seem too restrictive a priori. However, we will show that such metrics exist when the groupoids are proper and $\\phi$ is a split fibration. This is our first major result and yields plenty of examples on which such metrics exist. It will be used later to deduce some fundamental properties of groupoids and stacks.\n\n\n\n\\begin{theorem}\n\\label{thm:Riemannian:submersions}\nEvery split fibration $\\phi:\\tilde G\\to G$ between proper groupoids can be made Riemannian, i.e., there exist 2-metrics $\\tilde\\eta$ on $\\tilde G$ and $\\eta$ on $G$ for which $\\phi$ is a Riemannian submersion.\n\\end{theorem}\n\nThis result generalizes the existence of 2-metrics on a proper Lie groupoid $G$, by considering either the split fibration ${\\rm id}:G\\to G$ or $G\\to\\ast$. We will prove the theorem by adapting the gauge trick from the previous section, now choosing the metric $\\eta$ on $\\tilde G$ already compatible with the fibration, and performing an averaging with respect to suitable fibered Haar densities and connections. \n\n\n\n\n\n\n\n\n\n\n\n\\subsubsection{Fibered Haar densities}\n\n\n\nIn a semi-direct product groupoid $G\\ltimes K$ the source-fiber over $x$ can be written as\n$(G\\ltimes K)(-,x)\\cong G(-,\\phi(x)) \\times K(-,x)$,\nand consequently, we have the following vector bundle isomorphisms involving the Lie algebroids of $G\\ltimes K$, $G$, $K$ and $H$:\n\n", "index": 37, "text": "$$A_{G\\ltimes K}\\cong \\phi^*A_G\\oplus A_K\\cong A_H\\oplus A_K.$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex20.m1\" class=\"ltx_Math\" alttext=\"A_{G\\ltimes K}\\cong\\phi^{*}A_{G}\\oplus A_{K}\\cong A_{H}\\oplus A_{K}.\" display=\"block\"><mrow><mrow><msub><mi>A</mi><mrow><mi>G</mi><mo>\u22c9</mo><mi>K</mi></mrow></msub><mo>\u2245</mo><mrow><mrow><msup><mi>\u03d5</mi><mo>*</mo></msup><mo>\u2062</mo><msub><mi>A</mi><mi>G</mi></msub></mrow><mo>\u2295</mo><msub><mi>A</mi><mi>K</mi></msub></mrow><mo>\u2245</mo><mrow><msub><mi>A</mi><mi>H</mi></msub><mo>\u2295</mo><msub><mi>A</mi><mi>K</mi></msub></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nEvery proper groupoid admits a normalized Haar density, see \\cite[A.2]{dhf} and references therein.\n\n\n\n\n\n\n\nLet $\\mu_G$ and $\\mu_K$ be Haar densities in $G$ and $K$ respectively. Recalling that $A_{G\\ltimes K}$ is isomorphic, as a vector bundle, to $\\phi^*A_G\\oplus A_K$, we can endow $G\\ltimes K$ with the {\\bf fibered density} $\\mu_G\\ltimes\\mu_K$, defined as the pointwise product between the pullback density of $\\mu_G$ and $\\mu_K$.\n\nWhen working with semi-direct products between proper groupoids, the total groupoid is also proper (cf.~Lemma \\ref{lemma:proper-semidirect-product}), hence it admits a normalized Haar density. However, in order to apply Fubini's Theorem we do need a fibered density, so the following lemma becomes important:\n\n\\begin{lemma}\nIf $\\mu_G$ and $\\mu_K$ are normalized, then so does the fibered density $\\mu_{\\tilde G}=\\mu_G\\ltimes\\mu_K$. \n\\end{lemma}\n\n\\begin{proof}\nIf $\\tilde x\\in \\tilde M$, then the support of $(\\mu_{\\tilde G})^{\\tilde x}$ on the $s$-fiber $\\tilde G(-,\\tilde x)\\cong G(-,x)\\times K(-,\\tilde x)$ identifies with the product of the supports of $\\mu_G^x$ and $\\mu_K^{\\tilde x}$, so it is compact. Moreover, by Fubini's Theorem, we have\n\n", "itemtype": "equation", "pos": 40798, "prevtext": "\nIn fact, it is possible to define fibrations and semi-direct products at the infinitesimal level, and to show that the Lie functor preserves these structures (\\cite[\\S 4.4-5]{mkbook}), but we do not need to go further than the above vector bundle isomorphisms here.\n\n\n\n\n\n\n\nRecall that a {\\bf Haar density} in a Lie groupoid $G\\rightrightarrows M$ is a density $\\mu$ on the vector bundle underlying its algebroid $A_G$, which by pullback, yields a smooth family of densities $\\{\\mu^x\\}_{x\\in M}$ on the tangent bundles of the source-fibers\n$TG(-,x)\\cong t^*A$.\n\n\n\n\nThe Haar density is {\\bf normalized} if ${\\rm supp}(\\mu^x)$ is compact for all $x\\in M$ and\n\n", "index": 39, "text": "$$\\int_{G(-,x)}\\mu^x(g)=1.$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex21.m1\" class=\"ltx_Math\" alttext=\"\\int_{G(-,x)}\\mu^{x}(g)=1.\" display=\"block\"><mrow><mrow><mrow><msub><mo largeop=\"true\" symmetric=\"true\">\u222b</mo><mrow><mi>G</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mo>-</mo><mo>,</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow></mrow></msub><mrow><msup><mi>\u03bc</mi><mi>x</mi></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>=</mo><mn>1</mn></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\n\\end{proof}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\subsubsection{Fibered connections}\n\nRecall that a connection on $G\\rightrightarrows M$ is a linear unital cleavage for the fibration $TG\\to G$ (cf. Example \\ref{ex:fibrations:cleavages} (d)), or in other words, a vector bundle map $\\sigma:s^*TM\\to TG$  over $G$ such that ${\\rm d} s\\cdot\\sigma={\\rm id}$ and $\\sigma|_{TM}={\\rm d} u$. Connections are important for they allow us to extend a given action $G{\\curvearrowright} E$ to a quasi-action over the tangent bundle $TE$, and ultimately to average metrics. \n\n\\begin{lemma}\nGiven $G\\ltimes K{\\xrightarrow}\\phi G$ a split fibration, and given $\\sigma^G$ and $\\sigma^K$ connections on $G$ and $K$ respectively, \nthe formula \n\n", "itemtype": "equation", "pos": 42010, "prevtext": "\nEvery proper groupoid admits a normalized Haar density, see \\cite[A.2]{dhf} and references therein.\n\n\n\n\n\n\n\nLet $\\mu_G$ and $\\mu_K$ be Haar densities in $G$ and $K$ respectively. Recalling that $A_{G\\ltimes K}$ is isomorphic, as a vector bundle, to $\\phi^*A_G\\oplus A_K$, we can endow $G\\ltimes K$ with the {\\bf fibered density} $\\mu_G\\ltimes\\mu_K$, defined as the pointwise product between the pullback density of $\\mu_G$ and $\\mu_K$.\n\nWhen working with semi-direct products between proper groupoids, the total groupoid is also proper (cf.~Lemma \\ref{lemma:proper-semidirect-product}), hence it admits a normalized Haar density. However, in order to apply Fubini's Theorem we do need a fibered density, so the following lemma becomes important:\n\n\\begin{lemma}\nIf $\\mu_G$ and $\\mu_K$ are normalized, then so does the fibered density $\\mu_{\\tilde G}=\\mu_G\\ltimes\\mu_K$. \n\\end{lemma}\n\n\\begin{proof}\nIf $\\tilde x\\in \\tilde M$, then the support of $(\\mu_{\\tilde G})^{\\tilde x}$ on the $s$-fiber $\\tilde G(-,\\tilde x)\\cong G(-,x)\\times K(-,\\tilde x)$ identifies with the product of the supports of $\\mu_G^x$ and $\\mu_K^{\\tilde x}$, so it is compact. Moreover, by Fubini's Theorem, we have\n\n", "index": 41, "text": "\\begin{align*}\n\\int_{\\tilde G(-,\\tilde x)} \\mu_{\\tilde G}(g,h) &=\n\\int_{G(-,x)\\times K(-,\\tilde x)} \\mu_G(g)\\times\\mu_H(h)\\\\\n&=\\int_{G(-,x)}\\left[ \\int_{K(-,\\tilde x)} \\mu_G(g)\\right] \\mu_H(h)=1.\n\\end{align*}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex22.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle\\int_{\\tilde{G}(-,\\tilde{x})}\\mu_{\\tilde{G}}(g,h)\" display=\"inline\"><mrow><mstyle displaystyle=\"true\"><msub><mo largeop=\"true\" symmetric=\"true\">\u222b</mo><mrow><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mo>-</mo><mo>,</mo><mover accent=\"true\"><mi>x</mi><mo stretchy=\"false\">~</mo></mover><mo stretchy=\"false\">)</mo></mrow></mrow></msub></mstyle><mrow><msub><mi>\u03bc</mi><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo>,</mo><mi>h</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex22.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle=\\int_{G(-,x)\\times K(-,\\tilde{x})}\\mu_{G}(g)\\times\\mu_{H}(h)\" display=\"inline\"><mrow><mi/><mo>=</mo><mrow><mstyle displaystyle=\"true\"><msub><mo largeop=\"true\" symmetric=\"true\">\u222b</mo><mrow><mrow><mrow><mi>G</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mo>-</mo><mo>,</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u00d7</mo><mi>K</mi></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mo>-</mo><mo>,</mo><mover accent=\"true\"><mi>x</mi><mo stretchy=\"false\">~</mo></mover><mo stretchy=\"false\">)</mo></mrow></mrow></msub></mstyle><mrow><mrow><mrow><msub><mi>\u03bc</mi><mi>G</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u00d7</mo><msub><mi>\u03bc</mi><mi>H</mi></msub></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>h</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex23.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle=\\int_{G(-,x)}\\left[\\int_{K(-,\\tilde{x})}\\mu_{G}(g)\\right]\\mu_{H}%&#10;(h)=1.\" display=\"inline\"><mrow><mrow><mi/><mo>=</mo><mrow><mstyle displaystyle=\"true\"><msub><mo largeop=\"true\" symmetric=\"true\">\u222b</mo><mrow><mi>G</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mo>-</mo><mo>,</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow></mrow></msub></mstyle><mrow><mrow><mo>[</mo><mrow><mstyle displaystyle=\"true\"><msub><mo largeop=\"true\" symmetric=\"true\">\u222b</mo><mrow><mi>K</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mo>-</mo><mo>,</mo><mover accent=\"true\"><mi>x</mi><mo stretchy=\"false\">~</mo></mover><mo stretchy=\"false\">)</mo></mrow></mrow></msub></mstyle><mrow><msub><mi>\u03bc</mi><mi>G</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>]</mo></mrow><mo>\u2062</mo><msub><mi>\u03bc</mi><mi>H</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>h</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>=</mo><mn>1</mn></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\ndefines a connection for the semi-direct product $\\tilde G$.\n\\end{lemma}\n\n\\begin{proof}\nThe following is a good fiber product of manifolds, in the sense of \\cite[2.2]{dh},\n\n", "itemtype": "equation", "pos": 42939, "prevtext": "\n\\end{proof}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\subsubsection{Fibered connections}\n\nRecall that a connection on $G\\rightrightarrows M$ is a linear unital cleavage for the fibration $TG\\to G$ (cf. Example \\ref{ex:fibrations:cleavages} (d)), or in other words, a vector bundle map $\\sigma:s^*TM\\to TG$  over $G$ such that ${\\rm d} s\\cdot\\sigma={\\rm id}$ and $\\sigma|_{TM}={\\rm d} u$. Connections are important for they allow us to extend a given action $G{\\curvearrowright} E$ to a quasi-action over the tangent bundle $TE$, and ultimately to average metrics. \n\n\\begin{lemma}\nGiven $G\\ltimes K{\\xrightarrow}\\phi G$ a split fibration, and given $\\sigma^G$ and $\\sigma^K$ connections on $G$ and $K$ respectively, \nthe formula \n\n", "index": 43, "text": "$$\\tilde \\sigma_{(g,k)}(v)=(\\sigma^G_g({\\rm d}\\phi(v)),\\sigma^K_k(v))$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex24.m1\" class=\"ltx_Math\" alttext=\"\\tilde{\\sigma}_{(g,k)}(v)=(\\sigma^{G}_{g}({\\rm d}\\phi(v)),\\sigma^{K}_{k}(v))\" display=\"block\"><mrow><mrow><msub><mover accent=\"true\"><mi>\u03c3</mi><mo stretchy=\"false\">~</mo></mover><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo>,</mo><mi>k</mi><mo stretchy=\"false\">)</mo></mrow></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msubsup><mi>\u03c3</mi><mi>g</mi><mi>G</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi mathvariant=\"normal\">d</mi><mo>\u2062</mo><mi>\u03d5</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>,</mo><mrow><msubsup><mi>\u03c3</mi><mi>k</mi><mi>K</mi></msubsup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nand therefore it induces a fiber product between their tangent bundles, that can be displayed as a short exact sequence of vector bundles over $\\tilde G$:\n\n", "itemtype": "equation", "pos": 43183, "prevtext": "\ndefines a connection for the semi-direct product $\\tilde G$.\n\\end{lemma}\n\n\\begin{proof}\nThe following is a good fiber product of manifolds, in the sense of \\cite[2.2]{dh},\n\n", "index": 45, "text": "$$\\xymatrix{\\ar@{}[dr]|{\\rm fp}\n\\tilde G \\ar[r]^\\pi \\ar[d]_\\phi & K \\ar[d]^{\\phi s} \\\\ G \\ar[r]_s & M,\n}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex25.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix{\\ar@{}[dr]|{\\rm fp}\\tilde{G}\\ar[r]^{\\pi}\\ar[d]_{\\phi}&amp;K\\ar[d]^{\\phi s%&#10;}\\\\&#10;G\\ar[r]_{s}&amp;M,}\" display=\"block\"><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mi mathvariant=\"normal\">@</mi><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo stretchy=\"false\">|</mo><mi>fp</mi><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mi>\u03c0</mi></msup><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mi>\u03d5</mi></msub><mi mathvariant=\"normal\">&amp;</mi><mi>K</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msup><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mrow><mi>\u03d5</mi><mo>\u2062</mo><mi>s</mi></mrow></msup><mi>G</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msub><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mi>s</mi></msub><mi mathvariant=\"normal\">&amp;</mi><mi>M</mi><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nHence we can identify $T\\tilde G$ with the kernel of the map $(v,w)\\mapsto {\\rm d} s(v) - {\\rm d}\\phi\\cdot {\\rm d} s(w)$. Since\n${\\rm d} s\\cdot\\sigma^G_g({\\rm d}\\phi(v))={\\rm d}\\phi(v)={\\rm d}\\phi \\cdot{\\rm d} s\\cdot\\sigma^K_k(v)$, the above formula does define a vector bundle map $\\tilde\\sigma:\\tilde s^*T\\tilde M\\to T\\tilde G$.\nIt is easy to check directly from the formula that ${\\rm d}\\tilde s\\cdot\\tilde\\sigma={\\rm id}$ and that $\\tilde\\sigma|_{T\\tilde M}={\\rm d} u$.\n\\end{proof}\n\nWhen working with semi-direct products, we shall always use a connection constructed as in this lemma, which we call a {\\bf fibered connection}.\n\n\\subsubsection{Fibered averaging}\nGiven $\\phi:\\tilde G=G\\ltimes K\\to G$ a split fibration between proper groupoids, we fix a fibered normalized Haar density $\\tilde\\mu$ and a fibered connection $\\tilde\\sigma$, built out of data from $G$ and $K$, as in the previous discussion. The averaged metrics produced with respect to them enjoy the following fundamental property:\n\n\\begin{proposition}\\label{prop:fiberd-averaging}\nLet $p:(E,\\eta^E)\\to (B,\\eta^B)$ be a Riemannian submersion, and assume that $\\tilde G{\\curvearrowright} E$ and $G{\\curvearrowright} B$ are groupoid actions compatible with the projection $p:E\\to B$, in the sense that  \n$(g,k)e=g(p(e))$ for all $(g,k)\\in \\tilde{G}=G\\ltimes K$.\n\n", "itemtype": "equation", "pos": 43445, "prevtext": "\nand therefore it induces a fiber product between their tangent bundles, that can be displayed as a short exact sequence of vector bundles over $\\tilde G$:\n\n", "index": 47, "text": "$$0\\to T\\tilde G \\to \\phi^*TG\\oplus \\pi^* TK \\to (\\phi s)^*TM\\to 0.$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex26.m1\" class=\"ltx_Math\" alttext=\"0\\to T\\tilde{G}\\to\\phi^{*}TG\\oplus\\pi^{*}TK\\to(\\phi s)^{*}TM\\to 0.\" display=\"block\"><mrow><mrow><mn>0</mn><mo>\u2192</mo><mrow><mi>T</mi><mo>\u2062</mo><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover></mrow><mo>\u2192</mo><mrow><mrow><msup><mi>\u03d5</mi><mo>*</mo></msup><mo>\u2062</mo><mi>T</mi><mo>\u2062</mo><mi>G</mi></mrow><mo>\u2295</mo><mrow><msup><mi>\u03c0</mi><mo>*</mo></msup><mo>\u2062</mo><mi>T</mi><mo>\u2062</mo><mi>K</mi></mrow></mrow><mo>\u2192</mo><mrow><msup><mrow><mo stretchy=\"false\">(</mo><mrow><mi>\u03d5</mi><mo>\u2062</mo><mi>s</mi></mrow><mo stretchy=\"false\">)</mo></mrow><mo>*</mo></msup><mo>\u2062</mo><mi>T</mi><mo>\u2062</mo><mi>M</mi></mrow><mo>\u2192</mo><mn>0</mn></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nDenote by \\smash{$\\underline\\eta^E$} and \\smash{$\\underline\\eta^B$} the cotangent averages of $\\eta^E$ and $\\eta^B$ with respect to $\\tilde G$ and $G$, with averaging data as above. Then \\smash{$p:(E,\\underline\\eta^E)\\to(B,\\underline\\eta^B)$} is also Riemannian.\n\\end{proposition}\n\n\\begin{proof}\nEssentially a matter of unravelling the definitions, and applying Fubini's Theorem.\n\\end{proof}\n\n\n\nWe are finally ready to prove our first main theorem:\n\n\\begin{proof}[Proof of Theorem \\ref{thm:Riemannian:submersions}]\n\nWe will construct a 2-metric $\\tilde\\eta^{(2)}$ on $\\tilde G^{(2)}$ by following the gauge trick \\ref{recipe}, but choosing on step 1 a metric $\\tilde\\eta$ on $\\tilde G$ already compatible with the fibrations, and performing in step 3 the averaging with respect to fiber data.\n\nFor the first step, note that we have the following fiber products of manifolds\n\n\n", "itemtype": "equation", "pos": 44846, "prevtext": "\nHence we can identify $T\\tilde G$ with the kernel of the map $(v,w)\\mapsto {\\rm d} s(v) - {\\rm d}\\phi\\cdot {\\rm d} s(w)$. Since\n${\\rm d} s\\cdot\\sigma^G_g({\\rm d}\\phi(v))={\\rm d}\\phi(v)={\\rm d}\\phi \\cdot{\\rm d} s\\cdot\\sigma^K_k(v)$, the above formula does define a vector bundle map $\\tilde\\sigma:\\tilde s^*T\\tilde M\\to T\\tilde G$.\nIt is easy to check directly from the formula that ${\\rm d}\\tilde s\\cdot\\tilde\\sigma={\\rm id}$ and that $\\tilde\\sigma|_{T\\tilde M}={\\rm d} u$.\n\\end{proof}\n\nWhen working with semi-direct products, we shall always use a connection constructed as in this lemma, which we call a {\\bf fibered connection}.\n\n\\subsubsection{Fibered averaging}\nGiven $\\phi:\\tilde G=G\\ltimes K\\to G$ a split fibration between proper groupoids, we fix a fibered normalized Haar density $\\tilde\\mu$ and a fibered connection $\\tilde\\sigma$, built out of data from $G$ and $K$, as in the previous discussion. The averaged metrics produced with respect to them enjoy the following fundamental property:\n\n\\begin{proposition}\\label{prop:fiberd-averaging}\nLet $p:(E,\\eta^E)\\to (B,\\eta^B)$ be a Riemannian submersion, and assume that $\\tilde G{\\curvearrowright} E$ and $G{\\curvearrowright} B$ are groupoid actions compatible with the projection $p:E\\to B$, in the sense that  \n$(g,k)e=g(p(e))$ for all $(g,k)\\in \\tilde{G}=G\\ltimes K$.\n\n", "index": 49, "text": "$$\\xymatrix{\n\\tilde G \\ar[d]_\\phi \\ar@{}|{{\\curvearrowright}}[r]& E \\ar[d]^p\\\\\nG \\ar@{}|{{\\curvearrowright}}[r] & B}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex27.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix{\\tilde{G}\\ar[d]_{\\phi}\\ar@{}|{{\\curvearrowright}}[r]&amp;E\\ar[d]^{p}\\\\&#10;G\\ar@{}|{{\\curvearrowright}}[r]&amp;B}\" display=\"block\"><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mi>\u03d5</mi></msub><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mi mathvariant=\"normal\">@</mi><mo stretchy=\"false\">|</mo><mo>\u21b7</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mi mathvariant=\"normal\">&amp;</mi><mi>E</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msup><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mi>p</mi></msup><mi>G</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mi mathvariant=\"normal\">@</mi><mo stretchy=\"false\">|</mo><mo>\u21b7</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mi mathvariant=\"normal\">&amp;</mi><mi>B</mi></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nConsider metrics $\\eta=\\eta^G$ on $G$ and $\\tilde\\eta^M$ on $\\tilde M$ that are fibered with respect to $s$ and $\\phi^{(0)}$, respectively. Then construct a metric $\\eta^K$ on $K$ that is transverse to $s:K\\to \\tilde M$ and induces the previous metric $\\tilde\\eta^M$ on the base. After that, compute the fiber product metrics first on $H=G\\times_M\\tilde M$, and then on $\\tilde G=H\\times_{\\tilde M}K$. The resulting metric $\\tilde\\eta$ will be input data for our construction.\n\nWe can perform the second step without any modification, computing now the iterated fiber product metrics $\\tilde\\eta^{[3]}$ and $\\eta^{[3]}$ on $\\tilde G^{[3]}$ and $G^{[3]}$. These are 2-metrics on the Lie groupoids $\\tilde G^{[2]}\\rightrightarrows \\tilde G$ and $G^{[2]}\\rightrightarrows G$ respectively, and they make the canonical projection $\\tilde G^{[2]}\\to G^{[2]}$ a Riemannian submersion of Lie groupoids. To see this, note that by construction the map $s:\\tilde G\\to\\tilde M$ preserves the horizontal distributions, or in other words, the horizontal lift yield a commutative square:\n\n\n\n", "itemtype": "equation", "pos": 45840, "prevtext": "\nDenote by \\smash{$\\underline\\eta^E$} and \\smash{$\\underline\\eta^B$} the cotangent averages of $\\eta^E$ and $\\eta^B$ with respect to $\\tilde G$ and $G$, with averaging data as above. Then \\smash{$p:(E,\\underline\\eta^E)\\to(B,\\underline\\eta^B)$} is also Riemannian.\n\\end{proposition}\n\n\\begin{proof}\nEssentially a matter of unravelling the definitions, and applying Fubini's Theorem.\n\\end{proof}\n\n\n\nWe are finally ready to prove our first main theorem:\n\n\\begin{proof}[Proof of Theorem \\ref{thm:Riemannian:submersions}]\n\nWe will construct a 2-metric $\\tilde\\eta^{(2)}$ on $\\tilde G^{(2)}$ by following the gauge trick \\ref{recipe}, but choosing on step 1 a metric $\\tilde\\eta$ on $\\tilde G$ already compatible with the fibrations, and performing in step 3 the averaging with respect to fiber data.\n\nFor the first step, note that we have the following fiber products of manifolds\n\n\n", "index": 51, "text": "$$\\xymatrix@R=10pt{\\ar@{}[dr]|{\\rm fp}\\ar@{}[d];[ddr]|{\\rm fp}\n\\tilde G \\ar[r] \\ar[d] & K \\ar[d] \\\\ H \\ar[r] \\ar[d] & \\tilde M \\ar[d] \\\\ G \\ar[r] & M.\n}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex28.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix@R=10pt{\\ar@{}[dr]|{\\rm fp}\\ar@{}[d];[ddr]|{\\rm fp}\\tilde{G}\\ar[r]\\ar%&#10;[d]&amp;K\\ar[d]\\\\&#10;H\\ar[r]\\ar[d]&amp;\\tilde{M}\\ar[d]\\\\&#10;G\\ar[r]&amp;M.}\" display=\"block\"><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mi mathvariant=\"normal\">@</mi><mi>R</mi><mo>=</mo><mn>10</mn><mi>p</mi><mi>t</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mi mathvariant=\"normal\">@</mi><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo stretchy=\"false\">|</mo><mi>fp</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mi mathvariant=\"normal\">@</mi><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mo>;</mo><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>d</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo stretchy=\"false\">|</mo><mi>fp</mi><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mi mathvariant=\"normal\">&amp;</mi><mi>K</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mi>H</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mi mathvariant=\"normal\">&amp;</mi><mover accent=\"true\"><mi>M</mi><mo stretchy=\"false\">~</mo></mover><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mi>G</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mi mathvariant=\"normal\">&amp;</mi><mi>M</mi><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nIn particular $\\ker{\\rm d}_gs$ lifts to $\\ker{\\rm d}_{\\tilde g}s$, from where the horizontal lift $T_{a}G^{[3]}\\to T_{\\tilde a}\\tilde G^{[3]}$ preserves the canonical orthogonal decomposition of the fiber product metrics, and is therefore an isometry.\n\n\n\nThe last step consists in averaging these two metrics with respect to the right actions of $\\tilde G$ and $G$, respectively. If one uses for $\\tilde G$ a fiber averaging data, by Proposition \\ref{prop:fiberd-averaging}, we conclude that the resulting metrics descend to the original groupoids $\\tilde G$ and $G$, and fulfill all the desired properties. \n\\end{proof}\n\n\n\n\\section{Linearization by exponential maps}\n\\label{sec:linear:fibrations}\n\n\nWe will see now that Riemannian submersions between Lie groupoids can be linearized in an appropriate sense, leading to a linearization theorem for split fibrations. This is the cornerstone from which we will later derive as applications our results on rigidity of Lie groupoids and metrics over stacks.\n\n\\subsection{Linearization of groupoids}\n\nLet $G\\rightrightarrows M$ be a Lie groupoid, and let $S\\subset M$ be a {\\bf saturated} submanifold, so the restriction $G_S\\rightrightarrows S$ is a well-defined Lie subgroupoid. The {\\bf linear local model} of $G$ around $S$ is the groupoid-theoretic normal bundle $\\nu(G_S)\\rightrightarrows \\nu(S)$, whose objects and arrows are given by $\\nu(S)=T_SM/TS$ and $\\nu(G_S)=T_{G_S}G/TG_S$, and whose structure maps are induced by those of $G$ by differentiation. \nA {\\bf linearization} of $G$ around $S$ is a pair of open subgroupoids $G_S\\subset U\\subset G$ and $G_S\\subset V\\subset \\nu(G_S)$ and a groupoid isomorphism  $\\alpha: U {\\xrightarrow}\\cong  V$. Actually, it is convenient to distinguish various types of linearizations (see \\cite{dh}). One calls  a subgroupoid $U\\subset G$ a {\\bf full subgroupoid} if $\\U1=G_{\\U0}$, namely if it contains every arrow of $G$ between its objects.\n\nOne then says that:\n\\begin{itemize}\n\\item $G$ is {\\bf weakly linearizable} around $S$ if there exists some linearization;\n\\item $G$ is {\\bf linearizable} around $S$ if one can take $U,V$ to be full subgroupoids;\n\\item $G$ is {\\bf invariantly linearizable} if in addition $\\U0$ and $\\V0$ can be taken to be saturated.\n\\end{itemize}\nThese different notions may agree if $G$ is ``nice enough'': it is proved in \\cite{dhf} that any open subgroupoid $U$ can be shrinked to a full one when $G$ is proper, and to a full saturated one when $G$ is source-proper. The various results on linearization of groupoids can be derived from the following fundamental theorem:\n\n\\begin{theorem}[\\cite{dhf}]\n\\label{thm:linearization:grpd}\nGiven $(G\\rightrightarrows M,\\eta^{(2)})$ a Riemannian groupoid and given $S\\subset M$ a saturated embedded submanifold, the exponential maps arising from $\\eta$ define a (weak) linearization of $G$ around $S$.\n\\end{theorem}\n\nLinearization of proper groupoids and strict linearization of s-proper groupoids follow from this result and the fact that every proper groupoid admits a 2-metric. Let us comment on some aspects of the proof before turning to the fibered version.\n\n\n\nGiven $(M,\\eta)$ a Riemannian manifold and $S\\subset M$ an embedded submanifold, we say that an open $S\\subset U\\subset TS^\\bot$ is {\\bf admissible} if $\\exp|_U$ is an open embedding. It will be useful to set the following groupoid version of this notion.\n\n\\begin{definition}\nGiven a Riemannian groupoid $G\\rightrightarrows M$ and an embedded satu-rated submanifold $S\\subset M$, an open subgroupoid $G_S\\subset U\\subset \\nu(G_S)$ is {\\bf admissible} if (i) its objects $\\U0$ form an admissible open, and (ii) the pairs of composable arrows $\\U2=\\U1\\times_{\\U0}\\U1$ are within the domain of the exponential map of $\\eta^{(2)}$.\n\\end{definition}\n\nIt follows from \\cite[Proposition 5.9]{dhf} that if $G_S\\subset U\\subset \\nu(G_S)$ is an admissible open subgroupoid then $\\U0$, $\\U1$ and $\\U2$ are all admissible opens.\n\n\n\n\\begin{remark}\\label{rmk:admissible}\nThe proof of Theorem \\ref{thm:linearization:grpd} (see \\cite[Theorem 5.3.1]{dhf}) can be split in the following two steps:\n \\begin{enumerate}[(i)]\n  \\item Given an admissible open $S\\subset \\U0\\subset \\nu(S)$, the open set\n  \n", "itemtype": "equation", "pos": 47070, "prevtext": "\nConsider metrics $\\eta=\\eta^G$ on $G$ and $\\tilde\\eta^M$ on $\\tilde M$ that are fibered with respect to $s$ and $\\phi^{(0)}$, respectively. Then construct a metric $\\eta^K$ on $K$ that is transverse to $s:K\\to \\tilde M$ and induces the previous metric $\\tilde\\eta^M$ on the base. After that, compute the fiber product metrics first on $H=G\\times_M\\tilde M$, and then on $\\tilde G=H\\times_{\\tilde M}K$. The resulting metric $\\tilde\\eta$ will be input data for our construction.\n\nWe can perform the second step without any modification, computing now the iterated fiber product metrics $\\tilde\\eta^{[3]}$ and $\\eta^{[3]}$ on $\\tilde G^{[3]}$ and $G^{[3]}$. These are 2-metrics on the Lie groupoids $\\tilde G^{[2]}\\rightrightarrows \\tilde G$ and $G^{[2]}\\rightrightarrows G$ respectively, and they make the canonical projection $\\tilde G^{[2]}\\to G^{[2]}$ a Riemannian submersion of Lie groupoids. To see this, note that by construction the map $s:\\tilde G\\to\\tilde M$ preserves the horizontal distributions, or in other words, the horizontal lift yield a commutative square:\n\n\n\n", "index": 53, "text": "$$\\xymatrix{\n\\ar[r]^{{\\rm d} s} \\ar[d];[dr]^{{\\rm d} s} \\ar[d];[] \\ar[dr];[r]\nT_{\\tilde g}\\tilde G & T_{\\tilde x}\\tilde M \\\\ T_gG & T_xM.\n}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex29.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix{\\ar[r]^{{\\rm d}s}\\ar[d];[dr]^{{\\rm d}s}\\ar[d];[]\\ar[dr];[r]T_{\\tilde%&#10;{g}}\\tilde{G}&amp;T_{\\tilde{x}}\\tilde{M}\\\\&#10;T_{g}G&amp;T_{x}M.}\" display=\"block\"><mrow><mrow><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mrow><mi mathvariant=\"normal\">d</mi><mo>\u2062</mo><mi>s</mi></mrow></msup><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow></mrow><mo>;</mo><mrow><msup><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mrow><mi mathvariant=\"normal\">d</mi><mo>\u2062</mo><mi>s</mi></mrow></msup><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow></mrow><mo>;</mo><mrow><mrow><mo stretchy=\"false\">[</mo><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow></mrow><mo>;</mo><mrow><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><msub><mi>T</mi><mover accent=\"true\"><mi>g</mi><mo stretchy=\"false\">~</mo></mover></msub><mo>\u2062</mo><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><msub><mi>T</mi><mover accent=\"true\"><mi>x</mi><mo stretchy=\"false\">~</mo></mover></msub><mo>\u2062</mo><mover accent=\"true\"><mi>M</mi><mo stretchy=\"false\">~</mo></mover><mo>\u2062</mo><msub><mi>T</mi><mi>g</mi></msub><mo>\u2062</mo><mi>G</mi><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><msub><mi>T</mi><mi>x</mi></msub><mo>\u2062</mo><mi>M</mi></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\n  defines an admissible open subgroupoid (here ${\\mathcal E}_G$ denotes the domain of the exponential map).\n  \\item The exponential maps restricted to an admissible open subgroupoid defines a linearization.\n  \\end{enumerate}\nIt will be useful to keep these two steps in mind later in the proof of linearization of Riemannian submersions between Lie groupoids.\n\\end{remark}\n\n\n\n\\subsection{Linearization of submersions}\n\n\n\nLet $\\phi:\\tilde G\\to G$ be a submersion and $S\\subset M$ a saturated submanifold. Then $\\tilde S=\\phi^{-1}(S)\\subset \\tilde M$ is a saturated submanifold as well, and we have an induced map $\\overline{{\\rm d}\\phi}:\\nu(\\tilde G_{\\tilde S})\\to \\nu(G_{S})$ between the corresponding linear local models:\n\n", "itemtype": "equation", "pos": 51426, "prevtext": "\nIn particular $\\ker{\\rm d}_gs$ lifts to $\\ker{\\rm d}_{\\tilde g}s$, from where the horizontal lift $T_{a}G^{[3]}\\to T_{\\tilde a}\\tilde G^{[3]}$ preserves the canonical orthogonal decomposition of the fiber product metrics, and is therefore an isometry.\n\n\n\nThe last step consists in averaging these two metrics with respect to the right actions of $\\tilde G$ and $G$, respectively. If one uses for $\\tilde G$ a fiber averaging data, by Proposition \\ref{prop:fiberd-averaging}, we conclude that the resulting metrics descend to the original groupoids $\\tilde G$ and $G$, and fulfill all the desired properties. \n\\end{proof}\n\n\n\n\\section{Linearization by exponential maps}\n\\label{sec:linear:fibrations}\n\n\nWe will see now that Riemannian submersions between Lie groupoids can be linearized in an appropriate sense, leading to a linearization theorem for split fibrations. This is the cornerstone from which we will later derive as applications our results on rigidity of Lie groupoids and metrics over stacks.\n\n\\subsection{Linearization of groupoids}\n\nLet $G\\rightrightarrows M$ be a Lie groupoid, and let $S\\subset M$ be a {\\bf saturated} submanifold, so the restriction $G_S\\rightrightarrows S$ is a well-defined Lie subgroupoid. The {\\bf linear local model} of $G$ around $S$ is the groupoid-theoretic normal bundle $\\nu(G_S)\\rightrightarrows \\nu(S)$, whose objects and arrows are given by $\\nu(S)=T_SM/TS$ and $\\nu(G_S)=T_{G_S}G/TG_S$, and whose structure maps are induced by those of $G$ by differentiation. \nA {\\bf linearization} of $G$ around $S$ is a pair of open subgroupoids $G_S\\subset U\\subset G$ and $G_S\\subset V\\subset \\nu(G_S)$ and a groupoid isomorphism  $\\alpha: U {\\xrightarrow}\\cong  V$. Actually, it is convenient to distinguish various types of linearizations (see \\cite{dh}). One calls  a subgroupoid $U\\subset G$ a {\\bf full subgroupoid} if $\\U1=G_{\\U0}$, namely if it contains every arrow of $G$ between its objects.\n\nOne then says that:\n\\begin{itemize}\n\\item $G$ is {\\bf weakly linearizable} around $S$ if there exists some linearization;\n\\item $G$ is {\\bf linearizable} around $S$ if one can take $U,V$ to be full subgroupoids;\n\\item $G$ is {\\bf invariantly linearizable} if in addition $\\U0$ and $\\V0$ can be taken to be saturated.\n\\end{itemize}\nThese different notions may agree if $G$ is ``nice enough'': it is proved in \\cite{dhf} that any open subgroupoid $U$ can be shrinked to a full one when $G$ is proper, and to a full saturated one when $G$ is source-proper. The various results on linearization of groupoids can be derived from the following fundamental theorem:\n\n\\begin{theorem}[\\cite{dhf}]\n\\label{thm:linearization:grpd}\nGiven $(G\\rightrightarrows M,\\eta^{(2)})$ a Riemannian groupoid and given $S\\subset M$ a saturated embedded submanifold, the exponential maps arising from $\\eta$ define a (weak) linearization of $G$ around $S$.\n\\end{theorem}\n\nLinearization of proper groupoids and strict linearization of s-proper groupoids follow from this result and the fact that every proper groupoid admits a 2-metric. Let us comment on some aspects of the proof before turning to the fibered version.\n\n\n\nGiven $(M,\\eta)$ a Riemannian manifold and $S\\subset M$ an embedded submanifold, we say that an open $S\\subset U\\subset TS^\\bot$ is {\\bf admissible} if $\\exp|_U$ is an open embedding. It will be useful to set the following groupoid version of this notion.\n\n\\begin{definition}\nGiven a Riemannian groupoid $G\\rightrightarrows M$ and an embedded satu-rated submanifold $S\\subset M$, an open subgroupoid $G_S\\subset U\\subset \\nu(G_S)$ is {\\bf admissible} if (i) its objects $\\U0$ form an admissible open, and (ii) the pairs of composable arrows $\\U2=\\U1\\times_{\\U0}\\U1$ are within the domain of the exponential map of $\\eta^{(2)}$.\n\\end{definition}\n\nIt follows from \\cite[Proposition 5.9]{dhf} that if $G_S\\subset U\\subset \\nu(G_S)$ is an admissible open subgroupoid then $\\U0$, $\\U1$ and $\\U2$ are all admissible opens.\n\n\n\n\\begin{remark}\\label{rmk:admissible}\nThe proof of Theorem \\ref{thm:linearization:grpd} (see \\cite[Theorem 5.3.1]{dhf}) can be split in the following two steps:\n \\begin{enumerate}[(i)]\n  \\item Given an admissible open $S\\subset \\U0\\subset \\nu(S)$, the open set\n  \n", "index": 55, "text": "$$\\U1:={\\rm d} s^{-1}(\\U0)\\cap {\\rm d} t^{-1}(\\U0)\\cap {\\mathcal E}_G\\cap \\nu(G_S)$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex30.m1\" class=\"ltx_Math\" alttext=\"\\U 1:={\\rm d}s^{-1}(\\U 0)\\cap{\\rm d}t^{-1}(\\U 0)\\cap{\\mathcal{E}}_{G}\\cap\\nu(G%&#10;_{S})\" display=\"block\"><mrow><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\U</mtext></merror><mo>\u2062</mo><mn>1</mn></mrow><mo>:=</mo><mrow><mrow><mi mathvariant=\"normal\">d</mi><mo>\u2062</mo><msup><mi>s</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\U</mtext></merror><mo>\u2062</mo><mn>0</mn></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2229</mo><mrow><mi mathvariant=\"normal\">d</mi><mo>\u2062</mo><msup><mi>t</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\U</mtext></merror><mo>\u2062</mo><mn>0</mn></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2229</mo><msub><mi class=\"ltx_font_mathcaligraphic\">\u2130</mi><mi>G</mi></msub><mo>\u2229</mo><mrow><mi>\u03bd</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mi>G</mi><mi>S</mi></msub><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\n\n\n\\begin{definition}\n\\label{defn:linearozation:submersion}\nGiven $\\phi:\\tilde G\\to G$ a submersion and given $S\\subset G$ saturated, we say that $\\phi$ is {\\bf linearizable around $S$} if there is a linearization $\\tilde \\alpha$ of $\\tilde G$ around $\\tilde S=\\phi^{-1}(S)$ and a linearization $\\alpha$ of $G$ around $S$ inducing a commutative square:\n\n", "itemtype": "equation", "pos": 52234, "prevtext": "\n  defines an admissible open subgroupoid (here ${\\mathcal E}_G$ denotes the domain of the exponential map).\n  \\item The exponential maps restricted to an admissible open subgroupoid defines a linearization.\n  \\end{enumerate}\nIt will be useful to keep these two steps in mind later in the proof of linearization of Riemannian submersions between Lie groupoids.\n\\end{remark}\n\n\n\n\\subsection{Linearization of submersions}\n\n\n\nLet $\\phi:\\tilde G\\to G$ be a submersion and $S\\subset M$ a saturated submanifold. Then $\\tilde S=\\phi^{-1}(S)\\subset \\tilde M$ is a saturated submanifold as well, and we have an induced map $\\overline{{\\rm d}\\phi}:\\nu(\\tilde G_{\\tilde S})\\to \\nu(G_{S})$ between the corresponding linear local models:\n\n", "index": 57, "text": "$$\n\\xymatrix{ \\nu(\\tilde G_{\\tilde S})\\ar@<0.30pc>[r] \\ar@<-0.30pc>[r] \\ar[d]_{\\overline{{\\rm d}\\phi^{(1)}}} &\n\\nu(\\tilde S))\\ar[d]^{\\overline{{\\rm d}\\phi^{(0)}}}\n\\\\\n\\nu(G_S)\\ar@<0.30pc>[r] \\ar@<-0.30pc>[r] & \\nu(S)}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex31.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix{\\nu(\\tilde{G}_{\\tilde{S}})\\ar@&lt;0.30pc&gt;[r]\\ar@&lt;-0.30pc&gt;[r]\\ar[d]_{%&#10;\\overline{{\\rm d}\\phi^{(1)}}}&amp;\\nu(\\tilde{S}))\\ar[d]^{\\overline{{\\rm d}\\phi^{(0%&#10;)}}}\\\\&#10;\\nu(G_{S})\\ar@&lt;0.30pc&gt;[r]\\ar@&lt;-0.30pc&gt;[r]&amp;\\nu(S)}\" display=\"block\"><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mi>\u03bd</mi><mrow><mo stretchy=\"false\">(</mo><msub><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mover accent=\"true\"><mi>S</mi><mo stretchy=\"false\">~</mo></mover></msub><mo stretchy=\"false\">)</mo></mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mi mathvariant=\"normal\">@</mi><mo>&lt;</mo><mn>0.30</mn><mi>p</mi><mi>c</mi><mo>&gt;</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mi mathvariant=\"normal\">@</mi><mo>&lt;</mo><mo>-</mo><mn>0.30</mn><mi>p</mi><mi>c</mi><mo>&gt;</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mover accent=\"true\"><mrow><mi mathvariant=\"normal\">d</mi><mo>\u2062</mo><msup><mi>\u03d5</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></msup></mrow><mo>\u00af</mo></mover></msub><mi mathvariant=\"normal\">&amp;</mi><mi>\u03bd</mi><mrow><mo stretchy=\"false\">(</mo><mover accent=\"true\"><mi>S</mi><mo stretchy=\"false\">~</mo></mover><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo><msup><mi/><mover accent=\"true\"><mrow><mi mathvariant=\"normal\">d</mi><mo>\u2062</mo><msup><mi>\u03d5</mi><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow></msup></mrow><mo>\u00af</mo></mover></msup><mi>\u03bd</mi><mo stretchy=\"false\">(</mo><msub><mi>G</mi><mi>S</mi></msub><mo stretchy=\"false\">)</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mi mathvariant=\"normal\">@</mi><mo>&lt;</mo><mn>0.30</mn><mi>p</mi><mi>c</mi><mo>&gt;</mo><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mi mathvariant=\"normal\">@</mi><mo>&lt;</mo><mo>-</mo><mn>0.30</mn><mi>p</mi><mi>c</mi><mo>&gt;</mo><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo><mi mathvariant=\"normal\">&amp;</mi><mi>\u03bd</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\n\\end{definition}\n\n\n\nAs one could guess, the existence of compatible 2-metrics on $\\tilde G,G$ provide a linearization by exponential maps. The proof consists of a careful adaptation of that of Theorem \\ref{thm:linearization:grpd}:\n\n\\begin{theorem}\n\\label{thm:linearization:submersions}\nLet $\\phi:(\\tilde G,\\tilde \\eta)\\to (G,\\eta)$ a Riemannian submersion between Lie groupoids, let $S\\subset M$ embedded saturated, and let $\\tilde S=\\phi^{-1}(S)$. Then the exponential maps of $\\tilde \\eta$ and $\\eta$ define a linearization of $\\phi$ around $S$.\n\\end{theorem}\n\n\\begin{proof}\nBy \\cite[Proposition 5.9]{dhf} and Remark \\ref{rmk:admissible} (ii), it is enough to construct admissible open subgroupoids $\\tilde U$ and $U$ such that $\\phi(\\tilde U)\\subset U$, for then we obtain a linearization diagram:\n\n", "itemtype": "equation", "pos": 52805, "prevtext": "\n\n\n\\begin{definition}\n\\label{defn:linearozation:submersion}\nGiven $\\phi:\\tilde G\\to G$ a submersion and given $S\\subset G$ saturated, we say that $\\phi$ is {\\bf linearizable around $S$} if there is a linearization $\\tilde \\alpha$ of $\\tilde G$ around $\\tilde S=\\phi^{-1}(S)$ and a linearization $\\alpha$ of $G$ around $S$ inducing a commutative square:\n\n", "index": 59, "text": "$$\\xymatrix{\n\\nu(\\tilde G_{\\tilde S}) \\supset\n\\tilde U \\ar[d]_{\\overline{{\\rm d}\\phi}} \\ar[r]^--{\\tilde\\alpha}\n& \\tilde V \\subset \\tilde G \\ar[d]^\\phi \\\\\n\\nu(G_S) \\supset U \\ar[r]^--{\\alpha} & V \\subset G}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex32.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix{\\nu(\\tilde{G}_{\\tilde{S}})\\supset\\tilde{U}\\ar[d]_{\\overline{{\\rm d}%&#10;\\phi}}\\ar[r]^{-}-{\\tilde{\\alpha}}&amp;\\tilde{V}\\subset\\tilde{G}\\ar[d]^{\\phi}\\\\&#10;\\nu(G_{S})\\supset U\\ar[r]^{-}-{\\alpha}&amp;V\\subset G}\" display=\"block\"><mrow><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mo>\u2062</mo><mi>\u03bd</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mover accent=\"true\"><mi>S</mi><mo stretchy=\"false\">~</mo></mover></msub><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2283</mo><mrow><mrow><mover accent=\"true\"><mi>U</mi><mo stretchy=\"false\">~</mo></mover><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mover accent=\"true\"><mrow><mi mathvariant=\"normal\">d</mi><mo>\u2062</mo><mi>\u03d5</mi></mrow><mo>\u00af</mo></mover></msub><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>-</mo></msup></mrow><mo>-</mo><mrow><mover accent=\"true\"><mi>\u03b1</mi><mo stretchy=\"false\">~</mo></mover><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mover accent=\"true\"><mi>V</mi><mo stretchy=\"false\">~</mo></mover></mrow></mrow><mo>\u2282</mo><mrow><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mi>\u03d5</mi></msup><mo>\u2062</mo><mi>\u03bd</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mi>G</mi><mi>S</mi></msub><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2283</mo><mrow><mrow><mi>U</mi><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>-</mo></msup></mrow><mo>-</mo><mrow><mi>\u03b1</mi><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mi>V</mi></mrow></mrow><mo>\u2282</mo><mi>G</mi></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nwhere $U,\\tilde U, V,\\tilde V$ are groupoid neighborhoods in $\\nu(G_S),\\nu(\\tilde G_{\\tilde S}),G,G_S$ around $\\tilde S,S$. When $\\tilde G$ and $G$ are proper these neighborhoods can be taken to be full, and when $\\phi$ is proper we can further take $\\tilde U=(\\overline{{\\rm d}\\phi})^{-1}(U)$ and $\\tilde V=\\phi^{-1}(V)$. \n\\end{theorem*} \n\nThe last statement in the theorem can be thought of as a version for proper groupoid submersions of the classic Ehresmann's theorem.\n\n\nThe theorem shows that Riemannian submersions of Lie groupoids are rather rigid, so one may wonder about the existence of such submersions. In this respect, a special kind of submersions, known as fibrations, arise as a key concept. On the one hand, fibrations are rigid enough so that they are easier to handle than arbitrary submersions. On the other hand, there are plenty of examples and we have the following fundamental result, which shows their relevance for our theory:\n\n\\begin{theorem*}[Existence of fibered metrics]\nLet $\\phi:\\tilde G\\to G$ be a split fibration between proper Lie groupoids. Then there exist 2-metrics $\\tilde\\eta$ on $\\tilde G$ and $\\eta$ on $G$ making $\\phi$ into a Riemannian submersion.\n\\end{theorem*}\n\nThe proof consists in adapting an averaging argument, introduced in \\cite{dhf}, which we call the \\emph{gauge trick}.\n\n\n\nAlthough the results above look like simple extensions to the groupoid framework of basic facts on fibrations and metrics, they are actually quite powerful and have non-trivial, interesting, consequences. As a first application, we will give simple geometric proofs of some rigidity results for Lie groupoids. Some of these results were obtained recently in \\cite{cms}, where the authors use a sophisticated theory of deformation cohomology to deduce them. The main result in this direction is the following:\n\n\\begin{theorem*}[Rigidity of compact Lie groupoids]\nCompact Lie groupoids are rigid: every proper deformation of a compact Lie groupoid $G\\rightrightarrows M$ is locally trivial.\n\\end{theorem*}\n\nSuch rigidity results include, as special cases, classic theorems on the rigidity of groups (\\cite{nr}), group actions (\\cite{palais}) and foliations (\\cite{rosenberg1,rosenberg2}). Our metric approach provides a novel perspective even for these classic results.\n\n\n\n\nAnother important aspect of our theory arises from the \\emph{stack perspective}. Recall that a presentable (or geometric) stack can be thought of as a Morita equivalence class of Lie groupoids, a categorified version of manifold encoding the transverse geometry. In fact, every Lie groupoid $G\\rightrightarrows M$ determines an \\emph{orbit stack} ${\\ensuremath{\\mathfrak{X}}}=[M/G]$ with a presentation $M\\to {\\ensuremath{\\mathfrak{X}}}$, \nand two groupoids determine the same stack if and only if they are Morita equivalent.\nA key point here is that every Morita equivalence can be realized by a fraction of fibrations. This allow us to apply the previous results to develop the rudiments of the Riemannian geometry of stacks.\n\n\n\n\n\nOur fourth main theorem lead us to the notion of a \\emph{Riemannian metric on a (presentable) stack}, generalizing the usual concepts of Riemannian metrics on manifolds and orbifolds.\n\n\\begin{theorem*}[Morita invariance of 2-metrics]\nA Morita equivalence yields a 1-1 correspondence between equivalence classes of 2-metrics.\n\\end{theorem*}\n\n\n\nGiven a presentable stack ${\\ensuremath{\\mathfrak{X}}}$ and an embedded substack ${\\ensuremath{\\mathfrak{S}}}\\subset {\\ensuremath{\\mathfrak{X}}}$ the normal bundle to ${\\ensuremath{\\mathfrak{S}}}$ in ${\\ensuremath{\\mathfrak{X}}}$ is a well-defined stack $\\nu({\\ensuremath{\\mathfrak{S}}})$, which contains ${\\ensuremath{\\mathfrak{S}}}$ as an embedded substack (the \\emph{zero section}). Given a metric $[\\eta]$ on a \\emph{separated stack} ${\\ensuremath{\\mathfrak{X}}}$, i.e. one arising from a proper groupoid, we have an exponential map $\\exp_{[\\eta]}:\\nu({\\ensuremath{\\mathfrak{S}}}){\\dashrightarrow} {\\ensuremath{\\mathfrak{X}}}$, well-defined in a stacky neighborhood of ${\\ensuremath{\\mathfrak{S}}}$. This map is invertible over some neighborhood, providing a construction of a \\emph{Stacky Tubular Neighborhood}. We also show that, even in the non-proper case, linearization of groupoids is equivalent to the existence of stacky tubular neighborhoods.\n\nGiven a submersion between separated stacks, we construct stacky tubular neighborhoods compatible with the submersion, yielding the following stacky versions of Ehresmann's Theorem. \n\n\\begin{theorem*}[Stacky Ehresmann]\nLet $\\pi:\\tilde {\\ensuremath{\\mathfrak{X}}}{\\dashrightarrow} {\\ensuremath{\\mathfrak{X}}}$ be a surjective submersion between separated stacks, and let ${\\ensuremath{\\mathfrak{S}}}\\subset {\\ensuremath{\\mathfrak{X}}}$ be an embedded substack. Then:\n\\begin{enumerate}[(i)]\n\\item $\\pi$ is linearizable in a neighborhood of $\\tilde {\\ensuremath{\\mathfrak{S}}}:=\\pi^{-1}({\\ensuremath{\\mathfrak{S}}})\\subset {\\ensuremath{\\mathfrak{X}}}$;\n\\item if $\\pi$ is proper, then $\\pi$ is linearizable in a tube $\\tilde{\\mathfrak{U}}=\\pi^{-1}(\\mathfrak{U})$ around  $\\tilde {\\ensuremath{\\mathfrak{S}}}$.\n\\end{enumerate}\n\\end{theorem*}\n\nThis stacky theorem generalizes and encompasses all the above linearization and rigidity results. Its appearance can be explained and motivated as follows. Submersions between manifolds can be identified with a very particular family of Lie groupoids, namely those that are proper without isotropy:\n\n", "itemtype": "equation", "pos": 3305, "prevtext": "\n\n\n\\title[Riemannian submersions]{\nRiemannian submersions of groupoids\\linebreak and \\linebreak a stacky Ehresmann's theorem}\n\n\n\\author{Matias del Hoyo}\n\\address{Instituto de Matem\\'atica Pura e Aplicada, Estrada Dona Castorina 110, Rio de Janeiro, 22460-320, Brazil}\n\\email{mdelhoyo@impa.br}\n\\author{Rui Loja Fernandes}\n\\address{Department of Mathematics, University of Illinois at Urbana-Champaign, 1409 W. Green Street, Urbana, IL 61801, USA} \n\\email{ruiloja@illinois.edu}\n\n\\thanks{MdH was partially supported by the ERC Starting Grant No. 279729. RLF was partially supported by NSF grants DMS 1308472, DMS 1405671 and FCT/Portugal. Both authors acknowledge the support of the \\emph{Ci\\^encias Sem Fronteiras} grant 401817/2013-0.}\n\n\\date{\\today}\n\n \\begin{abstract} \nWe introduce Riemannian submersions between Lie groupoids, showing that split fibrations between proper Lie groupoids can be made Riemannian, and that general Riemannian submersions can be linearized. We apply these results to prove rigidity theorems for Lie groupoids and, as a corollary, rigidity in some classic geometries. We establish Morita invariance of groupoid metrics, leading to metrics over stacks, and we use our linearization results to construct stacky tubular neighborhoods and to prove a stacky Ehresmann's Theorem. \n  \\end{abstract}\n\n\\maketitle\n\n\\vspace{-1cm}\n\n\\setcounter{tocdepth}{1} \n\\tableofcontents \n\n\\vspace{-1cm}\n\n\n\n\n\n\\section{Introduction}\n\n\n\nIn \\cite{dhf} we have introduced compatible Riemannian metrics on Lie groupoids, which we call \\emph{2-metrics}. A pair $(G,\\eta)$ formed by a groupoid $G$ and a 2-metric $\\eta$ is called a \\emph{Riemannian Lie groupoid}. This new notion of metric opens up the possibility of studying Riemannian geometry over Lie groupoids, and in their orbit spaces, a categorified version of manifolds known as \\emph{stacks}. \n\n\n\nA linearization of a groupoid around a subgroupoid is an isomorphism between a suitable groupoid neighborhood in the original groupoid and in the normal bundle. We showed in \\cite{dhf} that the exponential maps of 2-metrics give linearizations around saturated submanifolds. Moreover, we showed that for proper Lie groupoid 2-metrics always exist and that the groupoid neighborhoods can be taken to be full. These results greatly extend and simplify the linearization results for Lie groupoids of Weinstein \\cite{weinstein}, Zung \\cite{zung} and Crainic-Struchiner \\cite{cs}.\n\n\n\nIn this paper, which is a natural sequel to \\cite{dhf}, we study Riemannian submersions $\\phi:(\\tilde G,\\tilde\\eta)\\to (G,\\eta)$ between Riemannian Lie groupoids, developing fibered versions of the result obtained there, and deducing several interesting consequences. \n\n\nWe start by extending the results of \\cite{dhf} concerning linearization of groupoids to the linearization of submersions. We will show that Riemannian submersions can always be linearized via the exponential maps of 2-metrics:\n\n\\begin{theorem*}[Linearization of Riemannian submersions]\nLet $\\phi:(\\tilde G,\\tilde \\eta)\\to (G,\\eta)$ be a Riemannian submersion between Lie groupoids, let $S\\subset M$ be an embedded saturated submanifold, and set $\\tilde S=\\phi^{-1}(S)$. Then the exponential maps of $\\tilde \\eta$ and $\\eta$ define a linearization of $\\phi$ around $S$, namely a commutative diagram:\n\n", "index": 1, "text": "$$\\xymatrix@C=50pt{\n\\nu(\\tilde G_{\\tilde S}) \\supset\n\\tilde U \\ar[d]_{\\overline{{\\rm d}\\phi}} \\ar[r]^{\\exp_{\\tilde \\eta}}\n& \\tilde V \\subset \\tilde G \\ar[d]^\\phi \\\\\n\\nu(G_S) \\supset U \\ar[r]^{\\exp_\\eta} & V \\subset G}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex33.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix@C=50pt{\\nu(\\tilde{G}_{\\tilde{S}})\\supset\\tilde{U}\\ar[d]_{\\overline{{%&#10;\\rm d}\\phi}}\\ar[r]^{\\exp_{\\tilde{\\eta}}}&amp;\\tilde{V}\\subset\\tilde{G}\\ar[d]^{\\phi%&#10;}\\\\&#10;\\nu(G_{S})\\supset U\\ar[r]^{\\exp_{\\eta}}&amp;V\\subset G}\" display=\"block\"><mrow><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mi>C</mi></mrow><mo>=</mo><mrow><mn>50</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>t</mi><mo>\u2062</mo><mi>\u03bd</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mover accent=\"true\"><mi>S</mi><mo stretchy=\"false\">~</mo></mover></msub><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2283</mo><mrow><mover accent=\"true\"><mi>U</mi><mo stretchy=\"false\">~</mo></mover><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mover accent=\"true\"><mrow><mi mathvariant=\"normal\">d</mi><mo>\u2062</mo><mi>\u03d5</mi></mrow><mo>\u00af</mo></mover></msub><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><msub><mi>exp</mi><mover accent=\"true\"><mi>\u03b7</mi><mo stretchy=\"false\">~</mo></mover></msub></msup><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mover accent=\"true\"><mi>V</mi><mo stretchy=\"false\">~</mo></mover></mrow><mo>\u2282</mo><mrow><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mi>\u03d5</mi></msup><mo>\u2062</mo><mi>\u03bd</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mi>G</mi><mi>S</mi></msub><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2283</mo><mrow><mi>U</mi><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><msub><mi>exp</mi><mi>\u03b7</mi></msub></msup><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mi>V</mi></mrow><mo>\u2282</mo><mi>G</mi></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\n\\end{corollary}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIn the next sections we will derive some remarkable consequences of these results. First, we will study deformations of Lie groupoids and show that compact Lie groupoids only admit trivial deformations. Then, we will establish a Morita invariance of metrics, which leads to a definition of metrics on (presentable) stacks.\n\n\n\n\\section{An application: rigidity of compact groupoids}\n\n\\label{section:rigidity}\n\n\n\nThe theory developed so far, comprising some basic facts on fibrations and metrics within the groupoid framework, is actually quite powerful. \nWe will derive from it some non-trivial results on the structural stability of Lie groupoids. These results, that generalize classic deformation theorems in the geometry of actions, fibrations and foliations, were obtained recently in \\cite{cms} by different, less direct, methods.\n\n\n\n\n\n\n\\subsection{Deformations of Lie groupoids}\n\nRecall that we have defined a family of Lie groupoids parametrized by $M$ to be a fibration $(\\tilde G\\rightrightarrows \\tilde M)\\to (M\\rightrightarrows M)$ over the unit groupoid. Given $x\\in M$, we are interested in the behavior of the fiber $\\tilde G_x\\rightrightarrows \\tilde M_x$ when $x$ varies. \n\n\\begin{definition}\nLet $G\\rightrightarrows M$ be a Lie groupoid and $I$ a manifold with base point $0\\in I$. A {\\bf deformation} of $G$ parametrized by $I$ consists of a family of Lie groupoids\n\n", "itemtype": "equation", "pos": 55419, "prevtext": "\n\nFix $S\\subset \\U0\\subset \\nu(S)$ an admissible open, define $\\tilde U'^{(0)}=\\phi^{-1}(\\U0)\\cap {\\mathcal E}_{\\tilde M}$ and construct $\\tilde U',U$ as explained in Remark \\ref{rmk:admissible} (i). Thus if we set $\\tilde U=\\tilde U'\\cap \\phi^{-1}(U)$, this is an open subgroupoid included in an admissible one, hence it is itself admissible, and the result follows.\n\\end{proof}\n\n\n\nIf we combine Theorems \\ref{thm:Riemannian:submersions} and \\ref{thm:linearization:submersions}, we conclude that:\n\n\\begin{corollary}\n\\label{cor:linear:split:fib}\nA split fibration between proper Lie groupoids is linearizable.\n\\end{corollary}\n\n\n\nThe classical Ehresmann's Theorem states that proper submersions between manifolds are locally trivial. This can be seen as a combination of two facts: (i) submersions are linearizable, and (ii) any open around the fiber of a proper map contains a tube, i.e., a saturated open neighborhood of the fiber. In light of Corollary \\ref{cor:linear:split:fib} and the tube principle \\ref{prop:tube}\nwe can derive a groupoid version of it:\n\n\\begin{corollary}[Groupoid Ehresmann]\\label{thm:groupoid-ehresmann}\nLet $\\phi:\\tilde G\\to G$ be a proper split fibration between proper Lie groupoids, and let $S\\subset M$ be a saturated submanifold. Then there exist open full subgroupoids $G_S\\subset U\\subset \\nu(G_S)$ and $G_S\\subset V\\subset G$, and linearization maps:\n\n", "index": 63, "text": "$$\\xymatrix{\n\\nu(\\tilde G_{\\tilde S}) \\supset(\\overline{{\\rm d}\\phi})^{-1}(U)\\ar[d]_{\\overline{{\\rm d}\\phi}} \\ar[r]^---{\\tilde\\alpha}\n& \\phi^{-1}(V) \\subset \\tilde G \\ar[d]^\\phi \\\\\n\\nu(G_S) \\supset U \\ar[r]^--{\\alpha} & V\\subset G}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex34.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix{\\nu(\\tilde{G}_{\\tilde{S}})\\supset(\\overline{{\\rm d}\\phi})^{-1}(U)\\ar%&#10;[d]_{\\overline{{\\rm d}\\phi}}\\ar[r]^{-}--{\\tilde{\\alpha}}&amp;\\phi^{-1}(V)\\subset%&#10;\\tilde{G}\\ar[d]^{\\phi}\\\\&#10;\\nu(G_{S})\\supset U\\ar[r]^{-}-{\\alpha}&amp;V\\subset G}\" display=\"block\"><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mi>\u03bd</mi><mrow><mo stretchy=\"false\">(</mo><msub><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mover accent=\"true\"><mi>S</mi><mo stretchy=\"false\">~</mo></mover></msub><mo stretchy=\"false\">)</mo></mrow><mo>\u2283</mo><msup><mrow><mo stretchy=\"false\">(</mo><mover accent=\"true\"><mrow><mi mathvariant=\"normal\">d</mi><mo>\u2062</mo><mi>\u03d5</mi></mrow><mo>\u00af</mo></mover><mo stretchy=\"false\">)</mo></mrow><mrow><mo>-</mo><mn>1</mn></mrow></msup><mrow><mo stretchy=\"false\">(</mo><mi>U</mi><mo stretchy=\"false\">)</mo></mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mover accent=\"true\"><mrow><mi mathvariant=\"normal\">d</mi><mo>\u2062</mo><mi>\u03d5</mi></mrow><mo>\u00af</mo></mover></msub><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>-</mo></msup><mo>-</mo><mo>-</mo><mover accent=\"true\"><mi>\u03b1</mi><mo stretchy=\"false\">~</mo></mover><mi mathvariant=\"normal\">&amp;</mi><msup><mi>\u03d5</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup><mrow><mo stretchy=\"false\">(</mo><mi>V</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2282</mo><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msup><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mi>\u03d5</mi></msup><mi>\u03bd</mi><mrow><mo stretchy=\"false\">(</mo><msub><mi>G</mi><mi>S</mi></msub><mo stretchy=\"false\">)</mo></mrow><mo>\u2283</mo><mi>U</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>-</mo></msup><mo>-</mo><mi>\u03b1</mi><mi mathvariant=\"normal\">&amp;</mi><mi>V</mi><mo>\u2282</mo><mi>G</mi></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nsuch that $\\phi^{(1)},\\phi^{(0)}$ are locally trivial and the central fiber $\\tilde G_0$ is isomorphic to $G$. The deformation is called {\\bf proper} if $\\phi$ is a proper map (cf.~Definition \\ref{def:proper-map}), and it is called {\\bf trivial} if it is equivalent to the product family $G\\times I\\to I$. \n\\end{definition}\n\n\n\n\n\n\n\n\n\n\nThe most relevant case is when $I\\subset {\\mathbb R}$ is an open interval, in which case we speak of a {\\bf 1-parameter deformation}. Of course, we can also consider {\\bf $k$-parameter deformations}, where $I\\subset{\\mathbb R}^k$ is some open set, and in general we can allow $I$ to be any manifold. Note that proper deformations of $G$ only make sense when $G$ is compact. Also, in a proper deformation, the conditions that $\\phi^{(1)}$ and $\\phi^{(0)}$ be locally trivial become automatic.\n\n\n\nIn a deformation $\\tilde G\\to I$, the fact that $\\phi^{(1)}$ and $\\phi^{(0)}$ are assumed locally trivial, allows us to think that the manifolds $G$ and $M$ remain fixed while, when the parameter ${\\varepsilon}\\in I$ varies, one deforms the structure maps $s_{\\varepsilon},t_{\\varepsilon},m_{\\varepsilon},u_{\\varepsilon},i_{\\varepsilon}$ of the groupoid $G$. More precisely, we obtain for each ${\\varepsilon}\\in I$ a groupoid structure on the manifold $G=\\tilde G_0$ by conjugating with some trivializations $\\alpha^{(0)}:\\tilde M\\to M\\times I$ and $\\alpha^{(1)}:\\tilde G\\to G\\times I$. For instance, the source $s_{\\varepsilon}$ will be given by\n\n", "itemtype": "equation", "pos": 57067, "prevtext": "\n\\end{corollary}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIn the next sections we will derive some remarkable consequences of these results. First, we will study deformations of Lie groupoids and show that compact Lie groupoids only admit trivial deformations. Then, we will establish a Morita invariance of metrics, which leads to a definition of metrics on (presentable) stacks.\n\n\n\n\\section{An application: rigidity of compact groupoids}\n\n\\label{section:rigidity}\n\n\n\nThe theory developed so far, comprising some basic facts on fibrations and metrics within the groupoid framework, is actually quite powerful. \nWe will derive from it some non-trivial results on the structural stability of Lie groupoids. These results, that generalize classic deformation theorems in the geometry of actions, fibrations and foliations, were obtained recently in \\cite{cms} by different, less direct, methods.\n\n\n\n\n\n\n\\subsection{Deformations of Lie groupoids}\n\nRecall that we have defined a family of Lie groupoids parametrized by $M$ to be a fibration $(\\tilde G\\rightrightarrows \\tilde M)\\to (M\\rightrightarrows M)$ over the unit groupoid. Given $x\\in M$, we are interested in the behavior of the fiber $\\tilde G_x\\rightrightarrows \\tilde M_x$ when $x$ varies. \n\n\\begin{definition}\nLet $G\\rightrightarrows M$ be a Lie groupoid and $I$ a manifold with base point $0\\in I$. A {\\bf deformation} of $G$ parametrized by $I$ consists of a family of Lie groupoids\n\n", "index": 65, "text": "$$\\phi:(\\tilde G\\rightrightarrows \\tilde M)\\to (I\\rightrightarrows I)$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex35.m1\" class=\"ltx_Math\" alttext=\"\\phi:(\\tilde{G}\\rightrightarrows\\tilde{M})\\to(I\\rightrightarrows I)\" display=\"block\"><mrow><mi>\u03d5</mi><mo>:</mo><mrow><mo stretchy=\"false\">(</mo><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mo>\u21c9</mo><mover accent=\"true\"><mi>M</mi><mo stretchy=\"false\">~</mo></mover><mo stretchy=\"false\">)</mo></mrow><mo>\u2192</mo><mrow><mo stretchy=\"false\">(</mo><mi>I</mi><mo>\u21c9</mo><mi>I</mi><mo stretchy=\"false\">)</mo></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\n\n\\begin{examples}{deformations}\n\\item (cf. \\cite[Example 4.1.3]{dhf}) Let $G=]0,+\\infty[\\times{\\mathbb R}$ and consider a family of groups $\\phi:G\\times {\\mathbb R}\\to{\\mathbb R}$, $(x,y,{\\varepsilon})\\mapsto {\\varepsilon}$,\nwith multiplication: \n", "itemtype": "equation", "pos": 58615, "prevtext": "\nsuch that $\\phi^{(1)},\\phi^{(0)}$ are locally trivial and the central fiber $\\tilde G_0$ is isomorphic to $G$. The deformation is called {\\bf proper} if $\\phi$ is a proper map (cf.~Definition \\ref{def:proper-map}), and it is called {\\bf trivial} if it is equivalent to the product family $G\\times I\\to I$. \n\\end{definition}\n\n\n\n\n\n\n\n\n\n\nThe most relevant case is when $I\\subset {\\mathbb R}$ is an open interval, in which case we speak of a {\\bf 1-parameter deformation}. Of course, we can also consider {\\bf $k$-parameter deformations}, where $I\\subset{\\mathbb R}^k$ is some open set, and in general we can allow $I$ to be any manifold. Note that proper deformations of $G$ only make sense when $G$ is compact. Also, in a proper deformation, the conditions that $\\phi^{(1)}$ and $\\phi^{(0)}$ be locally trivial become automatic.\n\n\n\nIn a deformation $\\tilde G\\to I$, the fact that $\\phi^{(1)}$ and $\\phi^{(0)}$ are assumed locally trivial, allows us to think that the manifolds $G$ and $M$ remain fixed while, when the parameter ${\\varepsilon}\\in I$ varies, one deforms the structure maps $s_{\\varepsilon},t_{\\varepsilon},m_{\\varepsilon},u_{\\varepsilon},i_{\\varepsilon}$ of the groupoid $G$. More precisely, we obtain for each ${\\varepsilon}\\in I$ a groupoid structure on the manifold $G=\\tilde G_0$ by conjugating with some trivializations $\\alpha^{(0)}:\\tilde M\\to M\\times I$ and $\\alpha^{(1)}:\\tilde G\\to G\\times I$. For instance, the source $s_{\\varepsilon}$ will be given by\n\n", "index": 67, "text": "$$(s_{\\varepsilon}(g),{\\varepsilon})=\\alpha^{(0)}\\circ\\tilde s\\circ(\\alpha^{(1)})^{-1}(g,{\\varepsilon}) \\qquad g\\in G, {\\varepsilon}\\in I.$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex36.m1\" class=\"ltx_Math\" alttext=\"(s_{\\varepsilon}(g),{\\varepsilon})=\\alpha^{(0)}\\circ\\tilde{s}\\circ(\\alpha^{(1)%&#10;})^{-1}(g,{\\varepsilon})\\qquad g\\in G,{\\varepsilon}\\in I.\" display=\"block\"><mrow><mrow><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><msub><mi>s</mi><mi>\u03b5</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>,</mo><mi>\u03b5</mi><mo stretchy=\"false\">)</mo></mrow><mo>=</mo><mrow><mrow><msup><mi>\u03b1</mi><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo>\u2218</mo><mover accent=\"true\"><mi>s</mi><mo stretchy=\"false\">~</mo></mover><mo>\u2218</mo><msup><mrow><mo stretchy=\"false\">(</mo><msup><mi>\u03b1</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo stretchy=\"false\">)</mo></mrow><mrow><mo>-</mo><mn>1</mn></mrow></msup></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo>,</mo><mi>\u03b5</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo mathvariant=\"italic\" separator=\"true\">\u2003\u2003</mo><mrow><mrow><mi>g</mi><mo>\u2208</mo><mi>G</mi></mrow><mo>,</mo><mrow><mi>\u03b5</mi><mo>\u2208</mo><mi>I</mi></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nThis is a non-trivial 1-parameter deformation of the 2-dimensional abelian Lie group, since for $t\\not=0$ the multiplication $\\star_{\\varepsilon}$ is non-abelian.\n\\item Consider the family of group actions of ${\\mathbb R}$ on $\\mathbf{T}^2={\\mathbb R}^2/{\\mathbb Z}^2$ given by:\n", "itemtype": "equation", "pos": 59002, "prevtext": "\n\n\\begin{examples}{deformations}\n\\item (cf. \\cite[Example 4.1.3]{dhf}) Let $G=]0,+\\infty[\\times{\\mathbb R}$ and consider a family of groups $\\phi:G\\times {\\mathbb R}\\to{\\mathbb R}$, $(x,y,{\\varepsilon})\\mapsto {\\varepsilon}$,\nwith multiplication: \n", "index": 69, "text": "\n\\[ (x_1,y_1)\\star_{\\varepsilon} (x_2,y_2):=(x_1+x_2,y_1+(x_1)^{\\varepsilon} y_2). \\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex37.m1\" class=\"ltx_Math\" alttext=\"(x_{1},y_{1})\\star_{\\varepsilon}(x_{2},y_{2}):=(x_{1}+x_{2},y_{1}+(x_{1})^{%&#10;\\varepsilon}y_{2}).\" display=\"block\"><mrow><mrow><mrow><mrow><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo></mrow><msub><mo>\u22c6</mo><mi>\u03b5</mi></msub><mrow><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>2</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo></mrow></mrow><mo>:=</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><msub><mi>x</mi><mn>2</mn></msub></mrow><mo>,</mo><mrow><msub><mi>y</mi><mn>1</mn></msub><mo>+</mo><mrow><msup><mrow><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo></mrow><mi>\u03b5</mi></msup><mo>\u2062</mo><msub><mi>y</mi><mn>2</mn></msub></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nThis can be seen as a non-trivial 1-parameter deformation $\\phi:G\\times {\\mathbb R}\\to {\\mathbb R}$, for clearly the topology of the orbits varies with ${\\varepsilon}$. \n\\item \nLet $L$ be a manifold such that $H^1(L)\\neq 0$ and let ${\\mathcal F}_0$ be the foliation on $L\\times (-1,1)$ given by the projection on $(-1,1)$.\nThe forms ${\\varepsilon}\\omega+{\\rm d} t$ and $d{\\varepsilon}$, where $[\\omega]\\neq 0 \\in H^1(L)$, define a foliation ${\\mathcal F}$ on $L\\times(-1,1)\\times{\\mathbb R}$ tangent to the fibers of the projection \n\n", "itemtype": "equation", "pos": 59366, "prevtext": "\nThis is a non-trivial 1-parameter deformation of the 2-dimensional abelian Lie group, since for $t\\not=0$ the multiplication $\\star_{\\varepsilon}$ is non-abelian.\n\\item Consider the family of group actions of ${\\mathbb R}$ on $\\mathbf{T}^2={\\mathbb R}^2/{\\mathbb Z}^2$ given by:\n", "index": 71, "text": "\n\\[ x\\star_{\\varepsilon} (\\theta_1,\\theta_2)= (\\theta_1+ x,\\theta_2+{\\varepsilon} x). \\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex38.m1\" class=\"ltx_Math\" alttext=\"x\\star_{\\varepsilon}(\\theta_{1},\\theta_{2})=(\\theta_{1}+x,\\theta_{2}+{%&#10;\\varepsilon}x).\" display=\"block\"><mrow><mrow><mrow><mi>x</mi><msub><mo>\u22c6</mo><mi>\u03b5</mi></msub><mrow><mo stretchy=\"false\">(</mo><msub><mi>\u03b8</mi><mn>1</mn></msub><mo>,</mo><msub><mi>\u03b8</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msub><mi>\u03b8</mi><mn>1</mn></msub><mo>+</mo><mi>x</mi></mrow><mo>,</mo><mrow><msub><mi>\u03b8</mi><mn>2</mn></msub><mo>+</mo><mrow><mi>\u03b5</mi><mo>\u2062</mo><mi>x</mi></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nhence we can think of it as a deformation of ${\\mathcal F}_0$ parametrized by ${\\varepsilon}$.\nThis deformation is non-trivial: if $\\epsilon\\neq 0$ then the leaves of ${\\mathcal F}_{\\varepsilon}$ are non-trivial coverings of $L$.\nWhen integrating to the monodromy groupoid ${\\rm Mon}({\\mathcal F}_{\\varepsilon})$, this yields a non-trivial deformation of Lie groupoids ${\\rm Mon}({\\mathcal F})\\to {\\mathbb R}$.\n\nTo see that this is indeed a locally trivial family of Lie groupoids we exhibit an explicit integration as follows: \n\nconsider the universal covering $p:\\tilde{L}\\to L$ \nand pull back ${\\mathcal F}$ to $\\tilde L\\times(-1,1)\\times {\\mathbb R}$. The resulting foliation $\\tilde {\\mathcal F}$ is given by the level sets of \n\n", "itemtype": "equation", "pos": 59988, "prevtext": "\nThis can be seen as a non-trivial 1-parameter deformation $\\phi:G\\times {\\mathbb R}\\to {\\mathbb R}$, for clearly the topology of the orbits varies with ${\\varepsilon}$. \n\\item \nLet $L$ be a manifold such that $H^1(L)\\neq 0$ and let ${\\mathcal F}_0$ be the foliation on $L\\times (-1,1)$ given by the projection on $(-1,1)$.\nThe forms ${\\varepsilon}\\omega+{\\rm d} t$ and $d{\\varepsilon}$, where $[\\omega]\\neq 0 \\in H^1(L)$, define a foliation ${\\mathcal F}$ on $L\\times(-1,1)\\times{\\mathbb R}$ tangent to the fibers of the projection \n\n", "index": 73, "text": "$$L\\times(-1,1)\\times {\\mathbb R}\\to {\\mathbb R} \\qquad (x,t,{\\varepsilon})\\mapsto{\\varepsilon},$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex39.m1\" class=\"ltx_Math\" alttext=\"L\\times(-1,1)\\times{\\mathbb{R}}\\to{\\mathbb{R}}\\qquad(x,t,{\\varepsilon})\\mapsto%&#10;{\\varepsilon},\" display=\"block\"><mrow><mrow><mrow><mrow><mi>L</mi><mo>\u00d7</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mo>-</mo><mn>1</mn></mrow><mo>,</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><mo>\u00d7</mo><mi>\u211d</mi></mrow><mo>\u2192</mo><mi>\u211d</mi></mrow><mo mathvariant=\"italic\" separator=\"true\">\u2003\u2003</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo>,</mo><mi>t</mi><mo>,</mo><mi>\u03b5</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u21a6</mo><mi>\u03b5</mi></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nwhere $f\\in C^\\infty(\\tilde L)$ is any primitive of $p^*\\omega$.\nThen ${\\rm Mon}(\\tilde{\\mathcal F})$ is the corresponding submersion groupoid.  The groupoid ${\\rm Mon}(\\tilde{\\mathcal F})/\\pi_1(L,x_0)$ has 1-connected s-fibers, so it coincides with ${\\rm Mon}({\\mathcal F})$. We conclude that the space of arrows and the space of units of ${\\rm Mon}({\\mathcal F}_{\\varepsilon})$ does not depend on ${\\varepsilon}$, only the structure maps do.\n\\end{examples}\n\nHere we use our linearization results for fibrations to achieve a simple, geometric, proof that proper families of Lie groupoids are trivial. This rigidity result was obtain independently by M. Crainic, J. Mestre and I. Struchiner \\cite{cms} by developing a deformation theory of Lie groupoids based in cohomological methods. \n\n\n\n\n\n\n\n\\begin{theorem}\n[{\\cite[Thm 7.4]{cms}}]\n\\label{thm:rigidity}\nCompact Lie groupoids are rigid: a proper deformation $\\tilde G\\to I$ of a compact Lie groupoid  $G\\rightrightarrows M$ is locally trivial.\n\\end{theorem}\n\n\\begin{proof}\nBy working locally we can assume $I={\\mathbb R}^k$. Let $G$ be a compact Lie groupoid and let $\\phi:(\\tilde G\\rightrightarrows \\tilde M)\\to({\\mathbb R}^k\\rightrightarrows{\\mathbb R}^k)$ be a  deformation. Since $\\phi$ is a proper split fibration, it follows from Corollary \\ref{thm:groupoid-ehresmann} that the family is linearizable over open sets $U,\\tilde U=\\phi^{-1}(U)$. Observe that the local linear model around the central fiber is just the trivial family $G\\times{\\mathbb R}^k\\to{\\mathbb R}^k$. The result follows.\n\\end{proof}\n\n\n\n\\subsection{Corollaries and variations}\n\n\n\nTheorem \\ref{thm:rigidity} is a far-reaching generalization of several classic rigidity results in differential geometry, which one can deduce as immediate corollaries:\n\\begin{itemize}\n\\item the rigidity of Lie group structures on a compact manifold, implied by the deformation theory of Lie algebras (\\cite{nr}); \n\\item the rigidity of smooth actions $K{\\curvearrowright} M$ of a fixed compact group on a fixed compact manifold, obtained by Palais and Stewart (\\cite{palais}).\n\\end{itemize}\n\nThe classical results on rigidity of compact fibrations, and more generally foliations, obtained by Rosenberg {\\em et al} (\\cite{rosenberg1,rosenberg2}), also admit versions that can be derived from our framework, as we shall see next.\n\nRecall that a foliation ${\\mathcal F}$ on a connected manifold $M$ is {\\bf compact Hausdorff} if its leaves are compact and the orbit space Hausdorff. It follows that the holonomy groups are finite (cf. \\cite{epstein}), and by Reeb stability, the leaves without holonomy are all diffeomorphic and comprise an open dense set. We call it the {\\bf generic leaf} $L$. \n\nFollowing Example \\ref{deformations} (c), a {\\bf deformation} of a foliation ${\\mathcal F}$ on $M$ parametrized by ${\\varepsilon}\\in I$ is defined as a family of foliations ${\\mathcal F}_{\\varepsilon}$ on $M$ that fits into a single smooth foliation $\\tilde{\\mathcal F}$ on $M\\times I$, and that restricts to ${\\mathcal F}$ over $0\\in I$.\n\n\n\n\n\n\n\n\\begin{corollary}\nLet $M$ be a compact manifold, ${\\mathcal F}$ a compact Hausdorff foliation of $M$. Then any smooth deformation ${\\mathcal F}_{\\varepsilon}$ of ${\\mathcal F}$ is locally trivial if and only if the generic leaf $L$ satisfies $H^1(L)=0$.\n\\end{corollary}\n\n\\begin{proof}\nAssume $H^1(L)=0$, which is equivalent to the universal covering space $\\tilde L\\to L$ of the generic leaf being compact. \n\n\nLet $\\tilde G={\\rm Mon}(\\tilde{\\mathcal F})\\rightrightarrows M\\times I$ be the monodromy groupoid of the foliation $\\tilde {\\mathcal F}$, and $G={\\rm Mon}({\\mathcal F})\\rightrightarrows M$ the one of ${\\mathcal F}$. Since ${\\mathcal F}$ is compact Hausdorff the manifold $\\tilde G$ is Hausdorff, at least after shrinking $I$, and the source-fibers of $\\tilde G$ are simply connected. At time 0 the source fibers are compact, and it follows from a version of the classical Ehresmann's Theorem (cf. \\cite[Cor. 2.4.3]{dh}) that for some small neighborhood $0\\in J\\subset I$ the fibration $s:\\tilde G|_J\\to M\\times J$ is locally trivial. Hence, we can identify $\\tilde G|_J\\cong G\\times J$, obtaining a deformation of compact groupoids, that must be trivial by Theorem \\ref{thm:rigidity}.\n\nFor the converse, we can adapt Example \\ref{deformations} (c), now defining ${\\mathcal F}_{\\varepsilon}$ on $L\\times B$, $B$ a small ball with coordinates $x_1,\\dots,x_n$, by the forms ${\\varepsilon}\\lambda\\omega+{\\rm d} x_1,{\\rm d} x_2,\\dots,{\\rm d} x_n$, where $\\lambda$ is such that $\\lambda(0)=1$ and $\\lambda(x)=0$ for $x$ close to $\\partial B$. This is a non-trivial deformation of the product foliation on $L\\times B$ that remains constant on the border. Finally, we can copy this deformation in a foliated tubular neighborhood $L\\subset T\\subset M$ of a generic leaf of ${\\mathcal F}$, and extend it outside $T$ as the stationary deformation.\n\\end{proof}\n\n\n\n\n\n\n\nIt is natural to wonder if rigidity holds more generally in the context of proper Lie groupoids. In \\cite[Rmk 7.3]{weinstein}, Weinstein raises the question of rigidity, first with fixed source and target, and then in the general case. For the general case, the answer is negative as can be shown by constructing an example of non-trivial deformation of proper group actions.\n\n\\begin{example}\n\nEvery smooth action $\\rho:G{\\curvearrowright}{\\mathbb R}^n$ with at least one fix point, say $0$, can be easily deformed into a linear action, by setting $\\rho^{\\varepsilon}_g(x):=\\frac 1 {\\varepsilon} \\rho_g({\\varepsilon} x)$. Thus, the construction of actions whose fixed locus is not diffeomorphic to a linear subspace is a source of examples of non-trivial deformations \\cite{cms,pr}.\nFor a concrete simple example, let ${\\mathbb Z}_2$ act on ${\\mathbb R}$ by reflection in the origin and trivially on an exotic ${\\mathbb R}^4_e$. Then the induced diagonal action $\\rho:{\\mathbb Z}_2{\\curvearrowright} {\\mathbb R}\\times {\\mathbb R}^4_e\\simeq{\\mathbb R}^5$ is not isomorphic to a linear action, for its fixed point sets is just ${\\mathbb R}^4_e$.\n\\end{example}\n\n\n\n\n\n\n\nOne can also use this example to produce s-proper foliation groupoids, with connected s-fibers, which are not rigid. These examples show that rigidity does not hold in general for proper groupoids or for source-proper groupoids, not even if the source map is locally trivial. However, using our methods, one can easily prove that deformations of proper groupoids with prescribed source and target are trivial, a result conjectured by A. Weinstein and also proved in \\cite{cms} by less direct methods:\n\n\\begin{theorem}[{\\cite[Theorem 7.3]{cms}}]\nA $k$-parameter deformation $G\\times{\\mathbb R}^k\\to {\\mathbb R}^k$ of a proper groupoid $G$ that fixes the source and target is trivial.\n\\end{theorem}\n\n\\begin{proof}\nBy hypothesis, the source and target of the total groupoid $G\\times{\\mathbb R}^k\\rightrightarrows M\\times{\\mathbb R}^k$ can be written as product maps $s\\times{\\rm id}$ and $t\\times{\\rm id}$, though the multiplication, inversion and unit may vary with the parameter. Let $\\eta^{(1)}$ be any 1-metric on $G\\rightrightarrows M$ (which exists, because $G$ is proper), and let $\\eta_0$ with the euclidean metric on ${\\mathbb R}^k$. The product metric $\\eta^{(1)}\\times\\eta_0$ is a 1-metric on $\\tilde G$ and the projection $G\\times{\\mathbb R}^k\\to{\\mathbb R}^k$ is Riemannian. Hence, we can use it as an input for the fibered gauge trick (see Theorem \\ref{thm:Riemannian:submersions}), and obtain a 2-metric $\\tilde\\eta^{(2)}$ on $\\tilde G$ that induces the metric $\\eta^{(0)}\\times\\eta_0$ on the units (cf.~Lemma \\ref{lemma:trick-fix}). It follows that $\\tilde \\exp^{(0)}:\\nu(M)\\to M\\times{\\mathbb R}^k$ is defined for all time, and since $G\\to M\\times M$ is proper, the same holds first for $\\tilde\\exp^{(1)}$, and then for $\\tilde\\exp^{(2)}$. Hence, the fibration $G\\times{\\mathbb R}^k\\to {\\mathbb R}^k$ can be linearized, and the result follows.\n\\end{proof}\n\n\n\n\n\\section{The stack perspective 1: Preliminaries}\n\\label{sec:stack}\n\n\nIn this section we briefly review the notion of smooth stack, focusing on their Lie groupoid interpretation, and we develop a number of technical aspects on Morita maps and fibrations, in order to define immersions and submersions of stacks.  We are particularly interested in the notion of embedding between stacks, where some subtleties arise and some extra care is necessary. We will need these results in the next section, for our stacky version of Ehresmann's theorem.\n\n\\subsection{Smooth stacks and groupoids}\n\n\n\nA stack can be thought of as a generalization of the notion of space, which allows at the same time for internal symmetries and singular behavior, of the type one encounters often in the study of moduli spaces of geometric or algebraic structures. We give a quick overview on the theory, referring for details to the original monograph by Giraud \\cite{giraud} or the more recent survey \\cite{vistoli}. The smooth version is discussed, e.g., in \\cite{bx,lerman,metzler}.\n\nGiven ${\\mathcal C}$ a {\\bf site}, which is a category endowed with a suitable notion of covering, a  {\\bf stack} over ${\\mathcal C}$ is a contravariant \\emph{pseudo-functor} into the category of groupoids\n\n", "itemtype": "equation", "pos": 60820, "prevtext": "\nhence we can think of it as a deformation of ${\\mathcal F}_0$ parametrized by ${\\varepsilon}$.\nThis deformation is non-trivial: if $\\epsilon\\neq 0$ then the leaves of ${\\mathcal F}_{\\varepsilon}$ are non-trivial coverings of $L$.\nWhen integrating to the monodromy groupoid ${\\rm Mon}({\\mathcal F}_{\\varepsilon})$, this yields a non-trivial deformation of Lie groupoids ${\\rm Mon}({\\mathcal F})\\to {\\mathbb R}$.\n\nTo see that this is indeed a locally trivial family of Lie groupoids we exhibit an explicit integration as follows: \n\nconsider the universal covering $p:\\tilde{L}\\to L$ \nand pull back ${\\mathcal F}$ to $\\tilde L\\times(-1,1)\\times {\\mathbb R}$. The resulting foliation $\\tilde {\\mathcal F}$ is given by the level sets of \n\n", "index": 75, "text": "$$\\tilde L\\times(-1,1)\\times{\\mathbb R} \\to {\\mathbb R}\\times{\\mathbb R} \\qquad (x,t,{\\varepsilon})\\mapsto (t+{\\varepsilon} f(x),\\epsilon),$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex40.m1\" class=\"ltx_Math\" alttext=\"\\tilde{L}\\times(-1,1)\\times{\\mathbb{R}}\\to{\\mathbb{R}}\\times{\\mathbb{R}}\\qquad%&#10;(x,t,{\\varepsilon})\\mapsto(t+{\\varepsilon}f(x),\\epsilon),\" display=\"block\"><mrow><mrow><mrow><mrow><mover accent=\"true\"><mi>L</mi><mo stretchy=\"false\">~</mo></mover><mo>\u00d7</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mo>-</mo><mn>1</mn></mrow><mo>,</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><mo>\u00d7</mo><mi>\u211d</mi></mrow><mo>\u2192</mo><mrow><mi>\u211d</mi><mo>\u00d7</mo><mi>\u211d</mi></mrow></mrow><mo mathvariant=\"italic\" separator=\"true\">\u2003\u2003</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo>,</mo><mi>t</mi><mo>,</mo><mi>\u03b5</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u21a6</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>t</mi><mo>+</mo><mrow><mi>\u03b5</mi><mo>\u2062</mo><mi>f</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>,</mo><mi>\u03f5</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": " \nthat is locally determined: the restriction from an object to a covering yields an equivalence between global sections and collections of local sections with coherent isomorphisms in the double intersections.\n\nThere is a correspondence between pseudo-functors and fiber categories endowed with a cleavage, given by the Grothendieck construction (cf. \\cite[3.1]{vistoli}).\n\n", "itemtype": "equation", "pos": -1, "prevtext": "\nwhere $f\\in C^\\infty(\\tilde L)$ is any primitive of $p^*\\omega$.\nThen ${\\rm Mon}(\\tilde{\\mathcal F})$ is the corresponding submersion groupoid.  The groupoid ${\\rm Mon}(\\tilde{\\mathcal F})/\\pi_1(L,x_0)$ has 1-connected s-fibers, so it coincides with ${\\rm Mon}({\\mathcal F})$. We conclude that the space of arrows and the space of units of ${\\rm Mon}({\\mathcal F}_{\\varepsilon})$ does not depend on ${\\varepsilon}$, only the structure maps do.\n\\end{examples}\n\nHere we use our linearization results for fibrations to achieve a simple, geometric, proof that proper families of Lie groupoids are trivial. This rigidity result was obtain independently by M. Crainic, J. Mestre and I. Struchiner \\cite{cms} by developing a deformation theory of Lie groupoids based in cohomological methods. \n\n\n\n\n\n\n\n\\begin{theorem}\n[{\\cite[Thm 7.4]{cms}}]\n\\label{thm:rigidity}\nCompact Lie groupoids are rigid: a proper deformation $\\tilde G\\to I$ of a compact Lie groupoid  $G\\rightrightarrows M$ is locally trivial.\n\\end{theorem}\n\n\\begin{proof}\nBy working locally we can assume $I={\\mathbb R}^k$. Let $G$ be a compact Lie groupoid and let $\\phi:(\\tilde G\\rightrightarrows \\tilde M)\\to({\\mathbb R}^k\\rightrightarrows{\\mathbb R}^k)$ be a  deformation. Since $\\phi$ is a proper split fibration, it follows from Corollary \\ref{thm:groupoid-ehresmann} that the family is linearizable over open sets $U,\\tilde U=\\phi^{-1}(U)$. Observe that the local linear model around the central fiber is just the trivial family $G\\times{\\mathbb R}^k\\to{\\mathbb R}^k$. The result follows.\n\\end{proof}\n\n\n\n\\subsection{Corollaries and variations}\n\n\n\nTheorem \\ref{thm:rigidity} is a far-reaching generalization of several classic rigidity results in differential geometry, which one can deduce as immediate corollaries:\n\\begin{itemize}\n\\item the rigidity of Lie group structures on a compact manifold, implied by the deformation theory of Lie algebras (\\cite{nr}); \n\\item the rigidity of smooth actions $K{\\curvearrowright} M$ of a fixed compact group on a fixed compact manifold, obtained by Palais and Stewart (\\cite{palais}).\n\\end{itemize}\n\nThe classical results on rigidity of compact fibrations, and more generally foliations, obtained by Rosenberg {\\em et al} (\\cite{rosenberg1,rosenberg2}), also admit versions that can be derived from our framework, as we shall see next.\n\nRecall that a foliation ${\\mathcal F}$ on a connected manifold $M$ is {\\bf compact Hausdorff} if its leaves are compact and the orbit space Hausdorff. It follows that the holonomy groups are finite (cf. \\cite{epstein}), and by Reeb stability, the leaves without holonomy are all diffeomorphic and comprise an open dense set. We call it the {\\bf generic leaf} $L$. \n\nFollowing Example \\ref{deformations} (c), a {\\bf deformation} of a foliation ${\\mathcal F}$ on $M$ parametrized by ${\\varepsilon}\\in I$ is defined as a family of foliations ${\\mathcal F}_{\\varepsilon}$ on $M$ that fits into a single smooth foliation $\\tilde{\\mathcal F}$ on $M\\times I$, and that restricts to ${\\mathcal F}$ over $0\\in I$.\n\n\n\n\n\n\n\n\\begin{corollary}\nLet $M$ be a compact manifold, ${\\mathcal F}$ a compact Hausdorff foliation of $M$. Then any smooth deformation ${\\mathcal F}_{\\varepsilon}$ of ${\\mathcal F}$ is locally trivial if and only if the generic leaf $L$ satisfies $H^1(L)=0$.\n\\end{corollary}\n\n\\begin{proof}\nAssume $H^1(L)=0$, which is equivalent to the universal covering space $\\tilde L\\to L$ of the generic leaf being compact. \n\n\nLet $\\tilde G={\\rm Mon}(\\tilde{\\mathcal F})\\rightrightarrows M\\times I$ be the monodromy groupoid of the foliation $\\tilde {\\mathcal F}$, and $G={\\rm Mon}({\\mathcal F})\\rightrightarrows M$ the one of ${\\mathcal F}$. Since ${\\mathcal F}$ is compact Hausdorff the manifold $\\tilde G$ is Hausdorff, at least after shrinking $I$, and the source-fibers of $\\tilde G$ are simply connected. At time 0 the source fibers are compact, and it follows from a version of the classical Ehresmann's Theorem (cf. \\cite[Cor. 2.4.3]{dh}) that for some small neighborhood $0\\in J\\subset I$ the fibration $s:\\tilde G|_J\\to M\\times J$ is locally trivial. Hence, we can identify $\\tilde G|_J\\cong G\\times J$, obtaining a deformation of compact groupoids, that must be trivial by Theorem \\ref{thm:rigidity}.\n\nFor the converse, we can adapt Example \\ref{deformations} (c), now defining ${\\mathcal F}_{\\varepsilon}$ on $L\\times B$, $B$ a small ball with coordinates $x_1,\\dots,x_n$, by the forms ${\\varepsilon}\\lambda\\omega+{\\rm d} x_1,{\\rm d} x_2,\\dots,{\\rm d} x_n$, where $\\lambda$ is such that $\\lambda(0)=1$ and $\\lambda(x)=0$ for $x$ close to $\\partial B$. This is a non-trivial deformation of the product foliation on $L\\times B$ that remains constant on the border. Finally, we can copy this deformation in a foliated tubular neighborhood $L\\subset T\\subset M$ of a generic leaf of ${\\mathcal F}$, and extend it outside $T$ as the stationary deformation.\n\\end{proof}\n\n\n\n\n\n\n\nIt is natural to wonder if rigidity holds more generally in the context of proper Lie groupoids. In \\cite[Rmk 7.3]{weinstein}, Weinstein raises the question of rigidity, first with fixed source and target, and then in the general case. For the general case, the answer is negative as can be shown by constructing an example of non-trivial deformation of proper group actions.\n\n\\begin{example}\n\nEvery smooth action $\\rho:G{\\curvearrowright}{\\mathbb R}^n$ with at least one fix point, say $0$, can be easily deformed into a linear action, by setting $\\rho^{\\varepsilon}_g(x):=\\frac 1 {\\varepsilon} \\rho_g({\\varepsilon} x)$. Thus, the construction of actions whose fixed locus is not diffeomorphic to a linear subspace is a source of examples of non-trivial deformations \\cite{cms,pr}.\nFor a concrete simple example, let ${\\mathbb Z}_2$ act on ${\\mathbb R}$ by reflection in the origin and trivially on an exotic ${\\mathbb R}^4_e$. Then the induced diagonal action $\\rho:{\\mathbb Z}_2{\\curvearrowright} {\\mathbb R}\\times {\\mathbb R}^4_e\\simeq{\\mathbb R}^5$ is not isomorphic to a linear action, for its fixed point sets is just ${\\mathbb R}^4_e$.\n\\end{example}\n\n\n\n\n\n\n\nOne can also use this example to produce s-proper foliation groupoids, with connected s-fibers, which are not rigid. These examples show that rigidity does not hold in general for proper groupoids or for source-proper groupoids, not even if the source map is locally trivial. However, using our methods, one can easily prove that deformations of proper groupoids with prescribed source and target are trivial, a result conjectured by A. Weinstein and also proved in \\cite{cms} by less direct methods:\n\n\\begin{theorem}[{\\cite[Theorem 7.3]{cms}}]\nA $k$-parameter deformation $G\\times{\\mathbb R}^k\\to {\\mathbb R}^k$ of a proper groupoid $G$ that fixes the source and target is trivial.\n\\end{theorem}\n\n\\begin{proof}\nBy hypothesis, the source and target of the total groupoid $G\\times{\\mathbb R}^k\\rightrightarrows M\\times{\\mathbb R}^k$ can be written as product maps $s\\times{\\rm id}$ and $t\\times{\\rm id}$, though the multiplication, inversion and unit may vary with the parameter. Let $\\eta^{(1)}$ be any 1-metric on $G\\rightrightarrows M$ (which exists, because $G$ is proper), and let $\\eta_0$ with the euclidean metric on ${\\mathbb R}^k$. The product metric $\\eta^{(1)}\\times\\eta_0$ is a 1-metric on $\\tilde G$ and the projection $G\\times{\\mathbb R}^k\\to{\\mathbb R}^k$ is Riemannian. Hence, we can use it as an input for the fibered gauge trick (see Theorem \\ref{thm:Riemannian:submersions}), and obtain a 2-metric $\\tilde\\eta^{(2)}$ on $\\tilde G$ that induces the metric $\\eta^{(0)}\\times\\eta_0$ on the units (cf.~Lemma \\ref{lemma:trick-fix}). It follows that $\\tilde \\exp^{(0)}:\\nu(M)\\to M\\times{\\mathbb R}^k$ is defined for all time, and since $G\\to M\\times M$ is proper, the same holds first for $\\tilde\\exp^{(1)}$, and then for $\\tilde\\exp^{(2)}$. Hence, the fibration $G\\times{\\mathbb R}^k\\to {\\mathbb R}^k$ can be linearized, and the result follows.\n\\end{proof}\n\n\n\n\n\\section{The stack perspective 1: Preliminaries}\n\\label{sec:stack}\n\n\nIn this section we briefly review the notion of smooth stack, focusing on their Lie groupoid interpretation, and we develop a number of technical aspects on Morita maps and fibrations, in order to define immersions and submersions of stacks.  We are particularly interested in the notion of embedding between stacks, where some subtleties arise and some extra care is necessary. We will need these results in the next section, for our stacky version of Ehresmann's theorem.\n\n\\subsection{Smooth stacks and groupoids}\n\n\n\nA stack can be thought of as a generalization of the notion of space, which allows at the same time for internal symmetries and singular behavior, of the type one encounters often in the study of moduli spaces of geometric or algebraic structures. We give a quick overview on the theory, referring for details to the original monograph by Giraud \\cite{giraud} or the more recent survey \\cite{vistoli}. The smooth version is discussed, e.g., in \\cite{bx,lerman,metzler}.\n\nGiven ${\\mathcal C}$ a {\\bf site}, which is a category endowed with a suitable notion of covering, a  {\\bf stack} over ${\\mathcal C}$ is a contravariant \\emph{pseudo-functor} into the category of groupoids\n\n", "index": 77, "text": "$$ F:{\\mathcal C}{^\\circ}{\\dashrightarrow} {\\rm Groupoids}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex41.m1\" class=\"ltx_Math\" alttext=\"F:{\\mathcal{C}}{{}^{\\circ}}{\\dashrightarrow}{\\rm Groupoids}\" display=\"block\"><mrow><mi>F</mi><mo>:</mo><mi class=\"ltx_font_mathcaligraphic\">\ud835\udc9e</mi><mmultiscripts><mo>\u21e2</mo><mprescripts/><none/><mo>\u2218</mo></mmultiscripts><mi>Groupoids</mi></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nBy using this, a {\\bf stack} can be equivalently defined as a category fibered in groupoids \nthat satisfies a reformulation of the gluing axiom (cf. \\cite[4.6]{vistoli}).\n\nWhile the first approach stresses the analogy with sheaves, the last one has the advantage of not requiring a choice of a cleavage, which is often arbitrary.\n\nWe are interested in {\\bf smooth stacks}, i.e. stacks over the category of manifolds. \n\n\n\n\\begin{examples}{stacks}\n \\item The very first example of a smooth stack, better seen as a pseudofunctor, is that of a {\\bf manifold} $M$: the so-called ``functor-of-points'' $N\\mapsto {\\rm Maps}(N,M)$ allows to view $M$ as a stack with discrete fibers, namely groupoids where the only arrows are identities. \n\n \\item Another important example, better seen as a fiber category, is that of principal $G$-bundles for a fixed {\\bf Lie group} $G$. Denote by ${\\mathcal E}$ the category of principal $G$-bundles and $G$-bundle maps. The projection $\\pi:\\mathcal E\\to \\text{Manifolds}$ is a fiber category, for principal bundles can be pulled back, the fibers are groupoids, and it satisfies the gluing axiom. It results the {\\em classifying stack} $BG$, note that it classifies principal $G$-bundles because of the Yoneda correspondence. \n \n\\end{examples}\n\n\n\nThe {\\bf orbit stack} $[M/G]$ of a Lie groupoid $G\\rightrightarrows M$, which generalizes the previous two examples, and plays a fundamental role hereafter, can be described in either perspective as follows:\n\\begin{itemize}\n\\item From the pseudo-functor perspective, the orbit stack of $[M/G]$ is determined by\n\n", "itemtype": "equation", "pos": 70614, "prevtext": " \nthat is locally determined: the restriction from an object to a covering yields an equivalence between global sections and collections of local sections with coherent isomorphisms in the double intersections.\n\nThere is a correspondence between pseudo-functors and fiber categories endowed with a cleavage, given by the Grothendieck construction (cf. \\cite[3.1]{vistoli}).\n\n", "index": 79, "text": "$$F:{\\mathcal C}{^\\circ}{\\dashrightarrow}{\\rm Categories} \\quad \\rightleftharpoons \\quad \\pi:\\mathcal E\\to{\\mathcal C} \\ + \\text{ cleavage }$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex42.m1\" class=\"ltx_Math\" alttext=\"F:{\\mathcal{C}}{{}^{\\circ}}{\\dashrightarrow}{\\rm Categories}\\quad%&#10;\\rightleftharpoons\\quad\\pi:\\mathcal{E}\\to{\\mathcal{C}}\\ +\\text{ cleavage }\" display=\"block\"><mrow><mi>F</mi><mo>:</mo><mi class=\"ltx_font_mathcaligraphic\">\ud835\udc9e</mi><mmultiscripts><mo>\u21e2</mo><mprescripts/><none/><mo>\u2218</mo></mmultiscripts><mi>Categories</mi><mo mathvariant=\"italic\" separator=\"true\">\u2003</mo><mo>\u21cc</mo><mo mathvariant=\"italic\" separator=\"true\">\u2003</mo><mi>\u03c0</mi><mo>:</mo><mi class=\"ltx_font_mathcaligraphic\">\u2130</mi><mo>\u2192</mo><mpadded width=\"+5pt\"><mi class=\"ltx_font_mathcaligraphic\">\ud835\udc9e</mi></mpadded><mo>+</mo><mtext>\u00a0cleavage\u00a0</mtext></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nthat only fulfills half of the gluing axiom, but can be upgraded to a stack by adding formal global sections for each coherent local family. \n\\item From the fiber category perspective, the orbit stack $[M/G]$ is given by \n\n", "itemtype": "equation", "pos": 72343, "prevtext": "\nBy using this, a {\\bf stack} can be equivalently defined as a category fibered in groupoids \nthat satisfies a reformulation of the gluing axiom (cf. \\cite[4.6]{vistoli}).\n\nWhile the first approach stresses the analogy with sheaves, the last one has the advantage of not requiring a choice of a cleavage, which is often arbitrary.\n\nWe are interested in {\\bf smooth stacks}, i.e. stacks over the category of manifolds. \n\n\n\n\\begin{examples}{stacks}\n \\item The very first example of a smooth stack, better seen as a pseudofunctor, is that of a {\\bf manifold} $M$: the so-called ``functor-of-points'' $N\\mapsto {\\rm Maps}(N,M)$ allows to view $M$ as a stack with discrete fibers, namely groupoids where the only arrows are identities. \n\n \\item Another important example, better seen as a fiber category, is that of principal $G$-bundles for a fixed {\\bf Lie group} $G$. Denote by ${\\mathcal E}$ the category of principal $G$-bundles and $G$-bundle maps. The projection $\\pi:\\mathcal E\\to \\text{Manifolds}$ is a fiber category, for principal bundles can be pulled back, the fibers are groupoids, and it satisfies the gluing axiom. It results the {\\em classifying stack} $BG$, note that it classifies principal $G$-bundles because of the Yoneda correspondence. \n \n\\end{examples}\n\n\n\nThe {\\bf orbit stack} $[M/G]$ of a Lie groupoid $G\\rightrightarrows M$, which generalizes the previous two examples, and plays a fundamental role hereafter, can be described in either perspective as follows:\n\\begin{itemize}\n\\item From the pseudo-functor perspective, the orbit stack of $[M/G]$ is determined by\n\n", "index": 81, "text": "$$ F:\\mathbb{M}\\text{an}{^\\circ}{\\dashrightarrow} {\\rm Groupoids},\\quad N\\mapsto ({\\rm Maps}(N,G)\\rightrightarrows{\\rm Maps}(N,M)),$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex43.m1\" class=\"ltx_Math\" alttext=\"F:\\mathbb{M}\\text{an}{{}^{\\circ}}{\\dashrightarrow}{\\rm Groupoids},\\quad N%&#10;\\mapsto({\\rm Maps}(N,G)\\rightrightarrows{\\rm Maps}(N,M)),\" display=\"block\"><mrow><mi>F</mi><mo>:</mo><mi>\ud835\udd44</mi><mtext>an</mtext><mmultiscripts><mo>\u21e2</mo><mprescripts/><none/><mo>\u2218</mo></mmultiscripts><mi>Groupoids</mi><mo rspace=\"12.5pt\">,</mo><mi>N</mi><mo>\u21a6</mo><mrow><mo stretchy=\"false\">(</mo><mi>Maps</mi><mrow><mo stretchy=\"false\">(</mo><mi>N</mi><mo>,</mo><mi>G</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u21c9</mo><mi>Maps</mi><mrow><mo stretchy=\"false\">(</mo><mi>N</mi><mo>,</mo><mi>M</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nwhere ${\\mathcal E}$ is the category of principal (groupoid) $G$-bundles and $G$-bundle maps, in a word by word analogy to the group case. \n\\end{itemize}\n\n\nThe association $(G\\rightrightarrows M)\\mapsto [M/G]$\n\nis a fundamental construction, which can be seen as a 2-functor, and sets a bridge between the Lie groupoid theory and the theory of stacks.\n\n\n\n\n\nA map $M\\to {\\ensuremath{\\mathfrak{X}}}$ from a manifold to a stack is a {\\bf presentation} if for any other map from a manifold $N\\to {\\ensuremath{\\mathfrak{X}}}$ the (2-theoretic) fiber product exists and is a manifold, and its base-change $\\tilde{p}:N\\times_{\\ensuremath{\\mathfrak{X}}} M\\to N$ is a surjective submersion. Every orbit stack $[M/G]$ comes equipped with a presentation $M\\to[M/G]$. Conversely, a stack admitting a presentation can be expressed as the orbit stack of a Lie groupoid:\n\n\n\n\n\n\n\\begin{theorem}[Folklore]\nThe upper arrow in the following diagram is a 2-equivalence of 2-categories.\n\n", "itemtype": "equation", "pos": 72699, "prevtext": "\nthat only fulfills half of the gluing axiom, but can be upgraded to a stack by adding formal global sections for each coherent local family. \n\\item From the fiber category perspective, the orbit stack $[M/G]$ is given by \n\n", "index": 83, "text": "$$ \\pi:\\mathcal E\\to \\mathbb{M}\\text{an},\\quad (P\\to M)\\mapsto M$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex44.m1\" class=\"ltx_Math\" alttext=\"\\pi:\\mathcal{E}\\to\\mathbb{M}\\text{an},\\quad(P\\to M)\\mapsto M\" display=\"block\"><mrow><mi>\u03c0</mi><mo>:</mo><mi class=\"ltx_font_mathcaligraphic\">\u2130</mi><mo>\u2192</mo><mi>\ud835\udd44</mi><mtext>an</mtext><mo rspace=\"12.5pt\">,</mo><mrow><mo stretchy=\"false\">(</mo><mi>P</mi><mo>\u2192</mo><mi>M</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u21a6</mo><mi>M</mi></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\n\\end{theorem}\n\n\n\nTwo Lie groupoids have the same orbit stack if they are \\emph{Morita equivalent}. More precisely, we can define a {\\bf Morita map} between Lie groupoids as one yielding an isomorphism between the orbit stacks, and consider the induced functor from the (2-theoretic) localization of groupoids by Morita maps:\n\n\\begin{theorem}[Folklore]\nThe bottom arrow in the following diagram is a 2-equivalence of 2-categories:\n\n", "itemtype": "equation", "pos": 73731, "prevtext": "\nwhere ${\\mathcal E}$ is the category of principal (groupoid) $G$-bundles and $G$-bundle maps, in a word by word analogy to the group case. \n\\end{itemize}\n\n\nThe association $(G\\rightrightarrows M)\\mapsto [M/G]$\n\nis a fundamental construction, which can be seen as a 2-functor, and sets a bridge between the Lie groupoid theory and the theory of stacks.\n\n\n\n\n\nA map $M\\to {\\ensuremath{\\mathfrak{X}}}$ from a manifold to a stack is a {\\bf presentation} if for any other map from a manifold $N\\to {\\ensuremath{\\mathfrak{X}}}$ the (2-theoretic) fiber product exists and is a manifold, and its base-change $\\tilde{p}:N\\times_{\\ensuremath{\\mathfrak{X}}} M\\to N$ is a surjective submersion. Every orbit stack $[M/G]$ comes equipped with a presentation $M\\to[M/G]$. Conversely, a stack admitting a presentation can be expressed as the orbit stack of a Lie groupoid:\n\n\n\n\n\n\n\\begin{theorem}[Folklore]\nThe upper arrow in the following diagram is a 2-equivalence of 2-categories.\n\n", "index": 85, "text": "$$\\xymatrix@C=80pt{\n\\ar[dr]\n\\ar[r]^{(G\\rightrightarrows M)\\mapsto(M\\to [M/G])}\n\\ar[r];[rd]^{(M\\to {\\ensuremath{\\mathfrak{X}}})\\mapsto {\\ensuremath{\\mathfrak{X}}}}\n\\text{Lie groupoids} & \\text{Presented stacks}\\\\\n& \\text{Presentable stacks}\n}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex45.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix@C=80pt{\\ar[dr]\\ar[r]^{(G\\rightrightarrows M)\\mapsto(M\\to[M/G])}\\ar[r%&#10;];[rd]^{(M\\to{\\mathfrak{X}})\\mapsto{\\mathfrak{X}}}\\text{Lie groupoids}&amp;\\text{%&#10;Presented stacks}\\\\&#10;&amp;\\text{Presentable stacks}}\" display=\"block\"><mrow><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mi>C</mi></mrow><mo>=</mo><mrow><mrow><mn>80</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>t</mi><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mrow><mrow><mo stretchy=\"false\">(</mo><mi>G</mi><mo>\u21c9</mo><mi>M</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u21a6</mo><mrow><mo stretchy=\"false\">(</mo><mi>M</mi><mo>\u2192</mo><mrow><mo stretchy=\"false\">[</mo><mi>M</mi><mo>/</mo><mi>G</mi><mo stretchy=\"false\">]</mo></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></msup><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow></mrow><mo>;</mo><mrow><msup><mrow><mo stretchy=\"false\">[</mo><mrow><mi>r</mi><mo>\u2062</mo><mi>d</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mrow><mrow><mo stretchy=\"false\">(</mo><mi>M</mi><mo>\u2192</mo><mi>\ud835\udd1b</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u21a6</mo><mi>\ud835\udd1b</mi></mrow></msup><mo>\u2062</mo><mtext>Lie groupoids</mtext><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mtext>Presented stacks</mtext><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mtext>Presentable stacks</mtext></mrow></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\n\\end{theorem}\n\nSummarizing, from the stack perspective a Lie groupoid is a stack endowed with a presentation, and from the groupoid perspective a (presentable) stack is the Morita class of a Lie groupoid. It is noteworthy that Morita maps can be defined intrinsically, within the context of Lie groupoids. From here on we will adopt the latter philosophy and forget altogether about sheaves of groupoids. \n\n\n\n\\subsection{Morita maps and fibrations}\n\\label{sec:Morita:maps}\n\nWithin the theory of Lie groupoids, {\\bf Morita maps} are defined as those maps $\\phi:\\tilde G\\to G$ that satisfy the following smooth versions of \\emph{fully faithfulness} and \\emph{essential surjectivity}:\n\\begin{itemize}\n \\item $\\phi$ is {\\bf fully faithful} if it induces a good fiber product of manifolds (\\cite[2.2]{dh})\n\n", "itemtype": "equation", "pos": 74405, "prevtext": "\n\\end{theorem}\n\n\n\nTwo Lie groupoids have the same orbit stack if they are \\emph{Morita equivalent}. More precisely, we can define a {\\bf Morita map} between Lie groupoids as one yielding an isomorphism between the orbit stacks, and consider the induced functor from the (2-theoretic) localization of groupoids by Morita maps:\n\n\\begin{theorem}[Folklore]\nThe bottom arrow in the following diagram is a 2-equivalence of 2-categories:\n\n", "index": 87, "text": "$$\\xymatrix@C=80pt{\n\\ar[dr]\n\\ar[];[d]_{(G\\rightrightarrows M)\\mapsto [G\\rightrightarrows M]}\n\\ar[d];[rd]_{[G\\rightrightarrows M]\\mapsto [M/G]}\n\\text{Lie groupoids} & \\\\\n\\text{Lie groupoids}/_{\\substack{\\text{Morita}\\\\ \\text{equivalences}}} & \\text{Presentable stacks}\n}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex46.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix@C=80pt{\\ar[dr]\\ar[];[d]_{(G\\rightrightarrows M)\\mapsto[G%&#10;\\rightrightarrows M]}\\ar[d];[rd]_{[G\\rightrightarrows M]\\mapsto[M/G]}\\text{Lie%&#10; groupoids}&amp;\\\\&#10;\\text{Lie groupoids}/_{\\begin{subarray}{c}\\text{Morita}\\\\&#10;\\text{equivalences}\\end{subarray}}&amp;\\text{Presentable stacks}}\" display=\"block\"><mrow><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mi>C</mi></mrow><mo>=</mo><mrow><mrow><mn>80</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>t</mi><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mo stretchy=\"false\">]</mo></mrow></mrow><mo>;</mo><mrow><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mrow><mrow><mo stretchy=\"false\">(</mo><mi>G</mi><mo>\u21c9</mo><mi>M</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u21a6</mo><mrow><mo stretchy=\"false\">[</mo><mi>G</mi><mo>\u21c9</mo><mi>M</mi><mo stretchy=\"false\">]</mo></mrow></mrow></msub><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow></mrow><mo>;</mo><mrow><mrow><mrow><msub><mrow><mo stretchy=\"false\">[</mo><mrow><mi>r</mi><mo>\u2062</mo><mi>d</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mrow><mrow><mo stretchy=\"false\">[</mo><mi>G</mi><mo>\u21c9</mo><mi>M</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u21a6</mo><mrow><mo stretchy=\"false\">[</mo><mi>M</mi><mo>/</mo><mi>G</mi><mo stretchy=\"false\">]</mo></mrow></mrow></msub><mo>\u2062</mo><mtext>Lie groupoids</mtext><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mtext>Lie groupoids</mtext></mrow><msub><mo>/</mo><mtable class=\"ltx_align_c\" rowspacing=\"0.0pt\"><mtr><mtd><mtext>Morita</mtext></mtd></mtr><mtr><mtd><mtext>equivalences</mtext></mtd></mtr></mtable></msub><mi mathvariant=\"normal\">&amp;</mi></mrow><mo>\u2062</mo><mtext>Presentable stacks</mtext></mrow></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\n \\item $\\phi$ is {\\bf essentially surjective} if the following map is a surjective submersion:\n\n", "itemtype": "equation", "pos": 75478, "prevtext": "\n\\end{theorem}\n\nSummarizing, from the stack perspective a Lie groupoid is a stack endowed with a presentation, and from the groupoid perspective a (presentable) stack is the Morita class of a Lie groupoid. It is noteworthy that Morita maps can be defined intrinsically, within the context of Lie groupoids. From here on we will adopt the latter philosophy and forget altogether about sheaves of groupoids. \n\n\n\n\\subsection{Morita maps and fibrations}\n\\label{sec:Morita:maps}\n\nWithin the theory of Lie groupoids, {\\bf Morita maps} are defined as those maps $\\phi:\\tilde G\\to G$ that satisfy the following smooth versions of \\emph{fully faithfulness} and \\emph{essential surjectivity}:\n\\begin{itemize}\n \\item $\\phi$ is {\\bf fully faithful} if it induces a good fiber product of manifolds (\\cite[2.2]{dh})\n\n", "index": 89, "text": "$$\\xymatrix{\\ar@{}[dr]|{\\rm fp}\n\\tilde G \\ar[r]^\\phi \\ar[d]_{(\\tilde s\\times \\tilde t)}\n& G \\ar[d]^{(s,t)}\\\\\n\\tilde M\\times \\tilde M \\ar[r]^{\\phi\\times\\phi} & M\\times M,}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex47.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix{\\ar@{}[dr]|{\\rm fp}\\tilde{G}\\ar[r]^{\\phi}\\ar[d]_{(\\tilde{s}\\times%&#10;\\tilde{t})}&amp;G\\ar[d]^{(s,t)}\\\\&#10;\\tilde{M}\\times\\tilde{M}\\ar[r]^{\\phi\\times\\phi}&amp;M\\times M,}\" display=\"block\"><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mi mathvariant=\"normal\">@</mi><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo stretchy=\"false\">|</mo><mi>fp</mi><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mi>\u03d5</mi></msup><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mover accent=\"true\"><mi>s</mi><mo stretchy=\"false\">~</mo></mover><mo>\u00d7</mo><mover accent=\"true\"><mi>t</mi><mo stretchy=\"false\">~</mo></mover></mrow><mo stretchy=\"false\">)</mo></mrow></msub><mi mathvariant=\"normal\">&amp;</mi><mi>G</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msup><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mi>s</mi><mo>,</mo><mi>t</mi><mo stretchy=\"false\">)</mo></mrow></msup><mover accent=\"true\"><mi>M</mi><mo stretchy=\"false\">~</mo></mover><mo>\u00d7</mo><mover accent=\"true\"><mi>M</mi><mo stretchy=\"false\">~</mo></mover><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mrow><mi>\u03d5</mi><mo>\u00d7</mo><mi>\u03d5</mi></mrow></msup><mi mathvariant=\"normal\">&amp;</mi><mi>M</mi><mo>\u00d7</mo><mi>M</mi><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\n\\end{itemize}\n\n\n\nIn \\cite[Theorem 4.3.1]{dh} the notion of Morita map was reformulated in terms of the orbit spaces and the normal representations. We now recall that result and improve it by giving independent characterizations of fully faithful and essentially surjective maps. If $\\phi:\\tilde G\\to G$, we denote by $\\bar\\phi:\\tilde M/\\tilde G\\to M/G$ the induced map between the orbit spaces, and by $\\phi_x:(\\tilde G_x{\\curvearrowright} \\nu_x(\\tilde O))\\to(G_{\\phi(x)}{\\curvearrowright} \\nu_{\\phi(x)}(O))$ the induced map among the normal representations.\n\n\\begin{proposition}\\label{prop:characterization}\nLet $\\phi:\\tilde G\\to G$ be a map. Then\n\\begin{enumerate}[(i)]\n \\item $\\phi$ is fully faithful if and only if $\\bar\\phi$ is injective and $\\phi_x$ is an isomorphism on the isotropy and monomorphism in the normal directions, for every $x\\in \\tilde M$;\n \\item $\\phi$ is essentially surjective if and only if $\\bar\\phi$ is surjective and $\\phi_x$ is epimorphism for every $x\\in \\tilde M$; in such a case, the map $\\bar\\phi$ is open.\n\\end{enumerate}\nThus, $\\phi$ is Morita if and only if $\\bar\\phi$ is a homeomorphism and $\\phi_x$ is an isomorphism for every $x\\in \\tilde M$.\n\\end{proposition}\n\n\\begin{proof}\nIn \\cite[Thm 4.3.1]{dh} it is proved the second statement and half of the first one. It only remains to show that if $\\bar\\phi$ is injective and $\\phi_x$ is a monomorphism for every $x$, then $\\phi$ is fully faithful. Under these assumptions, it is easy to see that the anchor maps define a set-theoretic fiber product. To see that it is in fact a good fiber product of manifolds we need to show that the subset\n\n", "itemtype": "equation", "pos": 75746, "prevtext": "\n \\item $\\phi$ is {\\bf essentially surjective} if the following map is a surjective submersion:\n\n", "index": 91, "text": "$$G\\times_{M}\\tilde M\\to M \\qquad (y{\\xleftarrow}{g} \\phi(x),x)\\mapsto y.$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex48.m1\" class=\"ltx_Math\" alttext=\"G\\times_{M}\\tilde{M}\\to M\\qquad(y{\\xleftarrow{}}{g}\\phi(x),x)\\mapsto y.\" display=\"block\"><mrow><mi>G</mi><msub><mo>\u00d7</mo><mi>M</mi></msub><mover accent=\"true\"><mi>M</mi><mo stretchy=\"false\">~</mo></mover><mo>\u2192</mo><mi>M</mi><mo mathvariant=\"italic\" separator=\"true\">\u2003\u2003</mo><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mover accent=\"true\"><mo>\u2190</mo><mi/></mover><mi>g</mi><mi>\u03d5</mi><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><mo>,</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u21a6</mo><mi>y</mi><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nis an embedded submanifold with the expected tangent space. Note that $S$ can be written as the intersection of the two embedded submanifolds\n\n", "itemtype": "equation", "pos": 77449, "prevtext": "\n\\end{itemize}\n\n\n\nIn \\cite[Theorem 4.3.1]{dh} the notion of Morita map was reformulated in terms of the orbit spaces and the normal representations. We now recall that result and improve it by giving independent characterizations of fully faithful and essentially surjective maps. If $\\phi:\\tilde G\\to G$, we denote by $\\bar\\phi:\\tilde M/\\tilde G\\to M/G$ the induced map between the orbit spaces, and by $\\phi_x:(\\tilde G_x{\\curvearrowright} \\nu_x(\\tilde O))\\to(G_{\\phi(x)}{\\curvearrowright} \\nu_{\\phi(x)}(O))$ the induced map among the normal representations.\n\n\\begin{proposition}\\label{prop:characterization}\nLet $\\phi:\\tilde G\\to G$ be a map. Then\n\\begin{enumerate}[(i)]\n \\item $\\phi$ is fully faithful if and only if $\\bar\\phi$ is injective and $\\phi_x$ is an isomorphism on the isotropy and monomorphism in the normal directions, for every $x\\in \\tilde M$;\n \\item $\\phi$ is essentially surjective if and only if $\\bar\\phi$ is surjective and $\\phi_x$ is epimorphism for every $x\\in \\tilde M$; in such a case, the map $\\bar\\phi$ is open.\n\\end{enumerate}\nThus, $\\phi$ is Morita if and only if $\\bar\\phi$ is a homeomorphism and $\\phi_x$ is an isomorphism for every $x\\in \\tilde M$.\n\\end{proposition}\n\n\\begin{proof}\nIn \\cite[Thm 4.3.1]{dh} it is proved the second statement and half of the first one. It only remains to show that if $\\bar\\phi$ is injective and $\\phi_x$ is a monomorphism for every $x$, then $\\phi$ is fully faithful. Under these assumptions, it is easy to see that the anchor maps define a set-theoretic fiber product. To see that it is in fact a good fiber product of manifolds we need to show that the subset\n\n", "index": 93, "text": "$$S=\\{(t(g),s(g),\\phi(g)):g\\in \\tilde G\\}\\subset \\tilde M\\times \\tilde M\\times G$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex49.m1\" class=\"ltx_Math\" alttext=\"S=\\{(t(g),s(g),\\phi(g)):g\\in\\tilde{G}\\}\\subset\\tilde{M}\\times\\tilde{M}\\times G\" display=\"block\"><mrow><mi>S</mi><mo>=</mo><mrow><mo stretchy=\"false\">{</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>t</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>,</mo><mrow><mi>s</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>,</mo><mrow><mi>\u03d5</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>g</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow><mo>:</mo><mrow><mi>g</mi><mo>\u2208</mo><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover></mrow><mo stretchy=\"false\">}</mo></mrow><mo>\u2282</mo><mrow><mover accent=\"true\"><mi>M</mi><mo stretchy=\"false\">~</mo></mover><mo>\u00d7</mo><mover accent=\"true\"><mi>M</mi><mo stretchy=\"false\">~</mo></mover><mo>\u00d7</mo><mi>G</mi></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nand, from the assumption on the tangent spaces, the intersection is {\\bf clean}, namely \n$T_xS=T_xS_1\\cap T_xS_2$ for all $x\\in S$. Item (i) now follows from the general fact that clean intersection of embedded submanifolds is embedded, that we show below.\n\\end{proof}\n\n\\begin{lemma}\nIf $S_1, S_2\\subset M$ are embedded and $S=S_1\\cap S_2$ is a clean intersection, then $S\\subset M$ is also embedded.\n\\end{lemma}\n\\begin{proof}\nFix $x\\in S$. By restricting ourselves to a submanifold chart of $S_1$, we can assume $M={\\mathbb R}^n$, $S_1={\\mathbb R}^p\\times 0$ and $x=0$. Let $f:U\\to{\\mathbb R}^q$ be a submersion defined in a neighborhood of $0$ locally defining $S_2$. Let $\\phi:{\\mathbb R}^a\\times{\\mathbb R}^b\\to {\\mathbb R}^p$ be a submanifold chart of $S\\subset S_1$ around $0$. Because of the cleaness property, the differential of $y\\mapsto f(\\phi(x,y),0)$ at $0$ is injective for every $x$. It follows that there exists ${\\varepsilon}>0$ such that $f^{-1}(0)\\cap  \\phi(B_1\\times B_{\\varepsilon})\\times 0= \\phi(B_1\\times 0)\\times 0$, where $B_{\\varepsilon}$ denotes the ball of radius ${\\varepsilon}$. We conclude that $S$, locally given by $f^{-1}(0)\\cap  {\\mathbb R}^p\\times 0$, is embedded.\n\\end{proof}\n\n\n\nA map $\\phi:\\tilde G\\to G$ is a {\\bf Morita fibration} if it is Morita and it is a fibration. There is some redundancy among these axioms, that we describe in the following lemma, whose proof is left to the reader.\n\n\\begin{lemma}\nGiven map $\\phi:\\tilde G\\to G$, the following statements are equivalent:\n\\begin{enumerate}[(i)]\n \\item $\\phi$ is a Morita fibration;\n \\item $\\phi$ is fully faithful and a surjective submersion on objects;\n \\item $\\phi$ is a fibration whose kernel is the submersion groupoid $\\tilde M\\times_M\\tilde M\\rightrightarrows \\tilde M$.\n\\end{enumerate}\n\\end{lemma}\n\nAs a converse for the last statement, if $\\tilde G\\rightrightarrows \\tilde M$ is a Lie groupoid and $K\\rightrightarrows \\tilde M$ is a subgroupoid that is proper and free (trivial isotropy), we can define a {\\bf quotient groupoid} $G\\rightrightarrows M$ by setting $M=\\tilde M/K$ and $G=\\tilde G/K\\times K$, where $K\\times K{\\curvearrowright} \\tilde G$ is the action by left and right multiplication. These are well-defined manifold (see eg. \\cite[2.3]{dh}), and the structure maps descend to yield a Lie groupoid $G\\rightrightarrows M$, for which the projection $\\tilde G\\to G$ is a Morita fibration.\nThis way we get the following:\n\n\\begin{proposition}\n\\label{prop:quotient}\nThe above two constructions are mutually inverse, giving a 1-1 correspondence between Morita fibrations and free proper wide subgroupoids:\n\n", "itemtype": "equation", "pos": 77674, "prevtext": "\nis an embedded submanifold with the expected tangent space. Note that $S$ can be written as the intersection of the two embedded submanifolds\n\n", "index": 95, "text": "$$S_1=\\{(y,x,g'): s(g')=\\phi(x)\\} \\qquad S_2=\\{(y,x,g'): t(g')=\\phi(y)\\}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex50.m1\" class=\"ltx_Math\" alttext=\"S_{1}=\\{(y,x,g^{\\prime}):s(g^{\\prime})=\\phi(x)\\}\\qquad S_{2}=\\{(y,x,g^{\\prime}%&#10;):t(g^{\\prime})=\\phi(y)\\}\" display=\"block\"><mrow><mrow><msub><mi>S</mi><mn>1</mn></msub><mo>=</mo><mrow><mo stretchy=\"false\">{</mo><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mo>,</mo><mi>x</mi><mo>,</mo><msup><mi>g</mi><mo>\u2032</mo></msup><mo stretchy=\"false\">)</mo></mrow><mo>:</mo><mrow><mrow><mi>s</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msup><mi>g</mi><mo>\u2032</mo></msup><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><mi>\u03d5</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo stretchy=\"false\">}</mo></mrow></mrow><mo mathvariant=\"italic\" separator=\"true\">\u2003\u2003</mo><mrow><msub><mi>S</mi><mn>2</mn></msub><mo>=</mo><mrow><mo stretchy=\"false\">{</mo><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mo>,</mo><mi>x</mi><mo>,</mo><msup><mi>g</mi><mo>\u2032</mo></msup><mo stretchy=\"false\">)</mo></mrow><mo>:</mo><mrow><mrow><mi>t</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msup><mi>g</mi><mo>\u2032</mo></msup><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><mi>\u03d5</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo stretchy=\"false\">}</mo></mrow></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\n\\end{proposition}\n\n\n\n\n\n\n\n\nThe usual fiber products of Lie groupoids do not take care of isomorphisms between maps, and this is not satisfactory if we want to do geometry over stacks. Recall that given $\\phi_1:G_1\\to H$ and $\\phi_2:G_2\\to H$ Lie groupoid maps, their {\\bf homotopy fiber product} $G_1\\tilde\\times_H G_2$ (see, e.g., \\cite{dh, mm}) is the Lie groupoid of triples \\smash{$(x_1,\\phi_1(x_1){\\xleftarrow} h\\phi_2(x_2),x_2)$}, where an arrow is a pair of arrows in $G_1\\times G_2$ inducing a commutative square in $H$.  The homotopy fiber product fits into a square, commutative up to isomorphism, and universal in an appropriate sense:\n\n", "itemtype": "equation", "pos": 80367, "prevtext": "\nand, from the assumption on the tangent spaces, the intersection is {\\bf clean}, namely \n$T_xS=T_xS_1\\cap T_xS_2$ for all $x\\in S$. Item (i) now follows from the general fact that clean intersection of embedded submanifolds is embedded, that we show below.\n\\end{proof}\n\n\\begin{lemma}\nIf $S_1, S_2\\subset M$ are embedded and $S=S_1\\cap S_2$ is a clean intersection, then $S\\subset M$ is also embedded.\n\\end{lemma}\n\\begin{proof}\nFix $x\\in S$. By restricting ourselves to a submanifold chart of $S_1$, we can assume $M={\\mathbb R}^n$, $S_1={\\mathbb R}^p\\times 0$ and $x=0$. Let $f:U\\to{\\mathbb R}^q$ be a submersion defined in a neighborhood of $0$ locally defining $S_2$. Let $\\phi:{\\mathbb R}^a\\times{\\mathbb R}^b\\to {\\mathbb R}^p$ be a submanifold chart of $S\\subset S_1$ around $0$. Because of the cleaness property, the differential of $y\\mapsto f(\\phi(x,y),0)$ at $0$ is injective for every $x$. It follows that there exists ${\\varepsilon}>0$ such that $f^{-1}(0)\\cap  \\phi(B_1\\times B_{\\varepsilon})\\times 0= \\phi(B_1\\times 0)\\times 0$, where $B_{\\varepsilon}$ denotes the ball of radius ${\\varepsilon}$. We conclude that $S$, locally given by $f^{-1}(0)\\cap  {\\mathbb R}^p\\times 0$, is embedded.\n\\end{proof}\n\n\n\nA map $\\phi:\\tilde G\\to G$ is a {\\bf Morita fibration} if it is Morita and it is a fibration. There is some redundancy among these axioms, that we describe in the following lemma, whose proof is left to the reader.\n\n\\begin{lemma}\nGiven map $\\phi:\\tilde G\\to G$, the following statements are equivalent:\n\\begin{enumerate}[(i)]\n \\item $\\phi$ is a Morita fibration;\n \\item $\\phi$ is fully faithful and a surjective submersion on objects;\n \\item $\\phi$ is a fibration whose kernel is the submersion groupoid $\\tilde M\\times_M\\tilde M\\rightrightarrows \\tilde M$.\n\\end{enumerate}\n\\end{lemma}\n\nAs a converse for the last statement, if $\\tilde G\\rightrightarrows \\tilde M$ is a Lie groupoid and $K\\rightrightarrows \\tilde M$ is a subgroupoid that is proper and free (trivial isotropy), we can define a {\\bf quotient groupoid} $G\\rightrightarrows M$ by setting $M=\\tilde M/K$ and $G=\\tilde G/K\\times K$, where $K\\times K{\\curvearrowright} \\tilde G$ is the action by left and right multiplication. These are well-defined manifold (see eg. \\cite[2.3]{dh}), and the structure maps descend to yield a Lie groupoid $G\\rightrightarrows M$, for which the projection $\\tilde G\\to G$ is a Morita fibration.\nThis way we get the following:\n\n\\begin{proposition}\n\\label{prop:quotient}\nThe above two constructions are mutually inverse, giving a 1-1 correspondence between Morita fibrations and free proper wide subgroupoids:\n\n", "index": 97, "text": "$$\\tilde G\\to G\\quad \\rightleftharpoons \\quad K\\to \\tilde G$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex51.m1\" class=\"ltx_Math\" alttext=\"\\tilde{G}\\to G\\quad\\rightleftharpoons\\quad K\\to\\tilde{G}\" display=\"block\"><mrow><mrow><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mo>\u2192</mo><mrow><mi>G</mi><mo mathvariant=\"italic\" separator=\"true\">\u2003</mo><mo>\u21cc</mo></mrow></mrow><mo mathvariant=\"italic\" separator=\"true\">\u2003</mo><mrow><mi>K</mi><mo>\u2192</mo><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\n\nThe following is a sharp formulation of a well-known result (see e.g. \\cite[4.4]{dh}). It readily implies that Morita maps are stable under homotopy base change, which makes it is easy to compose fractions, and more conceptually, to show that Morita maps form a saturated multiplicative system.\n\n\\begin{proposition}\nIf $\\phi_1$ is essentially surjective then the homotopy fiber product is a well-defined Lie groupoid, and its homotopy base change map $\\tilde\\phi_1$ is a split fibration.\nMoreover, $\\phi_1$ is fully faithful if and only if $\\tilde\\phi_1$ is so.\n\\end{proposition}\n\n\n\n\n\n\n\n\\begin{remark}\n\\label{rmk:factorization}\nAny Lie groupoid map $\\phi:G\\to H$ has a {\\bf canonical factorization}: \n\n", "itemtype": "equation", "pos": 81075, "prevtext": "\n\\end{proposition}\n\n\n\n\n\n\n\n\nThe usual fiber products of Lie groupoids do not take care of isomorphisms between maps, and this is not satisfactory if we want to do geometry over stacks. Recall that given $\\phi_1:G_1\\to H$ and $\\phi_2:G_2\\to H$ Lie groupoid maps, their {\\bf homotopy fiber product} $G_1\\tilde\\times_H G_2$ (see, e.g., \\cite{dh, mm}) is the Lie groupoid of triples \\smash{$(x_1,\\phi_1(x_1){\\xleftarrow} h\\phi_2(x_2),x_2)$}, where an arrow is a pair of arrows in $G_1\\times G_2$ inducing a commutative square in $H$.  The homotopy fiber product fits into a square, commutative up to isomorphism, and universal in an appropriate sense:\n\n", "index": 99, "text": "$$\\xymatrix{ \\ar@{}[dr]|{\\rm hfp}\nG_1\\tilde\\times_H G_2 \\ar[d]_{\\tilde\\phi_2} \\ar[r]^{\\tilde\\phi_1} \\ar@{}[dr]|(.7){} & G_2 \\ar[d]^{\\phi_2}\\\\ G_1 \\ar[r]_{\\phi_1}  & H}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex52.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix{\\ar@{}[dr]|{\\rm hfp}G_{1}\\tilde{\\times}_{H}G_{2}\\ar[d]_{\\tilde{\\phi}%&#10;_{2}}\\ar[r]^{\\tilde{\\phi}_{1}}\\ar@{}[dr]|(.7){}&amp;G_{2}\\ar[d]^{\\phi_{2}}\\\\&#10;G_{1}\\ar[r]_{\\phi_{1}}&amp;H}\" display=\"block\"><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">|</mo><mrow><mi>hfp</mi><mo>\u2062</mo><msub><mi>G</mi><mn>1</mn></msub><mo>\u2062</mo><msub><mover accent=\"true\"><mo>\u00d7</mo><mo stretchy=\"false\">~</mo></mover><mi>H</mi></msub><mo>\u2062</mo><msub><mi>G</mi><mn>2</mn></msub><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><msub><mover accent=\"true\"><mi>\u03d5</mi><mo stretchy=\"false\">~</mo></mover><mn>2</mn></msub></msub><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><msub><mover accent=\"true\"><mi>\u03d5</mi><mo stretchy=\"false\">~</mo></mover><mn>1</mn></msub></msup><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow></mrow><mo stretchy=\"false\">|</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mn>.7</mn><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><msub><mi>G</mi><mn>2</mn></msub><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><msub><mi>\u03d5</mi><mn>2</mn></msub></msup><mo>\u2062</mo><msub><mi>G</mi><mn>1</mn></msub><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msub><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><msub><mi>\u03d5</mi><mn>1</mn></msub></msub><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mi>H</mi></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nwhere the homotopy fiber product is taken over ${\\rm id}_H$ and $\\phi$, and $\\iota$ is the inclusion \\smash{$x\\mapsto (x,\\phi(x){\\xleftarrow}{\\rm id} \\phi(x),\\phi(x))$}. The map $\\iota$ is a categorical equivalence, and the map $\\tilde\\phi$ is an {\\bf almost fibration}, namely $\\tilde\\phi'$ is a surjective submersion though $\\tilde\\phi^{(0)}$ may not. This is a formal analog to the path fibration used in topology to show that any map is a fibration up to homotopy.\n\\end{remark}\n\n\n\nSome properties of Lie groupoids and maps between them are invariant under Morita equivalences, but some others are not inherent of stacks, so we can make them to hold just by replacing the groupoid representative. For example, the above remark shows that, from the stacky viewpoint, essentially surjective maps, fibrations and split fibrations all play the same role.\n\n\n\nGiven $\\phi:G\\to H$ any Lie groupoid map, its {\\bf essential image} consists of the objects and arrows that are in the image up to isomorphism, or more precisely, is the image of the associated map $\\tilde\\phi:G\\tilde\\times_HH\\to H$ in the above canonical factorization. \n\n\\begin{proposition}\\label{prop:image}\nThe essential image of a fully faithful map $\\phi:G\\to H$ is a full saturated Lie subgroupoid $i:I\\to H$.\n\\end{proposition}\n\n\\begin{proof}\nBy Remark \\ref{rmk:factorization} we can assume that $\\phi:G\\to H$ is a fully faithful almost fibration. The kernel $K$ of $\\phi$ is a well-defined embedded subgroupoid of $G$, for the  manifold $K$ can be seen as the preimage of the units along $G\\to M\\times_{N}H$, and this is a surjective submersion. Since in addition $\\phi$ is fully faithful, this kernel $K$ is free and proper. By Proposition \\ref{prop:quotient} we conclude that the quotient $G/K$ is a well-defined Lie groupoid, and that the quotient map is Morita. Then the induced map $G/K\\to H$ is fully faithful and, by Proposition  \\ref{prop:characterization}, it follows that it is an injective immersion. Its image is clearly full and saturated.\n\\end{proof}\n\nAs a corollary, we can characterize fully faithful maps as those that factor as a Morita map followed by the inclusion of a full saturated immersed subgroupoid. This can be seen as further evidence that the fiber product on the definition of fully faithfulness should be required to be good, and not any fiber product of manifolds, as usually done in the literature (see also \\cite[Remark 4.2.4]{dh}).\n\n\n\n\n\\subsection{Immersions, submersions and embeddings of stacks}\n\n\n\nTo simplify the discussion, we will identify isomorphic maps of Lie groupoids.\nStarting with Lie groupoids and formally inverting the Morita maps we get a category equivalent to that of (presentable) stacks. Since Morita maps constitute a \\emph{saturated multiplicative system} (\\cite[Section 7.1]{ks}), we can express any arrow in the localization as a \\emph{fraction}.\nA {\\bf generalized map} $\\psi/\\phi:\\tilde G{\\dashrightarrow} G$ between Lie groupoids is a fraction \n", "itemtype": "equation", "pos": 81947, "prevtext": "\n\nThe following is a sharp formulation of a well-known result (see e.g. \\cite[4.4]{dh}). It readily implies that Morita maps are stable under homotopy base change, which makes it is easy to compose fractions, and more conceptually, to show that Morita maps form a saturated multiplicative system.\n\n\\begin{proposition}\nIf $\\phi_1$ is essentially surjective then the homotopy fiber product is a well-defined Lie groupoid, and its homotopy base change map $\\tilde\\phi_1$ is a split fibration.\nMoreover, $\\phi_1$ is fully faithful if and only if $\\tilde\\phi_1$ is so.\n\\end{proposition}\n\n\n\n\n\n\n\n\\begin{remark}\n\\label{rmk:factorization}\nAny Lie groupoid map $\\phi:G\\to H$ has a {\\bf canonical factorization}: \n\n", "index": 101, "text": "$$\\xymatrix@R=10pt{\n & G\\tilde\\times_{H} H \\ar[dr]^{\\tilde\\phi} \n \\\\ G \\ar[ur]^{\\iota} \\ar[rr]_\\phi & & H\n}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex53.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix@R=10pt{&amp;G\\tilde{\\times}_{H}H\\ar[dr]^{\\tilde{\\phi}}\\\\&#10;G\\ar[ur]^{\\iota}\\ar[rr]_{\\phi}&amp;&amp;H}\" display=\"block\"><mrow><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mi>R</mi></mrow><mo>=</mo><mrow><mn>10</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>t</mi><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mi>G</mi><mo>\u2062</mo><msub><mover accent=\"true\"><mo>\u00d7</mo><mo stretchy=\"false\">~</mo></mover><mi>H</mi></msub><mo>\u2062</mo><mi>H</mi><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mover accent=\"true\"><mi>\u03d5</mi><mo stretchy=\"false\">~</mo></mover></msup><mo>\u2062</mo><mi>G</mi><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mrow><mi>u</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mi>\u03b9</mi></msup><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msub><mrow><mo stretchy=\"false\">[</mo><mrow><mi>r</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mi>\u03d5</mi></msub><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mi>H</mi></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": " \nwhere the first leg is a Morita map. If $\\alpha$ is a Morita map, then the two fractions $\\psi/\\phi$, $\\psi\\alpha/\\phi\\alpha$ should be identified. Generalized maps can be composed by using homotopy fiber products. A {\\bf Morita equivalence} is an invertible generalized map, since Morita maps are saturated, this is the same as a fraction of Morita maps.\n\n\n\nAn alternative approach, described for instance in \\cite{mm2}, consists in defining generalized maps as bibundles between groupoids, and the localization property can be shown without appealing to the calculus of fractions.\nIn fact, with the above notations, a fraction yields a bibundle $\\frac{\\tilde G\\times_{\\tilde M} N\\times_M G}{H}$ that is right principal, and a right principal bibundle $P$ yields a fraction by taking the action groupoid $\\tilde G\\ltimes P\\rtimes G$.\nThese constructions are mutually inverse (\\cite[Theorem 4.6.3]{dh}):\n\n", "itemtype": "equation", "pos": -1, "prevtext": "\nwhere the homotopy fiber product is taken over ${\\rm id}_H$ and $\\phi$, and $\\iota$ is the inclusion \\smash{$x\\mapsto (x,\\phi(x){\\xleftarrow}{\\rm id} \\phi(x),\\phi(x))$}. The map $\\iota$ is a categorical equivalence, and the map $\\tilde\\phi$ is an {\\bf almost fibration}, namely $\\tilde\\phi'$ is a surjective submersion though $\\tilde\\phi^{(0)}$ may not. This is a formal analog to the path fibration used in topology to show that any map is a fibration up to homotopy.\n\\end{remark}\n\n\n\nSome properties of Lie groupoids and maps between them are invariant under Morita equivalences, but some others are not inherent of stacks, so we can make them to hold just by replacing the groupoid representative. For example, the above remark shows that, from the stacky viewpoint, essentially surjective maps, fibrations and split fibrations all play the same role.\n\n\n\nGiven $\\phi:G\\to H$ any Lie groupoid map, its {\\bf essential image} consists of the objects and arrows that are in the image up to isomorphism, or more precisely, is the image of the associated map $\\tilde\\phi:G\\tilde\\times_HH\\to H$ in the above canonical factorization. \n\n\\begin{proposition}\\label{prop:image}\nThe essential image of a fully faithful map $\\phi:G\\to H$ is a full saturated Lie subgroupoid $i:I\\to H$.\n\\end{proposition}\n\n\\begin{proof}\nBy Remark \\ref{rmk:factorization} we can assume that $\\phi:G\\to H$ is a fully faithful almost fibration. The kernel $K$ of $\\phi$ is a well-defined embedded subgroupoid of $G$, for the  manifold $K$ can be seen as the preimage of the units along $G\\to M\\times_{N}H$, and this is a surjective submersion. Since in addition $\\phi$ is fully faithful, this kernel $K$ is free and proper. By Proposition \\ref{prop:quotient} we conclude that the quotient $G/K$ is a well-defined Lie groupoid, and that the quotient map is Morita. Then the induced map $G/K\\to H$ is fully faithful and, by Proposition  \\ref{prop:characterization}, it follows that it is an injective immersion. Its image is clearly full and saturated.\n\\end{proof}\n\nAs a corollary, we can characterize fully faithful maps as those that factor as a Morita map followed by the inclusion of a full saturated immersed subgroupoid. This can be seen as further evidence that the fiber product on the definition of fully faithfulness should be required to be good, and not any fiber product of manifolds, as usually done in the literature (see also \\cite[Remark 4.2.4]{dh}).\n\n\n\n\n\\subsection{Immersions, submersions and embeddings of stacks}\n\n\n\nTo simplify the discussion, we will identify isomorphic maps of Lie groupoids.\nStarting with Lie groupoids and formally inverting the Morita maps we get a category equivalent to that of (presentable) stacks. Since Morita maps constitute a \\emph{saturated multiplicative system} (\\cite[Section 7.1]{ks}), we can express any arrow in the localization as a \\emph{fraction}.\nA {\\bf generalized map} $\\psi/\\phi:\\tilde G{\\dashrightarrow} G$ between Lie groupoids is a fraction \n", "index": 103, "text": "\n\\[ \\xymatrix{(\\tilde G\\rightrightarrows \\tilde M)& (H\\rightrightarrows N) \\ar[l]_{\\phi}^{\\sim}\\ar[r]^{\\psi}& (G\\rightrightarrows M)} \\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex54.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix{(\\tilde{G}\\rightrightarrows\\tilde{M})&amp;(H\\rightrightarrows N)\\ar[l]_{%&#10;\\phi}^{\\sim}\\ar[r]^{\\psi}&amp;(G\\rightrightarrows M)}\" display=\"block\"><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mrow><mo stretchy=\"false\">(</mo><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mo>\u21c9</mo><mover accent=\"true\"><mi>M</mi><mo stretchy=\"false\">~</mo></mover><mo stretchy=\"false\">)</mo></mrow><mi mathvariant=\"normal\">&amp;</mi><mrow><mo stretchy=\"false\">(</mo><mi>H</mi><mo>\u21c9</mo><mi>N</mi><mo stretchy=\"false\">)</mo></mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msubsup><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow><mi>\u03d5</mi><mo>\u223c</mo></msubsup><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mi>\u03c8</mi></msup><mi mathvariant=\"normal\">&amp;</mi><mrow><mo stretchy=\"false\">(</mo><mi>G</mi><mo>\u21c9</mo><mi>M</mi><mo stretchy=\"false\">)</mo></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\n\nIn particular, note that any fraction can be expressed as $\\psi/\\phi$ with $\\phi$ a split fibration. A Morita equivalence is the same as a bi-bundle that is principal in both sides.\n\n\n\nImmersion and submersion of stacks arise naturally, once one thinks of the orbit stack $[M/G]$ as a ``smooth orbit space\", with the normal representation $G_x{\\curvearrowright} \\nu_x(O)$ playing the role of the tangent space to $[M/G]$ at the point $[x]=O$. \n\n\\begin{definition}\nA fraction $\\psi/\\phi:\\tilde G{\\dashrightarrow} G$ is said to be\n\\begin{enumerate}[(i)]\n \\item a {\\bf surjective submersion} if $\\psi$ is essentially surjective;\n \\item an {\\bf injective immersion} if $\\psi$ is fully faithful.\n\\end{enumerate}\n\\end{definition}\n\nIt follows from Proposition \\ref{prop:characterization} that surjective submersions and injective immersions are well-defined. Moreover, using the canonical factorization (see Remark \\ref{rmk:factorization}) one can find nice representatives of such maps:\nA fraction $\\tilde G{\\dashrightarrow} G$ is a surjective submersion (resp. injective immersion) if and only if it can be expressed as $\\psi/\\phi$ with $\\psi$ a split fibration (resp. full saturated injective immersion). This shows that our definitions agree with those proposed in \\cite[Def 2.9]{bnz}.\n\n\n\n\nThe essential image $I$ of a fraction $\\psi/\\phi:\\tilde G{\\dashrightarrow} G$ is clearly well-defined as a set-theoretic subgroupoid of $G$, and even a full saturated Lie subgroupoid when $\\psi/\\phi$ is an injective immersion (Proposition \\ref{prop:image}), but in general it fails to be embedded. \nThis motivates the following definition.\n\n\\begin{definition}\nA fraction $\\tilde G{\\dashrightarrow} G$ is said to be an {\\bf embedding} if it is an injective immersion and its essential image is embedded.\n\\end{definition}\n\nIn order to show that the previous definition is good, in the sense that it relies only on the stacks and does not depend on the groupoid presenting them, we provide the following result.\n\n\\begin{lemma}\n\\label{lem:Morita:full:pullback}\nLet $\\phi:\\tilde G\\to G$ be a Lie groupoid fibration.\n\\begin{enumerate}[(i)]\n \\item The pull-back $\\phi^*(G_S)$ of a full (embedded) Lie subgroupoid $G_S$ is a full (embedded) Lie subgroupoid.\n \\item If $\\phi$ is Morita, the pull-back $G_S\\mapsto \\phi^*(G_S)$ defines a 1-1 correspondence between full (embedded) Lie subgroupoids of $G$ and $\\tilde G$.\n\\end{enumerate}\n\\end{lemma}\n\n\\begin{proof}\nIf $\\phi:\\tilde G\\to G$ is a fibration and $S\\subset M$ is saturated or embedded then the preimage $\\phi^{-1}(S)$ is clearly saturated and or  embedded. The first statement follows easily. Regarding the second, if $\\phi:\\tilde G\\to G$ is a Morita fibration and $\\tilde S\\subset \\tilde M$ is saturated, then it is also saturated with respect to the action of the kernel $K$, for the fibers are included in the orbit. Since the action $K{\\curvearrowright} \\tilde S$ is free and proper, we can construct the orbit manifold $S=\\tilde S/K\\simeq\\phi(S)$, that comes equipped with a canonical map $S\\to M$. Note that $(\\tilde S\\to S)\\to (\\tilde M\\to M)$ is a map of principal $K$-bundles, thus $\\tilde S$ is (embedded) submanifold if and only if $S$ is so.\n\\end{proof}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIn the case of proper groupoids, whose orbit stacks are called {\\bf separated}, we have the following characterization of embeddings:\n\n\\begin{proposition}\nA fraction $\\psi/\\phi$ between proper groupoids is an embedding if and only if $\\psi$ is fully faithful and the induced map $\\bar\\psi$ on the orbit spaces is a topological embedding.\n\\end{proposition}\n\n\\begin{proof}\nIt is easy to see that every embedding satisfies this properties. So let us show the converse. We will make a number of reductions to simplify the question. To start with, by Proposition \\ref{prop:image}, we can suppose $\\phi={\\rm id}$ and $\\psi:(G_S\\rightrightarrows S)\\to (G\\rightrightarrows M)$ the inclusion of a full saturated subgroupoid that induces a topological embedding in the orbit spaces. \n\nGiven $x\\in S$, by the linearization theorem, the restriction of $G$ to some saturated open $S\\subset U\\subset M$ is Morita equivalent to $K\\ltimes V\\rightrightarrows V$, the action groupoid of a linear representation of a compact group. Hence, by Lemma \\ref{lem:Morita:full:pullback}, we can assume that $G$ is of this type, so we set $G=K\\times V$, $M=V$ and $x=0$.\n\n\nWe claim that the action $K{\\curvearrowright} V$ restricts to a smooth action $K{\\curvearrowright} S$, so that $G_S$ becomes the action groupoid $K\\times S$. A priori, we have two different good fiber product of manifolds, with a map $\\alpha:G_S\\to K\\times S$ relating them. They are depicted in the front and the back of the following cube:\n\n\n\n\n\n\n\n\n", "itemtype": "equation", "pos": 86072, "prevtext": " \nwhere the first leg is a Morita map. If $\\alpha$ is a Morita map, then the two fractions $\\psi/\\phi$, $\\psi\\alpha/\\phi\\alpha$ should be identified. Generalized maps can be composed by using homotopy fiber products. A {\\bf Morita equivalence} is an invertible generalized map, since Morita maps are saturated, this is the same as a fraction of Morita maps.\n\n\n\nAn alternative approach, described for instance in \\cite{mm2}, consists in defining generalized maps as bibundles between groupoids, and the localization property can be shown without appealing to the calculus of fractions.\nIn fact, with the above notations, a fraction yields a bibundle $\\frac{\\tilde G\\times_{\\tilde M} N\\times_M G}{H}$ that is right principal, and a right principal bibundle $P$ yields a fraction by taking the action groupoid $\\tilde G\\ltimes P\\rtimes G$.\nThese constructions are mutually inverse (\\cite[Theorem 4.6.3]{dh}):\n\n", "index": 105, "text": "$$\\tilde G{\\xleftarrow}\\sim H\\to G \\qquad \\rightleftharpoons \\qquad \\tilde G{\\curvearrowright} P{\\curvearrowleft} G.$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex55.m1\" class=\"ltx_Math\" alttext=\"\\tilde{G}{\\xleftarrow{}}\\sim H\\to G\\qquad\\rightleftharpoons\\qquad\\tilde{G}{%&#10;\\curvearrowright}P{\\curvearrowleft}G.\" display=\"block\"><mrow><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mover accent=\"true\"><mo>\u2190</mo><mi/></mover><mo>\u223c</mo><mi>H</mi><mo>\u2192</mo><mi>G</mi><mo mathvariant=\"italic\" separator=\"true\">\u2003\u2003</mo><mo>\u21cc</mo><mo mathvariant=\"italic\" separator=\"true\">\u2003\u2003</mo><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mo>\u21b7</mo><mi>P</mi><mo>\u21b6</mo><mi>G</mi><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\n\nSince $S$ is saturated, $\\alpha$ is bijective. Since $G_S\\to K\\times S\\to K\\times V$ is an immersion, $\\alpha$ is also an immersion, and we conclude that $\\alpha$ is a diffeomorphism. The restricted action $K\\times S\\to S$ can therefore be written as $t\\circ\\alpha^{-1}$, and so it is smooth.\n\nFinally, we show that $S$ is embedded in $V$: given $x_n,x\\in S$ such that $\\lim x_n=x$ in $V$, we claim that convergence also holds in $S$. Consider the diagram:\n\n", "itemtype": "equation", "pos": 90911, "prevtext": "\n\nIn particular, note that any fraction can be expressed as $\\psi/\\phi$ with $\\phi$ a split fibration. A Morita equivalence is the same as a bi-bundle that is principal in both sides.\n\n\n\nImmersion and submersion of stacks arise naturally, once one thinks of the orbit stack $[M/G]$ as a ``smooth orbit space\", with the normal representation $G_x{\\curvearrowright} \\nu_x(O)$ playing the role of the tangent space to $[M/G]$ at the point $[x]=O$. \n\n\\begin{definition}\nA fraction $\\psi/\\phi:\\tilde G{\\dashrightarrow} G$ is said to be\n\\begin{enumerate}[(i)]\n \\item a {\\bf surjective submersion} if $\\psi$ is essentially surjective;\n \\item an {\\bf injective immersion} if $\\psi$ is fully faithful.\n\\end{enumerate}\n\\end{definition}\n\nIt follows from Proposition \\ref{prop:characterization} that surjective submersions and injective immersions are well-defined. Moreover, using the canonical factorization (see Remark \\ref{rmk:factorization}) one can find nice representatives of such maps:\nA fraction $\\tilde G{\\dashrightarrow} G$ is a surjective submersion (resp. injective immersion) if and only if it can be expressed as $\\psi/\\phi$ with $\\psi$ a split fibration (resp. full saturated injective immersion). This shows that our definitions agree with those proposed in \\cite[Def 2.9]{bnz}.\n\n\n\n\nThe essential image $I$ of a fraction $\\psi/\\phi:\\tilde G{\\dashrightarrow} G$ is clearly well-defined as a set-theoretic subgroupoid of $G$, and even a full saturated Lie subgroupoid when $\\psi/\\phi$ is an injective immersion (Proposition \\ref{prop:image}), but in general it fails to be embedded. \nThis motivates the following definition.\n\n\\begin{definition}\nA fraction $\\tilde G{\\dashrightarrow} G$ is said to be an {\\bf embedding} if it is an injective immersion and its essential image is embedded.\n\\end{definition}\n\nIn order to show that the previous definition is good, in the sense that it relies only on the stacks and does not depend on the groupoid presenting them, we provide the following result.\n\n\\begin{lemma}\n\\label{lem:Morita:full:pullback}\nLet $\\phi:\\tilde G\\to G$ be a Lie groupoid fibration.\n\\begin{enumerate}[(i)]\n \\item The pull-back $\\phi^*(G_S)$ of a full (embedded) Lie subgroupoid $G_S$ is a full (embedded) Lie subgroupoid.\n \\item If $\\phi$ is Morita, the pull-back $G_S\\mapsto \\phi^*(G_S)$ defines a 1-1 correspondence between full (embedded) Lie subgroupoids of $G$ and $\\tilde G$.\n\\end{enumerate}\n\\end{lemma}\n\n\\begin{proof}\nIf $\\phi:\\tilde G\\to G$ is a fibration and $S\\subset M$ is saturated or embedded then the preimage $\\phi^{-1}(S)$ is clearly saturated and or  embedded. The first statement follows easily. Regarding the second, if $\\phi:\\tilde G\\to G$ is a Morita fibration and $\\tilde S\\subset \\tilde M$ is saturated, then it is also saturated with respect to the action of the kernel $K$, for the fibers are included in the orbit. Since the action $K{\\curvearrowright} \\tilde S$ is free and proper, we can construct the orbit manifold $S=\\tilde S/K\\simeq\\phi(S)$, that comes equipped with a canonical map $S\\to M$. Note that $(\\tilde S\\to S)\\to (\\tilde M\\to M)$ is a map of principal $K$-bundles, thus $\\tilde S$ is (embedded) submanifold if and only if $S$ is so.\n\\end{proof}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIn the case of proper groupoids, whose orbit stacks are called {\\bf separated}, we have the following characterization of embeddings:\n\n\\begin{proposition}\nA fraction $\\psi/\\phi$ between proper groupoids is an embedding if and only if $\\psi$ is fully faithful and the induced map $\\bar\\psi$ on the orbit spaces is a topological embedding.\n\\end{proposition}\n\n\\begin{proof}\nIt is easy to see that every embedding satisfies this properties. So let us show the converse. We will make a number of reductions to simplify the question. To start with, by Proposition \\ref{prop:image}, we can suppose $\\phi={\\rm id}$ and $\\psi:(G_S\\rightrightarrows S)\\to (G\\rightrightarrows M)$ the inclusion of a full saturated subgroupoid that induces a topological embedding in the orbit spaces. \n\nGiven $x\\in S$, by the linearization theorem, the restriction of $G$ to some saturated open $S\\subset U\\subset M$ is Morita equivalent to $K\\ltimes V\\rightrightarrows V$, the action groupoid of a linear representation of a compact group. Hence, by Lemma \\ref{lem:Morita:full:pullback}, we can assume that $G$ is of this type, so we set $G=K\\times V$, $M=V$ and $x=0$.\n\n\nWe claim that the action $K{\\curvearrowright} V$ restricts to a smooth action $K{\\curvearrowright} S$, so that $G_S$ becomes the action groupoid $K\\times S$. A priori, we have two different good fiber product of manifolds, with a map $\\alpha:G_S\\to K\\times S$ relating them. They are depicted in the front and the back of the following cube:\n\n\n\n\n\n\n\n\n", "index": 107, "text": "$$\\begin{matrix}\n\\xymatrix@R=8pt@C=8pt{\nG_S  \\ar[rr] \\ar[dd]_{(t,s)} \\ar[rd]_{\\alpha}&  &K\\times V \\ar'[d][dd]^--{(\\rho,\\pi)} \\ar@{=}[dr]& \\\\\n &K\\times S \\ar[dd]_--------{\\pi} \\ar[rr]&  & K\\times V\\ar[dd]^\\pi\\\\\nS\\times S \\ar'[r][rr] \\ar[dr]_{\\pi}&  &V\\times V \\ar[dr]_{\\pi}& \\\\\n& S \\ar[rr]& & V}\n\\end{matrix}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex56.m1\" class=\"ltx_Math\" alttext=\"\\begin{matrix}\\xymatrix@R=8pt@C=8pt{G_{S}\\ar[rr]\\ar[dd]_{(t,s)}\\ar[rd]_{\\alpha%&#10;}\\hfil&amp;&amp;K\\times V\\ar^{\\prime}[d][dd]^{-}-{(\\rho,\\pi)}\\ar@{=}[dr]&amp;\\\\&#10;&amp;K\\times S\\ar[dd]_{-}-------{\\pi}\\ar[rr]&amp;&amp;K\\times V\\ar[dd]^{\\pi}\\\\&#10;S\\times S\\ar^{\\prime}[r][rr]\\ar[dr]_{\\pi}&amp;&amp;V\\times V\\ar[dr]_{\\pi}&amp;\\\\&#10;&amp;S\\ar[rr]&amp;&amp;V\\end{matrix}}\" display=\"block\"><mtable columnspacing=\"5pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"right\" columnspan=\"4\"><mrow><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mi>R</mi></mrow><mo>=</mo><mrow><mn>8</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>t</mi><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mi>C</mi></mrow><mo>=</mo><mrow><mrow><mrow><mrow><mn>8</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>t</mi><mo>\u2062</mo><msub><mi>G</mi><mi>S</mi></msub><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>r</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msub><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>d</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mi>t</mi><mo>,</mo><mi>s</mi><mo stretchy=\"false\">)</mo></mrow></msub><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msub><mrow><mo stretchy=\"false\">[</mo><mrow><mi>r</mi><mo>\u2062</mo><mi>d</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mi>\u03b1</mi></msub><mo>\u2062</mo><mi>K</mi></mrow><mo>\u00d7</mo><mi>V</mi></mrow><mo>\u2062</mo><msup><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2032</mo></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>d</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mo>-</mo></msup></mrow><mo>-</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mi>\u03c1</mi><mo>,</mo><mi>\u03c0</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi></mrow></mrow><mo>=</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow></mrow></mtd></mtr><mtr><mtd columnalign=\"center\"><mi/></mtd><mtd columnalign=\"center\"><mrow><mi>K</mi><mo>\u00d7</mo><mi>S</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mo>-</mo></msub><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mi>\u03c0</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow></mrow></mtd><mtd columnalign=\"center\"><mi/></mtd><mtd columnalign=\"center\"><mrow><mrow><mi>K</mi><mo>\u00d7</mo><mi>V</mi></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>d</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mi>\u03c0</mi></msup></mrow></mtd></mtr><mtr><mtd columnalign=\"center\"><mrow><mrow><mi>S</mi><mo>\u00d7</mo><mi>S</mi></mrow><mo>\u2062</mo><msup><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2032</mo></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>r</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msub><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mi>\u03c0</mi></msub></mrow></mtd><mtd columnalign=\"center\"><mi/></mtd><mtd columnalign=\"center\"><mrow><mrow><mi>V</mi><mo>\u00d7</mo><mi>V</mi></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msub><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mi>\u03c0</mi></msub></mrow></mtd><mtd columnalign=\"center\"><mi/></mtd></mtr><mtr><mtd columnalign=\"center\"><mi/></mtd><mtd columnalign=\"center\"><mrow><mi>S</mi><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>r</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow></mrow></mtd><mtd columnalign=\"center\"><mi/></mtd><mtd columnalign=\"center\"><mi>V</mi></mtd></mtr></mtable></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nGiven $\\{x_{n_k}\\}$ a subsequence, $\\lim \\bar x_{n_k}=\\bar x$ in $V/K$ and also in $S/K$ for it is embedded. Now, the vertical arrows are proper maps, being the quotient maps of compact group actions. Hence, there has to be a convergent subsequence of $\\{x_{n_k}\\}$ in $S$, whose limit must be $x$. We conclude that $\\lim x_n=x$ in $S$ and the result follows.\n\\end{proof}\n\nIt should be noted that if one drops the properness assumption the previous characterization of an embedding does not hold: there are examples of full saturated subgroupoids that are not embedded but induce embeddings on the orbit space.\n\n\\begin{example}\nConsider the action by rotations ${\\mathbb Z}_4{\\curvearrowright}{\\mathbb R}^2$ around the origin and let $G={\\mathbb Z}_4\\ltimes {\\mathbb R}^2$ be the corresponding action groupoid. Now let $H$ be the immersed subgroupoid obtained by removing the non-trivial isotropy at 0 and restricting to the immersed submanifold: $\\{(x,0):x\\in{\\mathbb R}\\}\\cup \\{(0,y):y>0\\}\\cup\\{(0,y):y<0\\}$ (disjoint union). Then $H$ is a full saturated subgroupoid and the induced map on the orbit spaces is a topological embedding, but  $H\\to G$ is not an embedding.\n\\end{example}\n\n\n\\section{The stack perspective 2: Main theorems}\n\n\\label{sec:stack2}\n\nAfter having established a convenient language in previous section, we can now present our main results on the geometry of stacks: a Morita invariance of groupoid metrics, which leads to a notion of metrics on smooth stacks, and a stacky version of Ehresmann's Theorem, a formulation that comprises all the previous linearization results.\n\n\\subsection{Metrics on stacks}\n\n\nFrom the stack perspective a Lie groupoid is the same as a submersion:\n\n", "itemtype": "equation", "pos": 91680, "prevtext": "\n\nSince $S$ is saturated, $\\alpha$ is bijective. Since $G_S\\to K\\times S\\to K\\times V$ is an immersion, $\\alpha$ is also an immersion, and we conclude that $\\alpha$ is a diffeomorphism. The restricted action $K\\times S\\to S$ can therefore be written as $t\\circ\\alpha^{-1}$, and so it is smooth.\n\nFinally, we show that $S$ is embedded in $V$: given $x_n,x\\in S$ such that $\\lim x_n=x$ in $V$, we claim that convergence also holds in $S$. Consider the diagram:\n\n", "index": 109, "text": "$$\n\\xymatrix@R=15pt{ \nS \\ar[d] \\ar[r] & V \\ar[d]\\\\ S/K \\ar[r]  & V/K}\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex57.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix@R=15pt{S\\ar[d]\\ar[r]&amp;V\\ar[d]\\\\&#10;S/K\\ar[r]&amp;V/K}\" display=\"block\"><mrow><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mi>R</mi></mrow><mo>=</mo><mrow><mrow><mrow><mrow><mn>15</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>t</mi><mo>\u2062</mo><mi>S</mi><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mi>V</mi><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mi>S</mi></mrow><mo>/</mo><mi>K</mi></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mi>V</mi></mrow><mo>/</mo><mi>K</mi></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nwith Morita equivalent groupoids $G_i\\rightrightarrows M_i$ giving rise to a commutative square of submersions:\n", "itemtype": "equation", "pos": 93455, "prevtext": "\nGiven $\\{x_{n_k}\\}$ a subsequence, $\\lim \\bar x_{n_k}=\\bar x$ in $V/K$ and also in $S/K$ for it is embedded. Now, the vertical arrows are proper maps, being the quotient maps of compact group actions. Hence, there has to be a convergent subsequence of $\\{x_{n_k}\\}$ in $S$, whose limit must be $x$. We conclude that $\\lim x_n=x$ in $S$ and the result follows.\n\\end{proof}\n\nIt should be noted that if one drops the properness assumption the previous characterization of an embedding does not hold: there are examples of full saturated subgroupoids that are not embedded but induce embeddings on the orbit space.\n\n\\begin{example}\nConsider the action by rotations ${\\mathbb Z}_4{\\curvearrowright}{\\mathbb R}^2$ around the origin and let $G={\\mathbb Z}_4\\ltimes {\\mathbb R}^2$ be the corresponding action groupoid. Now let $H$ be the immersed subgroupoid obtained by removing the non-trivial isotropy at 0 and restricting to the immersed submanifold: $\\{(x,0):x\\in{\\mathbb R}\\}\\cup \\{(0,y):y>0\\}\\cup\\{(0,y):y<0\\}$ (disjoint union). Then $H$ is a full saturated subgroupoid and the induced map on the orbit spaces is a topological embedding, but  $H\\to G$ is not an embedding.\n\\end{example}\n\n\n\\section{The stack perspective 2: Main theorems}\n\n\\label{sec:stack2}\n\nAfter having established a convenient language in previous section, we can now present our main results on the geometry of stacks: a Morita invariance of groupoid metrics, which leads to a notion of metrics on smooth stacks, and a stacky version of Ehresmann's Theorem, a formulation that comprises all the previous linearization results.\n\n\\subsection{Metrics on stacks}\n\n\nFrom the stack perspective a Lie groupoid is the same as a submersion:\n\n", "index": 111, "text": "$$G\\rightrightarrows M \\qquad \\rightleftharpoons \\qquad M\\to {\\ensuremath{\\mathfrak{X}}}\\equiv[M/G].$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex58.m1\" class=\"ltx_Math\" alttext=\"G\\rightrightarrows M\\qquad\\rightleftharpoons\\qquad M\\to{\\mathfrak{X}}\\equiv[M/%&#10;G].\" display=\"block\"><mrow><mrow><mrow><mi>G</mi><mo>\u21c9</mo><mrow><mi>M</mi><mo mathvariant=\"italic\" separator=\"true\">\u2003\u2003</mo><mo>\u21cc</mo></mrow></mrow><mo mathvariant=\"italic\" separator=\"true\">\u2003\u2003</mo><mrow><mi>M</mi><mo>\u2192</mo><mi>\ud835\udd1b</mi><mo>\u2261</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>M</mi><mo>/</mo><mi>G</mi></mrow><mo stretchy=\"false\">]</mo></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nwhere $P$ is the Morita bi-bundle.\n\nIt is natural to expect that a 2-metric on a Lie groupoid $G\\rightrightarrows M$ induces a metric on the orbit stack ${\\ensuremath{\\mathfrak{X}}}=[M/G]$ making $M\\to{\\ensuremath{\\mathfrak{X}}}$ a Riemannian submersion. In order to make this precise we need to understand how to relate 2-metrics on Morita equivalent groupoids. Note that different 2-metrics, even on the same groupoid, may lead to the same metric on the orbit stack, so we need to identify the resulting equivalence relation between 2-metrics.\n\nRecall that every Morita equivalence can be realized as a fraction of (split) Morita fibrations. Thus we are led to consider the pullback and pushforward of 2-metrics along Morita fibrations.\n\n\nThe pullback of 2-metrics along Morita fibrations is simple:\n\n\\begin{proposition}\nIf $\\phi:\\tilde G\\to G$ is a Morita fibration and $\\eta$ a 2-metric on $G$, then there exists a 2-metric $\\tilde\\eta$ on $\\tilde G$ that makes the fibration Riemannian.\n\\end{proposition}\n\n\\begin{proof}\nLet $V\\subset T\\tilde M$ be the vertical bundle of $\\phi^{(0)}$ and let $E\\subset T\\tilde M$ be an Ehresmann connection for $\\phi^{(0)}$, so $T\\tilde M=E\\oplus V$. \nSince $\\phi$ is fully faithful the following are good fiber products of manifolds:\n\n", "itemtype": "equation", "pos": 93669, "prevtext": "\nwith Morita equivalent groupoids $G_i\\rightrightarrows M_i$ giving rise to a commutative square of submersions:\n", "index": 113, "text": "\n\\[\n\\xymatrix{P\\ar[r]\\ar[d] & M_2\\ar[d] \\\\\nM_1 \\ar[r]& {\\ensuremath{\\mathfrak{X}}}}\n\\]\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex59.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix{P\\ar[r]\\ar[d]&amp;M_{2}\\ar[d]\\\\&#10;M_{1}\\ar[r]&amp;{\\mathfrak{X}}}\" display=\"block\"><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mo>\u2062</mo><mi>P</mi><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><msub><mi>M</mi><mn>2</mn></msub><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><msub><mi>M</mi><mn>1</mn></msub><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mi>\ud835\udd1b</mi></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nIt follows that we can identify the vertical bundles of $\\phi^{(1)},\\phi^{(2)}$ with the pullbacks of $V\\times V$ and $V\\times V\\times V$, and that $E$ induces pullback connections $E^{(1)},E^{(2)}$ on $\\phi^{(1)},\\phi^{(2)}$. Hence, we can define a metric $\\tilde\\eta^{(2)}$ by lifting to $E^{(2)}$ the 2-metric $\\eta^{(2)}$, using in $q^*(V\\times V\\times V)$ the product of some fixed metric $\\eta^V$ in $V$, and declaring the decomposition\n$T\\tilde G^{(2)}=E^{(2)}\\oplus q^*(V\\times V\\times V)$\nto be orthogonal.\n\nThe resulting metric is a 2-metric on $\\tilde G$, for which the map $\\phi$ is a Riemannian submersion.\n\\end{proof}\n\n\n\n\n\nThe pushforward of 2-metrics along Morita fibrations is harder. It is already clear in the case of manifolds (unit groupoids), that not every 2-metric can be pushed forward, or in other words, not every 2-metric on $\\tilde G$ is $\\phi$-transverse. In order to fix this problem, given a 2-metric on $\\tilde G$ we slightly modify it so as to make it $\\phi$-transverse:\n\n\\begin{proposition}\n\\label{prop:pushforward}\nIf $\\phi:\\tilde G\\to G$ is a Morita fibration with kernel $K$ and $\\tilde\\eta$ is a 2-metric on $\\tilde G$, then the cotangent average metric $\\tilde\\eta'$ on $K^3{\\curvearrowright}\\tilde G^{(2)}$ with respect to a product averaged data is a 2-metric and descends to $G$, making $\\phi$ \nRiemannian.\n\\end{proposition}\n\n\\begin{proof}\nThis requires many of the techniques we have developed before. Consider the three principal groupoid bundles, arising from Proposition \\ref{prop:quotient}:\n\n", "itemtype": "equation", "pos": 95029, "prevtext": "\nwhere $P$ is the Morita bi-bundle.\n\nIt is natural to expect that a 2-metric on a Lie groupoid $G\\rightrightarrows M$ induces a metric on the orbit stack ${\\ensuremath{\\mathfrak{X}}}=[M/G]$ making $M\\to{\\ensuremath{\\mathfrak{X}}}$ a Riemannian submersion. In order to make this precise we need to understand how to relate 2-metrics on Morita equivalent groupoids. Note that different 2-metrics, even on the same groupoid, may lead to the same metric on the orbit stack, so we need to identify the resulting equivalence relation between 2-metrics.\n\nRecall that every Morita equivalence can be realized as a fraction of (split) Morita fibrations. Thus we are led to consider the pullback and pushforward of 2-metrics along Morita fibrations.\n\n\nThe pullback of 2-metrics along Morita fibrations is simple:\n\n\\begin{proposition}\nIf $\\phi:\\tilde G\\to G$ is a Morita fibration and $\\eta$ a 2-metric on $G$, then there exists a 2-metric $\\tilde\\eta$ on $\\tilde G$ that makes the fibration Riemannian.\n\\end{proposition}\n\n\\begin{proof}\nLet $V\\subset T\\tilde M$ be the vertical bundle of $\\phi^{(0)}$ and let $E\\subset T\\tilde M$ be an Ehresmann connection for $\\phi^{(0)}$, so $T\\tilde M=E\\oplus V$. \nSince $\\phi$ is fully faithful the following are good fiber products of manifolds:\n\n", "index": 115, "text": "$$\\xymatrix{\n\\ar@{}[dr]|{\\rm fp}\n\\ar[];[d]_{\\phi^{(1)}} \\ar[];[r]^(.35){q} \\ar[r];[dr]^{\\phi^{(0)}\\times\\phi^{(0)}} \\ar[d];[dr]_(.35){q'}\n\\tilde G & M \\times M \\\\\nG  &  M'  \\times M'\n}\\qquad\n\\xymatrix{\n\\ar@{}[dr]|{\\rm fp}\n\\ar[];[d]_{\\phi^{(2)}} \\ar[];[r]^(.35){q} \\ar[r];[dr]^{\\phi^{(0)}\\times\\phi^{(0)}\\times\\phi^{(0)}} \\ar[d];[dr]_(.35){q'}\n\\tilde G^{(2)} & M \\times M \\times M \\\\\nG^{(2)}  &  M' \\times M'\\times M'.\n}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex60.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix{\\ar@{}[dr]|{\\rm fp}\\ar[];[d]_{\\phi^{(1)}}\\ar[];[r]^{(}.35){q}\\ar[r];%&#10;[dr]^{\\phi^{(0)}\\times\\phi^{(0)}}\\ar[d];[dr]_{(}.35){q^{\\prime}}\\tilde{G}&amp;M%&#10;\\times M\\\\&#10;G&amp;M^{\\prime}\\times M^{\\prime}}\\qquad\\xymatrix{\\ar@{}[dr]|{\\rm fp}\\ar[];[d]_{%&#10;\\phi^{(2)}}\\ar[];[r]^{(}.35){q}\\ar[r];[dr]^{\\phi^{(0)}\\times\\phi^{(0)}\\times%&#10;\\phi^{(0)}}\\ar[d];[dr]_{(}.35){q^{\\prime}}\\tilde{G}^{(2)}&amp;M\\times M\\times M\\\\&#10;G^{(2)}&amp;M^{\\prime}\\times M^{\\prime}\\times M^{\\prime}.}\" display=\"block\"><mrow><mrow><mrow><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mi mathvariant=\"normal\">@</mi><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo stretchy=\"false\">|</mo><mi>fp</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mo stretchy=\"false\">]</mo></mrow><mo>;</mo><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><msup><mi>\u03d5</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></msup></msub><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mo stretchy=\"false\">]</mo></mrow><mo>;</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo stretchy=\"false\">(</mo></msup><mn>.35</mn><mo stretchy=\"false\">)</mo></mrow><mi>q</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>;</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mrow><msup><mi>\u03d5</mi><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo>\u00d7</mo><msup><mi>\u03d5</mi><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow></msup></mrow></msup><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mo>;</mo><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo stretchy=\"false\">(</mo></msub><mn>.35</mn><mo stretchy=\"false\">)</mo></mrow><msup><mi>q</mi><mo>\u2032</mo></msup><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mi mathvariant=\"normal\">&amp;</mi><mi>M</mi><mo>\u00d7</mo><mi>M</mi><mi>G</mi><mi mathvariant=\"normal\">&amp;</mi><msup><mi>M</mi><mo>\u2032</mo></msup><mo>\u00d7</mo><msup><mi>M</mi><mo>\u2032</mo></msup><mo mathvariant=\"italic\" separator=\"true\">\u2003\u2003</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mi mathvariant=\"normal\">@</mi><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo stretchy=\"false\">|</mo><mi>fp</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mo stretchy=\"false\">]</mo></mrow><mo>;</mo><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><msup><mi>\u03d5</mi><mrow><mo stretchy=\"false\">(</mo><mn>2</mn><mo stretchy=\"false\">)</mo></mrow></msup></msub><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mo stretchy=\"false\">]</mo></mrow><mo>;</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo stretchy=\"false\">(</mo></msup><mn>.35</mn><mo stretchy=\"false\">)</mo></mrow><mi>q</mi><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>;</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mrow><msup><mi>\u03d5</mi><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo>\u00d7</mo><msup><mi>\u03d5</mi><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo>\u00d7</mo><msup><mi>\u03d5</mi><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow></msup></mrow></msup><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mo>;</mo><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo stretchy=\"false\">(</mo></msub><mn>.35</mn><mo stretchy=\"false\">)</mo><mi>q</mi><msup><mi/><mo>\u2032</mo></msup><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><msup><mi/><mrow><mo stretchy=\"false\">(</mo><mn>2</mn><mo stretchy=\"false\">)</mo></mrow></msup><mi mathvariant=\"normal\">&amp;</mi><mi>M</mi><mo>\u00d7</mo><mi>M</mi><mo>\u00d7</mo><mi>M</mi><mi>G</mi><msup><mi/><mrow><mo stretchy=\"false\">(</mo><mn>2</mn><mo stretchy=\"false\">)</mo></mrow></msup><mi mathvariant=\"normal\">&amp;</mi><mi>M</mi><msup><mi/><mo>\u2032</mo></msup><mo>\u00d7</mo><mi>M</mi><msup><mi/><mo>\u2032</mo></msup><mo>\u00d7</mo><mi>M</mi><msup><mi/><mo>\u2032</mo></msup><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nFix averaging data for $K\\rightrightarrows \\tilde M$ and endow the products $K^2,K^3$ with the product averaging data. The various projections among these groupoids make these averaging data fibered, the sense of Section \\ref{subsection:riemannian-submersion}. Now replace the metrics $\\tilde\\eta^{(2)},\\tilde\\eta^{(1)},\\tilde\\eta^{(0)}$ by their cotangent averages with respect to the above actions. It follows from Proposition \\ref{prop:fiberd-averaging} that the resulting metrics make all the face maps Riemannian submersions. It is now easy to check that $\\tilde\\eta^{(2)}$ is a 2-metric that descends through $\\phi$ so as to make it a Riemannian submersion.\n\\end{proof}\n\n\n\n\\begin{definition}\nWe say that 2-metrics $\\eta_1,\\eta_2$ on a Lie groupoid $G\\rightrightarrows M$ are {\\bf equivalent} if for every saturated embedded submanifold $S\\subset M$ the exponential maps $\\exp_1,\\exp_2:\\nu(G_S)\\to G$ yield isomorphic fractions in a neighborhood of $S$. \n\\end{definition}\n\nIt turns out that our pullback and pushforward constructions are well-defined and mutually inverse modulo equivalence of metrics.\n\n\\begin{theorem}\n\\label{thm:Morita-metrics}\nA Morita equivalence yields a 1-1 correspondence between equivalence classes of 2-metrics. In particular, if two Lie groupoids are Morita equivalent and one admits a 2-metric, then so does the other.\n\\end{theorem}\n\n\\begin{proof}\nFirst, we observe that given a Riemannian submersion $\\phi:(\\tilde G,\\tilde\\eta_i)\\to (G,\\eta_i)$, $(i=1,2)$, between Lie groupoids equipped with pairs of 2-metrics, then $\\eta_1$ is equivalent to $\\eta_2$ if and only if $\\tilde\\eta_1$ is equivalent to $\\tilde\\eta_2$.  This follows because for a Riemannian submersion and any saturated embedded submanifold $S\\subset M$ we have the commutative diagram:\n\n", "itemtype": "equation", "pos": 96989, "prevtext": "\nIt follows that we can identify the vertical bundles of $\\phi^{(1)},\\phi^{(2)}$ with the pullbacks of $V\\times V$ and $V\\times V\\times V$, and that $E$ induces pullback connections $E^{(1)},E^{(2)}$ on $\\phi^{(1)},\\phi^{(2)}$. Hence, we can define a metric $\\tilde\\eta^{(2)}$ by lifting to $E^{(2)}$ the 2-metric $\\eta^{(2)}$, using in $q^*(V\\times V\\times V)$ the product of some fixed metric $\\eta^V$ in $V$, and declaring the decomposition\n$T\\tilde G^{(2)}=E^{(2)}\\oplus q^*(V\\times V\\times V)$\nto be orthogonal.\n\nThe resulting metric is a 2-metric on $\\tilde G$, for which the map $\\phi$ is a Riemannian submersion.\n\\end{proof}\n\n\n\n\n\nThe pushforward of 2-metrics along Morita fibrations is harder. It is already clear in the case of manifolds (unit groupoids), that not every 2-metric can be pushed forward, or in other words, not every 2-metric on $\\tilde G$ is $\\phi$-transverse. In order to fix this problem, given a 2-metric on $\\tilde G$ we slightly modify it so as to make it $\\phi$-transverse:\n\n\\begin{proposition}\n\\label{prop:pushforward}\nIf $\\phi:\\tilde G\\to G$ is a Morita fibration with kernel $K$ and $\\tilde\\eta$ is a 2-metric on $\\tilde G$, then the cotangent average metric $\\tilde\\eta'$ on $K^3{\\curvearrowright}\\tilde G^{(2)}$ with respect to a product averaged data is a 2-metric and descends to $G$, making $\\phi$ \nRiemannian.\n\\end{proposition}\n\n\\begin{proof}\nThis requires many of the techniques we have developed before. Consider the three principal groupoid bundles, arising from Proposition \\ref{prop:quotient}:\n\n", "index": 117, "text": "$$\\theta^{(0)}:K{\\curvearrowright} \\tilde M\\to M \\qquad \n\\theta^{(1)}:K^2{\\curvearrowright} \\tilde G\\to G \\qquad\n\\theta^{(2)}:K^3{\\curvearrowright} \\tilde G^{(2)} \\to G^{(2)}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex61.m1\" class=\"ltx_Math\" alttext=\"\\theta^{(0)}:K{\\curvearrowright}\\tilde{M}\\to M\\qquad\\theta^{(1)}:K^{2}{%&#10;\\curvearrowright}\\tilde{G}\\to G\\qquad\\theta^{(2)}:K^{3}{\\curvearrowright}%&#10;\\tilde{G}^{(2)}\\to G^{(2)}\" display=\"block\"><mrow><msup><mi>\u03b8</mi><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo>:</mo><mi>K</mi><mo>\u21b7</mo><mover accent=\"true\"><mi>M</mi><mo stretchy=\"false\">~</mo></mover><mo>\u2192</mo><mi>M</mi><mo mathvariant=\"italic\" separator=\"true\">\u2003\u2003</mo><msup><mi>\u03b8</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo>:</mo><msup><mi>K</mi><mn>2</mn></msup><mo>\u21b7</mo><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mo>\u2192</mo><mi>G</mi><mo mathvariant=\"italic\" separator=\"true\">\u2003\u2003</mo><msup><mi>\u03b8</mi><mrow><mo stretchy=\"false\">(</mo><mn>2</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo>:</mo><msup><mi>K</mi><mn>3</mn></msup><mo>\u21b7</mo><msup><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mrow><mo stretchy=\"false\">(</mo><mn>2</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo>\u2192</mo><msup><mi>G</mi><mrow><mo stretchy=\"false\">(</mo><mn>2</mn><mo stretchy=\"false\">)</mo></mrow></msup></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\n\nHence, all that it remains to show is that in the pushforward construction of Proposition \\ref{prop:pushforward}, for any saturated embedded submanifold $\\tilde S\\subset \\tilde M$, the maps $\\exp,\\exp':\\nu(\\tilde G_{\\tilde S})\\to \\tilde G$ are naturally isomorphic. For this, note that in the directions normal to the orbits, the metric $\\tilde\\eta$ is already invariant, and therefore, both $\\tilde\\eta^*$ and $\\tilde\\eta'^*$ agree in these directions. Thus the only difference between the two horizontal lifts of a given vector on the base can be a vertical vector, tangent to the kernel $K$. It follows that the following diagram commutes:\n\n", "itemtype": "equation", "pos": 98951, "prevtext": "\nFix averaging data for $K\\rightrightarrows \\tilde M$ and endow the products $K^2,K^3$ with the product averaging data. The various projections among these groupoids make these averaging data fibered, the sense of Section \\ref{subsection:riemannian-submersion}. Now replace the metrics $\\tilde\\eta^{(2)},\\tilde\\eta^{(1)},\\tilde\\eta^{(0)}$ by their cotangent averages with respect to the above actions. It follows from Proposition \\ref{prop:fiberd-averaging} that the resulting metrics make all the face maps Riemannian submersions. It is now easy to check that $\\tilde\\eta^{(2)}$ is a 2-metric that descends through $\\phi$ so as to make it a Riemannian submersion.\n\\end{proof}\n\n\n\n\\begin{definition}\nWe say that 2-metrics $\\eta_1,\\eta_2$ on a Lie groupoid $G\\rightrightarrows M$ are {\\bf equivalent} if for every saturated embedded submanifold $S\\subset M$ the exponential maps $\\exp_1,\\exp_2:\\nu(G_S)\\to G$ yield isomorphic fractions in a neighborhood of $S$. \n\\end{definition}\n\nIt turns out that our pullback and pushforward constructions are well-defined and mutually inverse modulo equivalence of metrics.\n\n\\begin{theorem}\n\\label{thm:Morita-metrics}\nA Morita equivalence yields a 1-1 correspondence between equivalence classes of 2-metrics. In particular, if two Lie groupoids are Morita equivalent and one admits a 2-metric, then so does the other.\n\\end{theorem}\n\n\\begin{proof}\nFirst, we observe that given a Riemannian submersion $\\phi:(\\tilde G,\\tilde\\eta_i)\\to (G,\\eta_i)$, $(i=1,2)$, between Lie groupoids equipped with pairs of 2-metrics, then $\\eta_1$ is equivalent to $\\eta_2$ if and only if $\\tilde\\eta_1$ is equivalent to $\\tilde\\eta_2$.  This follows because for a Riemannian submersion and any saturated embedded submanifold $S\\subset M$ we have the commutative diagram:\n\n", "index": 119, "text": "$$\\xymatrix@C=50pt{\n\\nu(\\tilde G_{\\tilde S}) \\ar[d]_{\\overline{{\\rm d}\\phi}} \\ar[r]^{\\exp_{\\tilde \\eta_i}}&  \\tilde G \\ar[d]^\\phi \\\\\n\\nu(G_S) \\ar[r]^{\\exp_{\\eta_i}} & G}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex62.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix@C=50pt{\\nu(\\tilde{G}_{\\tilde{S}})\\ar[d]_{\\overline{{\\rm d}\\phi}}\\ar[%&#10;r]^{\\exp_{\\tilde{\\eta}_{i}}}&amp;\\tilde{G}\\ar[d]^{\\phi}\\\\&#10;\\nu(G_{S})\\ar[r]^{\\exp_{\\eta_{i}}}&amp;G}\" display=\"block\"><mrow><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mi>C</mi></mrow><mo>=</mo><mrow><mn>50</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>t</mi><mo>\u2062</mo><mi>\u03bd</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mover accent=\"true\"><mi>S</mi><mo stretchy=\"false\">~</mo></mover></msub><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mover accent=\"true\"><mrow><mi mathvariant=\"normal\">d</mi><mo>\u2062</mo><mi>\u03d5</mi></mrow><mo>\u00af</mo></mover></msub><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><msub><mi>exp</mi><msub><mover accent=\"true\"><mi>\u03b7</mi><mo stretchy=\"false\">~</mo></mover><mi>i</mi></msub></msub></msup><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mi>\u03d5</mi></msup><mo>\u2062</mo><mi>\u03bd</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mi>G</mi><mi>S</mi></msub><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><msub><mi>exp</mi><msub><mi>\u03b7</mi><mi>i</mi></msub></msub></msup><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mi>G</mi></mrow></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nso we must have a smooth map $\\alpha:\\nu(\\tilde S)\\to K=\\tilde M\\times_M\\tilde M$. We claim that $\\alpha$ yields the required natural isomorphism, i.e., that for every arrow $w{\\xleftarrow} a v$ in $\\nu(\\tilde G_{\\tilde S})$ one has:\n\n", "itemtype": "equation", "pos": 99767, "prevtext": "\n\nHence, all that it remains to show is that in the pushforward construction of Proposition \\ref{prop:pushforward}, for any saturated embedded submanifold $\\tilde S\\subset \\tilde M$, the maps $\\exp,\\exp':\\nu(\\tilde G_{\\tilde S})\\to \\tilde G$ are naturally isomorphic. For this, note that in the directions normal to the orbits, the metric $\\tilde\\eta$ is already invariant, and therefore, both $\\tilde\\eta^*$ and $\\tilde\\eta'^*$ agree in these directions. Thus the only difference between the two horizontal lifts of a given vector on the base can be a vertical vector, tangent to the kernel $K$. It follows that the following diagram commutes:\n\n", "index": 121, "text": "$$\\xymatrix{\n\\nu(\\tilde S) \\ar[r]^{\\exp_{\\tilde \\eta^*}}\\ar[d]_{\\exp_{\\tilde\\eta'^*}}& \\tilde M \\ar[d]\\\\ \\tilde M \\ar[r] & M\n}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex63.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix{\\nu(\\tilde{S})\\ar[r]^{\\exp_{\\tilde{\\eta}^{*}}}\\ar[d]_{\\exp_{\\tilde{%&#10;\\eta}^{\\prime*}}}&amp;\\tilde{M}\\ar[d]\\\\&#10;\\tilde{M}\\ar[r]&amp;M}\" display=\"block\"><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mo>\u2062</mo><mi>\u03bd</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mover accent=\"true\"><mi>S</mi><mo stretchy=\"false\">~</mo></mover><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><msub><mi>exp</mi><msup><mover accent=\"true\"><mi>\u03b7</mi><mo stretchy=\"false\">~</mo></mover><mo>*</mo></msup></msub></msup><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><msub><mi>exp</mi><msup><mover accent=\"true\"><mi>\u03b7</mi><mo stretchy=\"false\">~</mo></mover><mrow><mi mathsize=\"200%\" mathvariant=\"normal\">\u2032</mi><mo>\u2063</mo><mo>*</mo></mrow></msup></msub></msub><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mover accent=\"true\"><mi>M</mi><mo stretchy=\"false\">~</mo></mover><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mover accent=\"true\"><mi>M</mi><mo stretchy=\"false\">~</mo></mover><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mi mathvariant=\"normal\">&amp;</mi><mo>\u2062</mo><mi>M</mi></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nThis is an easy consequence of $\\phi(\\exp(a))=\\phi(\\exp'(a))$ and the definition of $\\alpha$.\n\\end{proof}\n\nWe have now everything in place to define metrics on stacks.\n\n\\begin{definition}\nA {\\bf metric} on a presentable stack ${\\ensuremath{\\mathfrak{X}}}$ is an equivalence class of a 2-metric $\\eta^{(2)}$ on a Lie groupoid $G\\rightrightarrows M$ presenting ${\\ensuremath{\\mathfrak{X}}}$.\n\\end{definition}\n\n\nThis notion of metric generalizes the usual notion of metric for manifolds and orbifolds, and has a transversal nature as shown by the following examples.\n\\vskip 10 pt\n\n\\begin{examples}{isometries}\n \\item (Manifolds) For a unit groupoid $M\\rightrightarrows M$, a 2-metric is the same thing as a metric on $M$ and distinct 2-metrics are always inequivalent. It follows that for every proper groupoid without isotropy equivalence classes of metrics are in 1:1 correspondence with metrics on the orbit manifolds. Hence, our definition of metric on a stack extends the usual definition of metric for manifolds.\n\n \\item (Orbifolds) When $G\\rightrightarrows M$ is a proper effective \\'etale groupoid the orbit stack $[M/G]$ is an (effective) orbifold. A 2-metric on $G\\rightrightarrows M$ is determined by a $G$-invariant metric on $M$ (see \\cite[Example 4.1]{dhf}). It follows that 2-metrics on $G$ are equivalent if and only if they induce the same orbifold metric (in the usual sense) on $M/G$.\n\n \\item (Lie groups) In a transitive Lie groupoid $G\\rightrightarrows M$ any two 2-metrics on $G$ are equivalent. Metrics on a Lie group, viewed as a stack, are trivial in the sense of our definition.\n\\end{examples}\n\n\n\nThe previous definition makes it possible to define the geodesics of a metric in a stack, at least up to isomorphism, a concept that we will pursue elsewhere. In the next section we will use it to construct tubular neighborhoods and linearizations. \n\n\\begin{remark}\nAny two equivalent metrics agree in normal directions. In the three above families of examples, the converse also holds. We do not know if this holds for  a general Lie groupoid, in which case it would provide a more geometric characterization of our notion of equivalence of metrics. Note that maps of stacks may be locally isomorphic but not globally isomorphic (e.g., maps $M{\\dashrightarrow} G$, which correspond to principal $G$-bundles over $M$). Similarly, it could be possible for two metrics to be equivalent locally, but not globally.\n\\end{remark}\n\n\n\n\n\n\n\n\\subsection{Tubular neighborhoods and stacky Ehresmann}\n\n\n\nA first natural application of metrics on stacks is to the construction of tubular neighborhoods of substacks. To do this, we first need to show that the local linear model (normal bundle) of a stack around an embedded stack is well-defined. This is a consequence of  the following proposition.\n\n\\begin{proposition}\nLet $\\phi:\\tilde G\\to G$ be a Morita fibration, let $S\\subset M$ be a saturated embedded submanifold, and let $\\tilde S=\\phi^{-1}(S)$. Then the induced map $\\overline{{\\rm d}\\phi}:\\nu(\\tilde G_{\\tilde S})\\to \\nu(G_S)$ is a Morita fibration.\n\\end{proposition}\n\n\\begin{proof}\nConsider the commutative cube, where the horizontal arrows are given by the source-target maps:\n\n", "itemtype": "equation", "pos": 100130, "prevtext": "\nso we must have a smooth map $\\alpha:\\nu(\\tilde S)\\to K=\\tilde M\\times_M\\tilde M$. We claim that $\\alpha$ yields the required natural isomorphism, i.e., that for every arrow $w{\\xleftarrow} a v$ in $\\nu(\\tilde G_{\\tilde S})$ one has:\n\n", "index": 123, "text": "$$ \\alpha(w)\\exp(a)=\\exp'(a)\\alpha(v).$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex64.m1\" class=\"ltx_Math\" alttext=\"\\alpha(w)\\exp(a)=\\exp^{\\prime}(a)\\alpha(v).\" display=\"block\"><mrow><mrow><mrow><mi>\u03b1</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>w</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mrow><mi>exp</mi><mo>\u2061</mo><mrow><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>=</mo><mrow><mrow><msup><mi>exp</mi><mo>\u2032</mo></msup><mo>\u2061</mo><mrow><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u2062</mo><mi>\u03b1</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nThe left and right faces are good fiber products of manifolds, because the normal bundle of a pullback manifold is the pullback of the normal bundle.\nAdditionally, the front face is also a good fiber product of manifolds, because $\\phi$ is fully faithful. It follows from a standard argument that the back face is a good fiber product, and hence $\\nu(\\tilde G_{\\tilde S})\\to \\nu(G_S)$ is fully faithful. Since this map is also a submersion on objects, we conclude that it is a Morita fibration.\n\\end{proof}\n\n\n\n\nThe previous proposition shows that the following definition makes sense:\n\n\\begin{definition}\nLet ${\\ensuremath{\\mathfrak{X}}}$ be a presentable stack and let ${\\ensuremath{\\mathfrak{S}}}\\subset{\\ensuremath{\\mathfrak{X}}}$ be an embedded substack. The {\\bf normal bundle} $\\nu({\\ensuremath{\\mathfrak{S}}})$ is the stack presented by $\\nu(G_S)\\rightrightarrows \\nu(S)$, where $G\\rightrightarrows M$ is a presentation of ${\\ensuremath{\\mathfrak{X}}}$ and $G_S\\rightrightarrows S$ is a presentation of ${\\ensuremath{\\mathfrak{S}}}$, for a saturated embedded submanifold $S\\subset M$.\n\\end{definition}\n\nNotice that the substack ${\\ensuremath{\\mathfrak{S}}}\\subset{\\ensuremath{\\mathfrak{X}}}$ is also a substack of the normal bundle $\\nu({\\ensuremath{\\mathfrak{S}}})$, which one should think of as the \\emph{zero section}. \n\n\n\nAfter having a notion of normal bundle, we can easily make sense of linearization of a stack around a substack, i.e. tubular neighborhoods:\n\n\\begin{definition}\nLet ${\\ensuremath{\\mathfrak{X}}}$ be a presentable stack and let ${\\ensuremath{\\mathfrak{S}}}\\subset{\\ensuremath{\\mathfrak{X}}}$ be an embedded substack. A {\\bf tubular neighborhood} of ${\\ensuremath{\\mathfrak{S}}}$ in ${\\ensuremath{\\mathfrak{X}}}$ is an isomorphism \n$\\mathfrak{A}{\\dashrightarrow}\\mathfrak{U}$ of open substacks ${\\ensuremath{\\mathfrak{S}}}\\subset \\mathfrak{A}\\subset\\nu({\\ensuremath{\\mathfrak{S}}})$ and ${\\ensuremath{\\mathfrak{S}}}\\subset \\mathfrak{U}\\subset {\\ensuremath{\\mathfrak{X}}}$, which restricts to the identity on ${\\ensuremath{\\mathfrak{S}}}$.\n\\end{definition}\n\nNote that a linearization of a groupoid $G\\rightrightarrows M$ around an embedded saturated submanifold $S\\subset M$ yields a tubular neighborhood of the substack ${\\ensuremath{\\mathfrak{S}}}=[S/G_S]$ inside ${\\ensuremath{\\mathfrak{X}}}=[M/G]$. A priori, the groupoid linearization is stronger than the existence of a stacky tubular neighborhood: the later only requires the existence of a Morita equivalence between groupoid neighborhoods of $G_S$ inside $G$ and $\\nu(G_S)$. However, as it follows from next proposition, these two notions are actually equivalent.\nThis kind of results on Morita invariance of groupoid linearization goes back to the original paper of Weinstein \\cite{weinstein}, and the statement presented here generalizes (and is strongly inspired in) a result of Crainic-Struchiner \\cite{cs}.\n\n\\begin{proposition}[Morita invariance of linearization]\nGiven $G\\rightrightarrows M$ a Lie groupoid and $S\\subset M$ saturated embedded, \nthe orbit stack ${\\ensuremath{\\mathfrak{S}}}=[S/G_S]$ admits a tubular neighborhood in ${\\ensuremath{\\mathfrak{X}}}=[M/G]$ if and only if $G$ is linearizable around $S$.\n\\end{proposition}\n\n\\begin{proof}\nA stacky tubular neighborhood consists of a Morita equivalence between saturated neighborhoods $G_S\\subset G_U\\subset G$ and $G_S\\subset \\nu(G_S)_V\\subset \\nu(G_S)$. Given that, let us construct an isomorphism between eventually smaller neighborhoods.\nThe Morita equivalence can be realized by a principal bibundle $P$, defined in some neighborhood of $S$, that restricts to the identity on $S$, yielding a diagram as follows:\n\n", "itemtype": "equation", "pos": 103367, "prevtext": "\nThis is an easy consequence of $\\phi(\\exp(a))=\\phi(\\exp'(a))$ and the definition of $\\alpha$.\n\\end{proof}\n\nWe have now everything in place to define metrics on stacks.\n\n\\begin{definition}\nA {\\bf metric} on a presentable stack ${\\ensuremath{\\mathfrak{X}}}$ is an equivalence class of a 2-metric $\\eta^{(2)}$ on a Lie groupoid $G\\rightrightarrows M$ presenting ${\\ensuremath{\\mathfrak{X}}}$.\n\\end{definition}\n\n\nThis notion of metric generalizes the usual notion of metric for manifolds and orbifolds, and has a transversal nature as shown by the following examples.\n\\vskip 10 pt\n\n\\begin{examples}{isometries}\n \\item (Manifolds) For a unit groupoid $M\\rightrightarrows M$, a 2-metric is the same thing as a metric on $M$ and distinct 2-metrics are always inequivalent. It follows that for every proper groupoid without isotropy equivalence classes of metrics are in 1:1 correspondence with metrics on the orbit manifolds. Hence, our definition of metric on a stack extends the usual definition of metric for manifolds.\n\n \\item (Orbifolds) When $G\\rightrightarrows M$ is a proper effective \\'etale groupoid the orbit stack $[M/G]$ is an (effective) orbifold. A 2-metric on $G\\rightrightarrows M$ is determined by a $G$-invariant metric on $M$ (see \\cite[Example 4.1]{dhf}). It follows that 2-metrics on $G$ are equivalent if and only if they induce the same orbifold metric (in the usual sense) on $M/G$.\n\n \\item (Lie groups) In a transitive Lie groupoid $G\\rightrightarrows M$ any two 2-metrics on $G$ are equivalent. Metrics on a Lie group, viewed as a stack, are trivial in the sense of our definition.\n\\end{examples}\n\n\n\nThe previous definition makes it possible to define the geodesics of a metric in a stack, at least up to isomorphism, a concept that we will pursue elsewhere. In the next section we will use it to construct tubular neighborhoods and linearizations. \n\n\\begin{remark}\nAny two equivalent metrics agree in normal directions. In the three above families of examples, the converse also holds. We do not know if this holds for  a general Lie groupoid, in which case it would provide a more geometric characterization of our notion of equivalence of metrics. Note that maps of stacks may be locally isomorphic but not globally isomorphic (e.g., maps $M{\\dashrightarrow} G$, which correspond to principal $G$-bundles over $M$). Similarly, it could be possible for two metrics to be equivalent locally, but not globally.\n\\end{remark}\n\n\n\n\n\n\n\n\\subsection{Tubular neighborhoods and stacky Ehresmann}\n\n\n\nA first natural application of metrics on stacks is to the construction of tubular neighborhoods of substacks. To do this, we first need to show that the local linear model (normal bundle) of a stack around an embedded stack is well-defined. This is a consequence of  the following proposition.\n\n\\begin{proposition}\nLet $\\phi:\\tilde G\\to G$ be a Morita fibration, let $S\\subset M$ be a saturated embedded submanifold, and let $\\tilde S=\\phi^{-1}(S)$. Then the induced map $\\overline{{\\rm d}\\phi}:\\nu(\\tilde G_{\\tilde S})\\to \\nu(G_S)$ is a Morita fibration.\n\\end{proposition}\n\n\\begin{proof}\nConsider the commutative cube, where the horizontal arrows are given by the source-target maps:\n\n", "index": 125, "text": "$$\\begin{matrix}\n\\xymatrix@R=6pt@C=6pt{\n\\nu(\\tilde G_{\\tilde S}) \\ar[rr] \\ar[dd] \\ar[rd]&  & \\nu(\\tilde S)\\times \\nu(\\tilde S) \\ar'[d][dd] \\ar[dr]& \\\\\n & \\tilde G_{\\tilde S} \\ar[dd] \\ar[rr]&  & \\tilde S\\times \\tilde S\\ar[dd]\\\\\n\\nu(G_S) \\ar'[r][rr] \\ar[dr]&  & \\nu(S)\\times \\nu(S) \\ar[dr]& \\\\\n& G_S \\ar[rr]& & S\\times S}\n\\end{matrix}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex65.m1\" class=\"ltx_Math\" alttext=\"\\begin{matrix}\\xymatrix@R=6pt@C=6pt{\\nu(\\tilde{G}_{\\tilde{S}})\\ar[rr]\\ar[dd]%&#10;\\ar[rd]\\hfil&amp;&amp;\\nu(\\tilde{S})\\times\\nu(\\tilde{S})\\ar^{\\prime}[d][dd]\\ar[dr]&amp;\\\\&#10;&amp;\\tilde{G}_{\\tilde{S}}\\ar[dd]\\ar[rr]&amp;&amp;\\tilde{S}\\times\\tilde{S}\\ar[dd]\\\\&#10;\\nu(G_{S})\\ar^{\\prime}[r][rr]\\ar[dr]&amp;&amp;\\nu(S)\\times\\nu(S)\\ar[dr]&amp;\\\\&#10;&amp;G_{S}\\ar[rr]&amp;&amp;S\\times S\\end{matrix}}\" display=\"block\"><mtable columnspacing=\"5pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"right\" columnspan=\"4\"><mrow><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mi>R</mi></mrow><mo>=</mo><mrow><mn>6</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>t</mi><mo>\u2062</mo><mi mathvariant=\"normal\">@</mi><mo>\u2062</mo><mi>C</mi></mrow><mo>=</mo><mrow><mrow><mrow><mn>6</mn><mo>\u2062</mo><mi>p</mi><mo>\u2062</mo><mi>t</mi><mo>\u2062</mo><mi>\u03bd</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mover accent=\"true\"><mi>S</mi><mo stretchy=\"false\">~</mo></mover></msub><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>r</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>d</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>r</mi><mo>\u2062</mo><mi>d</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mi>\u03bd</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mover accent=\"true\"><mi>S</mi><mo stretchy=\"false\">~</mo></mover><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u00d7</mo><mi>\u03bd</mi></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mover accent=\"true\"><mi>S</mi><mo stretchy=\"false\">~</mo></mover><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><msup><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2032</mo></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>d</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow></mrow></mrow></mtd></mtr><mtr><mtd columnalign=\"center\"><mi/></mtd><mtd columnalign=\"center\"><mrow><msub><mover accent=\"true\"><mi>G</mi><mo stretchy=\"false\">~</mo></mover><mover accent=\"true\"><mi>S</mi><mo stretchy=\"false\">~</mo></mover></msub><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>d</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>r</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow></mrow></mtd><mtd columnalign=\"center\"><mi/></mtd><mtd columnalign=\"center\"><mrow><mrow><mover accent=\"true\"><mi>S</mi><mo stretchy=\"false\">~</mo></mover><mo>\u00d7</mo><mover accent=\"true\"><mi>S</mi><mo stretchy=\"false\">~</mo></mover></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>d</mi></mrow><mo stretchy=\"false\">]</mo></mrow></mrow></mtd></mtr><mtr><mtd columnalign=\"center\"><mrow><mi>\u03bd</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><msub><mi>G</mi><mi>S</mi></msub><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><msup><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2032</mo></msup><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>r</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow></mrow></mtd><mtd columnalign=\"center\"><mi/></mtd><mtd columnalign=\"center\"><mrow><mrow><mrow><mi>\u03bd</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>\u00d7</mo><mi>\u03bd</mi></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>d</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow></mrow></mtd><mtd columnalign=\"center\"><mi/></mtd></mtr><mtr><mtd columnalign=\"center\"><mi/></mtd><mtd columnalign=\"center\"><mrow><msub><mi>G</mi><mi>S</mi></msub><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mo>\u2062</mo><mrow><mo stretchy=\"false\">[</mo><mrow><mi>r</mi><mo>\u2062</mo><mi>r</mi></mrow><mo stretchy=\"false\">]</mo></mrow></mrow></mtd><mtd columnalign=\"center\"><mi/></mtd><mtd columnalign=\"center\"><mrow><mi>S</mi><mo>\u00d7</mo><mi>S</mi></mrow></mtd></mtr></mtable></math>", "type": "latex"}, {"file": "1601.05616.tex", "nexttext": "\nWe can extend $u:S\\to G_S$ to a section $\\alpha$ of $q_U$ defined in a neighborhood $S\\subset U'$, for instance by linearizing $q_U$ around $S$. Writing $P'=q_U^{-1}(U')$ and  $V'=q_V(P')$, the bibundle $U'\\leftarrow P'\\to V'$ admits a left section and is then given by a groupoid map $\\phi:G_{U'}\\to \\nu(G_S)_{V'}$.\nThis $\\phi$ is Morita, and since $\\phi^{(0)}|_S$ is invertible and ${\\rm d} \\phi^{(0)}$ is invertible over $S$ (because $q_U^{-1}(S)=G_S=q_V^{-1}(S)$), a standard metric argument shows that $\\phi^{(0)}$ is invertible over some smaller open $S\\subset U''\\subset U'$. Finally, the map $\\phi|_{G_{U''}}:G_{U''}\\to \\nu(G_S)_{V''}$ is invertible and therefore a linearization. \n\\end{proof}\n\n\n\nAs a corollary of previous results we get:\n\n\\begin{proposition}[Stacky Tubular Neighborhood]\nA metric on a separated stack ${\\ensuremath{\\mathfrak{X}}}$ yields tubular neighborhood around any embedded substack ${\\ensuremath{\\mathfrak{S}}}\\subset {\\ensuremath{\\mathfrak{X}}}$ by the exponential maps.\n\\end{proposition}\n\n\n\n\n\n\n\nNote that non-full subgroupoids do not define substacks, and therefore, weak linearization of groupoids does not translate into tubular neighborhoods. The exponential $\\exp_{[\\eta]}:\\nu({\\ensuremath{\\mathfrak{S}}}){\\dashrightarrow} {\\ensuremath{\\mathfrak{X}}}$. may not be defined over any open substack if ${\\ensuremath{\\mathfrak{X}}}$ is not separated. This is why we require ${\\ensuremath{\\mathfrak{X}}}$ to be separated in previous proposition.\n\n\n\n\n\n\n\n\n\n\nWe also have stacky versions of linearization of submersions and Ehresmann's Theorem, which generalize and encompass all the previous linearization and rigidity results. The preliminary version, without the properness assumption, is:\n\n\\begin{theorem}[Linearization of submersions]\nLet $\\pi:\\tilde {\\ensuremath{\\mathfrak{X}}}\\to {\\ensuremath{\\mathfrak{X}}}$ be a surjective submersion between separated stacks, and let ${\\ensuremath{\\mathfrak{S}}}\\subset {\\ensuremath{\\mathfrak{X}}}$ be an embedded substack. Then the map $\\pi$ is linearizable in a neighborhood of $\\tilde {\\ensuremath{\\mathfrak{S}}}:=\\pi^{-1}({\\ensuremath{\\mathfrak{S}}})\\subset {\\ensuremath{\\mathfrak{X}}}$.\n\\end{theorem}\n\n\\begin{proof}\nWe can present the map $\\pi$ by a split fibration between proper groupoids $\\phi:\\tilde G\\to G$, and the substack ${\\ensuremath{\\mathfrak{S}}}$ by the inclusion of a saturated embedded Lie subgroupoid $G_S\\rightrightarrows S$. It follows that $\\tilde {\\ensuremath{\\mathfrak{S}}}$ is presented by the preimage $\\tilde S=\\phi^{-1}(S)$. Since split fibrations between proper groupoids are linearizable (Corollary \\ref{cor:linear:split:fib}), we conclude that $\\pi$ is linearizable. \n\\end{proof}\n\nWe say that a map between stacks is {\\em proper} if it can be presented by a fraction $\\phi/\\psi$ with $\\phi$ proper. For proper submersions we obtain a stacky version of Ehresmann's Theorem:\n\n\\begin{corollary}[Stacky Ehresmann]\nLet $\\pi:\\tilde {\\ensuremath{\\mathfrak{X}}}\\to {\\ensuremath{\\mathfrak{X}}}$ be a proper surjective submersion between separated stacks, and let ${\\ensuremath{\\mathfrak{S}}}\\subset {\\ensuremath{\\mathfrak{X}}}$ be an embedded substack. Then the map $\\pi$ is linearizable in a tube around $\\tilde {\\ensuremath{\\mathfrak{S}}}:=\\pi^{-1}({\\ensuremath{\\mathfrak{S}}})\\subset {\\ensuremath{\\mathfrak{X}}}$.\n\\end{corollary}\n\n\\begin{proof}\nUnder the assumption of properness, we can assume that $\\phi:\\tilde G\\to G$ is a proper split fibration between proper groupoids. Hence, we can apply the groupoid version of Ehresmann (Theorem \\ref{thm:groupoid-ehresmann}) to linearize the fibration on small enough tubes around $G_S$.\n\\end{proof}\n\n\n\nThe previous are far reaching generalization of the ordinary results for manifolds, which include as special cases many of the linearization and rigidity results about Lie groupoids and related geometries. For example, we have:\n\\begin{itemize}\n \\item When $\\tilde {\\ensuremath{\\mathfrak{X}}}=M$ and ${\\ensuremath{\\mathfrak{X}}}=N$ are manifolds we recover the linearization of submersions and, under the assumption of properness, the classical Ehresmann's Theorem.\n \\item When $\\tilde {\\ensuremath{\\mathfrak{X}}}=M$ is a manifold, a (proper) presentation $\\pi:M\\to {\\ensuremath{\\mathfrak{X}}}$ is the same as an (s-)proper Lie groupoid $G\\rightrightarrows M$ with orbit stack ${\\ensuremath{\\mathfrak{X}}}$. The linearization of a submersion yields the Weinstein-Zung linearization theorem for proper Lie groupoids, while the Stacky Ehresmann's Theorem yields the invariant linearization of s-proper Lie groupoids. These include as special cases the classic results on linearization of actions, fibrations and foliations. \n \\item When ${\\ensuremath{\\mathfrak{X}}}=M$ is a manifold and $\\pi$ is proper we recover the rigidity of compact Lie groupoids (see Theorem \\ref{thm:rigidity}). This includes as special cases the rigidity for actions, fibrations and foliations (see Section \\ref{section:rigidity}).\n\\end{itemize}\n\nThe proofs of the above theorems rely in some of these classical results, but in any case the stacky versions can be taken as a unifying statement, and the insight provided by it enriches us not only with a better conceptual understanding of the subject, but also with many simplifications in the arguments to prove them.\n\n\n\n{\n\n\\begin{thebibliography}{xxx}\n\n\\bibitem{ac}\nC. Arias Abad, M. Crainic;\nRepresentations up to homotopy and Bott's spectral sequence for Lie groupoids.\n\\emph{Adv.~in Math.~}{\\bf 248} (2013), 416--452.\n\n\n\n\n\n\n\\bibitem{bx}\nK. Behrend, P. Xu;\nDifferentiable stacks and gerbes;\nJournal of Symplectic Geometry {\\bf 9} (2011) 285--341.\n\n\\bibitem{bcdh}\nH. Bursztyn, A. Cabrera, M. del Hoyo;\nVector bundles over Lie groupoids and algebroids;\n\\emph{Adv.~in Math.~}{\\bf 290} (2016), 163-207;\nPreprint \\texttt{arXiv:1410.5135}.\n\n\\bibitem{bnz}\nH. Bursztyn, F. Noseda, C. Zhu:\nPrincipal actions of stacky Lie groupoids;\nPreprint \\texttt{arXiv:1510.09208}.\n\n\n\n\n\n\n\n\n\n\n\n\\bibitem{cms}\nM.~Crainic, J.~N.~Mestre, I.~Struchiner;\nDeformations of Lie Groupoids.\nPreprint \\texttt{arXiv:1510.02530}.\n\n\\bibitem{cs}\nM.~Crainic, I.~Struchiner;\nOn the Linearization Theorem for proper Lie groupoids;\n\\emph{Ann. Scient. \\'Ec. Norm. Sup.} $4^e$ s\\'erie, \\textbf{46} (2013), 723-746.\n\n\n\\bibitem{e}\nC. Ehresmann;\n\\emph{Les connexions infinit\\'esimales dans un espace fibr\\'e diff\\'erentiable}.\nColloque de Topologie, Bruxelles (1950), 29--55.\n\n\\bibitem{dh}\nM. del Hoyo;\nLie groupoids and their underlying orbispaces.\n\\emph{Portugaliae Mathematica} {\\bf 70} (2013), 161--209.\n\n\\bibitem{dhf}\nM. del Hoyo, R. L. Fernandes;\nRiemannian Metrics on Lie Groupoids;\n\\emph{Journal f\\\"ur die reine und angewandte Mathematik (Crelle)}, 2015;\nPreprint \\texttt{arXiv:1404.5989}.\n\n\\bibitem{epstein}\nD. Epstein;\nFoliations with all leaves compact;\nAnn. Inst. Fourier 26 (1976), 265--282.\n\n\\bibitem{rosenberg1}\nD. Epstein, H. Rosenberg;\nStability of compact foliations. \nIn \\emph{Geometry and Topology}, Lecture Notes in Mathematics 597, Springer-Verlag, 1977, 151--160.\n\n\\bibitem{giraud}\nJ. Giraud;\n\\emph{Cohomologie non-ab\\'elienne}; \nDie Grundlehren der mathematischen Wis\\-sen\\-scha\\-ften, Band 179. Springer-Verlag, Berlin-New York, 1971.\n\n\\bibitem{gm}\nA. Gracia-Saz, R.A. Mehta;\nVB-groupoids and representation theory of Lie groupoids;\nPreprint \\texttt{arXiv:1007.3658}\n\n\\bibitem{sga1}\nA. Grothendieck;\n\\emph{Rev\\^etements \\'etales et groupe fondamental (SGA 1)}.\nLecture Notes in Mathematics 224, Springer-Verlag, 1971.\n\n\\bibitem{ks}\nM. Kashiwara, P. Shapira;\n\\emph{Categories and sheaves}.\nGrundlehren der Mathematischen Wissenschaften 332, Springer-Verlag (2006).\n\n\\bibitem{rosenberg2}\nR. Langevin, H. Rosenberg;\nOn stability of compact leaves and fibrations.\n\\emph{Topology} {\\bf 16} (1977) no. 1, 107--111.\n\n\\bibitem{lerman}\nE. Lerman;\nOrbifolds as stacks? \n\\emph{L'Enseign.~Math.~(2)} {\\bf 56} (2010), no. 3-4, 315--363.\n\n\\bibitem{mkbook}\nK. Mackenzie;\n\\emph{General Theory of Lie Groupoids and Lie Algebroids}.\nLondon Mathematical Society Lecture Note Series 213,\nCambridge University Press, 2005.\n\n\\bibitem{metzler}\nD. Metzler,\nTopological and Smooth Stacks.\nPreprint \\texttt{arXiv:math/0306176}\n\n\\bibitem{mm}\nI. Moerdijk, J. Mrcun;\n\\emph{Introduction to Foliations and Lie Groupoids}.\nCambridge Studies in Advanced Mathematics 91,\nCambridge University Press, 2003.\n\n\\bibitem{mm2}\nI. Moerdijk, J. Mrcun;\n\\emph{Lie groupoids, sheaves and cohomology}.\nLondon Math. Soc. Lecture Note Ser. 323 (2005) pp. 145--272.\n\n\\bibitem{nr}\nA. Nijenhuis, R. Richardson;\nDeformations of homomorphisms of Lie groups and Lie algebras;\nBulletin of the American Mathematical Society 73.1 (1967): 175-179.\n\n\\bibitem{pr}\nR. Palais, R. Richardson;\nUncountably Many Inequivalent Analytic Actions of a Compact Group on ${\\mathbb R}^n$;\nProceedings of the American Mathematical Society 14.3 (1963): 374-377.\n\n\\bibitem{palais}\nR.~Palais, T.~Stewart;\nDeformations of Compact Differentiable Transformation Groups.\n\\emph{Amer.~J.~of Math.~}{\\bf 82} (1960). no. 4, 935--937.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\bibitem{vistoli}\nA. Vistoli;\nGrothendieck topologies, fibered categories and descent theory; Fundamental algebraic geometry, 1\u00e2\u0080\u0093104, Math. Surveys Monogr., 123, AMS Providence, RI, 2005. \n\n\\bibitem{weinstein}\nA.~Weinstein;\nLinearization of regular proper groupoids. \n\\emph{J.~Inst.~Math.~Jussieu} {\\bf 1}  (2002), no. 3, 493--511.\n\n\\bibitem{zung}\nN.T. Zung;\nProper groupoids and momentum maps: linearization, affinity, and convexity. \n\\emph{Ann.~Sci.~ \\'Ecole Norm.~Sup.~(4)} {\\bf 39}  (2006), no. 5, 841--869.\n\n\\end{thebibliography}\n\n}\n\n\n\n\n\n", "itemtype": "equation", "pos": 107370, "prevtext": "\nThe left and right faces are good fiber products of manifolds, because the normal bundle of a pullback manifold is the pullback of the normal bundle.\nAdditionally, the front face is also a good fiber product of manifolds, because $\\phi$ is fully faithful. It follows from a standard argument that the back face is a good fiber product, and hence $\\nu(\\tilde G_{\\tilde S})\\to \\nu(G_S)$ is fully faithful. Since this map is also a submersion on objects, we conclude that it is a Morita fibration.\n\\end{proof}\n\n\n\n\nThe previous proposition shows that the following definition makes sense:\n\n\\begin{definition}\nLet ${\\ensuremath{\\mathfrak{X}}}$ be a presentable stack and let ${\\ensuremath{\\mathfrak{S}}}\\subset{\\ensuremath{\\mathfrak{X}}}$ be an embedded substack. The {\\bf normal bundle} $\\nu({\\ensuremath{\\mathfrak{S}}})$ is the stack presented by $\\nu(G_S)\\rightrightarrows \\nu(S)$, where $G\\rightrightarrows M$ is a presentation of ${\\ensuremath{\\mathfrak{X}}}$ and $G_S\\rightrightarrows S$ is a presentation of ${\\ensuremath{\\mathfrak{S}}}$, for a saturated embedded submanifold $S\\subset M$.\n\\end{definition}\n\nNotice that the substack ${\\ensuremath{\\mathfrak{S}}}\\subset{\\ensuremath{\\mathfrak{X}}}$ is also a substack of the normal bundle $\\nu({\\ensuremath{\\mathfrak{S}}})$, which one should think of as the \\emph{zero section}. \n\n\n\nAfter having a notion of normal bundle, we can easily make sense of linearization of a stack around a substack, i.e. tubular neighborhoods:\n\n\\begin{definition}\nLet ${\\ensuremath{\\mathfrak{X}}}$ be a presentable stack and let ${\\ensuremath{\\mathfrak{S}}}\\subset{\\ensuremath{\\mathfrak{X}}}$ be an embedded substack. A {\\bf tubular neighborhood} of ${\\ensuremath{\\mathfrak{S}}}$ in ${\\ensuremath{\\mathfrak{X}}}$ is an isomorphism \n$\\mathfrak{A}{\\dashrightarrow}\\mathfrak{U}$ of open substacks ${\\ensuremath{\\mathfrak{S}}}\\subset \\mathfrak{A}\\subset\\nu({\\ensuremath{\\mathfrak{S}}})$ and ${\\ensuremath{\\mathfrak{S}}}\\subset \\mathfrak{U}\\subset {\\ensuremath{\\mathfrak{X}}}$, which restricts to the identity on ${\\ensuremath{\\mathfrak{S}}}$.\n\\end{definition}\n\nNote that a linearization of a groupoid $G\\rightrightarrows M$ around an embedded saturated submanifold $S\\subset M$ yields a tubular neighborhood of the substack ${\\ensuremath{\\mathfrak{S}}}=[S/G_S]$ inside ${\\ensuremath{\\mathfrak{X}}}=[M/G]$. A priori, the groupoid linearization is stronger than the existence of a stacky tubular neighborhood: the later only requires the existence of a Morita equivalence between groupoid neighborhoods of $G_S$ inside $G$ and $\\nu(G_S)$. However, as it follows from next proposition, these two notions are actually equivalent.\nThis kind of results on Morita invariance of groupoid linearization goes back to the original paper of Weinstein \\cite{weinstein}, and the statement presented here generalizes (and is strongly inspired in) a result of Crainic-Struchiner \\cite{cs}.\n\n\\begin{proposition}[Morita invariance of linearization]\nGiven $G\\rightrightarrows M$ a Lie groupoid and $S\\subset M$ saturated embedded, \nthe orbit stack ${\\ensuremath{\\mathfrak{S}}}=[S/G_S]$ admits a tubular neighborhood in ${\\ensuremath{\\mathfrak{X}}}=[M/G]$ if and only if $G$ is linearizable around $S$.\n\\end{proposition}\n\n\\begin{proof}\nA stacky tubular neighborhood consists of a Morita equivalence between saturated neighborhoods $G_S\\subset G_U\\subset G$ and $G_S\\subset \\nu(G_S)_V\\subset \\nu(G_S)$. Given that, let us construct an isomorphism between eventually smaller neighborhoods.\nThe Morita equivalence can be realized by a principal bibundle $P$, defined in some neighborhood of $S$, that restricts to the identity on $S$, yielding a diagram as follows:\n\n", "index": 127, "text": "$$\\xymatrix{\n\\ar[rr];[r]_s \\ar[rr];[rrr]^t \\ar[drr];[dr]_{q_U} \\ar[drr];[drrr]^{q_V}\n\\ar[r];[rd] \\ar[rr];[drr] \\ar[rrr];[drrr] \n\\ar@/_/[r];[rr]_u \\ar@{}[d];[dr]|{\\subset} \\ar@/_1pc/@{-->}[d];[drr]_{\\alpha}\n& S & G_S & S \\\\ U' & U & P & V}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex66.m1\" class=\"ltx_Math\" alttext=\"\\xymatrix{\\ar[rr];[r]_{s}\\ar[rr];[rrr]^{t}\\ar[drr];[dr]_{q_{U}}\\ar[drr];[drrr]%&#10;^{q_{V}}\\ar[r];[rd]\\ar[rr];[drr]\\ar[rrr];[drrr]\\ar@/_{/}[r];[rr]_{u}\\ar@{}[d];%&#10;[dr]|{\\subset}\\ar@/_{1}pc/@{--&gt;}[d];[drr]_{\\alpha}&amp;S&amp;G_{S}&amp;S\\\\&#10;U^{\\prime}&amp;U&amp;P&amp;V}\" display=\"block\"><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\xymatrix</mtext></merror><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>;</mo><msub><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mi>s</mi></msub><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>;</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mi>r</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mi>t</mi></msup><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>r</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>;</mo><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><msub><mi>q</mi><mi>U</mi></msub></msub><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>r</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>;</mo><msup><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>r</mi><mi>r</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><msub><mi>q</mi><mi>V</mi></msub></msup><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>;</mo><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>;</mo><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>r</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mi>r</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>;</mo><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>r</mi><mi>r</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mi mathvariant=\"normal\">@</mi><msub><mo>/</mo><mo>/</mo></msub><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo>;</mo><msub><mrow><mo stretchy=\"false\">[</mo><mi>r</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mi>u</mi></msub><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mi mathvariant=\"normal\">@</mi><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mo>;</mo><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mo stretchy=\"false\">|</mo><mo>\u2282</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\ar</mtext></merror><mi mathvariant=\"normal\">@</mi><msub><mo>/</mo><mn>1</mn></msub><mi>p</mi><mi>c</mi><mo>/</mo><mi mathvariant=\"normal\">@</mi><mo>-</mo><mo>-</mo><mo>&gt;</mo><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><mo>;</mo><msub><mrow><mo stretchy=\"false\">[</mo><mi>d</mi><mi>r</mi><mi>r</mi><mo stretchy=\"false\">]</mo></mrow><mi>\u03b1</mi></msub><mi mathvariant=\"normal\">&amp;</mi><mi>S</mi><mi mathvariant=\"normal\">&amp;</mi><msub><mi>G</mi><mi>S</mi></msub><mi mathvariant=\"normal\">&amp;</mi><mi>S</mi><msup><mi>U</mi><mo>\u2032</mo></msup><mi mathvariant=\"normal\">&amp;</mi><mi>U</mi><mi mathvariant=\"normal\">&amp;</mi><mi>P</mi><mi mathvariant=\"normal\">&amp;</mi><mi>V</mi></mrow></math>", "type": "latex"}]