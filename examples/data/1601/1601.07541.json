[{"file": "1601.07541.tex", "nexttext": "\nThe next lemma shows that\n$f$\\/ is indeed very close to being an AP-destroying permutation:\n\\begin{lemma}\\label{lem:almostwreck}\nThe permutation $f$ destroys all APs in ${\\mathbb F}_q$ other than $(-1,0,1)$\nwhen $p = 3$ and $(0,\\frac32,3)$, $(\\frac13, \\frac23, 1)$ when\n$p > 3$.\n\\end{lemma}\n\\begin{proof}\nLet $(a-r, a, a+r)$ be an AP in ${\\mathbb F}_q$ such that $\\{a-r, a, a+r\\}\n\\cap \\{0,1\\} = \\varnothing$. Then $f$ sends the AP $(a-r, a, a+r)$\nto $\\left(\\frac{1}{a-r}, \\frac{1}{a}, \\frac{1}{a+r}\\right)$, which\nis an AP when\n\n", "itemtype": "equation", "pos": 7227, "prevtext": "\n\n\\title[Permutations that destroy arithmetic progressions]{Permutations that destroy arithmetic progressions \\\\ in Elementary $p$-Groups}\n\n\\date{\\today}\n\n\\author[Noam D. Elkies]{Noam D. Elkies}\n\\address{Department of Mathematics, Harvard University, \\mbox{Cambridge, MA 02138}}\n\\email{\\href{mailto:elkies@math.harvard.edu}{{\\tt elkies@math.harvard.edu}}}\n\n\\author[Ashvin A. Swaminathan]{Ashvin A. Swaminathan}\n\\address{Department of Mathematics, Harvard University, \\mbox{Cambridge, MA 02138}}\n\\email{\\href{mailto:aaswaminathan@college.harvard.edu}{{\\tt aaswaminathan@college.harvard.edu}}}\n\n\\begin{abstract}\nGiven an abelian group $G$, it is natural to ask whether there\nexists a permutation $\\pi$ of $G$ that ``destroys'' all nontrivial\n3-term arithmetic progressions (APs), in the sense that $\\pi(b)\n- \\pi(a) = \\pi(c) - \\pi(b)$ for all ordered triples $(a,b,c) \\in\nG^3$ satisfying $b-a = c-b \\neq 0$. This question was resolved\nfor infinite groups $G$ by Hegarty, who showed that there exists\nan AP-destroying permutation of $G$ if and only if $G/\\Omega_2(G)$\nhas the same cardinality as $G$, where $\\Omega_2(G)$ denotes the\nsubgroup of all elements in $G$ whose order divides $2$. In the\ncase when $G$ is finite, however, only partial results have been\nobtained thus far. Hegarty has conjectured that an AP-destroying\npermutation of $G$ exists if $G = {\\mathbb Z}/n{\\mathbb Z}$ for all $n \\neq 2,3,5,7$,\nand together with Martinsson, he has proven the conjecture for\nall $n > 1.4 \\times 10^{14}$. In this paper, we show that if $p$\nis a prime and $k$ is a positive integer, then there is an AP-destroying\npermutation of the elementary $p$-group $({\\mathbb Z}/p{\\mathbb Z})^k$ if and only\nif $p$ is odd and $(p,k) \\not\\in \\{(3,1),(5,1), (7,1)\\}$.\n\\end{abstract}\n\\maketitle\n\n\\section{Introduction}\\label{sec:intro}\n\nLet $G$ be an abelian group, and let $\\pi : G \\to G$\\/ be any permutation.\nFollowing the terminology of Hegarty and Martinsson (see~\\cite{hegand}),\nwe say that $\\pi$ \\emph{destroys} all nonconstant arithmetic progressions\n(henceforth, APs) in $G$ if there is no ordered triple $(a,b,c)\n\\in G^3$ such that $b-a = c-b \\neq 0$ and $\\pi(b) - \\pi(a) = \\pi(c)\n- \\pi(b)$ (i.e., $(a,b,c)$ and $(\\pi(a),\\pi(b),\\pi(c))$ are never both APs;\nnote that this condition holds for $\\pi$ if an only if it holds for $\\pi^{-1}$).\nIt is natural to seek a complete classification of abelian groups~$G$\\/\n that have such an AP-destroying permutation.\n\nFor $G$\\/ infinite, it was shown by Hegarty in~\\cite{hegori}\nthat there exists an AP-destroying permutation of $G$ if and only\nif $G/\\Omega_2(G)$ has the same cardinality as $G$, where $\\Omega_2(G)$\ndenotes the subgroup of all elements in $G$ whose order divides~$2$.\nOn the other hand, in the case when $G$ is finite, such a classification\nhas not yet been obtained. Hegarty conjectured in~\\cite{hegori}\nthat there exists an AP-destroying permutation of ${\\mathbb Z}/n{\\mathbb Z}$ for\nall $n \\neq 2,3,5,7$ (in these four cases, one readily checks\nthat there is no AP-destroying permutation of ${\\mathbb Z}/n{\\mathbb Z}$).\nIt was shown by Hegarty and Martinsson in~\\cite{hegand} that there exists\nan AP-destroying permutation of ${\\mathbb Z}/n{\\mathbb Z}$ for all\n$n \\geq n_0 = (9 \\cdot 11 \\cdot 16 \\cdot 17 \\cdot 19 \\cdot 23)^2\n\\approx 1.4 \\times 10^{14}$.\nMoreover, the following lemma, proved by Hegarty in~\\cite{hegori},\nshows that one can find AP-destroying permutations of larger groups\ngiven AP-destroying permutations of smaller groups:\n\\begin{lemma}[Hegarty]\\label{lem:quot}\nLet $G$ be an abelian group and $H \\subset G$ a subgroup. If there\nexists an AP-destroying permutation of $H$ and an AP-destroying\npermutation of $G/H$, then there exists an AP-destroying permutation\nof $G$.\n\\end{lemma}\nIt follows from Lemma~\\ref{lem:quot} that the set of all finite\nabelian groups $G$ that have AP-destroying permutations is closed\nunder taking direct sums, and that the set of all positive integers\n$n$ for which ${\\mathbb Z}/n{\\mathbb Z}$ has an AP-destroying permutation is closed\nunder multiplication. This last implication motivates a closer\nstudy of the case when $n = p$ is a prime, and in this regard,\nit was shown in~\\cite{hegand} that there is an AP-destroying permutation\nof ${\\mathbb Z}/p{\\mathbb Z}$ for all primes $p > 3$ such that $p \\equiv 3 \\pmod\n8$. In this paper, we prove a result that includes Hegarty's conjecture\nfor ${\\mathbb Z}/p{\\mathbb Z}$ where $p > 7$ is any prime. Our main theorem is\nstated as follows:\n\\begin{theorem}\\label{thm:main}\nLet $p$ be a prime and $k$ be a positive integer. Then there is\nan AP-destroying permutation of $({\\mathbb Z}/p{\\mathbb Z})^k$ if and only if $p$\nis odd and $(p,k) \\not\\in \\{(3,1),(5,1), (7,1)\\}$.\n\\end{theorem}\n\n\\begin{remark}\nAlthough one can use Lemma~\\ref{lem:quot} to show that there is\nan AP-destroying permutation of $({\\mathbb Z}/p{\\mathbb Z})^k$ for all $k > 3$\ngiven the existence of such a permutation for $({\\mathbb Z}/p{\\mathbb Z})^k$ where\n$k = 1$ or where $k \\in \\{2,3\\}$, our approach yields\nsuch a permutation directly for all elementary $p$-groups\nof odd order greater than~$7$.  Using this result, together with\nLemma~\\ref{lem:quot} and the result of~\\cite{hegand},\nwe then see that to prove Hegarty's conjecture for finite cyclic groups,\nit suffices to find AP-destroying permutations of ${\\mathbb Z}/n{\\mathbb Z}$\nfor all $n$ such that $n \\in \\{2p,3p,5p,7p : p \\text{ prime}\\}$\nand $n < n_0$.\n\\end{remark}\n\nThe proof of Theorem~\\ref{thm:main} occupies the remainder of this paper.\nWe first construct a permutation $f$\\/ that destroys all but $O(1)$ AP's\nin $({\\mathbb Z}/p{\\mathbb Z})^k$.  We then show that if $p^k$ is large enough, say\n$p^k > n_1$, then a small modification of~$f$\\/ destroys all AP's.\nThis $n_1$, unlike the bound $n_0$ of~\\cite{hegand}, is small enough\nthat we can deal with the remaining cases $q^k \\leq n_1$\nby exhibiting an AP-destroying permutation in each case.\nThis concludes the proof.\n\n\\section{Proof of Theorem~\\ref{thm:main}}\\label{sec:proof}\n\nIf $\\pi$ is a permutation of an abelian group $G$, then\nfor any $a,r \\in G$ with $r \\neq 0$, the permutation $\\pi$ destroys the AP\n$(a-r, r, a+r)$ if and only if $\\pi$ destroys the reversed AP $(a+r, a, a-r)$.\nMoreover, if $p=3$, then all six permutations of the AP $(a-r, r, a+r)$\nare AP's, and if $\\pi$ destroys one of them then $\\pi$ destroys them all.\nThus, in the remainder of our proof, we will somewhat loosely use the notation\n``$(a-r, a, a+r)$'' to refer to both the AP $(a-r, r, a+r)$ and\nthe reversed AP $(a+r, a, a-r)$, and when $p = 3$, the notation\n``$(a-r, r, a+r)$'' will refer to any permutation of this AP.\n\nLet $p$\\/ be any prime, let $k$ be any positive integer,\nand let $G$\\/ denote the elementary $p$-group $({\\mathbb Z}/p{\\mathbb Z})^k$.\nIf $p=2$ then no permutation of $G$\\/ destroys any AP,\nso we need only consider the case when $p$ is odd.\nWe identify $({\\mathbb Z}/p{\\mathbb Z})^k$ with the additive group of\nthe finite field ${\\mathbb F}_q$ of order $q = p^k$.\nWe shall construct an AP-destroying permutation of $({\\mathbb Z}/p{\\mathbb Z})^k$\nas a permutation of ${\\mathbb F}_q$, by applying small modifications\nto the fixed permutation $f : {\\mathbb F}_q \\to {\\mathbb F}_q$ defined by\n\n", "index": 1, "text": "\\begin{equation}\n\\label{eqn:almostwreck}\nf(x) \\defeq \\begin{cases}\n   1 & \\text{if $x = 0$}, \\\\ 0 & \\text{if $x = 1$},\n   \\\\\n   \\frac{1}{x} & \\text{else.}\n   \\end{cases}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E1.m1\" class=\"ltx_Math\" alttext=\"f(x)\\defeq\\begin{cases}1&amp;\\text{if $x=0$},\\\\&#10;0&amp;\\text{if $x=1$},\\\\&#10;\\frac{1}{x}&amp;\\text{else.}\\end{cases}\" display=\"block\"><mrow><mi>f</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\defeq</mtext></merror><mo>\u2062</mo><mrow><mo>{</mo><mtable columnspacing=\"5pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"left\"><mn>1</mn></mtd><mtd columnalign=\"left\"><mrow><mrow><mtext>if\u00a0</mtext><mrow><mi>x</mi><mo>=</mo><mn>0</mn></mrow></mrow><mo>,</mo></mrow></mtd></mtr><mtr><mtd columnalign=\"left\"><mn>0</mn></mtd><mtd columnalign=\"left\"><mrow><mrow><mtext>if\u00a0</mtext><mrow><mi>x</mi><mo>=</mo><mn>1</mn></mrow></mrow><mo>,</mo></mrow></mtd></mtr><mtr><mtd columnalign=\"left\"><mstyle displaystyle=\"false\"><mfrac><mn>1</mn><mi>x</mi></mfrac></mstyle></mtd><mtd columnalign=\"left\"><mtext>else.</mtext></mtd></mtr></mtable></mrow></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nbut this cannot hold since $p > 2$.\nThus, all APs disjoint from $\\{0,1\\}$ are destroyed by~$f$.\nThe remaining cases are handled as follows:\n\\begin{enumerate}\n\\item First, consider APs of the form $(-r, 0, r)$. If $r \\neq\n\\pm 1$, then $f$ sends $(-r,0,r)$ to $(-\\frac1r, 1, \\frac1r)$,\nwhich is not an AP because $p > 2$.~However, $f$ sends $(-1,0,1)$\nto $(-1, 1, 0)$, which is an AP if and only if $p = 3$.\n\\item Next, consider APs of the form $(0, r, 2r)$. If $\\{r, 2r\\}\n\\cap \\{1\\} = \\varnothing$, then $f$ sends $(0,r,2r)$ to $(1, \\frac\n1r, \\frac{1}{2r})$, which is an AP if and only if $\\frac2r = 1\n+ \\frac{1}{2r}$, and this happens if and only if $p > 3$ and $r\n= \\frac32$. If $r =1$, then $f$ sends $(0,r,2r)$ to $(1, 0, \\frac\n12)$, which is an AP if and only if $p = 3$. If $2r =1$, then $f$\nsends $(0,r,2r)$ to $(1, 2, 0)$, which is again an AP if and only\nif $p = 3$.\n\\item[] \\hspace{-.33in}\nWe may now restrict our attention to APs containing $1$ but not $0$.\n\\item Consider APs of the form $(1-r, 1, 1 + r)$, where $r \\neq\n\\pm 1$. The permutation $f$ sends this AP to $\\left(\\frac{1}{1-r},\n0, \\frac{1}{1+r}\\right)$, which is not an AP because $p > 2$.\n\\item  Finally, consider APs of the form\n$(1, 1+r, 1+2r)$ with $r \\notin \\{-1, -\\frac12\\}$.\nThen $f$ sends $(1,1+r,1+2r)$ to\n$\\left(0, \\frac{1}{1+r}, \\frac{1}{1+2r}\\right)$,\nwhich is an AP if and only if $\\frac{2}{1+r} = \\frac{1}{1+2r} + 0$,\nand this happens if and only if $p > 3$ and $r = - \\frac13$.\\qedhere\n\\end{enumerate}\n\\end{proof}\n\\begin{remark}\nSince $f$\\/ is an involution, it also acts as an involution on the\nset of AP's {\\em not}\\/ destroyed by~$f$.\n\\end{remark}\nOur strategy is to modify $f$\\/ by composing it with a permutation $\\tau$\nthat is a simple transposition if $p=3$ and a product of two transpositions\n$\\tau_1, \\tau_2$ if $p>3$, with each transposition moving exactly one term\nin each of the AP's not destroyed by~$f$.  The resulting permutation $f'$\nthen destroys those AP's but may restore others.  However, if we choose\n$\\tau$ at random then the expected number of restored AP's is $O(1)$,\nso once $q$ is at all large there should be some choices of $\\tau$\nfor which no AP is restored and thus $f'$ destroys all AP's.\nWe will prove this by counting how many $\\tau$ or $\\tau_i$\nmove a given AP term and introduce no new AP's, and showing that\nthe count is positive.  Because our $f$\\/ is given by an algebraic rule,\neach of the needed enumerations reduces to estimating the number of points\non certain algebraic curves over~${\\mathbb F}_q$.  The estimates suffice\nwith few enough small exceptions (each with $p>3$)\nthat we can dispose of each remaining~$q$ computationally.\nIn most cases we find some $\\tau_i$ that works\n(even though the estimate was not strong enough to guarantee its existence).\nIn the remaining cases, $q$ is prime and small enough that an\nAP-destroying permutation of ${\\mathbb Z}/p{\\mathbb Z}$ was already exhibited\nby Hegarty in~\\cite{hegori}; we also construct such permutations by\nstarting from the $\\tau_i$ that come closest to destroying all AP's\nand then composing with further transpositions\nuntil the number of surviving AP's drops to zero.\n\n\n\n\n\n\nIn what follows, we consider the cases of $p = 3$ and $p > 3$ separately,\nbecause we saw in the proof of Lemma~\\ref{lem:almostwreck} that\nthe APs not destroyed by~$f$\\/ are different in each case.\n\n\\subsection{The Case $p = 3$}\\label{sec:3case}\n\nBy hypothesis $k > 1$, so $q = 3^k > 3$; hence there exists\n$y$ in ${\\mathbb F}_q \\setminus \\{0, \\pm 1\\}$.  Consider the permutation $f'$\nobtained by switching the images of $-1$ and $y$ under~$f$\\/\n(i.e.~$f'(-1) = 1/y$, $f'(y) = -1$, and $f'(x) = f(x)$ otherwise).\nThe AP $(-1,0,1)$ is clearly destroyed by $f'$, because $y \\neq -1$.\nThus, by Lemma~\\ref{lem:almostwreck}, if an AP is not destroyed by~$f'$,\nit must either \\textsf{(A)} contain $-1$ but not $y$ or\n\\textsf{(B)} contain $y$.\nWe treat the cases \\textsf{(A)} and \\textsf{(B)} separately as follows.\n\\begin{enumerate}\n\\item[{\\sf (A)}] If $\\{-1+r, -1+2r\\} \\cap \\{0,\\pm 1, y\\} = \\varnothing$,\nthen $f'$ sends the AP $(-1,-1+r,-1+2r)$ to $\\left(\\frac{1}{y},\\frac{1}{-1+r},\\frac{1}{-1+2r}\\right)$,\nwhich is an AP when\n\n", "itemtype": "equation", "pos": 7940, "prevtext": "\nThe next lemma shows that\n$f$\\/ is indeed very close to being an AP-destroying permutation:\n\\begin{lemma}\\label{lem:almostwreck}\nThe permutation $f$ destroys all APs in ${\\mathbb F}_q$ other than $(-1,0,1)$\nwhen $p = 3$ and $(0,\\frac32,3)$, $(\\frac13, \\frac23, 1)$ when\n$p > 3$.\n\\end{lemma}\n\\begin{proof}\nLet $(a-r, a, a+r)$ be an AP in ${\\mathbb F}_q$ such that $\\{a-r, a, a+r\\}\n\\cap \\{0,1\\} = \\varnothing$. Then $f$ sends the AP $(a-r, a, a+r)$\nto $\\left(\\frac{1}{a-r}, \\frac{1}{a}, \\frac{1}{a+r}\\right)$, which\nis an AP when\n\n", "index": 3, "text": "$$\n\\frac{2}{a} = \\frac{1}{a-r} + \\frac{1}{a+r}\n\\ \\Longrightarrow \\\n2(a^2 - r^2) = 2a^2\n\\ \\Longrightarrow \\\n2r^2 = 0,\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex1.m1\" class=\"ltx_Math\" alttext=\"\\frac{2}{a}=\\frac{1}{a-r}+\\frac{1}{a+r}\\ \\Longrightarrow\\ 2(a^{2}-r^{2})=2a^{2%&#10;}\\ \\Longrightarrow\\ 2r^{2}=0,\" display=\"block\"><mrow><mrow><mfrac><mn>2</mn><mi>a</mi></mfrac><mo>=</mo><mrow><mfrac><mn>1</mn><mrow><mi>a</mi><mo>-</mo><mi>r</mi></mrow></mfrac><mo>+</mo><mpadded width=\"+5pt\"><mfrac><mn>1</mn><mrow><mi>a</mi><mo>+</mo><mi>r</mi></mrow></mfrac></mpadded></mrow><mo>\u27f9</mo><mrow><mn>\u20052</mn><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msup><mi>a</mi><mn>2</mn></msup><mo>-</mo><msup><mi>r</mi><mn>2</mn></msup></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mrow><mn>2</mn><mo>\u2062</mo><mpadded width=\"+5pt\"><msup><mi>a</mi><mn>2</mn></msup></mpadded></mrow><mo>\u27f9</mo><mrow><mn>\u20052</mn><mo>\u2062</mo><msup><mi>r</mi><mn>2</mn></msup></mrow><mo>=</mo><mn>0</mn></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nOtherwise, if $\\{-1+r, -1+2r\\} \\cap \\{0,\\pm 1\\} \\neq \\varnothing$,\none readily checks that $f'$ destroys the AP $(-1,-1+r,-1+2r)$.\n(We intersected with $\\{0,\\pm 1\\}$, not $\\{0,\\pm 1,y\\}$,\nbecause $y \\in \\{-1+r, -1+2r\\}$ belongs in case~\\textsf{(B)}.)\n\\item[{\\sf (B)}] If $\\{y+r,y+2r\\} \\cap \\{0,\\pm 1,y\\} = \\varnothing$,\nthen $f'$ sends the AP $(y,y+r,y+2r)$ to\n$\\left(-1,\\frac{1}{y+r},\\frac{1}{y+2r}\\right)$, which is an AP when\n\n", "itemtype": "equation", "pos": 12246, "prevtext": "\nbut this cannot hold since $p > 2$.\nThus, all APs disjoint from $\\{0,1\\}$ are destroyed by~$f$.\nThe remaining cases are handled as follows:\n\\begin{enumerate}\n\\item First, consider APs of the form $(-r, 0, r)$. If $r \\neq\n\\pm 1$, then $f$ sends $(-r,0,r)$ to $(-\\frac1r, 1, \\frac1r)$,\nwhich is not an AP because $p > 2$.~However, $f$ sends $(-1,0,1)$\nto $(-1, 1, 0)$, which is an AP if and only if $p = 3$.\n\\item Next, consider APs of the form $(0, r, 2r)$. If $\\{r, 2r\\}\n\\cap \\{1\\} = \\varnothing$, then $f$ sends $(0,r,2r)$ to $(1, \\frac\n1r, \\frac{1}{2r})$, which is an AP if and only if $\\frac2r = 1\n+ \\frac{1}{2r}$, and this happens if and only if $p > 3$ and $r\n= \\frac32$. If $r =1$, then $f$ sends $(0,r,2r)$ to $(1, 0, \\frac\n12)$, which is an AP if and only if $p = 3$. If $2r =1$, then $f$\nsends $(0,r,2r)$ to $(1, 2, 0)$, which is again an AP if and only\nif $p = 3$.\n\\item[] \\hspace{-.33in}\nWe may now restrict our attention to APs containing $1$ but not $0$.\n\\item Consider APs of the form $(1-r, 1, 1 + r)$, where $r \\neq\n\\pm 1$. The permutation $f$ sends this AP to $\\left(\\frac{1}{1-r},\n0, \\frac{1}{1+r}\\right)$, which is not an AP because $p > 2$.\n\\item  Finally, consider APs of the form\n$(1, 1+r, 1+2r)$ with $r \\notin \\{-1, -\\frac12\\}$.\nThen $f$ sends $(1,1+r,1+2r)$ to\n$\\left(0, \\frac{1}{1+r}, \\frac{1}{1+2r}\\right)$,\nwhich is an AP if and only if $\\frac{2}{1+r} = \\frac{1}{1+2r} + 0$,\nand this happens if and only if $p > 3$ and $r = - \\frac13$.\\qedhere\n\\end{enumerate}\n\\end{proof}\n\\begin{remark}\nSince $f$\\/ is an involution, it also acts as an involution on the\nset of AP's {\\em not}\\/ destroyed by~$f$.\n\\end{remark}\nOur strategy is to modify $f$\\/ by composing it with a permutation $\\tau$\nthat is a simple transposition if $p=3$ and a product of two transpositions\n$\\tau_1, \\tau_2$ if $p>3$, with each transposition moving exactly one term\nin each of the AP's not destroyed by~$f$.  The resulting permutation $f'$\nthen destroys those AP's but may restore others.  However, if we choose\n$\\tau$ at random then the expected number of restored AP's is $O(1)$,\nso once $q$ is at all large there should be some choices of $\\tau$\nfor which no AP is restored and thus $f'$ destroys all AP's.\nWe will prove this by counting how many $\\tau$ or $\\tau_i$\nmove a given AP term and introduce no new AP's, and showing that\nthe count is positive.  Because our $f$\\/ is given by an algebraic rule,\neach of the needed enumerations reduces to estimating the number of points\non certain algebraic curves over~${\\mathbb F}_q$.  The estimates suffice\nwith few enough small exceptions (each with $p>3$)\nthat we can dispose of each remaining~$q$ computationally.\nIn most cases we find some $\\tau_i$ that works\n(even though the estimate was not strong enough to guarantee its existence).\nIn the remaining cases, $q$ is prime and small enough that an\nAP-destroying permutation of ${\\mathbb Z}/p{\\mathbb Z}$ was already exhibited\nby Hegarty in~\\cite{hegori}; we also construct such permutations by\nstarting from the $\\tau_i$ that come closest to destroying all AP's\nand then composing with further transpositions\nuntil the number of surviving AP's drops to zero.\n\n\n\n\n\n\nIn what follows, we consider the cases of $p = 3$ and $p > 3$ separately,\nbecause we saw in the proof of Lemma~\\ref{lem:almostwreck} that\nthe APs not destroyed by~$f$\\/ are different in each case.\n\n\\subsection{The Case $p = 3$}\\label{sec:3case}\n\nBy hypothesis $k > 1$, so $q = 3^k > 3$; hence there exists\n$y$ in ${\\mathbb F}_q \\setminus \\{0, \\pm 1\\}$.  Consider the permutation $f'$\nobtained by switching the images of $-1$ and $y$ under~$f$\\/\n(i.e.~$f'(-1) = 1/y$, $f'(y) = -1$, and $f'(x) = f(x)$ otherwise).\nThe AP $(-1,0,1)$ is clearly destroyed by $f'$, because $y \\neq -1$.\nThus, by Lemma~\\ref{lem:almostwreck}, if an AP is not destroyed by~$f'$,\nit must either \\textsf{(A)} contain $-1$ but not $y$ or\n\\textsf{(B)} contain $y$.\nWe treat the cases \\textsf{(A)} and \\textsf{(B)} separately as follows.\n\\begin{enumerate}\n\\item[{\\sf (A)}] If $\\{-1+r, -1+2r\\} \\cap \\{0,\\pm 1, y\\} = \\varnothing$,\nthen $f'$ sends the AP $(-1,-1+r,-1+2r)$ to $\\left(\\frac{1}{y},\\frac{1}{-1+r},\\frac{1}{-1+2r}\\right)$,\nwhich is an AP when\n\n", "index": 5, "text": "$$\n\\frac{2}{-1+r} = \\frac{1}{y} + \\frac{1}{-1+2r} \\ \\Longrightarrow \\ r^2 = y+1.\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex2.m1\" class=\"ltx_Math\" alttext=\"\\frac{2}{-1+r}=\\frac{1}{y}+\\frac{1}{-1+2r}\\ \\Longrightarrow\\ r^{2}=y+1.\" display=\"block\"><mrow><mrow><mfrac><mn>2</mn><mrow><mrow><mo>-</mo><mn>1</mn></mrow><mo>+</mo><mi>r</mi></mrow></mfrac><mo>=</mo><mrow><mfrac><mn>1</mn><mi>y</mi></mfrac><mo>+</mo><mpadded width=\"+5pt\"><mfrac><mn>1</mn><mrow><mrow><mo>-</mo><mn>1</mn></mrow><mo>+</mo><mrow><mn>2</mn><mo>\u2062</mo><mi>r</mi></mrow></mrow></mfrac></mpadded></mrow><mo rspace=\"7.5pt\">\u27f9</mo><msup><mi>r</mi><mn>2</mn></msup><mo>=</mo><mrow><mi>y</mi><mo>+</mo><mn>1</mn></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nAlso, one readily checks that if\n$\\{y+r,y+2r\\} \\cap \\{0,\\pm 1\\} \\neq \\varnothing$,\nthe AP $(y,y+r,y+2r)$ is destroyed by $f'$.\n\\end{enumerate}\n\nNow, let $\\chi$ denote the Legendre symbol over ${\\mathbb F}_q$. It follows\nfrom the above case analysis that if $y \\neq 0, \\pm 1$ is chosen\nso that\n\n", "itemtype": "equation", "pos": 12759, "prevtext": "\nOtherwise, if $\\{-1+r, -1+2r\\} \\cap \\{0,\\pm 1\\} \\neq \\varnothing$,\none readily checks that $f'$ destroys the AP $(-1,-1+r,-1+2r)$.\n(We intersected with $\\{0,\\pm 1\\}$, not $\\{0,\\pm 1,y\\}$,\nbecause $y \\in \\{-1+r, -1+2r\\}$ belongs in case~\\textsf{(B)}.)\n\\item[{\\sf (B)}] If $\\{y+r,y+2r\\} \\cap \\{0,\\pm 1,y\\} = \\varnothing$,\nthen $f'$ sends the AP $(y,y+r,y+2r)$ to\n$\\left(-1,\\frac{1}{y+r},\\frac{1}{y+2r}\\right)$, which is an AP when\n\n", "index": 7, "text": "$$\n\\frac{2}{y+r} = -1 + \\frac{1}{y+2r} \\ \\Longrightarrow \\ r^2 = y^2 + y.\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex3.m1\" class=\"ltx_Math\" alttext=\"\\frac{2}{y+r}=-1+\\frac{1}{y+2r}\\ \\Longrightarrow\\ r^{2}=y^{2}+y.\" display=\"block\"><mrow><mrow><mfrac><mn>2</mn><mrow><mi>y</mi><mo>+</mo><mi>r</mi></mrow></mfrac><mo>=</mo><mrow><mrow><mo>-</mo><mn>1</mn></mrow><mo>+</mo><mpadded width=\"+5pt\"><mfrac><mn>1</mn><mrow><mi>y</mi><mo>+</mo><mrow><mn>2</mn><mo>\u2062</mo><mi>r</mi></mrow></mrow></mfrac></mpadded></mrow><mo rspace=\"7.5pt\">\u27f9</mo><msup><mi>r</mi><mn>2</mn></msup><mo>=</mo><mrow><msup><mi>y</mi><mn>2</mn></msup><mo>+</mo><mi>y</mi></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nthen $f'$ destroys all APs in ${\\mathbb F}_q$.\nSuch a $y$ exists if and only if the sum\n\n", "itemtype": "equation", "pos": 13129, "prevtext": "\nAlso, one readily checks that if\n$\\{y+r,y+2r\\} \\cap \\{0,\\pm 1\\} \\neq \\varnothing$,\nthe AP $(y,y+r,y+2r)$ is destroyed by $f'$.\n\\end{enumerate}\n\nNow, let $\\chi$ denote the Legendre symbol over ${\\mathbb F}_q$. It follows\nfrom the above case analysis that if $y \\neq 0, \\pm 1$ is chosen\nso that\n\n", "index": 9, "text": "$$\n\\big(1-\\chi(y+1)\\big) \\cdot \\big(1-\\chi(y(y+1))\\big) > 0,\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex4.m1\" class=\"ltx_Math\" alttext=\"\\big{(}1-\\chi(y+1)\\big{)}\\cdot\\big{(}1-\\chi(y(y+1))\\big{)}&gt;0,\" display=\"block\"><mrow><mrow><mrow><mrow><mo maxsize=\"120%\" minsize=\"120%\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>y</mi><mo>+</mo><mn>1</mn></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo maxsize=\"120%\" minsize=\"120%\">)</mo></mrow><mo>\u22c5</mo><mrow><mo maxsize=\"120%\" minsize=\"120%\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>y</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>y</mi><mo>+</mo><mn>1</mn></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo maxsize=\"120%\" minsize=\"120%\">)</mo></mrow></mrow><mo>&gt;</mo><mn>0</mn></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nis positive.\nTo compute $A_q(y)$, we use the following well-known elementary formula:\n\\begin{lemma}\\label{thm:weil1}\nLet ${\\mathbb F}_q$ be a finite field of odd characteristic,\nand let $\\chi$ be the Legendre symbol on~${\\mathbb F}_q$.\nIf $q$ is odd and $g \\in {\\mathbb F}_q[x]$ is a polynomial\nof degree at most 2 such that $g \\neq c \\cdot h^2$ for any $c \\in\n{\\mathbb F}_q$ and $h \\in {\\mathbb F}_q[x]$, then\n\n", "itemtype": "equation", "pos": 13281, "prevtext": "\nthen $f'$ destroys all APs in ${\\mathbb F}_q$.\nSuch a $y$ exists if and only if the sum\n\n", "index": 11, "text": "\\begin{equation}\\label{eq:sum3}\nA_q(y) \\defeq \\sum_{y \\in {\\mathbb F}_q \\setminus \\{0, \\pm 1\\}} \\big(1-\\chi(y+1)\\big)\n\\cdot \\big(1-\\chi(y(y+1))\\big)\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E2.m1\" class=\"ltx_Math\" alttext=\"A_{q}(y)\\defeq\\sum_{y\\in{\\mathbb{F}}_{q}\\setminus\\{0,\\pm 1\\}}\\big{(}1-\\chi(y+1%&#10;)\\big{)}\\cdot\\big{(}1-\\chi(y(y+1))\\big{)}\" display=\"block\"><mrow><msub><mi>A</mi><mi>q</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\defeq</mtext></merror><mo>\u2062</mo><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>y</mi><mo>\u2208</mo><mrow><msub><mi>\ud835\udd3d</mi><mi>q</mi></msub><mo>\u2216</mo><mrow><mo stretchy=\"false\">{</mo><mn>0</mn><mo>,</mo><mrow><mo>\u00b1</mo><mn>1</mn></mrow><mo stretchy=\"false\">}</mo></mrow></mrow></mrow></munder><mrow><mrow><mo maxsize=\"120%\" minsize=\"120%\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>y</mi><mo>+</mo><mn>1</mn></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo maxsize=\"120%\" minsize=\"120%\">)</mo></mrow><mo>\u22c5</mo><mrow><mo maxsize=\"120%\" minsize=\"120%\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>y</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>y</mi><mo>+</mo><mn>1</mn></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo maxsize=\"120%\" minsize=\"120%\">)</mo></mrow></mrow></mrow></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nwhere $a$ is the coefficient of the degree-$2$ term in $g$.\n\\end{lemma}\nNow, taking the sum in~\\eqref{eq:sum3} over all of ${\\mathbb F}_q$ and\napplying the result of Lemma~\\ref{thm:weil1}, \\mbox{we find that}\n\n", "itemtype": "equation", "pos": 13856, "prevtext": "\nis positive.\nTo compute $A_q(y)$, we use the following well-known elementary formula:\n\\begin{lemma}\\label{thm:weil1}\nLet ${\\mathbb F}_q$ be a finite field of odd characteristic,\nand let $\\chi$ be the Legendre symbol on~${\\mathbb F}_q$.\nIf $q$ is odd and $g \\in {\\mathbb F}_q[x]$ is a polynomial\nof degree at most 2 such that $g \\neq c \\cdot h^2$ for any $c \\in\n{\\mathbb F}_q$ and $h \\in {\\mathbb F}_q[x]$, then\n\n", "index": 13, "text": "\\begin{equation}\\label{thm2}\n\\sum_{y \\in {\\mathbb F}_q} \\chi(g(y)) = -\\chi(a),\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E3.m1\" class=\"ltx_Math\" alttext=\"\\sum_{y\\in{\\mathbb{F}}_{q}}\\chi(g(y))=-\\chi(a),\" display=\"block\"><mrow><mrow><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>y</mi><mo>\u2208</mo><msub><mi>\ud835\udd3d</mi><mi>q</mi></msub></mrow></munder><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>g</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>=</mo><mrow><mo>-</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nBecause\n\n", "itemtype": "equation", "pos": 14159, "prevtext": "\nwhere $a$ is the coefficient of the degree-$2$ term in $g$.\n\\end{lemma}\nNow, taking the sum in~\\eqref{eq:sum3} over all of ${\\mathbb F}_q$ and\napplying the result of Lemma~\\ref{thm:weil1}, \\mbox{we find that}\n\n", "index": 15, "text": "$$\n\\sum_{y \\in {\\mathbb F}_q} \\big(1-\\chi(y) - \\chi(y+1) + \\chi(y(y+1))\\big) = q-1.\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex5.m1\" class=\"ltx_Math\" alttext=\"\\sum_{y\\in{\\mathbb{F}}_{q}}\\big{(}1-\\chi(y)-\\chi(y+1)+\\chi(y(y+1))\\big{)}=q-1.\" display=\"block\"><mrow><mrow><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>y</mi><mo>\u2208</mo><msub><mi>\ud835\udd3d</mi><mi>q</mi></msub></mrow></munder><mrow><mo maxsize=\"120%\" minsize=\"120%\">(</mo><mrow><mrow><mn>1</mn><mo>-</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>-</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>y</mi><mo>+</mo><mn>1</mn></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>+</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>y</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>y</mi><mo>+</mo><mn>1</mn></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo maxsize=\"120%\" minsize=\"120%\">)</mo></mrow></mrow><mo>=</mo><mrow><mi>q</mi><mo>-</mo><mn>1</mn></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nwe conclude that $A_q(y) > 0$ provided $q - 1 \\geq 4$,\nwhich happens once $k \\geq 2$.\nThus, there exists $y \\in {\\mathbb F}_q \\setminus \\{0, \\pm 1\\}$\nsuch that $f'$ destroys all APs in ${\\mathbb F}_q$ for $q = 3^k$ and $k \\geq 2$.\n\n\\subsection{Destroying $(0, \\frac32 ,3)$ in the Case $p > 3$}\\label{simsec}\n\nThis case takes more work than the case $p=3$, but the strategy is similar.\nWe begin by constructing a permutation $f'$ of ${\\mathbb F}_q$\nthat destroys all but one AP.\nTake $y \\in {\\mathbb F}_q \\setminus \\{0, \\frac13, \\frac 23,1, \\frac32,3\\}$\n(note that this already requires $q>5$), and let $f'$ be the permutation\nobtained by switching the images of $3$ and~$y$ under~$f$\\/; that is,\n$f'(3) = \\frac1y$, $f'(y) = \\frac13$, and $f'(x) = f(x)$ otherwise.\nThe AP $(0,\\frac32,3)$ is clearly destroyed by $f'$, because $y\n\\neq 3$. Thus, by Lemma~\\ref{lem:almostwreck}, if an AP other than $(\\frac 13, \\frac 23, 1)$ is not\ndestroyed by $f'$, it must either \\textsf{(A)} contain $3$ but\nnot $y$ or \\textsf{(B)} contain $y$. The cases \\textsf{(A)} and\n\\textsf{(B)} each have two subcases depending on the position of\n$3$ or~$y$ in the AP; we study each of these subcases separately as follows.\n\\begin{enumerate}\n\\item[{\\sf (A)}]\n\\begin{enumerate}\n\\item If $\\{3+r, 3+2r\\} \\cap \\{0,1,3, y\\} = \\varnothing$, then\n$f'$ sends the AP $(3,3+r,3+2r)$ to\n$\\left(\\frac{1}{y},\\frac{1}{3+r},\\frac{1}{3+2r}\\right)$, which is an AP when\n\n", "itemtype": "equation", "pos": 14254, "prevtext": "\nBecause\n\n", "index": 17, "text": "$$\n\\sum_{y \\in \\{0, \\pm 1\\}} \\big(1-\\chi(y) - \\chi(y+1) + \\chi(y(y+1))\\big) \\leq 4,\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex6.m1\" class=\"ltx_Math\" alttext=\"\\sum_{y\\in\\{0,\\pm 1\\}}\\big{(}1-\\chi(y)-\\chi(y+1)+\\chi(y(y+1))\\big{)}\\leq 4,\" display=\"block\"><mrow><mrow><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>y</mi><mo>\u2208</mo><mrow><mo stretchy=\"false\">{</mo><mn>0</mn><mo>,</mo><mrow><mo>\u00b1</mo><mn>1</mn></mrow><mo stretchy=\"false\">}</mo></mrow></mrow></munder><mrow><mo maxsize=\"120%\" minsize=\"120%\">(</mo><mrow><mrow><mn>1</mn><mo>-</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>-</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>y</mi><mo>+</mo><mn>1</mn></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>+</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>y</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>y</mi><mo>+</mo><mn>1</mn></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo maxsize=\"120%\" minsize=\"120%\">)</mo></mrow></mrow><mo>\u2264</mo><mn>4</mn></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nIf $r = -3$ and $3 + 2r = -3 \\neq y$, then $f'$ does not destroy\nthe AP $(3,3+r,3+2r) = (3,0,-3)$ when $y = \\frac 37$.\n\nOne readily checks that $f'$ destroys all other APs of the form\n$(3,3+r,3+2r)$ that do not contain $y$ and satisfy $\\{3+r, 3+2r\\}\n\\cap \\{0,1,3\\} \\neq \\varnothing$.\n\\item If $\\{3-r, 3+r\\} \\cap \\{0,1,3, y\\} = \\varnothing$,\nthen $f'$ sends the AP $(3-r,3,3+r)$ to\n$\\left(\\frac{1}{3-r},\\frac{1}{y},\\frac{1}{3+r}\\right)$,\nwhich is an AP when\n\n", "itemtype": "equation", "pos": 15767, "prevtext": "\nwe conclude that $A_q(y) > 0$ provided $q - 1 \\geq 4$,\nwhich happens once $k \\geq 2$.\nThus, there exists $y \\in {\\mathbb F}_q \\setminus \\{0, \\pm 1\\}$\nsuch that $f'$ destroys all APs in ${\\mathbb F}_q$ for $q = 3^k$ and $k \\geq 2$.\n\n\\subsection{Destroying $(0, \\frac32 ,3)$ in the Case $p > 3$}\\label{simsec}\n\nThis case takes more work than the case $p=3$, but the strategy is similar.\nWe begin by constructing a permutation $f'$ of ${\\mathbb F}_q$\nthat destroys all but one AP.\nTake $y \\in {\\mathbb F}_q \\setminus \\{0, \\frac13, \\frac 23,1, \\frac32,3\\}$\n(note that this already requires $q>5$), and let $f'$ be the permutation\nobtained by switching the images of $3$ and~$y$ under~$f$\\/; that is,\n$f'(3) = \\frac1y$, $f'(y) = \\frac13$, and $f'(x) = f(x)$ otherwise.\nThe AP $(0,\\frac32,3)$ is clearly destroyed by $f'$, because $y\n\\neq 3$. Thus, by Lemma~\\ref{lem:almostwreck}, if an AP other than $(\\frac 13, \\frac 23, 1)$ is not\ndestroyed by $f'$, it must either \\textsf{(A)} contain $3$ but\nnot $y$ or \\textsf{(B)} contain $y$. The cases \\textsf{(A)} and\n\\textsf{(B)} each have two subcases depending on the position of\n$3$ or~$y$ in the AP; we study each of these subcases separately as follows.\n\\begin{enumerate}\n\\item[{\\sf (A)}]\n\\begin{enumerate}\n\\item If $\\{3+r, 3+2r\\} \\cap \\{0,1,3, y\\} = \\varnothing$, then\n$f'$ sends the AP $(3,3+r,3+2r)$ to\n$\\left(\\frac{1}{y},\\frac{1}{3+r},\\frac{1}{3+2r}\\right)$, which is an AP when\n\n", "index": 19, "text": "$$\n\\frac{2}{3+r} = \\frac{1}{y} + \\frac{1}{3+2r}\n\\ \\Longrightarrow \\\n2r^2 + (9-3y)r + (9-3y) = 0.\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex7.m1\" class=\"ltx_Math\" alttext=\"\\frac{2}{3+r}=\\frac{1}{y}+\\frac{1}{3+2r}\\ \\Longrightarrow\\ 2r^{2}+(9-3y)r+(9-3%&#10;y)=0.\" display=\"block\"><mrow><mrow><mfrac><mn>2</mn><mrow><mn>3</mn><mo>+</mo><mi>r</mi></mrow></mfrac><mo>=</mo><mrow><mfrac><mn>1</mn><mi>y</mi></mfrac><mo>+</mo><mpadded width=\"+5pt\"><mfrac><mn>1</mn><mrow><mn>3</mn><mo>+</mo><mrow><mn>2</mn><mo>\u2062</mo><mi>r</mi></mrow></mrow></mfrac></mpadded></mrow><mo>\u27f9</mo><mrow><mrow><mn>\u20052</mn><mo>\u2062</mo><msup><mi>r</mi><mn>2</mn></msup></mrow><mo>+</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mn>9</mn><mo>-</mo><mrow><mn>3</mn><mo>\u2062</mo><mi>y</mi></mrow></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mi>r</mi></mrow><mo>+</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>9</mn><mo>-</mo><mrow><mn>3</mn><mo>\u2062</mo><mi>y</mi></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mn>0</mn></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\n\nIf $r = 3$ and $3 + r = 6 \\neq y$, then $f'$ does not destroy the\nAP $(3-r,3,3+r) = (0,3,6)$ when $y\n= \\frac{12}{7}$.\n\nIf $r = 2$ and $3+r = 5 \\neq y$, then $f'$ does not destroy the\nAP $(3-r, 3, 3+r)  = (1,3,5)$ when $y = 10$.\n\nOne readily checks that $f'$ destroys all other APs of the form\n$(3-r,3,3+r)$ that do not contain $y$ and satisfy $\\{3-r, 3+r\\}\n\\cap \\{0,1,3\\} \\neq \\varnothing$.\n\\end{enumerate}\n\\item[{\\sf (B)}]\n\\begin{enumerate}\n\\item If $\\{y+r,y+2r\\} \\cap \\{0,1,3,y\\} = \\varnothing$, then $f'$\nsends the AP $(y,y+r,y+2r)$ to $\\left(\\frac{1}{3},\\frac{1}{y+r},\\frac{1}{y+2r}\\right)$,\nwhich is an AP when\n\n", "itemtype": "equation", "pos": 16324, "prevtext": "\nIf $r = -3$ and $3 + 2r = -3 \\neq y$, then $f'$ does not destroy\nthe AP $(3,3+r,3+2r) = (3,0,-3)$ when $y = \\frac 37$.\n\nOne readily checks that $f'$ destroys all other APs of the form\n$(3,3+r,3+2r)$ that do not contain $y$ and satisfy $\\{3+r, 3+2r\\}\n\\cap \\{0,1,3\\} \\neq \\varnothing$.\n\\item If $\\{3-r, 3+r\\} \\cap \\{0,1,3, y\\} = \\varnothing$,\nthen $f'$ sends the AP $(3-r,3,3+r)$ to\n$\\left(\\frac{1}{3-r},\\frac{1}{y},\\frac{1}{3+r}\\right)$,\nwhich is an AP when\n\n", "index": 21, "text": "$$\n\\frac{2}{y} = \\frac{1}{3-r} + \\frac{1}{3+r}\n\\ \\Longrightarrow r^2 \\\n= 9-3y.\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex8.m1\" class=\"ltx_Math\" alttext=\"\\frac{2}{y}=\\frac{1}{3-r}+\\frac{1}{3+r}\\ \\Longrightarrow r^{2}\\ =9-3y.\" display=\"block\"><mrow><mrow><mfrac><mn>2</mn><mi>y</mi></mfrac><mo>=</mo><mrow><mfrac><mn>1</mn><mrow><mn>3</mn><mo>-</mo><mi>r</mi></mrow></mfrac><mo>+</mo><mpadded width=\"+5pt\"><mfrac><mn>1</mn><mrow><mn>3</mn><mo>+</mo><mi>r</mi></mrow></mfrac></mpadded></mrow><mo>\u27f9</mo><mpadded width=\"+5pt\"><msup><mi>r</mi><mn>2</mn></msup></mpadded><mo>=</mo><mrow><mn>9</mn><mo>-</mo><mrow><mn>3</mn><mo>\u2062</mo><mi>y</mi></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nIf $y+r = 0$ and $y+2r \\not\\in \\{0,1,3\\}$, then $f'$ does not destroy\nthe AP $(y,y+r,y+2r) = (y,0,-y)$ when\n$5y = -3$.\n\nIf $y+r = 1$ and $y+2r \\not\\in \\{0,1,3\\}$, then $f'$ does not destroy\nthe AP $(y,y+r,y+2r) = (y,1,2-y)$ when $y = 5$.\n\nIf $y+r = 3$ and $y+2r \\not\\in \\{0,1,3\\}$, then $f'$ does not destroy\nthe AP $(y,y+r,y+2r) = (y,3,6-y)$ when $y = 12$.\n\nIf $y+2r = 1$ and $y+r \\not\\in \\{0,1,3\\}$, then $f'$ does not destroy\nthe AP $(y,y+r,y+2r) = \\left(y,\\frac{y+1}{2},1\\right)$ when $y\n= 11$.\n\nOne readily checks that $f'$ destroys all other APs of the form\n$(y,y+r,y+2r)$ that do not contain $y$ and satisfy $\\{y+r, y+2r\\}\n\\cap \\{0,1,3\\} \\neq \\varnothing$.\n\\item If $\\{y-r,y+r\\} \\cap \\{0,1,3,y\\} = \\varnothing$, then $f'$\nsends the AP $(y-r,y,y+r)$ to $\\left(\\frac{1}{y-r},\\frac{1}{3},\\frac{1}{y+r}\\right)$,\nwhich is an AP when\n\n", "itemtype": "equation", "pos": 17023, "prevtext": "\n\nIf $r = 3$ and $3 + r = 6 \\neq y$, then $f'$ does not destroy the\nAP $(3-r,3,3+r) = (0,3,6)$ when $y\n= \\frac{12}{7}$.\n\nIf $r = 2$ and $3+r = 5 \\neq y$, then $f'$ does not destroy the\nAP $(3-r, 3, 3+r)  = (1,3,5)$ when $y = 10$.\n\nOne readily checks that $f'$ destroys all other APs of the form\n$(3-r,3,3+r)$ that do not contain $y$ and satisfy $\\{3-r, 3+r\\}\n\\cap \\{0,1,3\\} \\neq \\varnothing$.\n\\end{enumerate}\n\\item[{\\sf (B)}]\n\\begin{enumerate}\n\\item If $\\{y+r,y+2r\\} \\cap \\{0,1,3,y\\} = \\varnothing$, then $f'$\nsends the AP $(y,y+r,y+2r)$ to $\\left(\\frac{1}{3},\\frac{1}{y+r},\\frac{1}{y+2r}\\right)$,\nwhich is an AP when\n\n", "index": 23, "text": "$$\n\\frac{2}{y+r} = \\frac{1}{3} + \\frac{1}{y+2r}\n\\ \\Longrightarrow\\\n2r^2 + (3y-9)r + (y^2 - 3y) = 0.\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex9.m1\" class=\"ltx_Math\" alttext=\"\\frac{2}{y+r}=\\frac{1}{3}+\\frac{1}{y+2r}\\ \\Longrightarrow\\ 2r^{2}+(3y-9)r+(y^{%&#10;2}-3y)=0.\" display=\"block\"><mrow><mrow><mfrac><mn>2</mn><mrow><mi>y</mi><mo>+</mo><mi>r</mi></mrow></mfrac><mo>=</mo><mrow><mfrac><mn>1</mn><mn>3</mn></mfrac><mo>+</mo><mpadded width=\"+5pt\"><mfrac><mn>1</mn><mrow><mi>y</mi><mo>+</mo><mrow><mn>2</mn><mo>\u2062</mo><mi>r</mi></mrow></mrow></mfrac></mpadded></mrow><mo>\u27f9</mo><mrow><mrow><mn>\u20052</mn><mo>\u2062</mo><msup><mi>r</mi><mn>2</mn></msup></mrow><mo>+</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mrow><mn>3</mn><mo>\u2062</mo><mi>y</mi></mrow><mo>-</mo><mn>9</mn></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mi>r</mi></mrow><mo>+</mo><mrow><mo stretchy=\"false\">(</mo><mrow><msup><mi>y</mi><mn>2</mn></msup><mo>-</mo><mrow><mn>3</mn><mo>\u2062</mo><mi>y</mi></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mn>0</mn></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nIf $y-r = 0$ and $y+r \\not\\in \\{0,1,3\\}$, then $f'$ does not destroy\nthe AP $(y-r,y,y+r) = (0,y,2y)$ when $y = - \\frac32$.\n\nIf $y-r = 1$ and $y+r \\not\\in \\{0,1,3\\}$, then $f'$ does not destroy\nthe AP $(y-r,y,y+r) = (1,y,2y-1)$ when $y = \\frac54$.\n\nIf $y-r = 3$ and $y+r \\not\\in \\{0,1,3\\}$, then $f'$ does not destroy\nthe AP $(y-r,y,y+r) = (3,y,2y-3)$ when $y= \\frac34$. One readily checks that $f'$ destroys all other\nAPs of the form $(y-r,y,y+r)$ that do not contain $y$ and satisfy\n$\\{y-r, y+r\\} \\cap \\{0,1,3\\} \\neq \\varnothing$.\n\\end{enumerate}\n\\end{enumerate}\nNow, taking $\\chi$ to be the Legendre symbol over ${\\mathbb F}_q$ as before,\nit follows from the above case analysis that if\n\n", "itemtype": "equation", "pos": 17961, "prevtext": "\nIf $y+r = 0$ and $y+2r \\not\\in \\{0,1,3\\}$, then $f'$ does not destroy\nthe AP $(y,y+r,y+2r) = (y,0,-y)$ when\n$5y = -3$.\n\nIf $y+r = 1$ and $y+2r \\not\\in \\{0,1,3\\}$, then $f'$ does not destroy\nthe AP $(y,y+r,y+2r) = (y,1,2-y)$ when $y = 5$.\n\nIf $y+r = 3$ and $y+2r \\not\\in \\{0,1,3\\}$, then $f'$ does not destroy\nthe AP $(y,y+r,y+2r) = (y,3,6-y)$ when $y = 12$.\n\nIf $y+2r = 1$ and $y+r \\not\\in \\{0,1,3\\}$, then $f'$ does not destroy\nthe AP $(y,y+r,y+2r) = \\left(y,\\frac{y+1}{2},1\\right)$ when $y\n= 11$.\n\nOne readily checks that $f'$ destroys all other APs of the form\n$(y,y+r,y+2r)$ that do not contain $y$ and satisfy $\\{y+r, y+2r\\}\n\\cap \\{0,1,3\\} \\neq \\varnothing$.\n\\item If $\\{y-r,y+r\\} \\cap \\{0,1,3,y\\} = \\varnothing$, then $f'$\nsends the AP $(y-r,y,y+r)$ to $\\left(\\frac{1}{y-r},\\frac{1}{3},\\frac{1}{y+r}\\right)$,\nwhich is an AP when\n\n", "index": 25, "text": "$$\n\\frac{2}{3} = \\frac{1}{y-r} + \\frac{1}{y+r} \\ \\Longrightarrow\\ r^2 = y^2 - 3y.\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex10.m1\" class=\"ltx_Math\" alttext=\"\\frac{2}{3}=\\frac{1}{y-r}+\\frac{1}{y+r}\\ \\Longrightarrow\\ r^{2}=y^{2}-3y.\" display=\"block\"><mrow><mrow><mfrac><mn>2</mn><mn>3</mn></mfrac><mo>=</mo><mrow><mfrac><mn>1</mn><mrow><mi>y</mi><mo>-</mo><mi>r</mi></mrow></mfrac><mo>+</mo><mpadded width=\"+5pt\"><mfrac><mn>1</mn><mrow><mi>y</mi><mo>+</mo><mi>r</mi></mrow></mfrac></mpadded></mrow><mo rspace=\"7.5pt\">\u27f9</mo><msup><mi>r</mi><mn>2</mn></msup><mo>=</mo><mrow><msup><mi>y</mi><mn>2</mn></msup><mo>-</mo><mrow><mn>3</mn><mo>\u2062</mo><mi>y</mi></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nis chosen so that\n\n", "itemtype": "equation", "pos": 18735, "prevtext": "\nIf $y-r = 0$ and $y+r \\not\\in \\{0,1,3\\}$, then $f'$ does not destroy\nthe AP $(y-r,y,y+r) = (0,y,2y)$ when $y = - \\frac32$.\n\nIf $y-r = 1$ and $y+r \\not\\in \\{0,1,3\\}$, then $f'$ does not destroy\nthe AP $(y-r,y,y+r) = (1,y,2y-1)$ when $y = \\frac54$.\n\nIf $y-r = 3$ and $y+r \\not\\in \\{0,1,3\\}$, then $f'$ does not destroy\nthe AP $(y-r,y,y+r) = (3,y,2y-3)$ when $y= \\frac34$. One readily checks that $f'$ destroys all other\nAPs of the form $(y-r,y,y+r)$ that do not contain $y$ and satisfy\n$\\{y-r, y+r\\} \\cap \\{0,1,3\\} \\neq \\varnothing$.\n\\end{enumerate}\n\\end{enumerate}\nNow, taking $\\chi$ to be the Legendre symbol over ${\\mathbb F}_q$ as before,\nit follows from the above case analysis that if\n\n", "index": 27, "text": "$$y \\not\\in S \\defeq \\left\\{-\\frac{3}{2},-\\frac{3}{5},0, \\frac{1}{3},\\frac{3}{7},\\frac{2}{3},\\frac{3}{4},1,\\frac{5}{4},\\frac{12}{7},\\frac{3}{2},3,5,10,11,12\\right\\}$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex11.m1\" class=\"ltx_Math\" alttext=\"y\\not\\in S\\defeq\\left\\{-\\frac{3}{2},-\\frac{3}{5},0,\\frac{1}{3},\\frac{3}{7},%&#10;\\frac{2}{3},\\frac{3}{4},1,\\frac{5}{4},\\frac{12}{7},\\frac{3}{2},3,5,10,11,12\\right\\}\" display=\"block\"><mrow><mi>y</mi><mo>\u2209</mo><mrow><mi>S</mi><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\defeq</mtext></merror><mo>\u2062</mo><mrow><mo>{</mo><mrow><mo>-</mo><mfrac><mn>3</mn><mn>2</mn></mfrac></mrow><mo>,</mo><mrow><mo>-</mo><mfrac><mn>3</mn><mn>5</mn></mfrac></mrow><mo>,</mo><mn>0</mn><mo>,</mo><mfrac><mn>1</mn><mn>3</mn></mfrac><mo>,</mo><mfrac><mn>3</mn><mn>7</mn></mfrac><mo>,</mo><mfrac><mn>2</mn><mn>3</mn></mfrac><mo>,</mo><mfrac><mn>3</mn><mn>4</mn></mfrac><mo>,</mo><mn>1</mn><mo>,</mo><mfrac><mn>5</mn><mn>4</mn></mfrac><mo>,</mo><mfrac><mn>12</mn><mn>7</mn></mfrac><mo>,</mo><mfrac><mn>3</mn><mn>2</mn></mfrac><mo>,</mo><mn>3</mn><mo>,</mo><mn>5</mn><mo>,</mo><mn>10</mn><mo>,</mo><mn>11</mn><mo>,</mo><mn>12</mn><mo>}</mo></mrow></mrow></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nthen $f'$ destroys all APs other than the AP $(\\frac13, \\frac\n23,1)$ in ${\\mathbb F}_q$. Expanding the product on the left-hand-side\nof~\\eqref{ycond} under the assumption that $y \\neq 3$ (so that\n$\\chi((3-y)^2) = 1$), we obtain a lengthy expression that we denote\nby $B_q(y)$ for the sake of readability:\n \\scriptsize\n \n", "itemtype": "equation", "pos": 18920, "prevtext": "\nis chosen so that\n\n", "index": 29, "text": "\\begin{equation}\\label{ycond}\n\\big(1-\\chi((3-y)(3-9y))\\big) \\cdot \\big(1-\\chi(3(3-y))\\big) \\cdot\n\\big(1-\\chi((3-y)(27-y))\\big) \\cdot \\big(1-\\chi(-y(3-y))\\big) >\n0,\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E4.m1\" class=\"ltx_Math\" alttext=\"\\big{(}1-\\chi((3-y)(3-9y))\\big{)}\\cdot\\big{(}1-\\chi(3(3-y))\\big{)}\\cdot\\big{(}%&#10;1-\\chi((3-y)(27-y))\\big{)}\\cdot\\big{(}1-\\chi(-y(3-y))\\big{)}&gt;0,\" display=\"block\"><mrow><mrow><mrow><mrow><mo maxsize=\"120%\" minsize=\"120%\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mn>3</mn><mo>-</mo><mi>y</mi></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>3</mn><mo>-</mo><mrow><mn>9</mn><mo>\u2062</mo><mi>y</mi></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo maxsize=\"120%\" minsize=\"120%\">)</mo></mrow><mo>\u22c5</mo><mrow><mo maxsize=\"120%\" minsize=\"120%\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>3</mn><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>3</mn><mo>-</mo><mi>y</mi></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo maxsize=\"120%\" minsize=\"120%\">)</mo></mrow><mo>\u22c5</mo><mrow><mo maxsize=\"120%\" minsize=\"120%\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mn>3</mn><mo>-</mo><mi>y</mi></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>27</mn><mo>-</mo><mi>y</mi></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo maxsize=\"120%\" minsize=\"120%\">)</mo></mrow><mo>\u22c5</mo><mrow><mo maxsize=\"120%\" minsize=\"120%\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mo>-</mo><mrow><mi>y</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>3</mn><mo>-</mo><mi>y</mi></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo maxsize=\"120%\" minsize=\"120%\">)</mo></mrow></mrow><mo>&gt;</mo><mn>0</mn></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\n\\normalsize\nClearly, there exists $y \\in {\\mathbb F}_q \\setminus S$ satisfying~\\eqref{ycond}\nif and only if\n\n", "itemtype": "equation", "pos": 19418, "prevtext": "\nthen $f'$ destroys all APs other than the AP $(\\frac13, \\frac\n23,1)$ in ${\\mathbb F}_q$. Expanding the product on the left-hand-side\nof~\\eqref{ycond} under the assumption that $y \\neq 3$ (so that\n$\\chi((3-y)^2) = 1$), we obtain a lengthy expression that we denote\nby $B_q(y)$ for the sake of readability:\n \\scriptsize\n \n", "index": 31, "text": "\\begin{align*}\nB_q(y) & \\defeq \\big[1-\\chi((3-y)(\\tfrac{1}{3}-y)) - \\chi(9-3y)\n- \\chi((3-y)(27-y))-\\chi(y(y-3)) +\\chi(1-3y) + \\label{fateqn}\\\\\n& \\hphantom{==}\\chi((27-y)(\\tfrac{1}{3}-y))  + \\chi(y(y-\\tfrac{1}{3}))\n+ \\chi(3(27-y)) +\\chi(-3y) + \\chi(y(y-27))  - \\chi((3-y)(27-y)(1-3y))\n -  \\nonumber\\\\\n& \\hphantom{==}\\chi(y(3-y)(3y-1)) -\\chi(y(3-y)(27-y)(y-\\tfrac{1}{3}))\n- \\chi(3y(3-y)(y-27)) + \\chi(y(27-y)(3y-1))\\big].\\nonumber\n\\end{align*}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex12.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle B_{q}(y)\" display=\"inline\"><mrow><msub><mi>B</mi><mi>q</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex12.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle\\defeq\\big{[}1-\\chi((3-y)(\\tfrac{1}{3}-y))-\\chi(9-3y)-\\chi((3-y)(%&#10;27-y))-\\chi(y(y-3))+\\chi(1-3y)+\" display=\"inline\"><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\defeq</mtext></merror><mrow><mo maxsize=\"120%\" minsize=\"120%\">[</mo><mn>1</mn><mo>-</mo><mi>\u03c7</mi><mrow><mo stretchy=\"false\">(</mo><mrow><mo stretchy=\"false\">(</mo><mn>3</mn><mo>-</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mfrac><mn>1</mn><mn>3</mn></mfrac><mo>-</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo>-</mo><mi>\u03c7</mi><mrow><mo stretchy=\"false\">(</mo><mn>9</mn><mo>-</mo><mn>3</mn><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><mo>-</mo><mi>\u03c7</mi><mrow><mo stretchy=\"false\">(</mo><mrow><mo stretchy=\"false\">(</mo><mn>3</mn><mo>-</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mn>27</mn><mo>-</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo>-</mo><mi>\u03c7</mi><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mo>-</mo><mn>3</mn><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo>+</mo><mi>\u03c7</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>-</mo><mn>3</mn><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><mo>+</mo></mrow></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex13.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle\\hphantom{==}\\chi((27-y)(\\tfrac{1}{3}-y))+\\chi(y(y-\\tfrac{1}{3}))%&#10;+\\chi(3(27-y))+\\chi(-3y)+\\chi(y(y-27))-\\chi((3-y)(27-y)(1-3y))-\" display=\"inline\"><mrow><mrow><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mn>27</mn><mo>-</mo><mi>y</mi></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mfrac><mn>1</mn><mn>3</mn></mfrac><mo>-</mo><mi>y</mi></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>+</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>y</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>y</mi><mo>-</mo><mfrac><mn>1</mn><mn>3</mn></mfrac></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>+</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>3</mn><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>27</mn><mo>-</mo><mi>y</mi></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>+</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mo>-</mo><mrow><mn>3</mn><mo>\u2062</mo><mi>y</mi></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>+</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>y</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>y</mi><mo>-</mo><mn>27</mn></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>-</mo><mrow><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mn>3</mn><mo>-</mo><mi>y</mi></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>27</mn><mo>-</mo><mi>y</mi></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mn>3</mn><mo>\u2062</mo><mi>y</mi></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>-</mo></mrow></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex14.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle\\hphantom{==}\\chi(y(3-y)(3y-1))-\\chi(y(3-y)(27-y)(y-\\tfrac{1}{3})%&#10;)-\\chi(3y(3-y)(y-27))+\\chi(y(27-y)(3y-1))\\big{]}.\" display=\"inline\"><mrow><mi>\u03c7</mi><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mrow><mo stretchy=\"false\">(</mo><mn>3</mn><mo>-</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mn>3</mn><mi>y</mi><mo>-</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo>-</mo><mi>\u03c7</mi><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mrow><mo stretchy=\"false\">(</mo><mn>3</mn><mo>-</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mn>27</mn><mo>-</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mo>-</mo><mfrac><mn>1</mn><mn>3</mn></mfrac><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo>-</mo><mi>\u03c7</mi><mrow><mo stretchy=\"false\">(</mo><mn>3</mn><mi>y</mi><mrow><mo stretchy=\"false\">(</mo><mn>3</mn><mo>-</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mo>-</mo><mn>27</mn><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo>+</mo><mi>\u03c7</mi><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mrow><mo stretchy=\"false\">(</mo><mn>27</mn><mo>-</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mn>3</mn><mi>y</mi><mo>-</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo maxsize=\"120%\" minsize=\"120%\">]</mo><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nTo estimate $\\sum_{y \\in {\\mathbb F}_q \\setminus S} B_q(y)$, we first estimate\n$\\sum_{y \\in {\\mathbb F}_q} B_q(y)$, for which must invoke not only\nLemma~\\ref{thm:weil1} but also the Hasse bound~\\cite{borup}:\n\\begin{theorem}\\label{thm:weil2}\n{\\rm [Hasse]}\nLet ${\\mathbb F}_q$ be a finite field of odd characteristic,\nand let $\\chi$ be the Legendre symbol on ${\\mathbb F}_q$.\nIf $g \\in {\\mathbb F}_q[x]$ is a polynomial of degree $3$ or\n$4$ such that $g \\neq c \\cdot h^2$ for any $c \\in {\\mathbb F}_q$ and $h\n\\in {\\mathbb F}_q[x]$, then\n\n", "itemtype": "equation", "pos": 19968, "prevtext": "\n\\normalsize\nClearly, there exists $y \\in {\\mathbb F}_q \\setminus S$ satisfying~\\eqref{ycond}\nif and only if\n\n", "index": 33, "text": "\\begin{equation}\\label{opossum}\n\\sum_{y \\in {\\mathbb F}_q \\setminus S} B_q(y) > 0.\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E5.m1\" class=\"ltx_Math\" alttext=\"\\sum_{y\\in{\\mathbb{F}}_{q}\\setminus S}B_{q}(y)&gt;0.\" display=\"block\"><mrow><mrow><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>y</mi><mo>\u2208</mo><mrow><msub><mi>\ud835\udd3d</mi><mi>q</mi></msub><mo>\u2216</mo><mi>S</mi></mrow></mrow></munder><mrow><msub><mi>B</mi><mi>q</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>&gt;</mo><mn>0</mn></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nwhere $a$ is the coefficient of the degree-$4$ term in $g$.\n\\end{theorem}\nEach of the terms in $B_q(y)$ is of the form $\\chi(g(y))$ for some\npolynomial $g \\in {\\mathbb F}_q[x]$. Applying Lemma~\\ref{thm:weil1} to\nthe terms of the form $\\chi(g(y))$ where $g$ has degree at most~$2$,\nwe obtain a total contribution of $0$ from such terms. Then,\napplying Theorem~\\ref{thm:weil2} to the remaining terms, which\nare of the from $\\chi(g(y))$ where $g$ has degree $3$ or $4$,\nyields\n\n", "itemtype": "equation", "pos": 20601, "prevtext": "\nTo estimate $\\sum_{y \\in {\\mathbb F}_q \\setminus S} B_q(y)$, we first estimate\n$\\sum_{y \\in {\\mathbb F}_q} B_q(y)$, for which must invoke not only\nLemma~\\ref{thm:weil1} but also the Hasse bound~\\cite{borup}:\n\\begin{theorem}\\label{thm:weil2}\n{\\rm [Hasse]}\nLet ${\\mathbb F}_q$ be a finite field of odd characteristic,\nand let $\\chi$ be the Legendre symbol on ${\\mathbb F}_q$.\nIf $g \\in {\\mathbb F}_q[x]$ is a polynomial of degree $3$ or\n$4$ such that $g \\neq c \\cdot h^2$ for any $c \\in {\\mathbb F}_q$ and $h\n\\in {\\mathbb F}_q[x]$, then\n\n", "index": 35, "text": "\\begin{equation}\\label{thm1}\n\\Bigl|\\chi(a) + \\sum_{y \\in {\\mathbb F}_q} \\chi(g(y))\\Bigr| \\leq 2\\sqrt{q},\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E6.m1\" class=\"ltx_Math\" alttext=\"\\Bigl{|}\\chi(a)+\\sum_{y\\in{\\mathbb{F}}_{q}}\\chi(g(y))\\Bigr{|}\\leq 2\\sqrt{q},\" display=\"block\"><mrow><mrow><mrow><mo fence=\"true\" maxsize=\"160%\" minsize=\"160%\">|</mo><mrow><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo>+</mo><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>y</mi><mo>\u2208</mo><msub><mi>\ud835\udd3d</mi><mi>q</mi></msub></mrow></munder><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mi>g</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow></mrow><mo fence=\"true\" maxsize=\"160%\" minsize=\"160%\">|</mo></mrow><mo>\u2264</mo><mrow><mn>2</mn><mo>\u2062</mo><msqrt><mi>q</mi></msqrt></mrow></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nEstimating $\\sum_{y \\in S} B_q(y)$ by using the trivial bound $|\\chi(g(y))|\n\\leq 1$ for each $y \\in S$ unless $g(y) = 0$ (which can occur when\n$y \\in \\{0,\\frac13,3\\}$), we find that\n\n\n", "itemtype": "equation", "pos": 21195, "prevtext": "\nwhere $a$ is the coefficient of the degree-$4$ term in $g$.\n\\end{theorem}\nEach of the terms in $B_q(y)$ is of the form $\\chi(g(y))$ for some\npolynomial $g \\in {\\mathbb F}_q[x]$. Applying Lemma~\\ref{thm:weil1} to\nthe terms of the form $\\chi(g(y))$ where $g$ has degree at most~$2$,\nwe obtain a total contribution of $0$ from such terms. Then,\napplying Theorem~\\ref{thm:weil2} to the remaining terms, which\nare of the from $\\chi(g(y))$ where $g$ has degree $3$ or $4$,\nyields\n\n", "index": 37, "text": "\\begin{equation}\\label{est1}\n\\sum_{y \\in {\\mathbb F}_q} B_q(y) \\geq q- 10\\sqrt{q} - 3.\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E7.m1\" class=\"ltx_Math\" alttext=\"\\sum_{y\\in{\\mathbb{F}}_{q}}B_{q}(y)\\geq q-10\\sqrt{q}-3.\" display=\"block\"><mrow><mrow><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>y</mi><mo>\u2208</mo><msub><mi>\ud835\udd3d</mi><mi>q</mi></msub></mrow></munder><mrow><msub><mi>B</mi><mi>q</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>\u2265</mo><mrow><mi>q</mi><mo>-</mo><mrow><mn>10</mn><mo>\u2062</mo><msqrt><mi>q</mi></msqrt></mrow><mo>-</mo><mn>3</mn></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nCombining the estimates~\\eqref{est1} and~\\eqref{est2}, we deduce\nthat~\\eqref{opossum} holds if $q - 10\\sqrt{q} \\geq 87$, which happens\nwhen $q \\geq 243$. Thus, there exists $y \\in {\\mathbb F}_q \\setminus S$\nsuch that $f'$ destroys all APs other than the AP $(\\frac13,\\frac\n23,1)$ in ${\\mathbb F}_q$ for $q \\geq 243$ a prime power.\n\n\\subsection{Destroying $(\\frac13, \\frac23,1)$ in the Case $p > 3$}\n\nWe now perform an analogous maneuver to construct a permutation\nthat destroys \\emph{all} APs in ${\\mathbb F}_q$ for sufficiently large\n$q$. With $q \\geq 243$, take $y \\in {\\mathbb F}_q \\setminus S$ so that\nthe permutation $f'$ destroys all APs other than the AP\n$(\\frac 13, \\frac23,1)$, and for\n$z \\in {\\mathbb F}_q \\setminus \\{0, \\frac13, \\frac 23,1, \\frac 32,3,y\\}$,\nconsider the permutation $f''$ obtained by switching the images of\n$\\frac13$ and $z$ under $f'$ (i.e.~$f'(\\frac13) = \\frac1z$,\n$f'(z) = 3$, and $f''(x) = f'(x)$ otherwise).\nThe AP $(\\frac13,\\frac23,1)$ is clearly destroyed by $f''$, as\n$z \\neq \\frac13$. Thus, by Lemma~\\ref{lem:almostwreck}, if an\nAP is not destroyed by $f''$, it must either \\textsf{(A)} contain\n$\\frac13$ but not $z$ or \\textsf{(B)} contain $z$. The cases \\textsf{(A)}\nand \\textsf{(B)} each have two subcases depending on the position\nof $\\frac13$ or $z$ in the AP; we study each of these subcases\nseparately as follows:\n\\begin{enumerate}\n\\item[{\\sf (A)}]\n\\begin{enumerate}\n\\item If $\\{\\frac13+r, \\frac13+2r\\} \\cap \\{0,\\frac13,1,3,y,z\\}\n= \\varnothing$, then $f''$ sends the AP $(\\frac13,\\frac13+r,\\frac\n13+2r)$ to $\\left(\\frac{1}{z},\\frac{1}{\\frac13+r},\\frac{1}{\\frac\n13+2r}\\right)$, which is an AP when\n\n", "itemtype": "equation", "pos": 21480, "prevtext": "\nEstimating $\\sum_{y \\in S} B_q(y)$ by using the trivial bound $|\\chi(g(y))|\n\\leq 1$ for each $y \\in S$ unless $g(y) = 0$ (which can occur when\n$y \\in \\{0,\\frac13,3\\}$), we find that\n\n\n", "index": 39, "text": "\\begin{equation}\\label{est2}\n\\sum_{y \\in S} B_q(y) \\leq 84.\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E8.m1\" class=\"ltx_Math\" alttext=\"\\sum_{y\\in S}B_{q}(y)\\leq 84.\" display=\"block\"><mrow><mrow><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>y</mi><mo>\u2208</mo><mi>S</mi></mrow></munder><mrow><msub><mi>B</mi><mi>q</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>\u2264</mo><mn>84</mn></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nWe must now deal with the cases where the AP does not contain $z$\nbut $\\{\\frac13+r, \\frac13+2r\\} \\cap \\{0,\\frac13,1,3,y\\} \\neq\n\\varnothing$; as the computations are more complicated and numerous\nin the present situation, we will not be as explicit as we were\nin Section~\\ref{simsec}.\nIf $\\frac13 + r = 0$ and $\\frac13 + 2r = - \\frac13 \\neq z$,\nthen there is at most one value of $z$, call it $a_1$, such that\n$f''$ does not destroy the AP $(\\frac13, 0, -\\frac13)$. (The\nvalue $a_1$, if it exists, is uniquely determined by the particular\nfield ${\\mathbb F}_q$ with which we are working.)\nSimilarly, from the cases where $\\frac13 + r \\in \\{1,3,y\\}$, there\nare at most three additional values of $z$, call them $a_2, a_3, a_4$,\nsuch that $f''$ does not destroy the AP $(\\frac13, \\frac13+r, \\frac13+2r)$.\nFrom the cases where $\\frac13 + 2r \\in \\{0,3,y\\}$, there are at most\nthree values of $z$, call them $a_5, a_6, a_7$, such that\n$f''$ does not destroy the AP $(\\frac13, \\frac13+r, \\frac13+2r)$.\nOne readily checks that $f''$ destroys all other APs of the form\n$(\\frac 13,\\frac 13+r,\\frac 13+2r)$ that do not contain $z$.\n\\item If $\\{\\frac13 -r, \\frac13 +r\\} \\cap \\{0,\\frac13,1,3,y,z\\} = \\varnothing$,\nthen $f''$ sends the AP $(\\frac 13 -r,\\frac 13,\\frac 13+r)$ to\n$\\left(\\frac{1}{\\frac 13 -r},\\frac{1}{z},\\frac{1}{\\frac 13 +r}\\right)$,\nwhich is an AP when\n\n", "itemtype": "equation", "pos": 23197, "prevtext": "\nCombining the estimates~\\eqref{est1} and~\\eqref{est2}, we deduce\nthat~\\eqref{opossum} holds if $q - 10\\sqrt{q} \\geq 87$, which happens\nwhen $q \\geq 243$. Thus, there exists $y \\in {\\mathbb F}_q \\setminus S$\nsuch that $f'$ destroys all APs other than the AP $(\\frac13,\\frac\n23,1)$ in ${\\mathbb F}_q$ for $q \\geq 243$ a prime power.\n\n\\subsection{Destroying $(\\frac13, \\frac23,1)$ in the Case $p > 3$}\n\nWe now perform an analogous maneuver to construct a permutation\nthat destroys \\emph{all} APs in ${\\mathbb F}_q$ for sufficiently large\n$q$. With $q \\geq 243$, take $y \\in {\\mathbb F}_q \\setminus S$ so that\nthe permutation $f'$ destroys all APs other than the AP\n$(\\frac 13, \\frac23,1)$, and for\n$z \\in {\\mathbb F}_q \\setminus \\{0, \\frac13, \\frac 23,1, \\frac 32,3,y\\}$,\nconsider the permutation $f''$ obtained by switching the images of\n$\\frac13$ and $z$ under $f'$ (i.e.~$f'(\\frac13) = \\frac1z$,\n$f'(z) = 3$, and $f''(x) = f'(x)$ otherwise).\nThe AP $(\\frac13,\\frac23,1)$ is clearly destroyed by $f''$, as\n$z \\neq \\frac13$. Thus, by Lemma~\\ref{lem:almostwreck}, if an\nAP is not destroyed by $f''$, it must either \\textsf{(A)} contain\n$\\frac13$ but not $z$ or \\textsf{(B)} contain $z$. The cases \\textsf{(A)}\nand \\textsf{(B)} each have two subcases depending on the position\nof $\\frac13$ or $z$ in the AP; we study each of these subcases\nseparately as follows:\n\\begin{enumerate}\n\\item[{\\sf (A)}]\n\\begin{enumerate}\n\\item If $\\{\\frac13+r, \\frac13+2r\\} \\cap \\{0,\\frac13,1,3,y,z\\}\n= \\varnothing$, then $f''$ sends the AP $(\\frac13,\\frac13+r,\\frac\n13+2r)$ to $\\left(\\frac{1}{z},\\frac{1}{\\frac13+r},\\frac{1}{\\frac\n13+2r}\\right)$, which is an AP when\n\n", "index": 41, "text": "$$\n\\frac{2}{\\frac13+r} = \\frac{1}{z} + \\frac{1}{\\frac13+2r}\n\\ \\Longrightarrow\\\n2r^2 + (1-3z)r + (\\tfrac19 - \\tfrac z3) = 0.\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex15.m1\" class=\"ltx_Math\" alttext=\"\\frac{2}{\\frac{1}{3}+r}=\\frac{1}{z}+\\frac{1}{\\frac{1}{3}+2r}\\ \\Longrightarrow%&#10;\\ 2r^{2}+(1-3z)r+(\\tfrac{1}{9}-\\tfrac{z}{3})=0.\" display=\"block\"><mrow><mrow><mfrac><mn>2</mn><mrow><mfrac><mn>1</mn><mn>3</mn></mfrac><mo>+</mo><mi>r</mi></mrow></mfrac><mo>=</mo><mrow><mfrac><mn>1</mn><mi>z</mi></mfrac><mo>+</mo><mpadded width=\"+5pt\"><mfrac><mn>1</mn><mrow><mfrac><mn>1</mn><mn>3</mn></mfrac><mo>+</mo><mrow><mn>2</mn><mo>\u2062</mo><mi>r</mi></mrow></mrow></mfrac></mpadded></mrow><mo>\u27f9</mo><mrow><mrow><mn>\u20052</mn><mo>\u2062</mo><msup><mi>r</mi><mn>2</mn></msup></mrow><mo>+</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mn>3</mn><mo>\u2062</mo><mi>z</mi></mrow></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mi>r</mi></mrow><mo>+</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mstyle displaystyle=\"false\"><mfrac><mn>1</mn><mn>9</mn></mfrac></mstyle><mo>-</mo><mstyle displaystyle=\"false\"><mfrac><mi>z</mi><mn>3</mn></mfrac></mstyle></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mn>0</mn></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nFrom the cases where $\\frac 13 - r \\in \\{0,1,3,y\\}$, there are\nat most four values of $z$, call them $a_8, a_9, a_{10}, a_{11}$,\nsuch that $f''$ does not destroy the AP $(\\frac 13 -r,\\frac 13,\\frac\n13+r)$. By symmetry, we have also taken care of the cases where\n$\\frac 13 + r \\in \\{0,1,3,y\\}$. One readily checks that $f''$ destroys\nall other APs of the form $(\\frac 13 -r,\\frac 13,\\frac 13+r)$ that\ndo not contain $z$.\n\\end{enumerate}\n\\item[{\\sf (B)}]\n\\begin{enumerate}\n\\item If $\\{z+r,z+2r\\} \\cap \\{0,\\frac 13,1,3,y,z\\} = \\varnothing$,\nthen the AP $(z,z+r,z+2r)$ is sent under $f''$ to $\\left(3,\\frac{1}{z+r},\\frac{1}{z+2r}\\right)$,\nwhich is an AP when\n\n", "itemtype": "equation", "pos": 24680, "prevtext": "\nWe must now deal with the cases where the AP does not contain $z$\nbut $\\{\\frac13+r, \\frac13+2r\\} \\cap \\{0,\\frac13,1,3,y\\} \\neq\n\\varnothing$; as the computations are more complicated and numerous\nin the present situation, we will not be as explicit as we were\nin Section~\\ref{simsec}.\nIf $\\frac13 + r = 0$ and $\\frac13 + 2r = - \\frac13 \\neq z$,\nthen there is at most one value of $z$, call it $a_1$, such that\n$f''$ does not destroy the AP $(\\frac13, 0, -\\frac13)$. (The\nvalue $a_1$, if it exists, is uniquely determined by the particular\nfield ${\\mathbb F}_q$ with which we are working.)\nSimilarly, from the cases where $\\frac13 + r \\in \\{1,3,y\\}$, there\nare at most three additional values of $z$, call them $a_2, a_3, a_4$,\nsuch that $f''$ does not destroy the AP $(\\frac13, \\frac13+r, \\frac13+2r)$.\nFrom the cases where $\\frac13 + 2r \\in \\{0,3,y\\}$, there are at most\nthree values of $z$, call them $a_5, a_6, a_7$, such that\n$f''$ does not destroy the AP $(\\frac13, \\frac13+r, \\frac13+2r)$.\nOne readily checks that $f''$ destroys all other APs of the form\n$(\\frac 13,\\frac 13+r,\\frac 13+2r)$ that do not contain $z$.\n\\item If $\\{\\frac13 -r, \\frac13 +r\\} \\cap \\{0,\\frac13,1,3,y,z\\} = \\varnothing$,\nthen $f''$ sends the AP $(\\frac 13 -r,\\frac 13,\\frac 13+r)$ to\n$\\left(\\frac{1}{\\frac 13 -r},\\frac{1}{z},\\frac{1}{\\frac 13 +r}\\right)$,\nwhich is an AP when\n\n", "index": 43, "text": "$$\n\\frac2z = \\frac{1}{\\frac13 - r} + \\frac{1}{\\frac 13 +r} \\ \\Longrightarrow\\\nr^2 = \\frac19 - \\frac{z}{3}3.\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex16.m1\" class=\"ltx_Math\" alttext=\"\\frac{2}{z}=\\frac{1}{\\frac{1}{3}-r}+\\frac{1}{\\frac{1}{3}+r}\\ \\Longrightarrow\\ %&#10;r^{2}=\\frac{1}{9}-\\frac{z}{3}3.\" display=\"block\"><mrow><mrow><mfrac><mn>2</mn><mi>z</mi></mfrac><mo>=</mo><mrow><mfrac><mn>1</mn><mrow><mfrac><mn>1</mn><mn>3</mn></mfrac><mo>-</mo><mi>r</mi></mrow></mfrac><mo>+</mo><mpadded width=\"+5pt\"><mfrac><mn>1</mn><mrow><mfrac><mn>1</mn><mn>3</mn></mfrac><mo>+</mo><mi>r</mi></mrow></mfrac></mpadded></mrow><mo rspace=\"7.5pt\">\u27f9</mo><msup><mi>r</mi><mn>2</mn></msup><mo>=</mo><mrow><mfrac><mn>1</mn><mn>9</mn></mfrac><mo>-</mo><mrow><mfrac><mi>z</mi><mn>3</mn></mfrac><mo>\u2062</mo><mn>3</mn></mrow></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nThe cases where $\\{z+r,z+2r\\} \\cap \\{0,\\frac 13,1,3,y\\} \\neq \\varnothing$\ngive at most $25$ values of $z$, call them $a_{12}, \\dots, a_{36}$,\nsuch that $f''$ does not destroy the AP $(z,z+r,z+2r)$. (We need\nto be careful when we take either $z + r = \\frac 13$ or $z+2r =\n\\frac 13$, as the resulting equation for $z$ is quadratic, but\none of the solutions will always yield a constant progression.)\nOne readily checks that $f''$ destroys all other APs of the form\n$(z,z+r,z+2r)$ that do not contain $z$.\n\\item If $\\{z-r,z+r\\} \\cap \\{0,\\frac 13,1,3,y,z\\} = \\varnothing$,\nthen the AP $(z-r,z,z+r)$ is sent under $f''$ to $\\left(\\frac{1}{z-r},3,\\frac{1}{z+r}\\right)$,\nwhich is an AP when\n\n", "itemtype": "equation", "pos": 25446, "prevtext": "\nFrom the cases where $\\frac 13 - r \\in \\{0,1,3,y\\}$, there are\nat most four values of $z$, call them $a_8, a_9, a_{10}, a_{11}$,\nsuch that $f''$ does not destroy the AP $(\\frac 13 -r,\\frac 13,\\frac\n13+r)$. By symmetry, we have also taken care of the cases where\n$\\frac 13 + r \\in \\{0,1,3,y\\}$. One readily checks that $f''$ destroys\nall other APs of the form $(\\frac 13 -r,\\frac 13,\\frac 13+r)$ that\ndo not contain $z$.\n\\end{enumerate}\n\\item[{\\sf (B)}]\n\\begin{enumerate}\n\\item If $\\{z+r,z+2r\\} \\cap \\{0,\\frac 13,1,3,y,z\\} = \\varnothing$,\nthen the AP $(z,z+r,z+2r)$ is sent under $f''$ to $\\left(3,\\frac{1}{z+r},\\frac{1}{z+2r}\\right)$,\nwhich is an AP when\n\n", "index": 45, "text": "$$\n\\frac{2}{z+r} = 3 + \\frac{1}{z+2r} \\ \\Longrightarrow\\\n6r^2 + (9z-3)r + (3z^2 - z) = 0.\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex17.m1\" class=\"ltx_Math\" alttext=\"\\frac{2}{z+r}=3+\\frac{1}{z+2r}\\ \\Longrightarrow\\ 6r^{2}+(9z-3)r+(3z^{2}-z)=0.\" display=\"block\"><mrow><mrow><mfrac><mn>2</mn><mrow><mi>z</mi><mo>+</mo><mi>r</mi></mrow></mfrac><mo>=</mo><mrow><mn>3</mn><mo>+</mo><mpadded width=\"+5pt\"><mfrac><mn>1</mn><mrow><mi>z</mi><mo>+</mo><mrow><mn>2</mn><mo>\u2062</mo><mi>r</mi></mrow></mrow></mfrac></mpadded></mrow><mo>\u27f9</mo><mrow><mrow><mn>\u20056</mn><mo>\u2062</mo><msup><mi>r</mi><mn>2</mn></msup></mrow><mo>+</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mrow><mn>9</mn><mo>\u2062</mo><mi>z</mi></mrow><mo>-</mo><mn>3</mn></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mi>r</mi></mrow><mo>+</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mrow><mn>3</mn><mo>\u2062</mo><msup><mi>z</mi><mn>2</mn></msup></mrow><mo>-</mo><mi>z</mi></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>=</mo><mn>0</mn></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nThe cases where $z-r \\in \\{0,\\frac 13,1,3,y\\} \\neq \\varnothing$\ngive at most $5$ values of $z$, call them $a_{37}, a_{38}, a_{39},\na_{40}, a_{41}$, such that $f''$ does not destroy the AP $(z-r,z,z+r)$.\nOne readily checks that $f''$ destroys all other APs of the form\n$(z-r,z,z+r)$ that do not contain $z$.\n\\end{enumerate}\n\\end{enumerate}\nNow, it follows from the above case analysis that if\n\n", "itemtype": "equation", "pos": 26223, "prevtext": "\nThe cases where $\\{z+r,z+2r\\} \\cap \\{0,\\frac 13,1,3,y\\} \\neq \\varnothing$\ngive at most $25$ values of $z$, call them $a_{12}, \\dots, a_{36}$,\nsuch that $f''$ does not destroy the AP $(z,z+r,z+2r)$. (We need\nto be careful when we take either $z + r = \\frac 13$ or $z+2r =\n\\frac 13$, as the resulting equation for $z$ is quadratic, but\none of the solutions will always yield a constant progression.)\nOne readily checks that $f''$ destroys all other APs of the form\n$(z,z+r,z+2r)$ that do not contain $z$.\n\\item If $\\{z-r,z+r\\} \\cap \\{0,\\frac 13,1,3,y,z\\} = \\varnothing$,\nthen the AP $(z-r,z,z+r)$ is sent under $f''$ to $\\left(\\frac{1}{z-r},3,\\frac{1}{z+r}\\right)$,\nwhich is an AP when\n\n", "index": 47, "text": "$$\n6 = \\frac{1}{z-r} + \\frac{1}{z+r} \\ \\Longrightarrow\\ r^2 = z^2 - \\frac{z}{3}.\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex18.m1\" class=\"ltx_Math\" alttext=\"6=\\frac{1}{z-r}+\\frac{1}{z+r}\\ \\Longrightarrow\\ r^{2}=z^{2}-\\frac{z}{3}.\" display=\"block\"><mrow><mrow><mn>6</mn><mo>=</mo><mrow><mfrac><mn>1</mn><mrow><mi>z</mi><mo>-</mo><mi>r</mi></mrow></mfrac><mo>+</mo><mpadded width=\"+5pt\"><mfrac><mn>1</mn><mrow><mi>z</mi><mo>+</mo><mi>r</mi></mrow></mfrac></mpadded></mrow><mo rspace=\"7.5pt\">\u27f9</mo><msup><mi>r</mi><mn>2</mn></msup><mo>=</mo><mrow><msup><mi>z</mi><mn>2</mn></msup><mo>-</mo><mfrac><mi>z</mi><mn>3</mn></mfrac></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nis chosen so that we have\n\n", "itemtype": "equation", "pos": 26699, "prevtext": "\nThe cases where $z-r \\in \\{0,\\frac 13,1,3,y\\} \\neq \\varnothing$\ngive at most $5$ values of $z$, call them $a_{37}, a_{38}, a_{39},\na_{40}, a_{41}$, such that $f''$ does not destroy the AP $(z-r,z,z+r)$.\nOne readily checks that $f''$ destroys all other APs of the form\n$(z-r,z,z+r)$ that do not contain $z$.\n\\end{enumerate}\n\\end{enumerate}\nNow, it follows from the above case analysis that if\n\n", "index": 49, "text": "$$\nz \\not\\in S' \\defeq\n   \\left\\{a_i : 1 \\leq i \\leq 41\\right\\}\n \\cup\n  \\left\\{0, \\frac 13, \\frac 23,1, \\frac 32,3,y\\right\\}\n$$\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex19.m1\" class=\"ltx_Math\" alttext=\"z\\not\\in S^{\\prime}\\defeq\\left\\{a_{i}:1\\leq i\\leq 41\\right\\}\\cup\\left\\{0,\\frac%&#10;{1}{3},\\frac{2}{3},1,\\frac{3}{2},3,y\\right\\}\" display=\"block\"><mrow><mi>z</mi><mo>\u2209</mo><mrow><mrow><msup><mi>S</mi><mo>\u2032</mo></msup><mo>\u2062</mo><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\defeq</mtext></merror><mo>\u2062</mo><mrow><mo>{</mo><msub><mi>a</mi><mi>i</mi></msub><mo>:</mo><mrow><mn>1</mn><mo>\u2264</mo><mi>i</mi><mo>\u2264</mo><mn>41</mn></mrow><mo>}</mo></mrow></mrow><mo>\u222a</mo><mrow><mo>{</mo><mn>0</mn><mo>,</mo><mfrac><mn>1</mn><mn>3</mn></mfrac><mo>,</mo><mfrac><mn>2</mn><mn>3</mn></mfrac><mo>,</mo><mn>1</mn><mo>,</mo><mfrac><mn>3</mn><mn>2</mn></mfrac><mo>,</mo><mn>3</mn><mo>,</mo><mi>y</mi><mo>}</mo></mrow></mrow></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nthen $f''$ destroys all APs in ${\\mathbb F}_q$. Expanding the product on\nthe left-hand-side of~\\eqref{neweqs} under the assumption that\n$z \\neq \\frac 13$ (so that $\\chi((1-3z)^2) = 1$), we obtain a lengthy\nexpression that we denote by $C_q(z)$ for the sake of readability:\n \\scriptsize\n \n", "itemtype": "equation", "pos": 26853, "prevtext": "\nis chosen so that we have\n\n", "index": 51, "text": "\\begin{equation}\\label{neweqs}\n\\big(1-\\chi((1-27z)(1-3z))\\big) \\cdot \\big(1-\\chi(1-3z)\\big) \\cdot\n\\big(1-\\chi((1-3z)(1 - \\tfrac z3 ))\\big) \\cdot \\big(1-\\chi(-3z(1-3z))\\big)\n> 0,\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E9.m1\" class=\"ltx_Math\" alttext=\"\\big{(}1-\\chi((1-27z)(1-3z))\\big{)}\\cdot\\big{(}1-\\chi(1-3z)\\big{)}\\cdot\\big{(}%&#10;1-\\chi((1-3z)(1-\\tfrac{z}{3}))\\big{)}\\cdot\\big{(}1-\\chi(-3z(1-3z))\\big{)}&gt;0,\" display=\"block\"><mrow><mrow><mrow><mrow><mo maxsize=\"120%\" minsize=\"120%\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mn>27</mn><mo>\u2062</mo><mi>z</mi></mrow></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mn>3</mn><mo>\u2062</mo><mi>z</mi></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo maxsize=\"120%\" minsize=\"120%\">)</mo></mrow><mo>\u22c5</mo><mrow><mo maxsize=\"120%\" minsize=\"120%\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mn>3</mn><mo>\u2062</mo><mi>z</mi></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo maxsize=\"120%\" minsize=\"120%\">)</mo></mrow><mo>\u22c5</mo><mrow><mo maxsize=\"120%\" minsize=\"120%\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mn>3</mn><mo>\u2062</mo><mi>z</mi></mrow></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><mstyle displaystyle=\"false\"><mfrac><mi>z</mi><mn>3</mn></mfrac></mstyle></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo maxsize=\"120%\" minsize=\"120%\">)</mo></mrow><mo>\u22c5</mo><mrow><mo maxsize=\"120%\" minsize=\"120%\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mo>-</mo><mrow><mn>3</mn><mo>\u2062</mo><mi>z</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mn>3</mn><mo>\u2062</mo><mi>z</mi></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo maxsize=\"120%\" minsize=\"120%\">)</mo></mrow></mrow><mo>&gt;</mo><mn>0</mn></mrow><mo>,</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\n\\normalsize\nClearly, there exists $z \\in {\\mathbb F}_q \\setminus S'$ satisfying~\\eqref{neweqs}\nif and only if\n\n", "itemtype": "equation", "pos": 27333, "prevtext": "\nthen $f''$ destroys all APs in ${\\mathbb F}_q$. Expanding the product on\nthe left-hand-side of~\\eqref{neweqs} under the assumption that\n$z \\neq \\frac 13$ (so that $\\chi((1-3z)^2) = 1$), we obtain a lengthy\nexpression that we denote by $C_q(z)$ for the sake of readability:\n \\scriptsize\n \n", "index": 53, "text": "\\begin{align*}\nC_q(z) & \\defeq \\big[1-\\chi((1-27z)(1-3z)) - \\chi(1-3z) - \\chi((1-3z)(1\n- \\tfrac z3 ))-\\chi(-3z(1-3z)) +\\chi(1-27z) + \\label{fateqn}\\\\\n& \\hphantom{==}\\chi((1-27z)(1-\\tfrac{z}{3}))  + \\chi(-3z(1-27z))\n+ \\chi(1 - \\tfrac z3) +\\chi(-3z) + \\chi(-3z(1 - \\tfrac z3))  -\n\\chi((1-3z)(1-\\tfrac z3)(1-27z))  -  \\nonumber\\\\\n& \\hphantom{==}\\chi(-3z(1-3z)(1-27z)) -\\chi(-3z(1-3z)(1-\\tfrac\nz3)(1-27z)) - \\chi(-3z(1-3z)(1-\\tfrac z3)) + \\chi(-3z(1-\\tfrac\nz3)(1-27z))\\big].\\nonumber\n\\end{align*}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex20.m1\" class=\"ltx_Math\" alttext=\"\\displaystyle C_{q}(z)\" display=\"inline\"><mrow><msub><mi>C</mi><mi>q</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo></mrow></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex20.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle\\defeq\\big{[}1-\\chi((1-27z)(1-3z))-\\chi(1-3z)-\\chi((1-3z)(1-%&#10;\\tfrac{z}{3}))-\\chi(-3z(1-3z))+\\chi(1-27z)+\" display=\"inline\"><mrow><merror class=\"ltx_ERROR undefined undefined\"><mtext>\\defeq</mtext></merror><mrow><mo maxsize=\"120%\" minsize=\"120%\">[</mo><mn>1</mn><mo>-</mo><mi>\u03c7</mi><mrow><mo stretchy=\"false\">(</mo><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>-</mo><mn>27</mn><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>-</mo><mn>3</mn><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo>-</mo><mi>\u03c7</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>-</mo><mn>3</mn><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><mo>-</mo><mi>\u03c7</mi><mrow><mo stretchy=\"false\">(</mo><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>-</mo><mn>3</mn><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>-</mo><mfrac><mi>z</mi><mn>3</mn></mfrac><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo>-</mo><mi>\u03c7</mi><mrow><mo stretchy=\"false\">(</mo><mo>-</mo><mn>3</mn><mi>z</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>-</mo><mn>3</mn><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo>+</mo><mi>\u03c7</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>-</mo><mn>27</mn><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><mo>+</mo></mrow></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex21.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle\\hphantom{==}\\chi((1-27z)(1-\\tfrac{z}{3}))+\\chi(-3z(1-27z))+\\chi(%&#10;1-\\tfrac{z}{3})+\\chi(-3z)+\\chi(-3z(1-\\tfrac{z}{3}))-\\chi((1-3z)(1-\\tfrac{z}{3}%&#10;)(1-27z))-\" display=\"inline\"><mrow><mrow><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mn>27</mn><mo>\u2062</mo><mi>z</mi></mrow></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><mfrac><mi>z</mi><mn>3</mn></mfrac></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>+</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mo>-</mo><mrow><mn>3</mn><mo>\u2062</mo><mi>z</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mn>27</mn><mo>\u2062</mo><mi>z</mi></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>+</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><mfrac><mi>z</mi><mn>3</mn></mfrac></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>+</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mo>-</mo><mrow><mn>3</mn><mo>\u2062</mo><mi>z</mi></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>+</mo><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mo>-</mo><mrow><mn>3</mn><mo>\u2062</mo><mi>z</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><mfrac><mi>z</mi><mn>3</mn></mfrac></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>-</mo><mrow><mrow><mi>\u03c7</mi><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mn>3</mn><mo>\u2062</mo><mi>z</mi></mrow></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><mfrac><mi>z</mi><mn>3</mn></mfrac></mrow><mo stretchy=\"false\">)</mo></mrow><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><mn>27</mn><mo>\u2062</mo><mi>z</mi></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo stretchy=\"false\">)</mo></mrow></mrow><mo>-</mo></mrow></mrow></math>\n<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.Ex22.m2\" class=\"ltx_Math\" alttext=\"\\displaystyle\\hphantom{==}\\chi(-3z(1-3z)(1-27z))-\\chi(-3z(1-3z)(1-\\tfrac{z}{3}%&#10;)(1-27z))-\\chi(-3z(1-3z)(1-\\tfrac{z}{3}))+\\chi(-3z(1-\\tfrac{z}{3})(1-27z))\\big%&#10;{]}.\" display=\"inline\"><mrow><mi>\u03c7</mi><mrow><mo stretchy=\"false\">(</mo><mo>-</mo><mn>3</mn><mi>z</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>-</mo><mn>3</mn><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>-</mo><mn>27</mn><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo>-</mo><mi>\u03c7</mi><mrow><mo stretchy=\"false\">(</mo><mo>-</mo><mn>3</mn><mi>z</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>-</mo><mn>3</mn><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>-</mo><mfrac><mi>z</mi><mn>3</mn></mfrac><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>-</mo><mn>27</mn><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo>-</mo><mi>\u03c7</mi><mrow><mo stretchy=\"false\">(</mo><mo>-</mo><mn>3</mn><mi>z</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>-</mo><mn>3</mn><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>-</mo><mfrac><mi>z</mi><mn>3</mn></mfrac><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo>+</mo><mi>\u03c7</mi><mrow><mo stretchy=\"false\">(</mo><mo>-</mo><mn>3</mn><mi>z</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>-</mo><mfrac><mi>z</mi><mn>3</mn></mfrac><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>-</mo><mn>27</mn><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo maxsize=\"120%\" minsize=\"120%\">]</mo><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nTo estimate $\\sum_{z \\in {\\mathbb F}_q \\setminus S'} C_q(z)$, we first\nestimate $\\sum_{z \\in {\\mathbb F}_q} C_q(z)$ using Lemma~\\ref{thm:weil1}\nand Theorem~\\ref{thm:weil2}. Each of the terms in $C_q(z)$ is of\nthe form $\\chi(g(z))$ for some polynomial $g \\in {\\mathbb F}_q[x]$. Applying\nLemma~\\ref{thm:weil1} to the terms of the form $\\chi(g(z))$ where\n$g$ has degree at most $2$, we obtain a total contribution of $0$\nfrom such terms. Then, applying Theorem~\\ref{thm:weil2} to the remaining\nterms, which are of the from $\\chi(g(y))$ with $g$ of degree $3$ or $4$,\nyields\n\n", "itemtype": "equation", "pos": 27936, "prevtext": "\n\\normalsize\nClearly, there exists $z \\in {\\mathbb F}_q \\setminus S'$ satisfying~\\eqref{neweqs}\nif and only if\n\n", "index": 55, "text": "\\begin{equation}\\label{opossum2}\n\\sum_{z \\in {\\mathbb F}_q \\setminus S'} C_q(z) > 0.\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E10.m1\" class=\"ltx_Math\" alttext=\"\\sum_{z\\in{\\mathbb{F}}_{q}\\setminus S^{\\prime}}C_{q}(z)&gt;0.\" display=\"block\"><mrow><mrow><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>z</mi><mo>\u2208</mo><mrow><msub><mi>\ud835\udd3d</mi><mi>q</mi></msub><mo>\u2216</mo><msup><mi>S</mi><mo>\u2032</mo></msup></mrow></mrow></munder><mrow><msub><mi>C</mi><mi>q</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>&gt;</mo><mn>0</mn></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nEstimating $\\sum_{z \\in S'} C_q(z)$ by using the trivial bound\n$|\\chi(g(z))| \\leq 1$ for each $z \\in S'$ unless $g(y) = 0$ (which\ncan occur when $y \\in \\{0,\\frac 13,3\\}$), we find that\n\n\n", "itemtype": "equation", "pos": 28607, "prevtext": "\nTo estimate $\\sum_{z \\in {\\mathbb F}_q \\setminus S'} C_q(z)$, we first\nestimate $\\sum_{z \\in {\\mathbb F}_q} C_q(z)$ using Lemma~\\ref{thm:weil1}\nand Theorem~\\ref{thm:weil2}. Each of the terms in $C_q(z)$ is of\nthe form $\\chi(g(z))$ for some polynomial $g \\in {\\mathbb F}_q[x]$. Applying\nLemma~\\ref{thm:weil1} to the terms of the form $\\chi(g(z))$ where\n$g$ has degree at most $2$, we obtain a total contribution of $0$\nfrom such terms. Then, applying Theorem~\\ref{thm:weil2} to the remaining\nterms, which are of the from $\\chi(g(y))$ with $g$ of degree $3$ or $4$,\nyields\n\n", "index": 57, "text": "\\begin{equation}\\label{est12}\n\\sum_{z \\in {\\mathbb F}_q} C_q(z) \\geq q - 10\\sqrt{q}-3.\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E11.m1\" class=\"ltx_Math\" alttext=\"\\sum_{z\\in{\\mathbb{F}}_{q}}C_{q}(z)\\geq q-10\\sqrt{q}-3.\" display=\"block\"><mrow><mrow><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>z</mi><mo>\u2208</mo><msub><mi>\ud835\udd3d</mi><mi>q</mi></msub></mrow></munder><mrow><msub><mi>C</mi><mi>q</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>\u2265</mo><mrow><mi>q</mi><mo>-</mo><mrow><mn>10</mn><mo>\u2062</mo><msqrt><mi>q</mi></msqrt></mrow><mo>-</mo><mn>3</mn></mrow></mrow><mo>.</mo></mrow></math>", "type": "latex"}, {"file": "1601.07541.tex", "nexttext": "\nCombining the estimates~\\eqref{est12} and~\\eqref{est22}, we deduce\nthat~\\eqref{opossum2} holds if $q - 10\\sqrt{q} \\geq 279$, which\nhappens when $q \\geq 504$. Thus, there exists $z \\in {\\mathbb F}_q \\setminus\nS'$ such that $f''$ destroys all APs in ${\\mathbb F}_q$ for $q \\geq 504$\na prime power.\n\n\\subsection{Remaining Cases}\n\nWe have now shown that there exists an AP-destroying permutation\nof $({\\mathbb Z}/p{\\mathbb Z})^k$ if $p = 3$ and $k \\geq 2$ and if $p^k \\geq 504$.\nTo complete the proof of Theorem~\\ref{thm:main}, it remains to\ncheck the finitely many remaining cases, and we do this by resorting\nto a computer program.  By Lemma~\\ref{lem:quot}, it\nsuffices to check that $({\\mathbb Z}/p{\\mathbb Z})^k$ has an AP-destroying permutation\nfor the following cases:\n$(p,k) \\in\\{(x,1) : 7 < x < 504 \\text{ is prime}\\} \\cup \\{(5,2),(5,3),(7,2),(7,3)\\}$.\n\n\n\n\n\n\nIn each of these cases other than $p = q = 11, 13, 29, 31$, our code relies\non the construction used in the argument of Section~\\ref{sec:proof}.\nIndeed, for these cases, the idea of modifying the values of $f(3)$\nand $f(\\frac 13)$ actually works to yield an AP-destroying permutation\nof $({\\mathbb Z}/p{\\mathbb Z})^k$.\n\n\nFor $q \\in \\{11, 13, 29, 31\\}$, explicit AP-destroying permutations of\n${\\mathbb Z}/p{\\mathbb Z}$ were constructed by Hegarty in~\\cite{hegori}. The code\nrequired to check these cases can be found in the auxiliary file.\n\n\\section*{Acknowledgments}\n\n\\noindent The first author is supported by NSF grant DMS-1100511.\nThe second author acknowledges Joseph Gallian for\nsuggesting this problem during the 2015 Duluth Mathematics REU,\nand was supported by NSF grant DMS-1358695 and NSA grant H98230-13-1-0273.\nHe also thanks Amol Aggarwal, Levent Alpoge, Peter Hegarty, Mitchell Lee,\nand Julian Sahasrabudhe for useful conversations and suggestions.\n\n\\noindent\n\n\\bibliographystyle{amsxport}\n\\bibliography{bibfile}\n\n\n", "itemtype": "equation", "pos": 28895, "prevtext": "\nEstimating $\\sum_{z \\in S'} C_q(z)$ by using the trivial bound\n$|\\chi(g(z))| \\leq 1$ for each $z \\in S'$ unless $g(y) = 0$ (which\ncan occur when $y \\in \\{0,\\frac 13,3\\}$), we find that\n\n\n", "index": 59, "text": "\\begin{equation}\\label{est22}\n\\sum_{z \\in S'} C_q(z) \\leq 6 \\cdot 48 -12 = 276.\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E12.m1\" class=\"ltx_Math\" alttext=\"\\sum_{z\\in S^{\\prime}}C_{q}(z)\\leq 6\\cdot 48-12=276.\" display=\"block\"><mrow><mrow><mrow><munder><mo largeop=\"true\" movablelimits=\"false\" symmetric=\"true\">\u2211</mo><mrow><mi>z</mi><mo>\u2208</mo><msup><mi>S</mi><mo>\u2032</mo></msup></mrow></munder><mrow><msub><mi>C</mi><mi>q</mi></msub><mo>\u2062</mo><mrow><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo></mrow></mrow></mrow><mo>\u2264</mo><mrow><mrow><mn>6</mn><mo>\u22c5</mo><mn>48</mn></mrow><mo>-</mo><mn>12</mn></mrow><mo>=</mo><mn>276</mn></mrow><mo>.</mo></mrow></math>", "type": "latex"}]