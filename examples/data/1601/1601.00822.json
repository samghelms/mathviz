[{"file": "1601.00822.tex", "nexttext": "\nwhere the flows $\\{a,\\ldots,i\\}$ are positive and bounded.\n\nRestricting our study to non-equilibrium stationary state (NESS) of\nbank accounts $B_V, B_T, F_D, W_D$, the solution of the corresponding \nproblem can be written in matrix form: \n\n", "itemtype": "equation", "pos": 7305, "prevtext": "\n\n\\begin{frontmatter}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\title{Volume of the steady-state space of financial flows in a monetary \nstock-flow-consistent model }\n\n\n\\author[label1,label2]{Aur\u00c3\u00a9lien Hazan}\n\\address[label1]{Universit\u00c3\u00a9 Paris-Est Cr\u00c3\u00a9teil, IUT S\u00c3\u00a9nart-Fontainebleau}\n\\address[label2]{LISSI, Laboratoire Images Signaux et Syst\u00c3\u00a8mes Intelligents}\n\n\n\n\n\n\\begin{abstract}\n\nWe show that a steady-state stock-flow consistent macro-economic model \ncan be represented as a Constraint Satisfaction Problem (CSP).\nThe set of solutions is a polytope, which volume depends on the constraints\napplied and reveals the potential fragility of the economic circuit,\nwith no need to specify the dynamics. Several methods to compute the\nvolume are compared, inspired by operations research methods and the\nanalysis of metabolic networks, both exact and approximate.\nWe also introduce a random transaction matrix, and study the particular\ncase of linear flows with respect to money stocks.\n\\end{abstract}\n\n\\begin{keyword}\n\neconomics \\sep physics and society \\sep constraint satisfaction \\sep\nmonte-carlo \\sep random network \\sep convex polytope \\sep finance\n\n\n\n\n\n\\end{keyword}\n\n\\end{frontmatter}\n\n\n\n\n\n\n\\section{Introduction}\n\\label{intro}\n\n\n\nIn this article we propose an approach to macro-economic modeling inspired by\nstock-flow consistent (SFC) models \\cite{godley_monetary_2007} and statistical physics,\nsolving a \nConstraint Satisfaction Problem (CSP) in a way similar to recent works in the field\nof metabolic networks \\cite{braunstein_estimating_2008}. \nThe formalism of DSGE (Dynamic Stochastic General Equilibrium) is dominant \ntoday in macro-economics, partly because the corresponding models can be\nwritten in the form of state-space models\nand estimated in a well-studied statistical framework\\footnote{~see \\cite[\u00c2\u00a73.2]{fagiolo_macroeconomic_2012} for a discussion.}. \nTheir usefulness has been widely debated among economists \\cite{kirman_economic_2010,farmer_economy_2009} \nand physicists \\cite{bouchaud_economics_2008} because of their inability to\npredict crises.\n\nMany of their hypotheses have been criticized, such as representative rational agents,\nexogeneity of financial factors, clearing markets where offer always meet\ndemand, etc\\ldots\n\nOther approaches include SFC theories that see the economy\nas a whole, Agents-Based Models (ABM) \\cite{tesfatsion_chapter_2006}, and dynamical\nsystems models that consider crises as possible outcomes \n\\cite{keen_solving_2010, keen_monetary_2013}\nin an economy where production and finance may be coupled in instable ways.\nABM models \\cite{dawid_agent-based_2008}\nare versatile and able to reproduce the dynamical behavior\nof a large number of heterogeneous and learning agents, in several countries,\nwhile representing debts, prices and investments. Computational requirements\nare high though when simulating, and theoretical understanding is limited so far.\nCalibration and validation are known to be difficult problems in that context.\n\nWe consider a simplified stock-flow consistent model developed by\nmacro-economists, where the state of the economy is the set of all stocks\nand flows of money during a given time interval. We show in this article \nthat one can compute the set of admissible steady-state financial flows\nestablished when agents interact. In this steady-state flow space, all\nflow configurations are equally weighted, thus allowing unusual states\nof the financial flows to be encompassed. The flow space can be computed\nindependently of the  stocks, i.e. of the amount of money deposited by\nagents on their bank accounts. The marginal probabilities of individual\nflows can be approximated over the whole solution space.\n\nOur standpoint is inspired by the field of metabolic networks where\nsteady-state fluxes have been studied as CSP and successfully compared to \nexperimental data, as in the Red Blood\nCell metabolism or the central metabolism of E.coli \\cite{wiback_monte_2004,\n braunstein_estimating_2008, orth_what_2010}). Such system-scale studies\n reveal some interesting features of\nmetabolisms, for example the cooperation between pathways. \nIt has been shown also that organisms such as E.coli do not necessarily optimize\ntheir metabolic fluxes.\n\n\nThe expected benefits of applying these methods in macro-economics include \nthe analysis of fragilities, notably the sensitivity to arbitrary flow\nconstraints, such as shortages. Indeed, the volume of the solution space\nevoked above is immediately impacted when constraints are added or removed,\nand can reveal the flexibility or rigidity of financial flows subject to perturbations.\n  \nIn section \\ref{theory}, we detail the model of financial flows that will be used as a\nbenchmark, and present its background from a macro-economic modeling point \nof view. Comparisons are made with ABM  and econophysics. We present\nthe different methods used to compute exactly and approximately the volume\nof the steady-state flow space. Then in section \\ref{results}, the experimental results\nare explained, and the particular case of linear flows with a constant \nstock of money is examined. Finally, sections \\ref{discussion} and \\ref{conclusion}\nare devoted to discussion and conclusion.\n\n\n\\section{Background and methods}\n\\label{theory}\n\n\n\\subsection{Steady-sate flow space in a stock-flow-consistent model}\n\\label{sub.keen model}\n\nOur analysis is based on stock-flow-consistent (SFC) monetary models at\nthe macro-economic level \\cite{godley_monetary_2007}.\nAgents are grouped by categories: banks, firms,\nworkers, state, central bank. For simplicity, the state and central bank\nare omitted in this model. Agents possess bank accounts, and transfer\nmoney between these accounts:\n\\begin{itemize}\n\\item Banks lend money to firms, which pay interests to the former.\n\\item Banks pay interests on deposits made by workers and firms.\n\\item Firms pay wages to workers.\n\\item Workers and banks pay for consumption of goods to firms.\n\\end{itemize}\nTransactions are balanced using a double-entry \nbook-keeping representation: payments are functions of deposits; \neach payment corresponds to a receipt, and rows must sum to zero as shown,\nexcept those entitled \"Record loan\", corresponding to the column \"Firm loan\".\nTab.\u00c2\u00a0\\ref{keen.transactions} shows the different financial transactions\noccurring in a simple SFC model with one agent per class, after \\cite{keen_solving_2010}. \n\n\\begin{table}[htbp]\n\\centering\n\\begin{tabular}{lccccc}\n\\hline\nTransaction  & Bank vault  & Bank transaction  & Firm loan &\nFirm deposit  & Worker deposit \\\\\n\t\t\t & $B_V$ & $B_T$ & $F_L$ & $F_D$ & $W_D$\\\\\n\\hline\nLend money    & $-a$ & && $a$ & \\\\\nRecord loan   &  & & $a$ && \\\\\nCompound debt &  & & $b$ && \\\\\nPay interest  &  & $c$ & & $-c$ & \\\\\nRecord payment&\t &     & $-c$ & & \\\\\nDeposit interest&  & $-d$ & & $d$ & \\\\\nWages\t\t  &  & && $-e$ & $e$\\\\\nDeposit interest&  & $-f$  &&& $f$ \\\\\nConsumption\t  &  & $-g$ && $g+h$ & $-h$ \\\\\nRepay loan    & $i$ & && $-i$ & \\\\\nRecord payment&  & &  $-i$ &  & \\\\\n\\end{tabular}\n\\caption{Financial transactions in the SFC model. }\n\\label{keen.transactions}\n\\end{table}\nThe column \"Firm loan\" doesn't represent a bank account, but is a ledger\nto record the total amount of debt.\nThe column sums of flows can be summarized in the following system\u00c2\u00a0\nof ordinary differential equations (ODE):\n\n", "index": 1, "text": "\\begin{equation}\n\\left\\{\\begin{aligned}\n      \\frac{d B_V}{dt} &= i-a\\\\      \n      \\frac{d B_T}{dt} &= c-d-f-g\\\\      \n      \\frac{d F_L}{dt} &= a+b-c-i\\\\      \n      \\frac{d F_D}{dt} &= a-c+d-e+g+h-i\\\\      \n      \\frac{d W_D}{dt} &= e+f-h\\\\      \n       \\end{aligned}\n\\right.\n\\label{eq.ode}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E1.m1\" class=\"ltx_Math\" alttext=\"\\left\\{\\begin{aligned} \\displaystyle\\frac{dB_{V}}{dt}&amp;\\displaystyle=i-a\\\\&#10;\\displaystyle\\frac{dB_{T}}{dt}&amp;\\displaystyle=c-d-f-g\\\\&#10;\\displaystyle\\frac{dF_{L}}{dt}&amp;\\displaystyle=a+b-c-i\\\\&#10;\\displaystyle\\frac{dF_{D}}{dt}&amp;\\displaystyle=a-c+d-e+g+h-i\\\\&#10;\\displaystyle\\frac{dW_{D}}{dt}&amp;\\displaystyle=e+f-h\\\\&#10;\\end{aligned}\\right.\" display=\"block\"><mrow><mo>{</mo><mtable columnspacing=\"0pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"right\"><mfrac><mrow><mi>d</mi><mo>\u2062</mo><msub><mi>B</mi><mi>V</mi></msub></mrow><mrow><mi>d</mi><mo>\u2062</mo><mi>t</mi></mrow></mfrac></mtd><mtd columnalign=\"left\"><mrow><mi/><mo>=</mo><mrow><mi>i</mi><mo>-</mo><mi>a</mi></mrow></mrow></mtd></mtr><mtr><mtd columnalign=\"right\"><mfrac><mrow><mi>d</mi><mo>\u2062</mo><msub><mi>B</mi><mi>T</mi></msub></mrow><mrow><mi>d</mi><mo>\u2062</mo><mi>t</mi></mrow></mfrac></mtd><mtd columnalign=\"left\"><mrow><mi/><mo>=</mo><mrow><mi>c</mi><mo>-</mo><mi>d</mi><mo>-</mo><mi>f</mi><mo>-</mo><mi>g</mi></mrow></mrow></mtd></mtr><mtr><mtd columnalign=\"right\"><mfrac><mrow><mi>d</mi><mo>\u2062</mo><msub><mi>F</mi><mi>L</mi></msub></mrow><mrow><mi>d</mi><mo>\u2062</mo><mi>t</mi></mrow></mfrac></mtd><mtd columnalign=\"left\"><mrow><mi/><mo>=</mo><mrow><mrow><mi>a</mi><mo>+</mo><mi>b</mi></mrow><mo>-</mo><mi>c</mi><mo>-</mo><mi>i</mi></mrow></mrow></mtd></mtr><mtr><mtd columnalign=\"right\"><mfrac><mrow><mi>d</mi><mo>\u2062</mo><msub><mi>F</mi><mi>D</mi></msub></mrow><mrow><mi>d</mi><mo>\u2062</mo><mi>t</mi></mrow></mfrac></mtd><mtd columnalign=\"left\"><mrow><mi/><mo>=</mo><mrow><mrow><mrow><mrow><mrow><mi>a</mi><mo>-</mo><mi>c</mi></mrow><mo>+</mo><mi>d</mi></mrow><mo>-</mo><mi>e</mi></mrow><mo>+</mo><mi>g</mi><mo>+</mo><mi>h</mi></mrow><mo>-</mo><mi>i</mi></mrow></mrow></mtd></mtr><mtr><mtd columnalign=\"right\"><mfrac><mrow><mi>d</mi><mo>\u2062</mo><msub><mi>W</mi><mi>D</mi></msub></mrow><mrow><mi>d</mi><mo>\u2062</mo><mi>t</mi></mrow></mfrac></mtd><mtd columnalign=\"left\"><mrow><mi/><mo>=</mo><mrow><mrow><mi>e</mi><mo>+</mo><mi>f</mi></mrow><mo>-</mo><mi>h</mi></mrow></mrow></mtd></mtr></mtable></mrow></math>", "type": "latex"}, {"file": "1601.00822.tex", "nexttext": "\nwhere $x=[a, c, d, e, f, g, h, i]$ and:\n\n", "itemtype": "equation", "pos": 7853, "prevtext": "\nwhere the flows $\\{a,\\ldots,i\\}$ are positive and bounded.\n\nRestricting our study to non-equilibrium stationary state (NESS) of\nbank accounts $B_V, B_T, F_D, W_D$, the solution of the corresponding \nproblem can be written in matrix form: \n\n", "index": 3, "text": "\\begin{equation}\nS = \\{ x ~\\text{s.t.} ~\\xi x =0, \\forall i ~x_i\\in [0,x_{max}] \\} \\\\\n\\label{eq.matrix}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E2.m1\" class=\"ltx_Math\" alttext=\"S=\\{x~{}\\text{s.t.}~{}\\xi x=0,\\forall i~{}x_{i}\\in[0,x_{max}]\\}\\\\&#10;\" display=\"block\"><mrow><mi>S</mi><mo>=</mo><mrow><mo stretchy=\"false\">{</mo><mpadded width=\"+3.3pt\"><mi>x</mi></mpadded><mpadded width=\"+3.3pt\"><mtext>s.t.</mtext></mpadded><mi>\u03be</mi><mi>x</mi><mo>=</mo><mn>0</mn><mo>,</mo><mo>\u2200</mo><mpadded width=\"+3.3pt\"><mi>i</mi></mpadded><msub><mi>x</mi><mi>i</mi></msub><mo>\u2208</mo><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo>,</mo><msub><mi>x</mi><mrow><mi>m</mi><mo>\u2062</mo><mi>a</mi><mo>\u2062</mo><mi>x</mi></mrow></msub><mo stretchy=\"false\">]</mo></mrow><mo stretchy=\"false\">}</mo></mrow></mrow></math>", "type": "latex"}, {"file": "1601.00822.tex", "nexttext": "\n$\\xi$ is an $m \\times n$ matrix, $m$ being the number of stock accounts, \nand $n$ the number of flows. $S$ defines a convex bounded polytope, that \nappears in many disciplines, as will be discussed in section\u00c2\u00a0\\ref{sub.related}.\n\nConstraints can be added or modified\u00c2\u00a0: for example, if a firm goes bankrupt,\nthe loan will not be completely repaid, thus equation $a=i$ may be replaced by \n$a \\leq i$. Agents may not spend more in consumption than the sum of \ntheir incomes, which can be written $h \\leq d+e$, unless workers borrow \nmoney from banks.\n\nThe scope of this model can be extended to the case of multiple agents \nper class, replacing scalars by block matrices in Tab.\u00c2\u00a0\\ref{keen.transactions}.\nEach block can be designed \nto account not only for the flows but also for the connectivity between agents.\nFor example, instead of $[-a,0,0,a,0]$, the first row of the transaction table \nTab.\u00c2\u00a0\\ref{keen.transactions} may write $[-A,0,0,A,0]$ where $A$ could encode\nthe many-to-one relationship between firms and banks. Similarly, the first column of the \nsame table would read $[-A^T,0, \\ldots,0,I^T,0]^T$. One possible way to choose $A$\nand $I$ is\u00c2\u00a0:\n\n", "itemtype": "equation", "pos": 8012, "prevtext": "\nwhere $x=[a, c, d, e, f, g, h, i]$ and:\n\n", "index": 5, "text": "\\begin{equation}\n\\xi = \\begin{bmatrix}\n-1  & 0&0 &0 & 0& 0& 0& 1 \\\\\n0  &1 &-1 & 0&-1 &-1 &0 & 0  \\\\\n1  & -1& 1& -1& 0& 1&1 & -1 \\\\\n 0 & 0& 0&1 &1 & 0& -1& 0 \\\\\n \n\n\n\n\n\\end{bmatrix}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E3.m1\" class=\"ltx_Math\" alttext=\"\\xi=\\begin{bmatrix}-1&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;1\\\\&#10;0&amp;1&amp;-1&amp;0&amp;-1&amp;-1&amp;0&amp;0\\\\&#10;1&amp;-1&amp;1&amp;-1&amp;0&amp;1&amp;1&amp;-1\\\\&#10;0&amp;0&amp;0&amp;1&amp;1&amp;0&amp;-1&amp;0\\\\&#10;\\par&#10;\\par&#10;\\par&#10;\\par&#10;\\par&#10;\\end{bmatrix}\" display=\"block\"><mrow><mi>\u03be</mi><mo>=</mo><mrow><mo>[</mo><mtable columnspacing=\"5pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mrow><mo>-</mo><mn>1</mn></mrow></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>1</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><mn>1</mn></mrow></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><mn>1</mn></mrow></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><mn>1</mn></mrow></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><mn>1</mn></mrow></mtd><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><mn>1</mn></mrow></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><mn>1</mn></mrow></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><mn>1</mn></mrow></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><mi/></mtd></mtr></mtable><mo>]</mo></mrow></mrow></math>", "type": "latex"}, {"file": "1601.00822.tex", "nexttext": "\nwhere $A_{i,j}=1$ if the bank $i$ is lending money to the firm $j$. \nThe number of banks, firms and workers are noted $nb,nf,nw$, and $Id$ is the\nidentity matrix. In this example, the first and the last firm are client \nof the same bank.\n\nThe matrix $A$ can be randomly sampled efficiently, in some relevant ensemble \nof matrices consistent with empirical data. Following that example, we can \ndesign the others block matrices in the transaction table, and look for the\ncorresponding solution space as in Eq.(\\ref{eq.matrix}), with: \n\n", "itemtype": "equation", "pos": 9363, "prevtext": "\n$\\xi$ is an $m \\times n$ matrix, $m$ being the number of stock accounts, \nand $n$ the number of flows. $S$ defines a convex bounded polytope, that \nappears in many disciplines, as will be discussed in section\u00c2\u00a0\\ref{sub.related}.\n\nConstraints can be added or modified\u00c2\u00a0: for example, if a firm goes bankrupt,\nthe loan will not be completely repaid, thus equation $a=i$ may be replaced by \n$a \\leq i$. Agents may not spend more in consumption than the sum of \ntheir incomes, which can be written $h \\leq d+e$, unless workers borrow \nmoney from banks.\n\nThe scope of this model can be extended to the case of multiple agents \nper class, replacing scalars by block matrices in Tab.\u00c2\u00a0\\ref{keen.transactions}.\nEach block can be designed \nto account not only for the flows but also for the connectivity between agents.\nFor example, instead of $[-a,0,0,a,0]$, the first row of the transaction table \nTab.\u00c2\u00a0\\ref{keen.transactions} may write $[-A,0,0,A,0]$ where $A$ could encode\nthe many-to-one relationship between firms and banks. Similarly, the first column of the \nsame table would read $[-A^T,0, \\ldots,0,I^T,0]^T$. One possible way to choose $A$\nand $I$ is\u00c2\u00a0:\n\n", "index": 7, "text": "\\begin{equation}\nA_{nb,nf} = \\begin{bmatrix}\n0      &  1     & \\ldots & 0      \\\\\n0      &  0     &        & 0      \\\\\n\\vdots & \\vdots &        & \\vdots \\\\\n0      &  0     &        & 0      \\\\ \n1      &  0     & \\ldots & 1\n\\end{bmatrix},\n~I = Id_{nf}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E4.m1\" class=\"ltx_Math\" alttext=\"A_{nb,nf}=\\begin{bmatrix}0&amp;1&amp;\\ldots&amp;0\\\\&#10;0&amp;0&amp;&amp;0\\\\&#10;\\vdots&amp;\\vdots&amp;&amp;\\vdots\\\\&#10;0&amp;0&amp;&amp;0\\\\&#10;1&amp;0&amp;\\ldots&amp;1\\end{bmatrix},~{}I=Id_{nf}\" display=\"block\"><mrow><mrow><msub><mi>A</mi><mrow><mrow><mi>n</mi><mo>\u2062</mo><mi>b</mi></mrow><mo>,</mo><mrow><mi>n</mi><mo>\u2062</mo><mi>f</mi></mrow></mrow></msub><mo>=</mo><mrow><mo>[</mo><mtable columnspacing=\"5pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mi mathvariant=\"normal\">\u2026</mi></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mi/></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><mi mathvariant=\"normal\">\u22ee</mi></mtd><mtd columnalign=\"center\"><mi mathvariant=\"normal\">\u22ee</mi></mtd><mtd columnalign=\"center\"><mi/></mtd><mtd columnalign=\"center\"><mi mathvariant=\"normal\">\u22ee</mi></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mi/></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>1</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mi mathvariant=\"normal\">\u2026</mi></mtd><mtd columnalign=\"center\"><mn>1</mn></mtd></mtr></mtable><mo>]</mo></mrow></mrow><mo rspace=\"5.8pt\">,</mo><mrow><mi>I</mi><mo>=</mo><mrow><mi>I</mi><mo>\u2062</mo><msub><mi>d</mi><mrow><mi>n</mi><mo>\u2062</mo><mi>f</mi></mrow></msub></mrow></mrow></mrow></math>", "type": "latex"}, {"file": "1601.00822.tex", "nexttext": "\t\t\t\t\t\t\nwhere $E_{nf,nw},~F_{nb,nw},~G_{nf,nb},~H_{nf,nw}$ encode the connectivity patterns\nrespectively between firms and workers (payment of wages), workers and banks (deposits),\nfirms and banks (consumption of bankers), firms and workers (consumption of workers).\n\nA graphical representation of monetary transactions with randomly sampled \nconnections between agents is given in Fig. \\ref{graph.keen}. \n\n\\begin{figure}[htbp]\n\\centering\n\\subfigure[~]{\n\t\\includegraphics[width=6cm]{graph_keen_single.pdf}}\n\\subfigure[~]{\n\t\\includegraphics[width=8cm]{graph_keen_multi}}\n\\caption{Graph of monetary transactions.\n\\emph{bt,bv,w,f} stand for banks transaction accounts, banks vaults,\n workers deposit accounts, firms deposit accounts.\n (a) single agent in each class; (b) random connectivity, with 2 banks, 3 firms, 4 workers.}\n\\label{graph.keen}\n\\end{figure}\n\n\nIt is important to stress that the dependence of flows on stocks is voluntarily \nkept unspecified. The solutions to this class of under-specified problems \nin the space of steady-state flows will be examined in sections\n\\ref{sub.csp} and \\ref{sub.har}.\nThe reader interested in the study of explicit specifications of flows may \nlook at \\cite{keen_solving_2010} and \\cite{keen_monetary_2013}. Lavoie and Godley \nexamine many increasingly detailed models (open economy,...), as well as dynamic specifications of\nthe flows\\footnote{~see an implementation\n\\url{https://github.com/kennt/monetary-economics}}.\n\n\nTo the best of our knowledge, the properties of random matrices that correspond to SFC \nmodels have not been established in the economics litterature. This representation \ncalls for a closer examination following many works in the field of complex networks\nstudies.\n\n\n\n\\subsection{Related works in economics, econophysics, and network science}\n\\label{sub.related}\nDouble-entry book-keeping is used to establish National Accounts \nas a means to record estimated flows and stocks consistently,\nfor each country, at several levels of aggregation. National accountants \nbuild balance sheets, income and product accounts, in order to compare \neconomies, and to analyze the behavior of economies in time, such as \ngrowth.\nSuch accounts are also used in macroeconomic modeling by policymakers \nto calibrate Computable General Equilibirum models. However, models of\nthis type (e.g. DSGE) do not explicitly enforce stock-flow consistency.  \n\nLong before the break of the subprime crisis, many works have established \nABM as an alternative, in a move to get rid of hypotheses\nperceived as unjustified. Equilibrium, rationality, and the \nhypothesis of the representative agent have been criticized by many\neconomists \\cite{kirman_complex_2011, fagiolo_macroeconomic_2012}.\nAmong macro-economic ABM, stock-flow consistency is now a classical \nhypothesis that has been used by many authors \\cite{dawid_agent-based_2008,\ndawid_eurace_2011,seppecher_flexibility_2012}.\nABM are praised for their flexibility, their ability to\nstudy large populations of heterogeneous  and learning agents that interact\nin possibly non-linear ways.\nHowever, ABM need computer intensive simulations and face the problem of\nbeing over-parametrized. Calibration is thus difficult and unstable, all\nthe more since empirical studies and reliable data are not abundant compared\nto the dimension of the parameter space.\nUnder simplifying assumptions such as the aggregation of a subset of agents,\ntheoretical results concerning some macro-economic ABM were recently obtained\nin a stock-flow-consistent framework, and phase diagrams established,\nfor specific dynamic rules \\cite{gualdi_tipping_2015, gualdi_monetary_2015}.\n\nThe importance of the organization of interactions, embodied by networks,\nhas been stressed in economics \\cite{jackson_social_2013}. Theoretical works have \nstudied their generic properties (supply chain \\cite{weisbuch_production_2007},\ninterbank network \\cite{delpini_evolution_2013},  trade credit \n\\cite{battiston_credit_2007}). Empirical studies have laid emphasis\nupon the topology of real economic networks, such as goods market,\nnational inter-firm trading \\cite{watanabe_biased_2012}, world trade \n\\cite{garlaschelli_fitness-dependent_2004}, global corporate control \namong transnational corporations \\cite{vitali_network_2011},\nfirm ownership networks. They must sometime be reconstructed, starting\nfrom limited information (of equity investments in the stock market \n\\cite{garlaschelli_scale-free_2005}, the interbank market \\cite{de_masi_fitness_2006}). \nAt the level of individuals, detailed topological\ninformation about banking, employment, or consumption seems to be lacking.\n\nSuch empirical and theoretical material may serve as an input to shape\nthe set of equations and inequalities discussed above.\n\n\n\\subsection{Constraint satisfaction problem}\n\\label{sub.csp}\n\nAs shown in section \\ref{sub.keen model}, the steady-state flux space associated with \nEq.(\u00c2\u00a0\\ref{eq.matrix}) is a bounded convex polytope. Without loss of generality, $S$ \ncan be supposed to have full row rank. The polytope is a $n-m$ dimensional\n object embedded in the $n$-dimensional space of flows.\nProperties of convex polytopes such as their different representations\nare well studied  \\cite{avis_lrs:_2000}. Computing their volume exactly can be\nachieved by solving the vertex enumeration problem, which is $\\#P$-hard.\nExisting implementations, such as $lrs$ by Avis et al., allow to solve it\nin reasonable time when $n-m$ is close to 10.  \nExact computation methods are employed in linear programming and operations\nresearch to solve  classical constraint satisfaction problems such as the map\ncoloring problem, and have real-life applications, for example in resource\nallocation problems. More solutions can be obtained when relaxing hard\nconstraints.    \n\nApproximate methods to determine the solution space were proposed by\nresearchers studying metabolic networks and the metabolic steady-state flux\nspace. These methods allow to sample the solution space, to estimate its\nvolume, and to approximate probabilistic properties of the solutions such\nas the marginal densities \\cite{wiback_monte_2004,\n braunstein_estimating_2008,bianconi_flexibility_2006,\n bianconi_viable_2007,bianconi_flux_2008}. They\ncan be used to evaluate the sensitivity of the  the solution space to new\nconstraints.  A restriction of this problem known as Flux-Balance-Analysis\n(FBA) consists in maximizing some objective constraint, which reduces\nthe solution space to a finite set of points \\cite{orth_what_2010, bianconi_flux_2008}. \nA parallel may be mentioned with the field of random Constraint\nSatisfaction Problem (rCSP) that stands at the interface between theoretical\ncomputer science and statistical physics, and studies sets of solutions\nto a large number of random constraints, in a boolean space.\nMany important results such as phase transitions were developed \n\\cite{mezard_information_2009}. Although our main focus is the continuous domain,\nwe can take advantage of this theory.\n\n\n\\subsection{Monte-Carlo sampling of the steady-state flow space}\n\\label{sub.har}\nIn section \\ref{sub.csp} we mentionned the exact computation of the volume of\nthe steady-state flow space using vertex enumeration, when $n-m$ is small.\nThe result obtained is numeric, and not an analytic expression depending \non the parameters of the problem in Eq. (\\ref{eq.matrix}). \n\nAnother approach proposed in \\cite{wiback_monte_2004,almaas_global_2004},\nsuited for larger \nproblems, is Monte-Carlo sampling in the solution space, using a\n\\emph{hit-and-run} algorithm. The latter needs an initial point inside the \nconvex polytope. Then, sampling from a hypersphere, a direction is \nselected at random. The half-line defined by the starting point and\nthis direction intersects the boundary in a point. This intersection\nand the starting point form a segment that can be uniformly sampled\nto get the next point. The procedure defines a Markov Chain that \nconverges to the uniform distribution over the polytope \\cite{smith_efficient_1984}, \nin nondeterministic polynomial time $\\mathcal{O}^* (n^k )$. The notation \n$\\mathcal{O}^*()$ means that there are logarithmic factors that \nmultiply $n^k$, and constants, but are neglected \\cite{simonovits_how_2003}.\n\nThe \\emph{hit-and-run} method provides an estimate of the marginal\nprobability density functions (pdf) denoted $P_i(x)$ for each transaction\nflow $i = 1,\\dots,N$. They characterise the shape of the polytope and \nare given by: \n\n", "itemtype": "equation", "pos": -1, "prevtext": "\nwhere $A_{i,j}=1$ if the bank $i$ is lending money to the firm $j$. \nThe number of banks, firms and workers are noted $nb,nf,nw$, and $Id$ is the\nidentity matrix. In this example, the first and the last firm are client \nof the same bank.\n\nThe matrix $A$ can be randomly sampled efficiently, in some relevant ensemble \nof matrices consistent with empirical data. Following that example, we can \ndesign the others block matrices in the transaction table, and look for the\ncorresponding solution space as in Eq.(\\ref{eq.matrix}), with: \n\n", "index": 9, "text": "\\begin{equation}\n\\xi = \\begin{bmatrix}\n-A_{nb,nf} & 0  & 0 &0 & 0 & 0 & 0 & A_{nb,nf} \\\\\n0& A_{nb,nf} & -A_{nb,nf} & 0 & -F_{nb,nw} & -Id_{nb} & 0 & 0 \\\\\nId_{nf} & -Id_{nf} & Id_{nf} & -E_{nf,nw} & 0 & G_{nf,nb} & H_{nf,nw} & -Id_{nf} \\\\\n 0 & 0 & 0&  Id_{nw} & Id_{nw} & 0 & -Id_{nw} & 0 \\\\\n\\end{bmatrix}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E5.m1\" class=\"ltx_Math\" alttext=\"\\xi=\\begin{bmatrix}-A_{nb,nf}&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;A_{nb,nf}\\\\&#10;0&amp;A_{nb,nf}&amp;-A_{nb,nf}&amp;0&amp;-F_{nb,nw}&amp;-Id_{nb}&amp;0&amp;0\\\\&#10;Id_{nf}&amp;-Id_{nf}&amp;Id_{nf}&amp;-E_{nf,nw}&amp;0&amp;G_{nf,nb}&amp;H_{nf,nw}&amp;-Id_{nf}\\\\&#10;0&amp;0&amp;0&amp;Id_{nw}&amp;Id_{nw}&amp;0&amp;-Id_{nw}&amp;0\\\\&#10;\\end{bmatrix}\" display=\"block\"><mrow><mi>\u03be</mi><mo>=</mo><mrow><mo>[</mo><mtable columnspacing=\"5pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mrow><mo>-</mo><msub><mi>A</mi><mrow><mrow><mi>n</mi><mo>\u2062</mo><mi>b</mi></mrow><mo>,</mo><mrow><mi>n</mi><mo>\u2062</mo><mi>f</mi></mrow></mrow></msub></mrow></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><msub><mi>A</mi><mrow><mrow><mi>n</mi><mo>\u2062</mo><mi>b</mi></mrow><mo>,</mo><mrow><mi>n</mi><mo>\u2062</mo><mi>f</mi></mrow></mrow></msub></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><msub><mi>A</mi><mrow><mrow><mi>n</mi><mo>\u2062</mo><mi>b</mi></mrow><mo>,</mo><mrow><mi>n</mi><mo>\u2062</mo><mi>f</mi></mrow></mrow></msub></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><msub><mi>A</mi><mrow><mrow><mi>n</mi><mo>\u2062</mo><mi>b</mi></mrow><mo>,</mo><mrow><mi>n</mi><mo>\u2062</mo><mi>f</mi></mrow></mrow></msub></mrow></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><msub><mi>F</mi><mrow><mrow><mi>n</mi><mo>\u2062</mo><mi>b</mi></mrow><mo>,</mo><mrow><mi>n</mi><mo>\u2062</mo><mi>w</mi></mrow></mrow></msub></mrow></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><mrow><mi>I</mi><mo>\u2062</mo><msub><mi>d</mi><mrow><mi>n</mi><mo>\u2062</mo><mi>b</mi></mrow></msub></mrow></mrow></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><mrow><mi>I</mi><mo>\u2062</mo><msub><mi>d</mi><mrow><mi>n</mi><mo>\u2062</mo><mi>f</mi></mrow></msub></mrow></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><mrow><mi>I</mi><mo>\u2062</mo><msub><mi>d</mi><mrow><mi>n</mi><mo>\u2062</mo><mi>f</mi></mrow></msub></mrow></mrow></mtd><mtd columnalign=\"center\"><mrow><mi>I</mi><mo>\u2062</mo><msub><mi>d</mi><mrow><mi>n</mi><mo>\u2062</mo><mi>f</mi></mrow></msub></mrow></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><msub><mi>E</mi><mrow><mrow><mi>n</mi><mo>\u2062</mo><mi>f</mi></mrow><mo>,</mo><mrow><mi>n</mi><mo>\u2062</mo><mi>w</mi></mrow></mrow></msub></mrow></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><msub><mi>G</mi><mrow><mrow><mi>n</mi><mo>\u2062</mo><mi>f</mi></mrow><mo>,</mo><mrow><mi>n</mi><mo>\u2062</mo><mi>b</mi></mrow></mrow></msub></mtd><mtd columnalign=\"center\"><msub><mi>H</mi><mrow><mrow><mi>n</mi><mo>\u2062</mo><mi>f</mi></mrow><mo>,</mo><mrow><mi>n</mi><mo>\u2062</mo><mi>w</mi></mrow></mrow></msub></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><mrow><mi>I</mi><mo>\u2062</mo><msub><mi>d</mi><mrow><mi>n</mi><mo>\u2062</mo><mi>f</mi></mrow></msub></mrow></mrow></mtd></mtr><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mrow><mi>I</mi><mo>\u2062</mo><msub><mi>d</mi><mrow><mi>n</mi><mo>\u2062</mo><mi>w</mi></mrow></msub></mrow></mtd><mtd columnalign=\"center\"><mrow><mi>I</mi><mo>\u2062</mo><msub><mi>d</mi><mrow><mi>n</mi><mo>\u2062</mo><mi>w</mi></mrow></msub></mrow></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mrow><mo>-</mo><mrow><mi>I</mi><mo>\u2062</mo><msub><mi>d</mi><mrow><mi>n</mi><mo>\u2062</mo><mi>w</mi></mrow></msub></mrow></mrow></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr></mtable><mo>]</mo></mrow></mrow></math>", "type": "latex"}, {"file": "1601.00822.tex", "nexttext": "\nThey can also be written as an integral over all flows. \nAs remarked by \\cite{wiback_monte_2004}, the \\emph{hit-and-run} method \nwill not permit us to estimate the absolute volume. Instead, approximations for relative volumes\ncan be obtained, such as $r=Vol(S_1)/Vol(S)$,  where $S$ is the same as in \nEq.(\\ref{eq.matrix}) while $S_1$ has additional constraints, such as a lower bound for \nflow $i$.\n \nTo sum up, using efficient Monte-Carlo sampling methods such as \n\\emph{hit-and-run}, we will be able to sample medium-sized problems (up \nto hundreds of flows), to approximate the pdfs, to compute relative \nvolumes. However, we will get no analytic expression of theses quantities,\nnor approximate entropy. Furthermore, the mixing of the Markov Chain should\nbe examined to ensure convergence. In section \\ref{results} we use the implementation \nby Tervonen et al. \\cite{tervonen_hit-and-run_2013}.\n\nAs evoked in section \\ref{sub.csp}, researchers have also used the replica method \n\\cite{bianconi_viable_2007},\nand message passing algorithms \\cite{braunstein_estimating_2008, \nfont-clos_weighted_2012,bianconi_flux_2008}\nto deal with the problem of estimating marginal densities. \n\n\n\n\\section{Results}\n\\label{results}\n\n\n\\subsection{Comparison between lrs and hit-and-run in low dimensional systems}\n\\label{comparison.lrs.har}\n\nFirst let us compare the relative volumes corresponding to small problems,\nwhen exact results can be obtained. \n\nA cube in 3 dimensions can be defined by the set of constraints $S_0$. We \nalso define $S_1$ where all boundaries remain the same, except one of them.\n\\begin{eqnarray}\n\\label{eq.cube}\nS_0 &=& \\{ 0\\leq x_i \\leq c_0, ~\\forall i \\in [0,2]  \\} \\nonumber \\\\\nS_1 &=& \\{ 0\\leq x_0 \\leq c_0, ~0\\leq x_1 \\leq c_0,~0\\leq x_2 \\leq c_1  \\} \\nonumber\n\\end{eqnarray}\nThe volume ratio is defined by $r=Vol(S_1)/Vol(S_0)$ and can be computed\nby several methods as shown in the first row of Tab. \\ref{volume ratio}.\nSince the number of sampling points is high, the relative error is low.\n\nThe histogram associated to the marginal pdf of the first coordinate \nof the cube is represented in Fig. \\ref{histograms.simple}(top left). \nAs expected, the frequency is flat on the interval $[0,c_0]$, which \ncorresponds to a uniform sampling. \n\nNext, the volume ratios associated with the steady-state monetary flow\nproblem depicted in section \\ref{sub.keen model} are computed. To do so, following\nthe example of the cube above, we iteratively diminish the boundary \nconstraint for each flow variable, by a constant amount.\nFor example, the second row of Tab. \\ref{volume ratio} is obtained by setting\nall upper bounds to $c_0=10$, then by setting all bounds to $c_0$ except\nalong the first dimension, which corresponds to LF (loans granted to firms).\nAs expected, all the volume ratios obtained with \\emph{lrs} and \\emph{hit-and-run}\nare close to each other. This is also consistent with results found \nin metabolic network analysis \\cite{wiback_monte_2004} when $n$ is small .\n\n\\begin{table}[htbp]\n\\centering\n\\begin{tabular}{ccc|ccc|c}\n\\hline\nAlgorithm &  &  & \\multicolumn{3}{c|}{$lrs$ } & \\emph{hit-and-run}  \\\\\n & $c_0$ & $c_1$ &  $V_0$ & $V_1$ &  $V_1/V_0$ & $V_1/V_0$\\\\\n\\hline\ncube $x$ & 10 & 5 & 1000 & 500 & 0.5 & 0.50055 \\\\\n\\hline\nLF       & 10 & 5 &  12500 & 6250  &  0.5   &  0.49 \\\\  \nIFL      & 10 & 5 &  12500 & 1822  &  0.145 &  0.14 \\\\\nIFD      & 10 & 5 &  12500 & 10677 &  0.854 &  0.85 \\\\\nW        & 10 & 5 &  12500 & 8072  &  0.645 &  0.64 \\\\\nIWD\t\t & 10 & 5 &  12500 & 11718 &  0.937 &  0.93 \\\\\nCB\t\t & 10 & 5 &  12500 & 10677 &  0.854 &  0.85 \\\\\nCW       & 10 & 5 &  12500 & 4427  &  0.354 &  0.35 \\\\\nLR       & 10 & 5 &  12500 & 6250  &  0.5   &  0.49\\\\\n\\hline\n\\end{tabular}\n\\caption{Absolute and relative volume of steady-state flow space when \none boundary value is changed from $c_0$ to $c_1$. Only one constraint\nis changed to get volume ratio, and is identified by the label of the \nrow. The absolute volume is computed using $lrs$ in the two cases, as \nwell as their ratio. The latter is compared to the approximate volume \nratio found with the Monte-Carlo \\emph{hit-and-run} procedure with $k=10^5$ \nsampling points.\nThe first row corresponds to the constraints definig a cube. The others\nare associated with the steady-state monetary flow model. }\n\\label{volume ratio}\n\\end{table}\n\nThe marginal histograms associated with the 5 first flow variables are\nrepresented in Fig. \\ref{histograms.simple}. Unlike in the case of the cube,\nthis result can't be compared to some ground truth.\n\n\n\\begin{figure}[htbp]\n\\centering\n\\includegraphics[width=12cm,height=10cm]{marginals}\n\\caption{Histograms corresponding to marginal pdf (top left) cube along \nthe $x$ axis (others) steady-state monetary flows labelled according to\nTab.\\ref{keen short labels}. $c_0=10$}\n\\label{histograms.simple}\n\\end{figure}\n\n\n\n\\subsection{The influence of knock-outs on larger systems}\n\\label{sub.knockout}\n\nThe method of relative volumes devised in section \\ref{comparison.lrs.har} was\nproposed to compare \\emph{lrs} and \\emph{hit-and-run} when the size of \nthe problem is small. However, this method can also be used to study the impact of an external\nperturbation on the volume of the solution space, for example when a \nflow is constrained. This is termed \\emph{knock-out} in metabolic network analysis, \nbut in the present context can be interpreted as a limitation imposed on \nmonetary flows, such as a credit shortage. Let us define:\n\n\\begin{eqnarray}\n\\label{eq.constraints}\nS_I &=& \\{X \\text{s.t} ~\\xi X= 0, ~0\\leq x_i \\leq c_0, ~\\forall i \\in I \\} \\\\\nS^\\alpha_{I\\setminus I_0} &=& \\{X \\text{s.t}  ~\\xi X= 0, ~0\\leq x_i \\leq c_0, ~\\forall i \\in I\\setminus I_0, \n\t\t ~0\\leq x_i \\leq \\alpha c_0, ~\\forall i \\in I_0 \\} \\\\\n\\langle X \\rangle_{S_I} &=& \\int_{S_I} \t\\sum_{i=1}^{n} x_i dX \t\n\\end{eqnarray}\nwhere $X=[x_1,\\ldots,x_{n}]$, $n$ is the number of columns of $\\xi$,\n$I$ is the set indexing the space of flows, and $I_0$ the set of flows that will\nbe partially knocked-out, by an amount $\\alpha$. \n$\\langle X \\rangle_{S_I}$ is the mean flow over the solution space.\nLet us also define: \n\\begin{eqnarray}\n\\label{eq.def}\nr_V&=&Vol(S^\\alpha_{I\\setminus I_0})/Vol(S_I) \\nonumber \\\\\nr_\\phi &=& \\langle X \\rangle_{S^\\alpha_{I\\setminus I_0}} / \\langle X \\rangle_{S_I}\n\\end{eqnarray}\nThe ratios $r_V$ for volumes and $r_\\phi$ for mean flows measure the impact \nof selective flow knock-out on the solution space.\n\n\nWe sample one random topology, as shown in Fig. \\ref{graph.keen}(b), \nwith 2 banks, 3 firms and 4 workers. Keeping this topology fixed for the \nrest of this section, we sample the solution space and summarize the \nresults in Fig. \\ref{fig.knockout}. All ratios are functions of $1-\\alpha$.\nFirstly we note that when $1-\\alpha$ is close to one, that is when the selected\nflow is almost set to zero, then the variance of the estimator of the relative\nvolume is increasing. Indeed, the number of samples that satisfy the constraint\ntends to zero, which raises the variance. This phenomenon can be seen on \nthe right of Fig. \\ref{fig.knockout}(b,d). \n\nFig. \\ref{fig.knockout}(a) shows that the impact of a knock-out of the \nsame type of flow can differ from one agent to the other. This reveals the \ninfluence of the random topology, that breaks the symmetry that should \nothewise prevail if agents belonged to completely distinct economic circuits. \nThe effect of connectivity will be examined in future works.\n\nThen, we remark in Fig. \\ref{fig.knockout}(a) that single flow knock-outs\nare able to reduce considerably the volume of the steady-state solution space.\nFor example, a 33\\% knock-out on loans granted to firms (LF) by just one bank\nout of the two defined in this simple model entails a cut by two-thirds \nof the volume ratio $r_V$. \n\nThe four most influential variables appear to be the payment of interests on loans\n(IL), the payment of consumption by workers to firms (CW), and the payment of\nloans by banks to firms (LR, LF which share the same value in this model where\nloans are always repaid). This ranking is the same at the individual or group\nlevel, as shown by Fig. \\ref{keen short labels}(a,d). The two least influential\nvariables are the interests on deposits paid to workers and firms.\nThe flows with marginal probability concentrated on the right of $[0,c_0]$,\n(such as IL, CW, LR and LF in Fig.\\ref{histograms.simple}) undergo a \nlarge reduction because the large tail is cut off. Conversely, flows \nwith a small tail on the right of $[0,c_0]$ show little reduction. \n \n\nComparing the left and right panels of Fig. \\ref{keen short labels}, we remark that\nthe influence of knock-outs is more important on volume ratios than on flow ratios.\nAlso, the influence of group knock-out on volume and mean flow is larger than single\nknock-out. These remarks are left for further theoretical analysis.\n\n\n\\begin{figure}[htbp]\n\\centering\n\\subfigure[~]{\n\t\\includegraphics[width=8cm]{knock_volume_single}}\n\\subfigure[~]{\n\t\\includegraphics[width=8cm]{knock_flow_single}}\n\\subfigure[~]{\n\t\\includegraphics[width=8cm]{knock_volume_group}}\n\\subfigure[~]{\n\t\\includegraphics[width=8cm]{knock_flow_group}}\n\\caption{Impact of knock-out on volume and mean flow ratios, in the  \ncase of a single draw of the random connectivity model depicted \nin sec.\\ref{sub.keen model}, with 2 banks, 3 firms and 4 workers.\nVolume and flow ratio appear as functions of $(1-\\alpha)$. \n(top) single flow knock-out; (bottom) group flow knock-out.\nFlow labels are explained in Tab. \\ref{keen short labels}. \nThe number of sampled points is $n=50000$. $c_0=10$ }\n\\label{fig.knockout}\n\\end{figure}\n\n\n\n\n\n\\subsection{Linear flows}\n\\label{sub.interp}\n\nAn interesting particular case is examined in \\cite{keen_solving_2010}, where flows are\nlinear functions of stocks, as specified in Tab. \\ref{keen short labels}.\nIn this setting, loans granted to firms depend linearly on the level of \nthe bank vault $B_V$. Admitting that the values of parameters are known,\nthe value of stocks can be directly obtained. Furthermore, various marginal\nquantities can be computed, such as the loans to firm deposits ratio which \ncharacterizes the financial fragility of firms, or the ratio of the flow \nof wages to the total stock of money, which is related to the speed of \nmoney. Results are shown in Fig. \\ref{histograms.stocks}, with the same\nexperimental setup as in section \\ref{sub.knockout}.\n \n\\begin{figure}[htbp]\n\\centering\n\\includegraphics[width=12cm]{stock_marginals}\n\\caption{Histograms in the case of bounded linear flows $c_0=10$.\n(left) money stocks; \n(middle) ratio of total loans to total firm deposits; (right) \nratio of the total flow of wages to the total stock of money. $nb=2,nf=3,nw=4$, $n=5.10^4$}\n\\label{histograms.stocks}\n\\end{figure}\n \nThe stock of money is gaussian shaped, which can be explained by a central-limit\nargument. The ratios in Fig. \\ref{histograms.stocks}(middle,right) have a lognormal\nshape. The ratio of total loans to total firm deposits has a mean value of 1.3,\nwhich is consistent with what can be found in the ABM litterature \\cite{dosi_income_2013}.  \nHowever, the ratio of the total flow of wages to the total stock of money \nshould be larger by several orders of magnitude. \nThis can be explained because in the numerical experiments above,\ninspired by the framework developped in metabolic networks analysis,\nwe impose an hypercubic constraint on flows. This is in contrast with\nSFC models where constraint are related to the initial stock of money.\n\n\nWith the hypotheses that flows are linear as summarized in Tab. \\ref{keen short labels} \nand $B_V+B_T+F_D+W_D=M$, we can write a new problem in a way more \nconsistent with SFC models:\n\n\n", "itemtype": "equation", "pos": 18964, "prevtext": "\t\t\t\t\t\t\nwhere $E_{nf,nw},~F_{nb,nw},~G_{nf,nb},~H_{nf,nw}$ encode the connectivity patterns\nrespectively between firms and workers (payment of wages), workers and banks (deposits),\nfirms and banks (consumption of bankers), firms and workers (consumption of workers).\n\nA graphical representation of monetary transactions with randomly sampled \nconnections between agents is given in Fig. \\ref{graph.keen}. \n\n\\begin{figure}[htbp]\n\\centering\n\\subfigure[~]{\n\t\\includegraphics[width=6cm]{graph_keen_single.pdf}}\n\\subfigure[~]{\n\t\\includegraphics[width=8cm]{graph_keen_multi}}\n\\caption{Graph of monetary transactions.\n\\emph{bt,bv,w,f} stand for banks transaction accounts, banks vaults,\n workers deposit accounts, firms deposit accounts.\n (a) single agent in each class; (b) random connectivity, with 2 banks, 3 firms, 4 workers.}\n\\label{graph.keen}\n\\end{figure}\n\n\nIt is important to stress that the dependence of flows on stocks is voluntarily \nkept unspecified. The solutions to this class of under-specified problems \nin the space of steady-state flows will be examined in sections\n\\ref{sub.csp} and \\ref{sub.har}.\nThe reader interested in the study of explicit specifications of flows may \nlook at \\cite{keen_solving_2010} and \\cite{keen_monetary_2013}. Lavoie and Godley \nexamine many increasingly detailed models (open economy,...), as well as dynamic specifications of\nthe flows\\footnote{~see an implementation\n\\url{https://github.com/kennt/monetary-economics}}.\n\n\nTo the best of our knowledge, the properties of random matrices that correspond to SFC \nmodels have not been established in the economics litterature. This representation \ncalls for a closer examination following many works in the field of complex networks\nstudies.\n\n\n\n\\subsection{Related works in economics, econophysics, and network science}\n\\label{sub.related}\nDouble-entry book-keeping is used to establish National Accounts \nas a means to record estimated flows and stocks consistently,\nfor each country, at several levels of aggregation. National accountants \nbuild balance sheets, income and product accounts, in order to compare \neconomies, and to analyze the behavior of economies in time, such as \ngrowth.\nSuch accounts are also used in macroeconomic modeling by policymakers \nto calibrate Computable General Equilibirum models. However, models of\nthis type (e.g. DSGE) do not explicitly enforce stock-flow consistency.  \n\nLong before the break of the subprime crisis, many works have established \nABM as an alternative, in a move to get rid of hypotheses\nperceived as unjustified. Equilibrium, rationality, and the \nhypothesis of the representative agent have been criticized by many\neconomists \\cite{kirman_complex_2011, fagiolo_macroeconomic_2012}.\nAmong macro-economic ABM, stock-flow consistency is now a classical \nhypothesis that has been used by many authors \\cite{dawid_agent-based_2008,\ndawid_eurace_2011,seppecher_flexibility_2012}.\nABM are praised for their flexibility, their ability to\nstudy large populations of heterogeneous  and learning agents that interact\nin possibly non-linear ways.\nHowever, ABM need computer intensive simulations and face the problem of\nbeing over-parametrized. Calibration is thus difficult and unstable, all\nthe more since empirical studies and reliable data are not abundant compared\nto the dimension of the parameter space.\nUnder simplifying assumptions such as the aggregation of a subset of agents,\ntheoretical results concerning some macro-economic ABM were recently obtained\nin a stock-flow-consistent framework, and phase diagrams established,\nfor specific dynamic rules \\cite{gualdi_tipping_2015, gualdi_monetary_2015}.\n\nThe importance of the organization of interactions, embodied by networks,\nhas been stressed in economics \\cite{jackson_social_2013}. Theoretical works have \nstudied their generic properties (supply chain \\cite{weisbuch_production_2007},\ninterbank network \\cite{delpini_evolution_2013},  trade credit \n\\cite{battiston_credit_2007}). Empirical studies have laid emphasis\nupon the topology of real economic networks, such as goods market,\nnational inter-firm trading \\cite{watanabe_biased_2012}, world trade \n\\cite{garlaschelli_fitness-dependent_2004}, global corporate control \namong transnational corporations \\cite{vitali_network_2011},\nfirm ownership networks. They must sometime be reconstructed, starting\nfrom limited information (of equity investments in the stock market \n\\cite{garlaschelli_scale-free_2005}, the interbank market \\cite{de_masi_fitness_2006}). \nAt the level of individuals, detailed topological\ninformation about banking, employment, or consumption seems to be lacking.\n\nSuch empirical and theoretical material may serve as an input to shape\nthe set of equations and inequalities discussed above.\n\n\n\\subsection{Constraint satisfaction problem}\n\\label{sub.csp}\n\nAs shown in section \\ref{sub.keen model}, the steady-state flux space associated with \nEq.(\u00c2\u00a0\\ref{eq.matrix}) is a bounded convex polytope. Without loss of generality, $S$ \ncan be supposed to have full row rank. The polytope is a $n-m$ dimensional\n object embedded in the $n$-dimensional space of flows.\nProperties of convex polytopes such as their different representations\nare well studied  \\cite{avis_lrs:_2000}. Computing their volume exactly can be\nachieved by solving the vertex enumeration problem, which is $\\#P$-hard.\nExisting implementations, such as $lrs$ by Avis et al., allow to solve it\nin reasonable time when $n-m$ is close to 10.  \nExact computation methods are employed in linear programming and operations\nresearch to solve  classical constraint satisfaction problems such as the map\ncoloring problem, and have real-life applications, for example in resource\nallocation problems. More solutions can be obtained when relaxing hard\nconstraints.    \n\nApproximate methods to determine the solution space were proposed by\nresearchers studying metabolic networks and the metabolic steady-state flux\nspace. These methods allow to sample the solution space, to estimate its\nvolume, and to approximate probabilistic properties of the solutions such\nas the marginal densities \\cite{wiback_monte_2004,\n braunstein_estimating_2008,bianconi_flexibility_2006,\n bianconi_viable_2007,bianconi_flux_2008}. They\ncan be used to evaluate the sensitivity of the  the solution space to new\nconstraints.  A restriction of this problem known as Flux-Balance-Analysis\n(FBA) consists in maximizing some objective constraint, which reduces\nthe solution space to a finite set of points \\cite{orth_what_2010, bianconi_flux_2008}. \nA parallel may be mentioned with the field of random Constraint\nSatisfaction Problem (rCSP) that stands at the interface between theoretical\ncomputer science and statistical physics, and studies sets of solutions\nto a large number of random constraints, in a boolean space.\nMany important results such as phase transitions were developed \n\\cite{mezard_information_2009}. Although our main focus is the continuous domain,\nwe can take advantage of this theory.\n\n\n\\subsection{Monte-Carlo sampling of the steady-state flow space}\n\\label{sub.har}\nIn section \\ref{sub.csp} we mentionned the exact computation of the volume of\nthe steady-state flow space using vertex enumeration, when $n-m$ is small.\nThe result obtained is numeric, and not an analytic expression depending \non the parameters of the problem in Eq. (\\ref{eq.matrix}). \n\nAnother approach proposed in \\cite{wiback_monte_2004,almaas_global_2004},\nsuited for larger \nproblems, is Monte-Carlo sampling in the solution space, using a\n\\emph{hit-and-run} algorithm. The latter needs an initial point inside the \nconvex polytope. Then, sampling from a hypersphere, a direction is \nselected at random. The half-line defined by the starting point and\nthis direction intersects the boundary in a point. This intersection\nand the starting point form a segment that can be uniformly sampled\nto get the next point. The procedure defines a Markov Chain that \nconverges to the uniform distribution over the polytope \\cite{smith_efficient_1984}, \nin nondeterministic polynomial time $\\mathcal{O}^* (n^k )$. The notation \n$\\mathcal{O}^*()$ means that there are logarithmic factors that \nmultiply $n^k$, and constants, but are neglected \\cite{simonovits_how_2003}.\n\nThe \\emph{hit-and-run} method provides an estimate of the marginal\nprobability density functions (pdf) denoted $P_i(x)$ for each transaction\nflow $i = 1,\\dots,N$. They characterise the shape of the polytope and \nare given by: \n\n", "index": 11, "text": "\\begin{equation}\n\\label{eq.pdf}\nP_i (x) = Vol(S_i (x))/Vol(S), ~S_i (x) = \\{x \\in  S ~s.t. ~x_i = x\\}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E6.m1\" class=\"ltx_Math\" alttext=\"P_{i}(x)=Vol(S_{i}(x))/Vol(S),~{}S_{i}(x)=\\{x\\in S~{}s.t.~{}x_{i}=x\\}\" display=\"block\"><mrow><msub><mi>P</mi><mi>i</mi></msub><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><mo>=</mo><mi>V</mi><mi>o</mi><mi>l</mi><mrow><mo stretchy=\"false\">(</mo><msub><mi>S</mi><mi>i</mi></msub><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"false\">)</mo></mrow><mo>/</mo><mi>V</mi><mi>o</mi><mi>l</mi><mrow><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow><mo rspace=\"5.8pt\">,</mo><msub><mi>S</mi><mi>i</mi></msub><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><mo>=</mo><mrow><mo stretchy=\"false\">{</mo><mi>x</mi><mo>\u2208</mo><mpadded width=\"+3.3pt\"><mi>S</mi></mpadded><mi>s</mi><mo>.</mo><mi>t</mi><mo rspace=\"5.8pt\">.</mo><msub><mi>x</mi><mi>i</mi></msub><mo>=</mo><mi>x</mi><mo stretchy=\"false\">}</mo></mrow></mrow></math>", "type": "latex"}, {"file": "1601.00822.tex", "nexttext": "\n\nwhere :\n\n", "itemtype": "equation", "pos": 30755, "prevtext": "\nThey can also be written as an integral over all flows. \nAs remarked by \\cite{wiback_monte_2004}, the \\emph{hit-and-run} method \nwill not permit us to estimate the absolute volume. Instead, approximations for relative volumes\ncan be obtained, such as $r=Vol(S_1)/Vol(S)$,  where $S$ is the same as in \nEq.(\\ref{eq.matrix}) while $S_1$ has additional constraints, such as a lower bound for \nflow $i$.\n \nTo sum up, using efficient Monte-Carlo sampling methods such as \n\\emph{hit-and-run}, we will be able to sample medium-sized problems (up \nto hundreds of flows), to approximate the pdfs, to compute relative \nvolumes. However, we will get no analytic expression of theses quantities,\nnor approximate entropy. Furthermore, the mixing of the Markov Chain should\nbe examined to ensure convergence. In section \\ref{results} we use the implementation \nby Tervonen et al. \\cite{tervonen_hit-and-run_2013}.\n\nAs evoked in section \\ref{sub.csp}, researchers have also used the replica method \n\\cite{bianconi_viable_2007},\nand message passing algorithms \\cite{braunstein_estimating_2008, \nfont-clos_weighted_2012,bianconi_flux_2008}\nto deal with the problem of estimating marginal densities. \n\n\n\n\\section{Results}\n\\label{results}\n\n\n\\subsection{Comparison between lrs and hit-and-run in low dimensional systems}\n\\label{comparison.lrs.har}\n\nFirst let us compare the relative volumes corresponding to small problems,\nwhen exact results can be obtained. \n\nA cube in 3 dimensions can be defined by the set of constraints $S_0$. We \nalso define $S_1$ where all boundaries remain the same, except one of them.\n\\begin{eqnarray}\n\\label{eq.cube}\nS_0 &=& \\{ 0\\leq x_i \\leq c_0, ~\\forall i \\in [0,2]  \\} \\nonumber \\\\\nS_1 &=& \\{ 0\\leq x_0 \\leq c_0, ~0\\leq x_1 \\leq c_0,~0\\leq x_2 \\leq c_1  \\} \\nonumber\n\\end{eqnarray}\nThe volume ratio is defined by $r=Vol(S_1)/Vol(S_0)$ and can be computed\nby several methods as shown in the first row of Tab. \\ref{volume ratio}.\nSince the number of sampling points is high, the relative error is low.\n\nThe histogram associated to the marginal pdf of the first coordinate \nof the cube is represented in Fig. \\ref{histograms.simple}(top left). \nAs expected, the frequency is flat on the interval $[0,c_0]$, which \ncorresponds to a uniform sampling. \n\nNext, the volume ratios associated with the steady-state monetary flow\nproblem depicted in section \\ref{sub.keen model} are computed. To do so, following\nthe example of the cube above, we iteratively diminish the boundary \nconstraint for each flow variable, by a constant amount.\nFor example, the second row of Tab. \\ref{volume ratio} is obtained by setting\nall upper bounds to $c_0=10$, then by setting all bounds to $c_0$ except\nalong the first dimension, which corresponds to LF (loans granted to firms).\nAs expected, all the volume ratios obtained with \\emph{lrs} and \\emph{hit-and-run}\nare close to each other. This is also consistent with results found \nin metabolic network analysis \\cite{wiback_monte_2004} when $n$ is small .\n\n\\begin{table}[htbp]\n\\centering\n\\begin{tabular}{ccc|ccc|c}\n\\hline\nAlgorithm &  &  & \\multicolumn{3}{c|}{$lrs$ } & \\emph{hit-and-run}  \\\\\n & $c_0$ & $c_1$ &  $V_0$ & $V_1$ &  $V_1/V_0$ & $V_1/V_0$\\\\\n\\hline\ncube $x$ & 10 & 5 & 1000 & 500 & 0.5 & 0.50055 \\\\\n\\hline\nLF       & 10 & 5 &  12500 & 6250  &  0.5   &  0.49 \\\\  \nIFL      & 10 & 5 &  12500 & 1822  &  0.145 &  0.14 \\\\\nIFD      & 10 & 5 &  12500 & 10677 &  0.854 &  0.85 \\\\\nW        & 10 & 5 &  12500 & 8072  &  0.645 &  0.64 \\\\\nIWD\t\t & 10 & 5 &  12500 & 11718 &  0.937 &  0.93 \\\\\nCB\t\t & 10 & 5 &  12500 & 10677 &  0.854 &  0.85 \\\\\nCW       & 10 & 5 &  12500 & 4427  &  0.354 &  0.35 \\\\\nLR       & 10 & 5 &  12500 & 6250  &  0.5   &  0.49\\\\\n\\hline\n\\end{tabular}\n\\caption{Absolute and relative volume of steady-state flow space when \none boundary value is changed from $c_0$ to $c_1$. Only one constraint\nis changed to get volume ratio, and is identified by the label of the \nrow. The absolute volume is computed using $lrs$ in the two cases, as \nwell as their ratio. The latter is compared to the approximate volume \nratio found with the Monte-Carlo \\emph{hit-and-run} procedure with $k=10^5$ \nsampling points.\nThe first row corresponds to the constraints definig a cube. The others\nare associated with the steady-state monetary flow model. }\n\\label{volume ratio}\n\\end{table}\n\nThe marginal histograms associated with the 5 first flow variables are\nrepresented in Fig. \\ref{histograms.simple}. Unlike in the case of the cube,\nthis result can't be compared to some ground truth.\n\n\n\\begin{figure}[htbp]\n\\centering\n\\includegraphics[width=12cm,height=10cm]{marginals}\n\\caption{Histograms corresponding to marginal pdf (top left) cube along \nthe $x$ axis (others) steady-state monetary flows labelled according to\nTab.\\ref{keen short labels}. $c_0=10$}\n\\label{histograms.simple}\n\\end{figure}\n\n\n\n\\subsection{The influence of knock-outs on larger systems}\n\\label{sub.knockout}\n\nThe method of relative volumes devised in section \\ref{comparison.lrs.har} was\nproposed to compare \\emph{lrs} and \\emph{hit-and-run} when the size of \nthe problem is small. However, this method can also be used to study the impact of an external\nperturbation on the volume of the solution space, for example when a \nflow is constrained. This is termed \\emph{knock-out} in metabolic network analysis, \nbut in the present context can be interpreted as a limitation imposed on \nmonetary flows, such as a credit shortage. Let us define:\n\n\\begin{eqnarray}\n\\label{eq.constraints}\nS_I &=& \\{X \\text{s.t} ~\\xi X= 0, ~0\\leq x_i \\leq c_0, ~\\forall i \\in I \\} \\\\\nS^\\alpha_{I\\setminus I_0} &=& \\{X \\text{s.t}  ~\\xi X= 0, ~0\\leq x_i \\leq c_0, ~\\forall i \\in I\\setminus I_0, \n\t\t ~0\\leq x_i \\leq \\alpha c_0, ~\\forall i \\in I_0 \\} \\\\\n\\langle X \\rangle_{S_I} &=& \\int_{S_I} \t\\sum_{i=1}^{n} x_i dX \t\n\\end{eqnarray}\nwhere $X=[x_1,\\ldots,x_{n}]$, $n$ is the number of columns of $\\xi$,\n$I$ is the set indexing the space of flows, and $I_0$ the set of flows that will\nbe partially knocked-out, by an amount $\\alpha$. \n$\\langle X \\rangle_{S_I}$ is the mean flow over the solution space.\nLet us also define: \n\\begin{eqnarray}\n\\label{eq.def}\nr_V&=&Vol(S^\\alpha_{I\\setminus I_0})/Vol(S_I) \\nonumber \\\\\nr_\\phi &=& \\langle X \\rangle_{S^\\alpha_{I\\setminus I_0}} / \\langle X \\rangle_{S_I}\n\\end{eqnarray}\nThe ratios $r_V$ for volumes and $r_\\phi$ for mean flows measure the impact \nof selective flow knock-out on the solution space.\n\n\nWe sample one random topology, as shown in Fig. \\ref{graph.keen}(b), \nwith 2 banks, 3 firms and 4 workers. Keeping this topology fixed for the \nrest of this section, we sample the solution space and summarize the \nresults in Fig. \\ref{fig.knockout}. All ratios are functions of $1-\\alpha$.\nFirstly we note that when $1-\\alpha$ is close to one, that is when the selected\nflow is almost set to zero, then the variance of the estimator of the relative\nvolume is increasing. Indeed, the number of samples that satisfy the constraint\ntends to zero, which raises the variance. This phenomenon can be seen on \nthe right of Fig. \\ref{fig.knockout}(b,d). \n\nFig. \\ref{fig.knockout}(a) shows that the impact of a knock-out of the \nsame type of flow can differ from one agent to the other. This reveals the \ninfluence of the random topology, that breaks the symmetry that should \nothewise prevail if agents belonged to completely distinct economic circuits. \nThe effect of connectivity will be examined in future works.\n\nThen, we remark in Fig. \\ref{fig.knockout}(a) that single flow knock-outs\nare able to reduce considerably the volume of the steady-state solution space.\nFor example, a 33\\% knock-out on loans granted to firms (LF) by just one bank\nout of the two defined in this simple model entails a cut by two-thirds \nof the volume ratio $r_V$. \n\nThe four most influential variables appear to be the payment of interests on loans\n(IL), the payment of consumption by workers to firms (CW), and the payment of\nloans by banks to firms (LR, LF which share the same value in this model where\nloans are always repaid). This ranking is the same at the individual or group\nlevel, as shown by Fig. \\ref{keen short labels}(a,d). The two least influential\nvariables are the interests on deposits paid to workers and firms.\nThe flows with marginal probability concentrated on the right of $[0,c_0]$,\n(such as IL, CW, LR and LF in Fig.\\ref{histograms.simple}) undergo a \nlarge reduction because the large tail is cut off. Conversely, flows \nwith a small tail on the right of $[0,c_0]$ show little reduction. \n \n\nComparing the left and right panels of Fig. \\ref{keen short labels}, we remark that\nthe influence of knock-outs is more important on volume ratios than on flow ratios.\nAlso, the influence of group knock-out on volume and mean flow is larger than single\nknock-out. These remarks are left for further theoretical analysis.\n\n\n\\begin{figure}[htbp]\n\\centering\n\\subfigure[~]{\n\t\\includegraphics[width=8cm]{knock_volume_single}}\n\\subfigure[~]{\n\t\\includegraphics[width=8cm]{knock_flow_single}}\n\\subfigure[~]{\n\t\\includegraphics[width=8cm]{knock_volume_group}}\n\\subfigure[~]{\n\t\\includegraphics[width=8cm]{knock_flow_group}}\n\\caption{Impact of knock-out on volume and mean flow ratios, in the  \ncase of a single draw of the random connectivity model depicted \nin sec.\\ref{sub.keen model}, with 2 banks, 3 firms and 4 workers.\nVolume and flow ratio appear as functions of $(1-\\alpha)$. \n(top) single flow knock-out; (bottom) group flow knock-out.\nFlow labels are explained in Tab. \\ref{keen short labels}. \nThe number of sampled points is $n=50000$. $c_0=10$ }\n\\label{fig.knockout}\n\\end{figure}\n\n\n\n\n\n\\subsection{Linear flows}\n\\label{sub.interp}\n\nAn interesting particular case is examined in \\cite{keen_solving_2010}, where flows are\nlinear functions of stocks, as specified in Tab. \\ref{keen short labels}.\nIn this setting, loans granted to firms depend linearly on the level of \nthe bank vault $B_V$. Admitting that the values of parameters are known,\nthe value of stocks can be directly obtained. Furthermore, various marginal\nquantities can be computed, such as the loans to firm deposits ratio which \ncharacterizes the financial fragility of firms, or the ratio of the flow \nof wages to the total stock of money, which is related to the speed of \nmoney. Results are shown in Fig. \\ref{histograms.stocks}, with the same\nexperimental setup as in section \\ref{sub.knockout}.\n \n\\begin{figure}[htbp]\n\\centering\n\\includegraphics[width=12cm]{stock_marginals}\n\\caption{Histograms in the case of bounded linear flows $c_0=10$.\n(left) money stocks; \n(middle) ratio of total loans to total firm deposits; (right) \nratio of the total flow of wages to the total stock of money. $nb=2,nf=3,nw=4$, $n=5.10^4$}\n\\label{histograms.stocks}\n\\end{figure}\n \nThe stock of money is gaussian shaped, which can be explained by a central-limit\nargument. The ratios in Fig. \\ref{histograms.stocks}(middle,right) have a lognormal\nshape. The ratio of total loans to total firm deposits has a mean value of 1.3,\nwhich is consistent with what can be found in the ABM litterature \\cite{dosi_income_2013}.  \nHowever, the ratio of the total flow of wages to the total stock of money \nshould be larger by several orders of magnitude. \nThis can be explained because in the numerical experiments above,\ninspired by the framework developped in metabolic networks analysis,\nwe impose an hypercubic constraint on flows. This is in contrast with\nSFC models where constraint are related to the initial stock of money.\n\n\nWith the hypotheses that flows are linear as summarized in Tab. \\ref{keen short labels} \nand $B_V+B_T+F_D+W_D=M$, we can write a new problem in a way more \nconsistent with SFC models:\n\n\n", "index": 13, "text": "\\begin{equation}\n\\label{eq.constraints.M}\nS= \\Big\\{ x ~\\text{s.t.}\n\\begin{bmatrix}\n\\xi \\\\\nv\n\\end{bmatrix} x =\n\\begin{bmatrix}\n0 \\\\\nM\n\\end{bmatrix}, \n ~B_V,B_T,F_D,W_D \\in [0,M]  \\Big\\}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E7.m1\" class=\"ltx_Math\" alttext=\"S=\\Big{\\{}x~{}\\text{s.t.}\\begin{bmatrix}\\xi\\\\&#10;v\\end{bmatrix}x=\\begin{bmatrix}0\\\\&#10;M\\end{bmatrix},~{}B_{V},B_{T},F_{D},W_{D}\\in[0,M]\\Big{\\}}\" display=\"block\"><mrow><mi>S</mi><mo>=</mo><mrow><mo maxsize=\"160%\" minsize=\"160%\">{</mo><mpadded width=\"+3.3pt\"><mi>x</mi></mpadded><mtext>s.t.</mtext><mrow><mo>[</mo><mtable displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mi>\u03be</mi></mtd></mtr><mtr><mtd columnalign=\"center\"><mi>v</mi></mtd></mtr></mtable><mo>]</mo></mrow><mi>x</mi><mo>=</mo><mrow><mo>[</mo><mtable displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr><mtr><mtd columnalign=\"center\"><mi>M</mi></mtd></mtr></mtable><mo>]</mo></mrow><mo rspace=\"5.8pt\">,</mo><msub><mi>B</mi><mi>V</mi></msub><mo>,</mo><msub><mi>B</mi><mi>T</mi></msub><mo>,</mo><msub><mi>F</mi><mi>D</mi></msub><mo>,</mo><msub><mi>W</mi><mi>D</mi></msub><mo>\u2208</mo><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo>,</mo><mi>M</mi><mo stretchy=\"false\">]</mo></mrow><mo maxsize=\"160%\" minsize=\"160%\">}</mo></mrow></mrow></math>", "type": "latex"}, {"file": "1601.00822.tex", "nexttext": "\n \nEq.(\\ref{eq.constraints.M}) can be solved exactly and approximately as seen\nin section \\ref{sub.knockout}. It is written in the special case $nf=nb=nw=1$ but can be \neasily extended. Fig. \\ref{histograms.stocks.constantM} shows \\emph{hit-and-run}\nsamples obtained setting the parameters values as in Tab. \\ref{keen params}, with\nmultiple agents per class.\n\nThe ratio of the total flow of wages to the total stock of money is now more \nconsistent with econometric time series. However, the distribution of the \nstock of debt in Fig.\\ref{histograms.stocks.constantM}(left) is not realistic, \nsince in many cases a large fraction of the stock\nof money is affected to debts. Consequently the ratio of total\nloans to total firm deposits is higher than in the case discussed at the beginning\nof this section, where flows were bounded. \n\nMore generally, these remarks show that the model depicted in this section\nhas interesting properties, can be easily modified, but needs more work\nbefore being able to reproduce stylized facts. We discuss this topic in\nsection \\ref{discussion}.\n\n\\begin{figure}[htbp]\n\\centering\n\\includegraphics[width=12cm]{stock_marginals_constsum}\n\\caption{Histograms in the case of linear flows with constant money stock\n$M$. (left) debt stock; \n(middle) ratio of total loans to total firm deposits; (right) \nratio of the total flow of wages to the total stock of money. \n$M=100$, $nb=2,nf=3,nw=4$,  $n=10^5$.}\n\\label{histograms.stocks.constantM}\n\\end{figure}\n\n\n\\begin{table}[htbp]\n\\centering\n\\begin{tabular}{clll}\n\\hline\nVariable & Type of flow & Short label&  Linear flows\\\\\n\\hline\n$a$ & loans to firms  & LF &$\\beta_V B_V$ \\\\\n$c$ & interest on loans & IL & $r_L F_L$ \\\\\n$d$ & interest on firm deposits& IFD & $r_L F_L$\\\\\n$e$ & wages & W&$\\phi_D F_d$  \\\\\n$f$ & interest on worker deposits & IWD &$r_D W_D$\\\\\n$g$ & consumption of banks & CB &$\\beta_T B_T$ \\\\\n$h$ & consumption of workers & CW &$\\omega_D W_D$\\\\\n$i$ & repayment of loans & LR &$\\phi_L F_L$\\\\\n\\end{tabular}\n\\caption{Labels associated with the different monetary flows, after \\cite{keen_solving_2010}. \nThe third column represents the particular case of linear flows.}\n\\label{keen short labels}\n\\end{table}\n\n\n\\begin{table}[htbp]\n\\centering\n\\begin{tabular}{cc}\n\\hline\nParameter & Value (year$^{-1}$) \\\\\n\\hline\n$\\beta_V $ &  0.75 \\\\\n$r_L$ & 0.05\\\\\n$r_D$ & 0.02 \\\\\n$\\phi_D $ & 2\\\\\n$\\beta_T$ & 1 \\\\\n$\\omega_D$ & 26 \\\\\n$\\phi_L $ & 1/7\\\\\n\\end{tabular}\n\\caption{Values of linear flows parameters, after \\cite{keen_solving_2010} Tab.3 }\n\\label{keen params}\n\\end{table}\n\n\n\\section{Discussion}\n\\label{discussion}\n\n\n\n\n\n\n\n\n\n\nThe first point we want to emphasize is that both the model and results \nin the sections above are preliminary. We do not claim that they can be of any\nuse at the moment regarding economic analysis. More work is needed, in collaboration\nwith economists, to improve their design, and to evaluate the empirical stylized\nfacts they can reproduce. In our view, the capacity to account for economic crises\ncan be seen through the rapid decay of the volume ratio in response to modest\nfluctuations of the parameters, such as an increase in the knock-out factor. \nThis can be seen independently of dynamical considerations.\n\n\nIn section \\ref{comparison.lrs.har} we compared two algorithms to compute\nthe volume of the solution space. The first one, \\emph{lrs}, is exact but limited by \nthe size of the problem because it relies on the vertex enumeration algorithm.\nThe second belongs to the class of Monte-Carlo methods, and illustrates the uniform  \nsampling property of the \\emph{hit-and-run} strategy. We didn't discuss convergence \nissues here, but they will become important as the size of the problem increases.\nFurthermore, alternative estimation methods exist, for example\nbelief propagation that scales almost linearly in system size but needs \nthe flow-space to be discretized.\n\nNone of these algorithms provide litteral expressions that could be compared \nto results presented in sections \\ref{comparison.lrs.har} and \\ref{sub.knockout},\nsuch as the expression of absolute or relative volumes, or the mean flow. \nFor example, the magnitude of volume reduction provoked by knock-outs is\nan important quantity from a system-scale point of view.\nInterestingly, some theoretical results have been developped \nin the statistical physics literature evoked earlier, and should be compared to\nour numerical experiments, in future works.\n\n\nConcerning the complexity of the financial SFC model depicted in section \\ref{sub.keen model}, \nwe started from a very simple setting, with a limited number of transaction types,\none agent per class, no state nor central bank nor decentralized money creation. \nFlows were constrained in magnitude but were independent of stocks. \nThen, the number of agents was increased in section \\ref{sub.knockout} which gave us\na hint of the influence of topology. The accuracy of the model can be increased if \nrandom connectivity matrices are sampled in an random ensemble that corresponds to\nconnectivity patterns observed empiricaly.\nSeeking inspiration in macro-economic literature (e.g. Lavoie and Godley), we may\nalso add financial constraints on debt ratios at various levels.\nTransactions not covered in this article can also be added, related as bonds, \ninvestments, in an open economy. A major improvement would be to \ncouple the financial side to a production model of the economy, in order \nto compute prices, demand, unemployment and profit, but many difficulties \ncan be expected in that direction because of nonlinear relations that transform\nthe linear CSP into a nonlinear one.\n\n\nSimilarly, in section \\ref{sub.interp} we proposed to rewrite the flow\nboundaries in the form of a constant money constraint, with the hypothesis\nthat flows are linear functions of stocks, following \\cite{keen_solving_2010}.\nWe obtained interesting marginal quantities, such as the ratio of loans \nto firms deposits, or the ratio of money stock to the flow of wages.\nBut this raises the issue of choosing the right parameter values. \nVarious strategies can be implemented to address it, such as setting the parameters\naccording to empirical data taken from public statistics. Another point of view is \nto consider the linear flows parameters as variables defined in specific \nintervals, and to include them in the sampling scheme used above. Although flows\nare linear functions of stocks, this problem is also a nonlinear CSP, harder\nto deal with than a linear one.\n\n\nOn the computational complexity side, a comparison should be made with other\nclassical approaches such as DSGE models and ABM with respect to the number\nof agents, the sparseness of the network topology, the number of regions or \ncountries, the richness of the financial mechanisms involved.\nWe can remark that in the case of \\emph{hit-and-run} sampling, the main cost\nis polynomial in the system size during sampling. Then in order to compute all the \nratios discussed above, it is not necessary to resample: basic thresholding\nis sufficient, and is linear in system size.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\section{Conclusion}\n\\label{conclusion}\nWe proposed an original strategy to compute macro-economic flows in a financial\neconomy, inspired by stock-flow consistent models and methods developed in \nthe field of metabolic networks. We show that this approach can be efficiently \ntransposed thanks to exact and approximate Monte-Carlo algorithms designed \nto solve Constraint Satisfaction Problems.\nThe steady-state in flow space is seen as a polytope included in a large\ndimensional space, which weighs equally all configurations of the financial\nflows that are consistent with the constraints enforced by double-entry \naccounting. \n\nFlow knock-outs can be used to model economic phenomena such as credit shortages. \nWe show that different types of constraints have distinct effects on the \nvolume of the solution space, that can be interpreted as characterizing \nthe flexibility of the financial flows. Rapid decay of the volume ratio\nin response to modest fluctuations of the parameters can be interpreted\nas crises, independently of dynamical specifications. \n\nWe proposed an random connectivity extension of the linear flow model\nby \\cite{keen_solving_2010}, \nand have obtained a numerical approximation of the probability density of \nthe ratio of loans to firms deposits, and the ratio of money stock to\nthe flow of wages.\n\nOur approach feeds a gap betwenn ABM on one hand, and system dynamics \nmethods on the other hand, because the system size can scale up to thousands\nof agents while preserving the possibility of a theoretical analysis.\nThis comes at the cost of a simplification of the model, notably the hypothesis of\nnon-equilibrium stationary state. We discussed many potential improvements \nconcerning the algorithms, the complexity of the model, and the relation to \nempirical data, and will deal with it in future works.\n\n\n\n\n\n\\appendix\n\n\\section{Acknowledgements}\nOpen-source software were used to perform this research: Python, R,\nthe R \\emph{hit-and-run} package \\cite{tervonen_hit-and-run_2013}, \\emph{lrs},\ngraphviz, pygraphviz.\n\n\n\n\n\n\n\\bibliographystyle{elsarticle-num} \n\\bibliography{HRF+eco}\n\n\n\n\n\n\n\n\n\n\n\n\n\n", "itemtype": "equation", "pos": 30964, "prevtext": "\n\nwhere :\n\n", "index": 15, "text": "\\begin{equation}\n\\begin{split}\nx = & \\begin{bmatrix}\n\\beta_V B_V & r_L F_L & r_D F_D & \\phi_D F_D & r_D W_D & \\beta_T B_T & \\omega_D W_D & \\phi_L F_L  \\\\\n\\end{bmatrix}^T \\\\\nv = & \\begin{bmatrix} \n1/\\beta_V  & 0 & 1/r_D  & 0 & 1/r_D  & 1/\\beta_T  & 0 & 0  \\\\\n\\end{bmatrix}\n\\end{split}\n\\end{equation}\n", "mathml": "<math xmlns=\"http://www.w3.org/1998/Math/MathML\" id=\"S0.E8.m1\" class=\"ltx_Math\" alttext=\"\\begin{split}\\displaystyle x=&amp;\\displaystyle\\begin{bmatrix}\\beta_{V}B_{V}&amp;r_{L}%&#10;F_{L}&amp;r_{D}F_{D}&amp;\\phi_{D}F_{D}&amp;r_{D}W_{D}&amp;\\beta_{T}B_{T}&amp;\\omega_{D}W_{D}&amp;\\phi_%&#10;{L}F_{L}\\\\&#10;\\end{bmatrix}^{T}\\\\&#10;\\displaystyle v=&amp;\\displaystyle\\begin{bmatrix}1/\\beta_{V}&amp;0&amp;1/r_{D}&amp;0&amp;1/r_{D}&amp;1%&#10;/\\beta_{T}&amp;0&amp;0\\\\&#10;\\end{bmatrix}\\end{split}\" display=\"block\"><mtable columnspacing=\"0pt\" displaystyle=\"true\" rowspacing=\"0pt\"><mtr><mtd columnalign=\"right\"><mrow><mi>x</mi><mo>=</mo><mi/></mrow></mtd><mtd columnalign=\"left\"><msup><mrow><mo>[</mo><mtable columnspacing=\"5pt\" displaystyle=\"true\"><mtr><mtd columnalign=\"center\"><mrow><msub><mi>\u03b2</mi><mi>V</mi></msub><mo>\u2062</mo><msub><mi>B</mi><mi>V</mi></msub></mrow></mtd><mtd columnalign=\"center\"><mrow><msub><mi>r</mi><mi>L</mi></msub><mo>\u2062</mo><msub><mi>F</mi><mi>L</mi></msub></mrow></mtd><mtd columnalign=\"center\"><mrow><msub><mi>r</mi><mi>D</mi></msub><mo>\u2062</mo><msub><mi>F</mi><mi>D</mi></msub></mrow></mtd><mtd columnalign=\"center\"><mrow><msub><mi>\u03d5</mi><mi>D</mi></msub><mo>\u2062</mo><msub><mi>F</mi><mi>D</mi></msub></mrow></mtd><mtd columnalign=\"center\"><mrow><msub><mi>r</mi><mi>D</mi></msub><mo>\u2062</mo><msub><mi>W</mi><mi>D</mi></msub></mrow></mtd><mtd columnalign=\"center\"><mrow><msub><mi>\u03b2</mi><mi>T</mi></msub><mo>\u2062</mo><msub><mi>B</mi><mi>T</mi></msub></mrow></mtd><mtd columnalign=\"center\"><mrow><msub><mi>\u03c9</mi><mi>D</mi></msub><mo>\u2062</mo><msub><mi>W</mi><mi>D</mi></msub></mrow></mtd><mtd columnalign=\"center\"><mrow><msub><mi>\u03d5</mi><mi>L</mi></msub><mo>\u2062</mo><msub><mi>F</mi><mi>L</mi></msub></mrow></mtd></mtr></mtable><mo>]</mo></mrow><mi>T</mi></msup></mtd></mtr><mtr><mtd columnalign=\"right\"><mrow><mi>v</mi><mo>=</mo><mi/></mrow></mtd><mtd columnalign=\"left\"><mrow><mo>[</mo><mtable columnspacing=\"5pt\" displaystyle=\"true\"><mtr><mtd columnalign=\"center\"><mrow><mn>1</mn><mo>/</mo><msub><mi>\u03b2</mi><mi>V</mi></msub></mrow></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mrow><mn>1</mn><mo>/</mo><msub><mi>r</mi><mi>D</mi></msub></mrow></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mrow><mn>1</mn><mo>/</mo><msub><mi>r</mi><mi>D</mi></msub></mrow></mtd><mtd columnalign=\"center\"><mrow><mn>1</mn><mo>/</mo><msub><mi>\u03b2</mi><mi>T</mi></msub></mrow></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd><mtd columnalign=\"center\"><mn>0</mn></mtd></mtr></mtable><mo>]</mo></mrow></mtd></mtr></mtable></math>", "type": "latex"}]